<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> EngageLSSTInfrastructureGuide &lt; Engagement &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Engagement/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Engagement/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Engagement/EngageLSSTInfrastructureGuide?_T=16 Feb 2017" type="application/x-wiki" title="edit EngageLSSTInfrastructureGuide" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Engagement/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Engagement/EngageLSSTInfrastructureGuide"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="LSST_infrastructure_guide_Phase"></a>  LSST infrastructure guide (Phase I). </h1>
<p />
The LSST infrastructure is maintained using the OSGMM installation on engage-central.renci.org. The LSST-specific scripts are in the Engage SVN repository, <code>https://osg-svn.renci.org/svn/Engage/trunk/LSST</code>.
<p />
In order to obtain access to engage-central (user OSGMM) or the repository, contact the <a href="mailto&#58;engage&#45;team&#64;renci&#46;org">Engage team</a>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="LSST_configuration_in_OSGMM"></a> LSST configuration in OSGMM. </span></h2>
<p />
OSGMM has two hooks: maintenance and verification. Maintenance jobs are run once per day on each site, verification jobs generally 1-4 times per day.
<p />
<ol>
<li> <code>https://osg-svn.renci.org/svn/Engage/trunk/LSST/osgmm/extra.maintenance-script.fork.frag</code> needs to be inserted into the correct place in <code>~osgmm/installs/current/etc/extra.maintenance-script.fork</code>.<br/>
This script fragment's main function is to obtain the actual <code>install-lsst</code> script from <code>http://engage-central.renci.org/~osgmm/software/install-lsst</code> and execute it.
</li>
<li>Similarly, <code>https://osg-svn.renci.org/svn/Engage/trunk/LSST/osgmm/extra.verification-script.fork.frag</code> needs to be inserted into the correct place in <code>~osgmm/installs/current/etc/extra.verification-script.fork</code>.<br/>
This script fragment examines the software environment on the target site and advertises attributes in the OSGMM ClassAd for that site.
</li>
</ol>
<p />
<h3><a name="install_lsst_and_associated_file"></a> <code>install-lsst</code> and associated files. </h3>
<p />
<code>https://osg-svn.renci.org/svn/Engage/trunk/LSST/osgmm/install-lsst</code> should be installed in <code>~osgmm/public_html/software/</code>. This is the real location of <code>http://engage-central.renci.org/~osgmm/software/install-lsst</code>.
<p />
At the top of the <code>install-lsst</code> script are the variables which may need to be changed to manage the installation of new versions of the code. The versions are in code rather than (for instance) in an obtained configuration in order to avoid hammering the software server.
<p />
Current location of install packages: <code>gsiftp://fermigridosg1.fnal.gov/grid/data/engage/LSST/software/LSSTsim/$LSST_version/</code> <br/>
Note: <code>fermigridosg1.fnal.gov</code> is an alias for <code>fg1x1.fnal.gov</code>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Packaging_software_and_data"></a> Packaging software and data. </span></h2>
<p />
Source packages as used for the build are in <code>https://osg-svn.renci.org/svn/Engage/trunk/LSST/src/</code>.
<p />
The script <code>https://osg-svn.renci.org/svn/Engage/trunk/LSST/util-scripts/build-host.sh</code> will build and name the resulting tar file according to the architecture of the host upon which it was executed. For example:
<p /> <ul>
<li> <code>fnpcsrv1.fnal.gov</code>: FSL4/32
</li> <li> <code>fnpcsrv2.fnal.gov</code>: FSL4/64
</li> <li> <code>fnpcsrv532.fnal.gov</code>: FSL5/32
</li> <li> <code>fnpcsrv564.fnal.gov</code>: FSL5/64
</li></ul> 
<p />
The two data tarballs under <code>gsiftp://fermigridosg1.fnal.gov/grid/data/engage/LSST/software/catalog</code> and <code>gsiftp://fermigridosg1.fnal.gov/grid/data/engage/LSST/software/data</code> are the per-chip sky-position-specific and full-sky catalogs respectively. These are also installed and managed by the <code>install-lsst</code> script.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Possible_site_problems_requiring"></a> Possible site problems requiring intervention. </span></h2>
<p />
<code>condor_grid_overview</code>, and <code>condor_status -long</code> may be used to see if sites have the software installed properly. Possible problems include site advertising not matching site capability, authorization problems or lack of space in <code>OSG_APP</code> or <code>OSG_DATA</code> on the remote node.
<p />
The installed software may be rendered inoperable by file-system changes on the remote node, since part of the installation process involves letting the software know about its installation directory and other aspects of its environment. If this becomes stale for any reason, obtain the <code>lsst-fix-env-paths</code> script from <code>https://osg-svn.renci.org/svn/Engage/trunk/LSST/util-scripts/</code> and execute:
<pre>
globus-job-run &#60;site-GK&#62; -s lsst-fix-env-paths
</pre>
for the affected site. Subsequent attempts to run simulation jobs on that site are now more likely to be successful.
<p />
-- <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a> - 29 Jul 2010</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Engagement<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Engagement/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/Engagement/EngageLSST" class="twikiLink">EngageLSST</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>EngageLSSTInfrastructureGuide</span> <br />    
Topic revision: r4 - 16 Aug 2010 - 20:41:58 - <a href="/bin/view/Main/GabrieleGarzoglio" class="twikiLink">GabrieleGarzoglio</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />