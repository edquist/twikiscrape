<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> MatyasSelmeciVoms208Notes &lt; Sandbox &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/MatyasSelmeciVoms208Notes?_T=16 Feb 2017" type="application/x-wiki" title="edit MatyasSelmeciVoms208Notes" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><meta name="robots" content="noindex,nofollow"> 
<base href="https://twiki.opensciencegrid.org/bin/view/Sandbox/MatyasSelmeciVoms208Notes"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#DDDDDD" />&nbsp;<a href="/bin/view/Sandbox/WebHome">Sandbox Web</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Main/TWikiGroups" class="twikiLink">TWikiGroups</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Main/GridGroup" class="twikiLink">GridGroup</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Main/MatyasSelmeci" class="twikiLink">MatyasSelmeci</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Sandbox/MatyasSelmeciSandbox" class="twikiLink">MatyasSelmeciSandbox</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Sandbox/MatyasSelmeciVoms208Notes" title='Topic revision: 12 (17 Jan 2013 - 01:47:09)'>MatyasSelmeciVoms208Notes</a> <span class='patternRevInfo'>(17 Jan 2013, <a href="/bin/view/Main/MatyasSelmeci" class="twikiLink">MatyasSelmeci</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">---+!! Notes for testing VOMS 2.0.8

%TOC%

Main ticket: [[https://jira.opensciencegrid.org/browse/SOFTWARE-800][SOFTWARE-800]]

---++ 10/05

---+++ Setup

Going through Documentation.Release3.InstallVoms

&lt;verbatim class=&quot;rootscreen&quot;&gt;
yum install -y osg-voms
service mysqld start
mysql_secure_installation

pushd /etc/grid-security
mkdir -p http
mkdir -p voms
for x in {key,cert}.pem; do cp --remove-destination host$x voms/voms$x; cp --remove-destination host$x http/http$x; done
chown -R voms:voms voms
chown -R tomcat:tomcat http
popd

/var/lib/trustmanager-tomcat/configure.sh
&lt;/verbatim&gt;

Ran =voms-admin-configure=:
&lt;verbatim class=&quot;rootscreen&quot;&gt;
: fermicloud099 \# ;\
voms-admin-configure install \
--dbtype mysql \
--vo matyasvo \
--createdb \
--deploy-database \
--dbauser root \
--dbapwd zlfrperg \
--dbusername admin-matyasvo \
--dbpassword mysecret \
--dbport 3306 \
--port 15001 \
--mail-from matyas@fnal.gov \
--smtp-host smtp.fnal.gov \
--sqlloc /usr/lib64/voms/libvomsmysql.so \
--cert /etc/grid-security/voms/vomscert.pem \
--key /etc/grid-security/voms/vomskey.pem \
--read-access-for-authenticated-clients
&lt;/verbatim&gt;
Made the VO for me. Printed a bunch of sql statements and then the following:
(*EDIT* mail-from and smtp-host used to be cs.wisc.edu)
&lt;verbatim class=&quot;screen&quot;&gt;
Deploying voms database...
Database deployed correctly!
Adding read access for authenticated clients...
Checking that the database is writable...
Database is writable.
Granting read-only access to any authenticated user on group &#39;/matyasvo&#39;
Granting read-only access to any authenticated user on role &#39;/matyasvo/Role=VO-Admin&#39;



VO matyasvo installation finished.

You can start the voms services using the following commands:
    //etc/init.d/voms start matyasvo
    //etc/init.d/voms-admin start matyasvo
&lt;/verbatim&gt;
At one point I accidentally omitted =&quot;--key&quot;= and it gave me =KeyError: key= and I had to source dive to figure out what that meant.
*NOTE* There has _got_ to be a better way of doing initial configuration than that.
Perhaps even a shell script with variables you can fill in that calls =voms-admin-configure= -- even that would be better than this.

Here&#39;s one. =voms-admin-initial-install.sh=
&lt;verbatim class=&quot;file&quot;&gt;
#!/bin/bash
# Change these variables to suit your system.
# TODO Add descriptions
DATABASE_TYPE=&quot;mysql&quot;
VO_NAME=&quot;matyasvo&quot;
DATABASE_ADMIN_USER=&quot;root&quot;
DATABASE_USERNAME=&quot;admin-$VO_NAME&quot;
DATABASE_PORT=3306
VOMS_PORT=15001
MAIL_FROM=&quot;matyas@fnal.gov&quot;
SMTP_HOST=&quot;smtp.fnal.gov&quot;
SQL_LOCATION=&quot;/usr/lib64/voms/libvomsmysql.so&quot;
VOMS_CERTIFICATE=&quot;/etc/grid-security/voms/vomscert.pem&quot;
VOMS_PRIVATE_KEY=&quot;/etc/grid-security/voms/vomskey.pem&quot;

# Do not change anything below this line unless you know what you are doing.

read -s -p &quot;Enter $DATABASE_TYPE password for user $DATABASE_ADMIN_USER: &quot; DATABASE_ADMIN_PASSWORD
echo &quot;&quot;
read -s -p &quot;Enter $DATABASE_TYPE password for user $DATABASE_USERNAME (user will be created if it does not exist): &quot; DATABASE_PASSWORD

voms-admin-configure install \
    --dbtype            $DATABASE_TYPE \
    --vo                $VO_NAME \
    --createdb --deploy-database \
    --dbauser           $DATABASE_ADMIN_USER \
    --dbapwd            $DATABASE_ADMIN_PASSWORD \
    --dbusername        $DATABASE_USERNAME \
    --dbpassword        $DATABASE_PASSWORD \
    --dbport            $DATABASE_PORT \
    --port              $VOMS_PORT \
    --mail-from         $MAIL_FROM \
    --smtp-host         $SMTP_HOST \
    --sqlloc            $SQL_LOCATION \
    --cert              $VOMS_CERTIFICATE \
    --key               $VOMS_PRIVATE_KEY \
    --read-access-for-authenticated-clients
&lt;/verbatim&gt;



---++ 10/08

---+++ Setup 2

&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \# ; service voms start matyasvo
: \# ; service voms-admin start matyasvo
&lt;/verbatim&gt;
For step 3 (&quot;Add an admin user&quot;) I used this command:
&lt;verbatim class=&quot;rootscreen&quot;&gt;
voms-db-deploy.py add-admin --vo matyasvo \
    --dn &quot;/DC=org/DC=doegrids/OU=Services/CN=`hostname`&quot; \
    --ca &quot;/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1&quot;
&lt;/verbatim&gt;
Output (formatted):
&lt;verbatim class=&quot;screen&quot;&gt;
WARNING: No email was specified for this administrator! The new administrator
will not receive VOMS Admin notifications

Admin
&#39;/DC=org/DC=doegrids/OU=Services/CN=fermicloud099.fnal.gov,/DC=org/DC=DOEGrids/OU=Certificate
Authorities/CN=DOEGrids CA 1&#39; not found. It will be created...

Adding ALL permissions on &#39;/matyasvo&#39; for admin
&#39;/DC=org/DC=doegrids/OU=Services/CN=fermicloud099.fnal.gov,/DC=org/DC=DOEGrids/OU=Certificate
Authorities/CN=DOEGrids CA 1&#39;

Adding ALL permissions on role &#39;/matyasvo/Role=VO-Admin&#39; for admin
&#39;/DC=org/DC=doegrids/OU=Services/CN=fermicloud099.fnal.gov,/DC=org/DC=DOEGrids/OU=Certificate
Authorities/CN=DOEGrids CA 1&#39;
&lt;/verbatim&gt;

&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \# ; fetch-crl
: \# ; service tomcat5 start
: \# ; voms-admin --nousercert --vo matyasvo add-ACL-entry /matyasvo ANYONE VOMS_CA &quot;CONTAINER_READ,MEMBERSHIP_READ&quot; true
&lt;/verbatim&gt;
Edit =/etc/voms-admin/matyasvo/voms.service.properties=, add &lt;code&gt;voms.csrf.log_only = true&lt;/code&gt; (should that be in there by default?).

&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \# ; service fetch-crl-boot start
: \# ; service fetch-crl-cron start
: \# ; /etc/init.d/mysqld start
: \# ; /etc/init.d/voms start
: \# ; chkconfig fetch-crl-boot on
: \# ; chkconfig fetch-crl-cron on
: \# ; chkconfig mysqld on
: \# ; chkconfig voms on
: \# ; chkconfig tomcat5 on
&lt;/verbatim&gt;

Made vomses entry and lsc file:
&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \# ; echo &#39;&quot;matyasvo&quot; &quot;&#39;`hostname`&#39;&quot; &quot;15001&quot; &quot;/DC=org/DC=doegrids/OU=Services/CN=&#39;`hostname`&#39;&quot; &quot;matyasvo&quot;&#39; &gt;&gt; /etc/vomses
: \# ; mkdir -p /etc/grid-security/vomsdir/matyasvo
: \# ; echo &#39;/DC=org/DC=doegrids/OU=Services/CN=&#39;`hostname`&#39;
/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1&#39; &gt; /etc/grid-security/vomsdir/matyasvo/`hostname`.lsc
&lt;/verbatim&gt;

Adding myself to the vo using my kerb cert and making myself an admin so I can use the web interface for admin stuff.
&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \# ; voms-admin --vo matyasvo --host `hostname` \
       --nousercert create-user \
       &quot;/DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas&quot; \
       &quot;/DC=gov/DC=fnal/O=Fermilab/OU=Certificate Authorities/CN=Kerberized CA HSM&quot; \
       &quot;Matyas Selmeci&quot; matyas@fnal.gov
: \# ; voms-admin --vo matyasvo --host `hostname` \
       --nousercert assign-role /matyasvo VO-Admin \
       &quot;/DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas&quot; \
       &quot;/DC=gov/DC=fnal/O=Fermilab/OU=Certificate Authorities/CN=Kerberized CA HSM&quot;
&lt;/verbatim&gt;
(No output from either of these)

---+++ Testing Voms

Tried =voms-proxy-init= for which I had to install &lt;code&gt;voms-client&lt;b&gt;s&lt;/b&gt;&lt;/code&gt;.

&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \$ ; voms-proxy-init -voms matyasvo
&lt;/verbatim&gt;

Worked no problems.


---+++ Testing Voms-Admin Web Interface

Using this (as myself) to make a .p12 file from my krb cert so I can use the web interface:
&lt;verbatim class=&quot;screen&quot;&gt;
: \$ ; cd ~/.globus
: \$ ; openssl pkcs12 -export \
       -inkey userkey-kca.pem \
       -in usercert-kca.pem \
       -out fermikrbcert.p12
&lt;/verbatim&gt;

At this point the docs suggested I go to [[https://fermicloud099.fnal.gov:8443/vomses]] but that gave me a 404.
Tomcat logs did not show problems.

Voms log (=/var/log/voms/voms.matyasvo=) shows lots of the following:

&lt;verbatim class=&quot;file&quot;&gt;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd[22211]: msg=&quot;LOG_INFO:REQUEST:Run (vomsd.cc:709):Started Executor with pid = 2974&quot;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd[22211]: msg=&quot;LOG_INFO:REQUEST:logconnection (ipv6sock.cc:115):Received connection from: fsf-ikon.fnal.gov (131.225.12.198):51812.&quot;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd[2975]: msg=&quot;LOG_INFO:REQUEST:Run (vomsd.cc:773):Failed to authenticate peer.&quot;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd[2975]: msg=&quot;LOG_INFO:REQUEST:Run (vomsd.cc:774):OpenSSL error: &quot;
&lt;/verbatim&gt;

Port numbers varied.
(Ohno the openssl error is blank again. What was the solution last time?)

Oddly, &quot;netstat -an --proto=inet&quot; showed nothing listening on port 8443.
But if that were true, I wouldn&#39;t be getting a 404, but no connection whatsoever.
(EDIT:
That&#39;s because netstat sucks.
&quot;netstat -an --tcp&quot; shows everything working just fine.
Google shows one bug report, but it has been ignored.)

Did a =yum downgrade= of =voms-admin-server=; did not help, so upgraded back.

Tim told me I should have gone to [[https://fermicloud099.fnal.gov:8433/voms/matyasvo]].
That worked just fine; pinged Marco about fixing the docs.


---+++ Testing edg-mkgridmap

&lt;verbatim class=&quot;rootscreen&quot;&gt;
: \# ; cd /tmp
: \# ; mkdir edgmkgridmaptest
: \# ; cd edgmkgridmaptest
: \# ; yum install edg-mkgridmap
: \# ; echo &#39;group vomss://&#39;`hostname`&#39;:8443/voms/matyasvo matyasvo&#39; &gt; edg-mkgridmap.conf
: \# ; edg-mkgridmap --out=edg-mkgridmap.out --conf=edg-mkgridmap.conf
: \# ; cat edg-mkgridmap.out
&lt;/verbatim&gt;
Displayed a few errors about =/var/lib/osg/user-vo-map.new= and =/var/lib/osg/user-vo-map.last_checked= but they turned out not to be problems.

=edg-mkgridmap.out= looks like this:
&lt;verbatim class=&quot;file&quot;&gt;
&quot;/DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas&quot; matyasvo
&lt;/verbatim&gt;

---++ 10/09

---+++ Testing on a separate client

Tried using the voms client on a separate machine (2.0.8 install of just =voms-clients= and the latest =osg-ca-certs=), with the appropriate entry in my vomses file.
=voms-proxy-init -voms matyasvo= made me a proxy just fine, but also gave me the following error:

&lt;verbatim class=&quot;screen&quot;&gt;Error: verify failed.
Cannot verify AC signature!
&lt;/verbatim&gt;

Do not know what that means, seems harmless, or at least =voms-proxy-info -all= looks the same between machines.
(Edit: found some old docs that say it _is_ harmless).

Followed the procedure above to test =edg-mkgridmap=.
I had to make an =edg-mkgridmap.conf= on the client, too.


---++ 10/15

---+++ 2.0.6 server / 2.0.8 client interop

Set up =matyasvo2= on =fermicloud084= using pretty much the same procedure as I set up =matyasvo=.
All packages from production repo.
=voms-proxy-init -voms matyasvo2= worked using the voms 2.0.8 client (using =fermicloud001=).

---+++ Other

Using voms-admin on the 2.0.8 server:
   * Added a Group, !TestGroup
   * Added a Role, !TestRole
   * Added myself to !TestGroup
   * Added myself to !TestRole in !TestGroup

Then I ran =voms-proxy-init -voms matyasvo:/Role=TestRole= followed by =voms-proxy-info -all=.
&lt;verbatim class=&quot;screen&quot;&gt;
Your identity: /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas
Creating temporary proxy ................................................................ Done
Contacting  fermicloud099.fnal.gov:15001 [/DC=org/DC=doegrids/OU=Services/CN=fermicloud099.fnal.gov] &quot;matyasvo&quot; Done

Warning: FQAN: /matyasvo is not the first selected!


Creating proxy ................................ Done

Your proxy is valid until Mon Oct 15 22:51:23 2012
Error: verify failed.
Cannot verify AC signature!
: 1 fermicloud001 ~ \$ ;voms-proxy-info -all
subject   : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas/CN=proxy
issuer    : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas
identity  : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas
type      : proxy
strength  : 1024 bits
path      : /tmp/x509up_u46142
timeleft  : 11:59:51
key usage : Digital Signature, Key Encipherment
=== VO matyasvo extension information ===
VO        : matyasvo
subject   : /DC=gov/DC=fnal/O=Fermilab/OU=People/CN=Matyas Selmeci/CN=UID:matyas
issuer    : /DC=org/DC=doegrids/OU=Services/CN=fermicloud099.fnal.gov
attribute : /matyasvo/Role=NULL/Capability=NULL
attribute : /matyasvo/TestGroup/Role=NULL/Capability=NULL
attribute : /matyasvo/TestGroup/Role=TestRole/Capability=NULL
timeleft  : 11:59:51
uri       : fermicloud099.fnal.gov:15001
&lt;/verbatim&gt;

Also worked when I did this from =fermicloud084= (2.0.6 client).

Asked Tim to add himself to the =matyasvo= vo but he didn&#39;t get the confirmation because my vm can&#39;t send email to CS.
Can&#39;t even ping =smtp.cs.wisc.edu= (even though I know it&#39;s up).

So I noticed that I screwed up some of the settings.
Edited =/etc/voms-admin/matyasvo/voms.service.properties= and changed the following:
=voms.notification.smtp-server= to =smtp.fnal.gov=
=voms.notification.email-address= to =matyas@fnal.gov=

I don&#39;t know how to re-send an email though.

Dropped Tim&#39;s request.
Went into the database.
&lt;verbatim class=&quot;rootscreen&quot;&gt;
begin;
# Note: I left off the WHERE clause because =aup_acc_record= had only one row.
update aup_acc_record set last_acceptance_date=&#39;2012-10-15 12:25:00&#39;;
update aup_acc_record set valid=1;                                   
commit;
begin;
update task set completionDate=&#39;2012-10-15 12:25:00&#39; where task_id=1;
update task set status=&#39;COMPLETED&#39; where task_id=1;
# task_id 1 is the task to sign the aup
# also I totally guessed &#39;COMPLETED&#39;
commit;
&lt;/verbatim&gt;

Then I invalidated my AUP acceptance again; this time with my config fixed, I got the email.
Also I can accept via the web interface by going to &#39;Home&#39; &amp;rarr; &#39;Your vo user home&#39;

-- Main.MatyasSelmeci - 05 Oct 2012
&lt;!-- vim: ft=twiki
--&gt;</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Sandbox/MatyasSelmeciVoms208Notes?t=1487268910;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Sandbox/MatyasSelmeciVoms208Notes' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Sandbox/MatyasSelmeciVoms208Notes?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Sandbox/MatyasSelmeciVoms208Notes?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r12&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/MatyasSelmeciVoms208Notes?rev1=12;rev2=11">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/MatyasSelmeciVoms208Notes?rev=11">r11</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/MatyasSelmeciVoms208Notes?rev1=11;rev2=10">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/MatyasSelmeciVoms208Notes?rev=10">r10</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/MatyasSelmeciVoms208Notes?rev1=10;rev2=9">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/MatyasSelmeciVoms208Notes?rev=9">r9</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/MatyasSelmeciVoms208Notes?rev1=9;rev2=8">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/MatyasSelmeciVoms208Notes?rev=8">r8</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Sandbox/MatyasSelmeciVoms208Notes?template=backlinksweb' rel='nofollow' title='Search the Sandbox Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Sandbox/MatyasSelmeciVoms208Notes' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Sandbox/MatyasSelmeciVoms208Notes?template=oopsmore&amp;param1=12&amp;param2=12' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r12 - 17 Jan 2013 - 01:47:09 - <a href="/bin/view/Main/MatyasSelmeci" class="twikiLink">MatyasSelmeci</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top"><br/>Register</a>
<p />
<p />
<!-- Google CSE Search Box Ends
<h5><a name="Common_links"></a> Common links </h5> <ul>
<li> <a href="/bin/view/Main/WebHome" class="twikiLink">OSG TWiki home</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome" class="twikiLink">RPM Install guides - OSG 3.0</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Pacman Install guides OSG 1.2</a>
</li> <li> <a href="/bin/view/Documentation/WebHome" class="twikiLink">Technical Documentation</a>
</li> <li> <a href="/bin/view/Documentation/SiteAdminResources" class="twikiLink">Contact Info</a> 
</li> <li> <strong><a href="/bin/view/Main/ICantFindItForm" class="twikiLink">I can't find it!</a></strong>  -->
</li></ul> 
<div class="container">
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="Home">About the OSG</a></div>
        <div id="item"><a  style="" href="/bin/view/Documentation/UsingTheGrid" class="twikiLink" title="Instructions for Using OSG">New Users</a></div>
        <div id="item"><a href="http://myosg.grid.iu.edu/map?map_attrs_shownr=on&amp;all_sites=on&amp;active=on&amp;active_value=1&amp;disable_value=1&amp;gridtype=on&amp;gridtype_1=on" target="_top">OSG Sites</a></div>
        <div id="item"><a  style="" href="http://myosg.grid.iu.edu/vosummary?all_vos=on&amp;active=on&amp;active_value=1&amp;datasource=summary" target="_top" title="List of Virtual Organizations">OSG VOs</a></div>
        <div id="item"><a href="http://display.grid.iu.edu/" target="_top">OSG Usage Graphs</a></div>
        <div id="item"><a  style="" href="https://indico.fnal.gov/categoryDisplay.py?categId=86" target="_top" title="OSG Event Calendar">Events</a></div>
       <div id="item"><a href="/bin/view/Management/OSGOrganizationInformation" class="twikiLink">OSG Organization</a></div>
<p />
    </div>
<p />
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head">OSG at Work</div>
        <div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Official Documentation Home">Technical Documentation</a></div>
        <div id="item"><a href="/bin/view/Security/WebHome" class="twikiLink">Security</a></div>
        <div id="item"><a href="/bin/view/SoftwareTeam/WebHome" class="twikiLink">Software Team</a></div>
        <div id="item"><a href="/bin/view/Education/WebHome" class="twikiLink">Education</a></div>
        <div id="item"><a href="/bin/view/Management/WebHome" class="twikiLink">Management</a></div>
        <div id="item"><a  style="" href="/bin/view/Management/ScientificPublications" class="twikiLink" title="Scientific Publications and Citing OSG">Scientific Publications</a></div>
        <div id="item"><a href="/bin/view/Management/OSGResearchHighlights" class="twikiLink">Research Highlights</a></div>
    </div>
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Sandbox/MatyasSelmeciVoms208Notes"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Sandbox/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Sandbox" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Sandbox"></a>  <a href="/bin/view/Sandbox/WebHome" class="twikiCurrentWebHomeLink twikiLink">Sandbox</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/MatyasSelmeciVoms208Notes?t=1487268910;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Sandbox/MatyasSelmeciVoms208Notes" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Sandbox/MatyasSelmeciVoms208Notes?pdftitle=MatyasSelmeciVoms208Notes" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>