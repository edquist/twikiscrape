<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> MatyasSelmeciVoms208Notes &lt; Sandbox &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/MatyasSelmeciVoms208Notes?_T=16 Feb 2017" type="application/x-wiki" title="edit MatyasSelmeciVoms208Notes" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><meta name="robots" content="noindex,nofollow"> 
<base href="https://twiki.opensciencegrid.org/bin/view/Sandbox/MatyasSelmeciVoms208Notes"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Notes_for_testing_VOMS_2_0_8"></a>  Notes for testing VOMS 2.0.8 </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#10_05"> 10/05</a> <ul>
<li> <a href="?cover=print#Setup"> Setup</a>
</li></ul> 
</li> <li> <a href="?cover=print#10_08"> 10/08</a> <ul>
<li> <a href="?cover=print#Setup_2"> Setup 2</a>
</li> <li> <a href="?cover=print#Testing_Voms"> Testing Voms</a>
</li> <li> <a href="?cover=print#Testing_Voms_Admin_Web_Interface"> Testing Voms-Admin Web Interface</a>
</li> <li> <a href="?cover=print#Testing_edg_mkgridmap"> Testing edg-mkgridmap</a>
</li></ul> 
</li> <li> <a href="?cover=print#10_09"> 10/09</a> <ul>
<li> <a href="?cover=print#Testing_on_a_separate_client"> Testing on a separate client</a>
</li></ul> 
</li> <li> <a href="?cover=print#10_15"> 10/15</a> <ul>
<li> <a href="?cover=print#2_0_6_server_2_0_8_client_intero"> 2.0.6 server / 2.0.8 client interop</a>
</li> <li> <a href="?cover=print#Other"> Other</a>
</li></ul> 
</li></ul> 
</div>
<p />
Main ticket: <a href="https://jira.opensciencegrid.org/browse/SOFTWARE-800" target="_top">SOFTWARE-800</a>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="10_05"></a> 10/05 </span></h2>
<p />
<h3><a name="Setup"></a> Setup </h3>
<p />
Going through <a href="/bin/view/Documentation/Release3/InstallVoms" class="twikiLink">InstallVoms</a>
<p />
<pre class="rootscreen">
yum install -y osg-voms
service mysqld start
mysql&#95;secure&#95;installation

pushd /etc/grid-security
mkdir -p http
mkdir -p voms
for x in {key,cert}.pem; do cp --remove-destination host$x voms/voms$x; cp --remove-destination host$x http/http$x; done
chown -R voms:voms voms
chown -R tomcat:tomcat http
popd

/var/lib/trustmanager-tomcat/configure.sh
</pre>
<p />
Ran <code>voms-admin-configure</code>:
<pre class="rootscreen">
: fermicloud099 \# ;\
voms-admin-configure install \
--dbtype mysql \
--vo matyasvo \
--createdb \
--deploy-database \
--dbauser root \
--dbapwd zlfrperg \
--dbusername admin-matyasvo \
--dbpassword mysecret \
--dbport 3306 \
--port 15001 \
--mail-from matyas&#64;fnal.gov \
--smtp-host smtp.fnal.gov \
--sqlloc /usr/lib64/voms/libvomsmysql.so \
--cert /etc/grid-security/voms/vomscert.pem \
--key /etc/grid-security/voms/vomskey.pem \
--read-access-for-authenticated-clients
</pre>
Made the VO for me. Printed a bunch of sql statements and then the following:
(<strong>EDIT</strong> mail-from and smtp-host used to be cs.wisc.edu)
<pre class="screen">
Deploying voms database...
Database deployed correctly!
Adding read access for authenticated clients...
Checking that the database is writable...
Database is writable.
Granting read-only access to any authenticated user on group &#39;/matyasvo&#39;
Granting read-only access to any authenticated user on role &#39;/matyasvo/Role&#61;VO-Admin&#39;



VO matyasvo installation finished.

You can start the voms services using the following commands:
    //etc/init.d/voms start matyasvo
    //etc/init.d/voms-admin start matyasvo
</pre>
At one point I accidentally omitted <code>"--key"</code> and it gave me <code>KeyError: key</code> and I had to source dive to figure out what that meant.
<strong>NOTE</strong> There has <em>got</em> to be a better way of doing initial configuration than that.
Perhaps even a shell script with variables you can fill in that calls <code>voms-admin-configure</code> -- even that would be better than this.
<p />
Here's one. <code>voms-admin-initial-install.sh</code>
<pre class="file">
#!/bin/bash
# Change these variables to suit your system.
# TODO Add descriptions
DATABASE&#95;TYPE&#61;&#34;mysql&#34;
VO&#95;NAME&#61;&#34;matyasvo&#34;
DATABASE&#95;ADMIN&#95;USER&#61;&#34;root&#34;
DATABASE&#95;USERNAME&#61;&#34;admin-$VO&#95;NAME&#34;
DATABASE&#95;PORT&#61;3306
VOMS&#95;PORT&#61;15001
MAIL&#95;FROM&#61;&#34;matyas&#64;fnal.gov&#34;
SMTP&#95;HOST&#61;&#34;smtp.fnal.gov&#34;
SQL&#95;LOCATION&#61;&#34;/usr/lib64/voms/libvomsmysql.so&#34;
VOMS&#95;CERTIFICATE&#61;&#34;/etc/grid-security/voms/vomscert.pem&#34;
VOMS&#95;PRIVATE&#95;KEY&#61;&#34;/etc/grid-security/voms/vomskey.pem&#34;

# Do not change anything below this line unless you know what you are doing.

read -s -p &#34;Enter $DATABASE&#95;TYPE password for user $DATABASE&#95;ADMIN&#95;USER: &#34; DATABASE&#95;ADMIN&#95;PASSWORD
echo &#34;&#34;
read -s -p &#34;Enter $DATABASE&#95;TYPE password for user $DATABASE&#95;USERNAME (user will be created if it does not exist): &#34; DATABASE&#95;PASSWORD

voms-admin-configure install \
    --dbtype            $DATABASE&#95;TYPE \
    --vo                $VO&#95;NAME \
    --createdb --deploy-database \
    --dbauser           $DATABASE&#95;ADMIN&#95;USER \
    --dbapwd            $DATABASE&#95;ADMIN&#95;PASSWORD \
    --dbusername        $DATABASE&#95;USERNAME \
    --dbpassword        $DATABASE&#95;PASSWORD \
    --dbport            $DATABASE&#95;PORT \
    --port              $VOMS&#95;PORT \
    --mail-from         $MAIL&#95;FROM \
    --smtp-host         $SMTP&#95;HOST \
    --sqlloc            $SQL&#95;LOCATION \
    --cert              $VOMS&#95;CERTIFICATE \
    --key               $VOMS&#95;PRIVATE&#95;KEY \
    --read-access-for-authenticated-clients
</pre>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="10_08"></a> 10/08 </span></h2>
<p />
<h3><a name="Setup_2"></a> Setup 2 </h3>
<p />
<pre class="rootscreen">
: \# ; service voms start matyasvo
: \# ; service voms-admin start matyasvo
</pre>
For step 3 ("Add an admin user") I used this command:
<pre class="rootscreen">
voms-db-deploy.py add-admin --vo matyasvo \
    --dn &#34;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;`hostname`&#34; \
    --ca &#34;/DC&#61;org/DC&#61;DOEGrids/OU&#61;Certificate Authorities/CN&#61;DOEGrids CA 1&#34;
</pre>
Output (formatted):
<pre class="screen">
WARNING: No email was specified for this administrator! The new administrator
will not receive VOMS Admin notifications

Admin
&#39;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;fermicloud099.fnal.gov,/DC&#61;org/DC&#61;DOEGrids/OU&#61;Certificate
Authorities/CN&#61;DOEGrids CA 1&#39; not found. It will be created...

Adding ALL permissions on &#39;/matyasvo&#39; for admin
&#39;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;fermicloud099.fnal.gov,/DC&#61;org/DC&#61;DOEGrids/OU&#61;Certificate
Authorities/CN&#61;DOEGrids CA 1&#39;

Adding ALL permissions on role &#39;/matyasvo/Role&#61;VO-Admin&#39; for admin
&#39;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;fermicloud099.fnal.gov,/DC&#61;org/DC&#61;DOEGrids/OU&#61;Certificate
Authorities/CN&#61;DOEGrids CA 1&#39;
</pre>
<p />
<pre class="rootscreen">
: \# ; fetch-crl
: \# ; service tomcat5 start
: \# ; voms-admin --nousercert --vo matyasvo add-ACL-entry /matyasvo ANYONE VOMS&#95;CA &#34;CONTAINER&#95;READ,MEMBERSHIP&#95;READ&#34; true
</pre>
Edit <code>/etc/voms-admin/matyasvo/voms.service.properties</code>, add <code>voms.csrf.log_only = true</code> (should that be in there by default?).
<p />
<pre class="rootscreen">
: \# ; service fetch-crl-boot start
: \# ; service fetch-crl-cron start
: \# ; /etc/init.d/mysqld start
: \# ; /etc/init.d/voms start
: \# ; chkconfig fetch-crl-boot on
: \# ; chkconfig fetch-crl-cron on
: \# ; chkconfig mysqld on
: \# ; chkconfig voms on
: \# ; chkconfig tomcat5 on
</pre>
<p />
Made vomses entry and lsc file:
<pre class="rootscreen">
: \# ; echo &#39;&#34;matyasvo&#34; &#34;&#39;`hostname`&#39;&#34; &#34;15001&#34; &#34;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;&#39;`hostname`&#39;&#34; &#34;matyasvo&#34;&#39; &#62;&#62; /etc/vomses
: \# ; mkdir -p /etc/grid-security/vomsdir/matyasvo
: \# ; echo &#39;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;&#39;`hostname`&#39;
/DC&#61;org/DC&#61;DOEGrids/OU&#61;Certificate Authorities/CN&#61;DOEGrids CA 1&#39; &#62; /etc/grid-security/vomsdir/matyasvo/`hostname`.lsc
</pre>
<p />
Adding myself to the vo using my kerb cert and making myself an admin so I can use the web interface for admin stuff.
<pre class="rootscreen">
: \# ; voms-admin --vo matyasvo --host `hostname` \
       --nousercert create-user \
       &#34;/DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas&#34; \
       &#34;/DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;Certificate Authorities/CN&#61;Kerberized CA HSM&#34; \
       &#34;Matyas Selmeci&#34; matyas&#64;fnal.gov
: \# ; voms-admin --vo matyasvo --host `hostname` \
       --nousercert assign-role /matyasvo VO-Admin \
       &#34;/DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas&#34; \
       &#34;/DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;Certificate Authorities/CN&#61;Kerberized CA HSM&#34;
</pre>
(No output from either of these)
<p />
<h3><a name="Testing_Voms"></a> Testing Voms </h3>
<p />
Tried <code>voms-proxy-init</code> for which I had to install <code>voms-client<b>s</b></code>.
<p />
<pre class="rootscreen">
: \$ ; voms-proxy-init -voms matyasvo
</pre>
<p />
Worked no problems.
<p />
<p />
<h3><a name="Testing_Voms_Admin_Web_Interface"></a> Testing Voms-Admin Web Interface </h3>
<p />
Using this (as myself) to make a .p12 file from my krb cert so I can use the web interface:
<pre class="screen">
: \$ ; cd ~/.globus
: \$ ; openssl pkcs12 -export \
       -inkey userkey-kca.pem \
       -in usercert-kca.pem \
       -out fermikrbcert.p12
</pre>
<p />
At this point the docs suggested I go to <a href="https://fermicloud099.fnal.gov:8443/vomses" target="_top">https://fermicloud099.fnal.gov:8443/vomses</a> but that gave me a 404.
Tomcat logs did not show problems.
<p />
Voms log (<code>/var/log/voms/voms.matyasvo</code>) shows lots of the following:
<p />
<pre class="file">
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd&#91;22211]: msg&#61;&#34;LOG&#95;INFO:REQUEST:Run (vomsd.cc:709):Started Executor with pid &#61; 2974&#34;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd&#91;22211]: msg&#61;&#34;LOG&#95;INFO:REQUEST:logconnection (ipv6sock.cc:115):Received connection from: fsf-ikon.fnal.gov (131.225.12.198):51812.&#34;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd&#91;2975]: msg&#61;&#34;LOG&#95;INFO:REQUEST:Run (vomsd.cc:773):Failed to authenticate peer.&#34;
Mon Oct  8 12:27:17 2012:fermicloud099.fnal.gov:vomsd&#91;2975]: msg&#61;&#34;LOG&#95;INFO:REQUEST:Run (vomsd.cc:774):OpenSSL error: &#34;
</pre>
<p />
Port numbers varied.
(Ohno the openssl error is blank again. What was the solution last time?)
<p />
Oddly, "netstat -an --proto=inet" showed nothing listening on port 8443.
But if that were true, I wouldn't be getting a 404, but no connection whatsoever.
(EDIT:
That's because netstat sucks.
"netstat -an --tcp" shows everything working just fine.
Google shows one bug report, but it has been ignored.)
<p />
Did a <code>yum downgrade</code> of <code>voms-admin-server</code>; did not help, so upgraded back.
<p />
Tim told me I should have gone to <a href="https://fermicloud099.fnal.gov:8433/voms/matyasvo" target="_top">https://fermicloud099.fnal.gov:8433/voms/matyasvo</a>.
That worked just fine; pinged Marco about fixing the docs.
<p />
<p />
<h3><a name="Testing_edg_mkgridmap"></a> Testing edg-mkgridmap </h3>
<p />
<pre class="rootscreen">
: \# ; cd /tmp
: \# ; mkdir edgmkgridmaptest
: \# ; cd edgmkgridmaptest
: \# ; yum install edg-mkgridmap
: \# ; echo &#39;group vomss://&#39;`hostname`&#39;:8443/voms/matyasvo matyasvo&#39; &#62; edg-mkgridmap.conf
: \# ; edg-mkgridmap --out&#61;edg-mkgridmap.out --conf&#61;edg-mkgridmap.conf
: \# ; cat edg-mkgridmap.out
</pre>
Displayed a few errors about <code>/var/lib/osg/user-vo-map.new</code> and <code>/var/lib/osg/user-vo-map.last_checked</code> but they turned out not to be problems.
<p />
<code>edg-mkgridmap.out</code> looks like this:
<pre class="file">
&#34;/DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas&#34; matyasvo
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="10_09"></a> 10/09 </span></h2>
<p />
<h3><a name="Testing_on_a_separate_client"></a> Testing on a separate client </h3>
<p />
Tried using the voms client on a separate machine (2.0.8 install of just <code>voms-clients</code> and the latest <code>osg-ca-certs</code>), with the appropriate entry in my vomses file.
<code>voms-proxy-init -voms matyasvo</code> made me a proxy just fine, but also gave me the following error:
<p />
<pre class="screen">Error: verify failed.
Cannot verify AC signature!
</pre>
<p />
Do not know what that means, seems harmless, or at least <code>voms-proxy-info -all</code> looks the same between machines.
(Edit: found some old docs that say it <em>is</em> harmless).
<p />
Followed the procedure above to test <code>edg-mkgridmap</code>.
I had to make an <code>edg-mkgridmap.conf</code> on the client, too.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="10_15"></a> 10/15 </span></h2>
<p />
<h3><a name="2_0_6_server_2_0_8_client_intero"></a> 2.0.6 server / 2.0.8 client interop </h3>
<p />
Set up <code>matyasvo2</code> on <code>fermicloud084</code> using pretty much the same procedure as I set up <code>matyasvo</code>.
All packages from production repo.
<code>voms-proxy-init -voms matyasvo2</code> worked using the voms 2.0.8 client (using <code>fermicloud001</code>).
<p />
<h3><a name="Other"></a> Other </h3>
<p />
Using voms-admin on the 2.0.8 server: <ul>
<li> Added a Group, TestGroup
</li> <li> Added a Role, TestRole
</li> <li> Added myself to TestGroup
</li> <li> Added myself to TestRole in TestGroup
</li></ul> 
<p />
Then I ran <code>voms-proxy-init -voms matyasvo:/Role=TestRole</code> followed by <code>voms-proxy-info -all</code>.
<pre class="screen">
Your identity: /DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas
Creating temporary proxy ................................................................ Done
Contacting  fermicloud099.fnal.gov:15001 &#91;/DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;fermicloud099.fnal.gov] &#34;matyasvo&#34; Done

Warning: FQAN: /matyasvo is not the first selected!


Creating proxy ................................ Done

Your proxy is valid until Mon Oct 15 22:51:23 2012
Error: verify failed.
Cannot verify AC signature!
: 1 fermicloud001 ~ \$ ;voms-proxy-info -all
subject   : /DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas/CN&#61;proxy
issuer    : /DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas
identity  : /DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas
type      : proxy
strength  : 1024 bits
path      : /tmp/x509up&#95;u46142
timeleft  : 11:59:51
key usage : Digital Signature, Key Encipherment
&#61;&#61;&#61; VO matyasvo extension information &#61;&#61;&#61;
VO        : matyasvo
subject   : /DC&#61;gov/DC&#61;fnal/O&#61;Fermilab/OU&#61;People/CN&#61;Matyas Selmeci/CN&#61;UID:matyas
issuer    : /DC&#61;org/DC&#61;doegrids/OU&#61;Services/CN&#61;fermicloud099.fnal.gov
attribute : /matyasvo/Role&#61;NULL/Capability&#61;NULL
attribute : /matyasvo/TestGroup/Role&#61;NULL/Capability&#61;NULL
attribute : /matyasvo/TestGroup/Role&#61;TestRole/Capability&#61;NULL
timeleft  : 11:59:51
uri       : fermicloud099.fnal.gov:15001
</pre>
<p />
Also worked when I did this from <code>fermicloud084</code> (2.0.6 client).
<p />
Asked Tim to add himself to the <code>matyasvo</code> vo but he didn't get the confirmation because my vm can't send email to CS.
Can't even ping <code>smtp.cs.wisc.edu</code> (even though I know it's up).
<p />
So I noticed that I screwed up some of the settings.
Edited <code>/etc/voms-admin/matyasvo/voms.service.properties</code> and changed the following:
<code>voms.notification.smtp-server</code> to <code>smtp.fnal.gov</code>
<code>voms.notification.email-address</code> to <code>matyas@fnal.gov</code>
<p />
I don't know how to re-send an email though.
<p />
Dropped Tim's request.
Went into the database.
<pre class="rootscreen">
begin;
# Note: I left off the WHERE clause because &#61;aup&#95;acc&#95;record&#61; had only one row.
update aup&#95;acc&#95;record set last&#95;acceptance&#95;date&#61;&#39;2012-10-15 12:25:00&#39;;
update aup&#95;acc&#95;record set valid&#61;1;                                   
commit;
begin;
update task set completionDate&#61;&#39;2012-10-15 12:25:00&#39; where task&#95;id&#61;1;
update task set status&#61;&#39;COMPLETED&#39; where task&#95;id&#61;1;
# task&#95;id 1 is the task to sign the aup
# also I totally guessed &#39;COMPLETED&#39;
commit;
</pre>
<p />
Then I invalidated my AUP acceptance again; this time with my config fixed, I got the email.
Also I can accept via the web interface by going to 'Home' &rarr; 'Your vo user home'
<p />
-- <a href="/bin/view/Main/MatyasSelmeci" class="twikiLink">MatyasSelmeci</a> - 05 Oct 2012
<!-- vim: ft=twiki
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Sandbox<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Main/TWikiGroups" class="twikiLink">TWikiGroups</a> &gt; <a href="/bin/view/Main/GridGroup" class="twikiLink">GridGroup</a> &gt; <a href="/bin/view/Main/MatyasSelmeci" class="twikiLink">MatyasSelmeci</a> &gt; <a href="/bin/view/Sandbox/MatyasSelmeciSandbox" class="twikiLink">MatyasSelmeciSandbox</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>MatyasSelmeciVoms208Notes</span> <br />    
Topic revision: r12 - 17 Jan 2013 - 01:47:09 - <a href="/bin/view/Main/MatyasSelmeci" class="twikiLink">MatyasSelmeci</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />