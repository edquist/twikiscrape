<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> ForrestChristianInstallingVdt &lt; Sandbox &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/ForrestChristianInstallingVdt?_T=16 Feb 2017" type="application/x-wiki" title="edit ForrestChristianInstallingVdt" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><meta name="robots" content="noindex,nofollow"> 
<base href="https://twiki.opensciencegrid.org/bin/view/Sandbox/ForrestChristianInstallingVdt"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#DDDDDD" />&nbsp;<a href="/bin/view/Sandbox/WebHome">Sandbox Web</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Sandbox/ForrestChristianSandbox" class="twikiLink">ForrestChristianSandbox</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Sandbox/ForrestChristianInstallingVdt" title='Topic revision: 3 (07 Feb 2017 - 19:16:35)'>ForrestChristianInstallingVdt</a> <span class='patternRevInfo'>(07 Feb 2017, <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">%LINKCSS%

---+ Installing the VDT: One Person&#39;s Experience
%TOC%

%NOTE% These are from [[Main.PenelopeConstanta][Penelope Constanta&#39;s]] notes.

Follow the [[http://vdt.cs.wisc.edu/releases/1.3.11/installation.html][VDT installation instructions]] as follows:

---++ Install pacman: 
Create the top level directory that pacman will be installed under and then get and install the package:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;mkdir &amp;#8230;/pacman&lt;/userinput&gt;
$ &lt;userinput&gt;cd &amp;#8230;/pacman&lt;/userinput&gt;
$ &lt;userinput&gt;wget http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-latesttar.gz&lt;/userinput&gt;
$ &lt;userinput&gt;tar xzvf pacman-latest.tar.gz&lt;/userinput&gt;
$ &lt;userinput&gt;cd pacman-3.xx&lt;/userinput&gt;
$ &lt;userinput&gt;source setup.sh&lt;/userinput&gt;    # or setup.csh according to shell used
&lt;/pre&gt;

%NOTE% The first execution of the =setup.sh= or =setup.csh= needs to be done from the pacman-xxx directory.

---++ Install VDT
Full installation requires root access on the machine. The following are the steps in order they need to be done:

   * Create users for the various daemons:
      * =/usr/sbin/adduser -d /home/globus globus=
      * =/usr/sbin/adduser -d /home/monalisa monalisa=
      * =/usr/sbin/adduser -d /home/condor condor=
   * Go to the top-level directory of the VDT installation. Create the =vdt= directory and use pacman to install it. For example:
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;cd /data&lt;/userinput&gt;
$ &lt;userinput&gt;mkdir vdt&lt;/userinput&gt;
$ &lt;userinput&gt;cd vdt&lt;/userinput&gt;
$ &lt;userinput&gt;export VDT_LOCATION=/data/vdt/&lt;/userinput&gt;
&lt;/pre&gt;

---+++ Installing over a previous version of VDT
To install on a system that already has a previous version of VDT you need to stop tomcat and apache. The installation will fail if they are running. 
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;ksu&lt;/userinput&gt;
$ &lt;userinput&gt;service tomcat-5 stop&lt;/userinput&gt;
$ &lt;userinput&gt;service tomcat-55 stop&lt;/userinput&gt;
$ &lt;userinput&gt;service apache stop&lt;/userinput&gt;
&lt;/pre&gt;

---+++ Installing on Scientific Linux
To install on a system running Scientific Linux run pacman as follows:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;pacman   &amp;#8211;pretend-platform:RHEL-3   &amp;#92;
   &amp;#8211;get http://www.cs.wisc.edu/vdt/vdt_139_cache:VDT&lt;/userinput&gt;
&lt;/pre&gt;

Or one might use two commands:
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;pacman   &amp;#8211;pretend-platform:RHEL-3&lt;/userinput&gt;
$ &lt;userinput&gt;pacman &amp;#8211;get http://www.cs.wisc.edu/vdt/vdt_139_cache:VDT&lt;/userinput&gt;
&lt;/pre&gt;

---++ Using VDT
To use VDT, =source= the VDT setup file under the =vdt= directory:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;cd vdt&lt;/userinput&gt;
$ &lt;userinput&gt;source setup.sh&lt;/userinput&gt;   #or setup.csh
&lt;/pre&gt;

---++ Installing Tomcat v5.5


&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;source $PACMAN_LOCATION/setup.sh&lt;/userinput&gt;
$ &lt;userinput&gt;export VDT_LOCATION=/data/vdt_1_3_11&lt;/userinput&gt;
$ &lt;userinput&gt;cd $VDT_LOCATION&lt;/userinput&gt;
$ &lt;userinput&gt;pacman -get http://vdt.cs.wisc.edu/vdt_1311_cache:Tomcat-5.5&lt;/userinput&gt;
&lt;/pre&gt;

---++ Installing VDT Tests

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;source $PACMAN_LOCATION/setup.sh&lt;/userinput&gt;
$ &lt;userinput&gt;source $VDT_LOCATION/setup.sh&lt;/userinput&gt;
$ &lt;userinput&gt;cd $VDT_LOCATION&lt;/userinput&gt;
$ &lt;userinput&gt;pacman -get VDT:VDT-Test&lt;/userinput&gt;
&lt;/pre&gt;

---++ Certificates
Once you have exported from the browser your certificate as a file with extension p12, to get the usercert.pem and userkey.pem files do the following, do not ignore the last step of changing the access rights:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;openssl pkcs12 -in mycertificate.p12 -nocerts -out usercert.pem&lt;/userinput&gt;
 Enter Import Password: 
 MAC verified OK
$ &lt;userinput&gt;openssl pkcs12 -in mycertificate.p12 -nocerts -out userkey.pem&lt;/userinput&gt;
 Enter Import Password: 
 MAC verified OK
 Enter PEM pass phrase:
 Verifying - Enter PEM pass phrase:
$ &lt;userinput&gt;chmod go-rw *.pem&lt;/userinput&gt;
&lt;/pre&gt;

---+++ Get Host and service certificates:
The certificate related files location depends on the answer to the VDT installation question:

&lt;pre class=&quot;screen&quot;&gt;
Where would you like to install CA files?

Choices:
        r (root)  - install into /etc/grid-security/certificates
            (existing CA files will be preserved)
        l (local) - install into $VDT_LOCATION/globus/share/certificates
        n (no)    - do not install
&lt;/pre&gt;

If you answered to be installed as root (r &amp;#8211; root) then the =/etc/grid-security/certificates=
directory is created (if its does exist) and populated. 

If the answer to be installed as local (l &amp;#8211; local) then all the files are under =$VDT_LOCATION/globus/=.

The link =TRUSTED_CA= in the =$VDT_LOCATION/globus/= directory points to your certificate area. 
For example: 
   =TRUSTED_CA= &amp;#8594;  =/etc/grid-security/certificates=

---+++ Get a host certificate using VDT globus installation:
If the installation was done as root, then the =/etc/grid-security doegrids= directory was also created with the appropriate files. (I have not done that local installation for instructions there but something similar undet the =$VDT_LOCATION/globus/= must be installed). The following are the commands to use to get a host certificate, where =cd-psg2.fnal.gov= is the host name for which a certificate is requested:


&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;cd /etc/grid-security/doegrids&lt;/userinput&gt;
$ &lt;userinput&gt;./doegrids-cert-request -host cd-psg2.fnal.gov&lt;/userinput&gt;
&lt;/pre&gt;

This will create three files under =/etc/grid-security=:
   * =hostkey.pem= 
   * =hostcert.pem=
   * =hostcert_request.pem=
   
The script will supply also the following information:

Go to https://pki1.doegrids.org and choose the &quot;Grid or SSL Server&quot; menu item on the Enrollment page. There, cut and paste the file =/etc/grid-security/hostcert_request.pem= into the =PKCS#10= text field. 

An email will be sent with the URL of the certificate. Copy the text under &amp;#8220;Base 64 encoded certificate&amp;#8221; and paste it in =/etc/grid-security/hostcert.pem=.

Under =/etc/grid-security= there are three valid pem files that contain the host certificate.

Get an http service certificate using VDT globus installation:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;cd /etc/grid-security/doegrids&lt;/userinput&gt;
$ &lt;userinput&gt;./doegrids-cert-request &amp;#8211;service http &amp;#8211;host cd-psg2.fnal.gov&lt;/userinput&gt;
&lt;/pre&gt;

This will create two three files under the =/etc/grid-security/http=:
   * =httpkey.pem=
   * =httpcert.pem=
   * =httpcert_request.pem=

The script will supply also the following information:

Go to https://pki1.doegrids.org and choose the &quot;Grid or SSL Server&quot; menu item on the Enrollment page. There, cut and paste the file =/etc/grid-security/http/httpcert_request.pem= into the =PKCS#10= text field. 

An email will be sent with the URL of the certificate. The email has the wrong information about where to copy the certificate, So, copy the text under &amp;#8220;Base 64 encoded certificate&amp;#8221; and paste it into =/etc/grid-security/http/httpcert.pem=.

Under =/etc/grid-security/http= there are three valid pem files that contain the http service certificate.

---+++ Get a host or service certificate
Get a host or service certificate using the doegrids site instructions. The following is if you need to get the scripts from the doegrids site:


---++++ Getting service/host certificates
Get the service/host certificates from [[http://www.doegrids.org/pages/ModelCertificateDeployment.html][Model Certificate Trash/Deployment page]].  Get [[http://pki1.doegrids.org/Other/doegrids.tar][doegrid.tar]].

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;mkdir /etc/grid-security&lt;/userinput&gt;
$ &lt;userinput&gt;cd /etc/grid-security&lt;/userinput&gt;
$ &lt;userinput&gt;tar xvf doegrids.tar&lt;/userinput&gt;
&lt;/pre&gt;

This creates three directories. All information on what to do next is in %BR% =/etc/grid-security/doegrids/README.doegrids=

Before running the /etc/grid-security/doegrids/grid-cert-request,  the following files need to be copied as follows (the script requires these files in order to work properly):

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;cp  /data/vdt/globus/TRUSTED_CA/grid-security.conf.1c3f2ca8    &amp;#92;
   /data/vdt/globus/etc/grid-security.conf&lt;/userinput&gt;
$ &lt;userinput&gt;cp  /data/vdt/globus/TRUSTED_CA/globus-host-ssl.conf.1c3f2ca8    &amp;#92;
   /data/vdt/globus/etc/globus-host-ssl.conf&lt;/userinput&gt;
&lt;/pre&gt;


To create a host or service certificate follow the instructions above this section

 
---++ JCLARENS

---+++ Starting and stopping Apache:

VDT installation adds user daemon to run apache and tomcat as daemon. To change the user you will need to add the new user that apache and tomcat will run under and then modify the =/etc/init.d/{apache, tomcat-5}= services to reflect the new user.

Need to make some changes in the =$VDT_LOCATION/apache/conf/httpd.conf=:

&lt;pre class=&quot;programlisting&quot;&gt;
Listen 80  &lt;em&gt;(port that apache will listen to)&lt;/em&gt;
ServerAdmin &lt;em&gt;adminaddress@wherever.youare&lt;/em&gt;
&lt;/pre&gt;

---++++ To start or stop apache:
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;service apache start&lt;/userinput&gt;
$ &lt;userinput&gt;service apache stop&lt;/userinput&gt;
&lt;/pre&gt;


---+++ Starting Tomcat:
Customize =$VDT_LOCATION/tomcat/v5/conf/server.xml= to include the port that tomcat will run under and the secure ports that jclarens services will use:
&lt;pre class=&quot;programlisting&quot;&gt;
&amp;lt;Connector port=&quot;8080&quot;
   maxThreads=&quot;150&quot; minSpareThreads=&quot;25&quot; maxSpareThreads=&quot;75&quot;
   enableLookups=&quot;false&quot;  acceptCount=&quot;100&quot;
   debug=&quot;0&quot; connectionTimeout=&quot;20000&quot;
   disableUploadTimeout=&quot;true&quot; maxHttpHeaderSize=&quot;8192&quot; /&gt;

&amp;lt;Connector port=&quot;8443&quot;
sSLImplementation=&quot;org.glite.security.trustmanager.tomcat.TMSSLImplementation&quot;
   sslCAFiles=&quot;/etc/grid-security/certificates/*.0&quot;
   crlFiles=&quot;/etc/grid-security/certificates/*.crl_url&quot;
   sslCertFile=&quot;/etc/grid-security/http/httpcert.pem&quot;
   sslKey=&quot;/etc/grid-security/http/httpkey.pem&quot;
   log4jConfFile=&quot;/data/test-vdt/tomcat/v5/conf/log4j-trustmanager.properties&quot;
   maxThreads=&quot;150&quot; minSpareThreads=&quot;25&quot; maxSpareThreads=&quot;75&quot;
   enableLookups=&quot;false&quot; disableUploadTimeout=&quot;true&quot;
   acceptCount=&quot;100&quot; debug=&quot;0&quot; scheme=&quot;https&quot; secure=&quot;true&quot;
   clientAuth=&quot;true&quot; sslProtocol=&quot;TLS&quot; /&gt;

&amp;lt;Connector port=&quot;8009&quot;
   enableLookups=&quot;false&quot; redirectPort=&quot;8443&quot; debug=&quot;0&quot;
   protocol=&quot;AJP/1.3&quot; /&gt;
&lt;/pre&gt;

---++++ To start or stop tomcat:
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;service tomcat-5 start&lt;/userinput&gt;
$ &lt;userinput&gt;service tomcat-5 stop&lt;/userinput&gt;
&lt;/pre&gt;

---+++ Customize jclarens
To create a new service under jclarens the following should be done:

   1. Write the appropriate java application code and place them under the package directory structure naming the top directory =java=, e.g. if the package is =osg.gratia=, then all java files should be under the following directory tree: %BR% =~myhome/GratiaServices/java/osg/gratia=
   1. Since =jclarens= uses the =ant= building tool, do not name any of your java files as:
   * =MyService.java=
   * =MyServiceService.java=
   * =MyServiceServiceLocator.java=
   * =MyServiceSoapBindingImpl.java=
   * =MyServiceSoapBindingStub.java=
   * =MyServiceXmlRpcBinding.java=

The main service call should be in a file named:
   * =MyServiceImpl.java=

The file should look like:
&lt;pre class=&quot;programlisting&quot;&gt;
package osg.gratia;

import java.io.*;
import java.util.ArrayList;
import java.util.Iterator;
import java.io.File;
import org.dom4j.*;
import org.dom4j.io.SAXReader;
import org.hibernate.*;
import org.hibernate.cfg.Configuration;

public class MyServiceImpl implements osg.gratia.MyService {
your service implementation
}
&lt;/pre&gt;

Under the top directory of the source code (for example =~myhome/GratiaServices/=), the following files need to be in place (for an example of these files look at the appendix). You may pickup example files from the [[http://clarens.sourceforge.net/jclarens/][jclarens site]].
   * =build.xml=
   * =MyService.wsdl=
   
Assuming that you have installed the VDT, before doing anything else you need to pickup some environment variables from the package, so:
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;source $VDT_LOCATION/setup.sh&lt;/userinput&gt;   &lt;em&gt;#or setup.csh&lt;/em&gt;
$ &lt;userinput&gt;ant wsdl2java&lt;/userinput&gt;
&lt;/pre&gt;

The ant command will create the following files under your package java directory tree:
   * =MyService.java=
   * =MyServiceService.java=
   * =MyServiceServiceLocator.java=
   * =MyServiceSoapBindingImpl.java=
   * =MyServiceSoapBindingStub.java=
   * =MyServiceXmlRpcBinding.java=
   * =deploy.wsdd=
   * =undeploy.wsdd=

Also, at the top directory structure the following files will be copied (if included in the build file): 
   * =MyService_deploy.wsdd=
   * =MyService_undeploy.wsdd=


At this point you should edit the =MyServiceSoapBindingImpl.java= to contain the specifics for your service, e.g.:

&lt;pre class=&quot;programlisting&quot;&gt;
package osg.gratia;

public class CollectorSoapBindingImpl implements osg.gratia.MyService {
    public java.lang.String MyServiceRoutine(java.lang.String MyArg1, java.lang.String MyArg2) 
    throws java.rmi.RemoteException {
        return null;
    }
}
&lt;/pre&gt;

Now you need to compile the sources and create the jar files. Use ant and the associated =build.xml= file for this. Remember to include any jar libraries required in the build path. This step will create the directory classes and the main service jar file =MyService.jar=:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;ant jar&lt;/userinput&gt;
&lt;/pre&gt;

Before going to the installation step, the =MyService_service.properties= jclarens-specific file needs to be edited. For an example look at the appendix.

The next step is to install the service under jclarens (=$VDT_LOCATION/tomcat/v5/webapps/jclarens=)
The steps for this are simply to copy the created files to certain locations. Look at the =build.xml= file example.

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;ant install&lt;/userinput&gt;
&lt;/pre&gt;

Once this is done, you need to add the service to jclarens. To do so:
&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;cd $VDT_LOCATION/tomcat/v5/webapps/jclarens/ &lt;/userinput&gt;
&lt;/pre&gt;

Edit =xmlrpc_handlers.properties= and add the following line:
&lt;pre class=&quot;programlisting&quot;&gt;
service.MyService.properties= MyService_service.properties
&lt;/pre&gt;


The general JClarens configuration is stored at =$VDT_LOCATION/tomcat/v5/webapps/jclarens/xmlrpc_handlers.properties=. The following were changed: 
   * &lt;tt&gt;service.system.hostKeyPass=password&lt;/tt&gt;
   * &lt;tt&gt;clarens.admin=&lt;/tt&gt;

The following were commented (could not find these files): 
   * =# clarens.trustStore=/usr/lib/jclarens/jakarta-tomcat-5.0.28/webapps/jclarens/keystores/cacerts.jks=
   * =#  clarens.trustStorePassword=changeit=


---++++ Java
&lt;pre class=&quot;programlisting&quot;&gt;
CollectorImpl.java
CollectorImpl.java.debug
Collector.java
CollectorService.java
CollectorServiceLocator.java
CollectorSoapBindingImpl.java
CollectorSoapBindingStub.java
CollectorXmlRpcBinding.java
DateElement.java
deploy.wsdd
DurationElement.java
FloatElement.java
IntegerElement.java
JobIdentity.java
JobUsageRecord.java
KeyInfoType.java
RecordIdentity.java
ResourceElement.java
StringElement.java
undeploy.wsdd
UsageRecordLoader.java
UsageRecordLoader.java.debug
UserIdentity.java
Utils.java
Utils.java.debug
Utils.java.orig
XmlElement.java
&lt;/pre&gt;

---++++ Src
&lt;pre class=&quot;programlisting&quot;&gt;
CollectorImpl.java          
Collector.java           
DateElement.java            
DurationElement.java     
FloatElement.java     
IntegerElement.java   
JobIdentity.java
JobUsageRecord.java
KeyInfoType.java
RecordIdentity.java
ResourceElement.java
StringElement.java
UsageRecordLoader.java
UserIdentity.java
Utils.java
XmlElement.java
&lt;/pre&gt;


---+++ Discovery Service
The Discovery Service has two configuration files, but only one needs to be customized: %BR% =$VDT_LOCATION/tomcat/v5/webapps/jclarens/mlstore.properties=

The Discovery Service group, defined by the &lt;tt&gt;lia.Monitor.Group = Test&lt;/tt&gt; property, must match the group set in the Trash.ReleaseDocumentationMonALISA configuration =$VDT_LOCATION/MonaLisa/Service/VDTFarm/ml.properties=.

%BOTTOMMATTER%
-- Main.PenelopeConstanta -- created the notes %BR%
-- Main.ForrestChristian - transcribed and edited %BR%</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Sandbox/ForrestChristianInstallingVdt?t=1487267488;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Sandbox/ForrestChristianInstallingVdt' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Sandbox/ForrestChristianInstallingVdt?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Sandbox/ForrestChristianInstallingVdt?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r3&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/ForrestChristianInstallingVdt?rev1=3;rev2=2">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/ForrestChristianInstallingVdt?rev=2">r2</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/ForrestChristianInstallingVdt?rev1=2;rev2=1">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/ForrestChristianInstallingVdt?rev=1">r1</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Sandbox/ForrestChristianInstallingVdt?template=backlinksweb' rel='nofollow' title='Search the Sandbox Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Sandbox/ForrestChristianInstallingVdt' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Sandbox/ForrestChristianInstallingVdt?template=oopsmore&amp;param1=3&amp;param2=3' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r3 - 07 Feb 2017 - 19:16:35 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top"><br/>Register</a>
<p />
<p />
<!-- Google CSE Search Box Ends
<h5><a name="Common_links"></a> Common links </h5> <ul>
<li> <a href="/bin/view/Main/WebHome" class="twikiLink">OSG TWiki home</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome" class="twikiLink">RPM Install guides - OSG 3.0</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Pacman Install guides OSG 1.2</a>
</li> <li> <a href="/bin/view/Documentation/WebHome" class="twikiLink">Technical Documentation</a>
</li> <li> <a href="/bin/view/Documentation/SiteAdminResources" class="twikiLink">Contact Info</a> 
</li> <li> <strong><a href="/bin/view/Main/ICantFindItForm" class="twikiLink">I can't find it!</a></strong>  -->
</li></ul> 
<div class="container">
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="Home">About the OSG</a></div>
        <div id="item"><a  style="" href="/bin/view/Documentation/UsingTheGrid" class="twikiLink" title="Instructions for Using OSG">New Users</a></div>
        <div id="item"><a href="http://myosg.grid.iu.edu/map?map_attrs_shownr=on&amp;all_sites=on&amp;active=on&amp;active_value=1&amp;disable_value=1&amp;gridtype=on&amp;gridtype_1=on" target="_top">OSG Sites</a></div>
        <div id="item"><a  style="" href="http://myosg.grid.iu.edu/vosummary?all_vos=on&amp;active=on&amp;active_value=1&amp;datasource=summary" target="_top" title="List of Virtual Organizations">OSG VOs</a></div>
        <div id="item"><a href="http://display.grid.iu.edu/" target="_top">OSG Usage Graphs</a></div>
        <div id="item"><a  style="" href="https://indico.fnal.gov/categoryDisplay.py?categId=86" target="_top" title="OSG Event Calendar">Events</a></div>
       <div id="item"><a href="/bin/view/Management/OSGOrganizationInformation" class="twikiLink">OSG Organization</a></div>
<p />
    </div>
<p />
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head">OSG at Work</div>
        <div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Official Documentation Home">Technical Documentation</a></div>
        <div id="item"><a href="/bin/view/Security/WebHome" class="twikiLink">Security</a></div>
        <div id="item"><a href="/bin/view/SoftwareTeam/WebHome" class="twikiLink">Software Team</a></div>
        <div id="item"><a href="/bin/view/Education/WebHome" class="twikiLink">Education</a></div>
        <div id="item"><a href="/bin/view/Management/WebHome" class="twikiLink">Management</a></div>
        <div id="item"><a  style="" href="/bin/view/Management/ScientificPublications" class="twikiLink" title="Scientific Publications and Citing OSG">Scientific Publications</a></div>
        <div id="item"><a href="/bin/view/Management/OSGResearchHighlights" class="twikiLink">Research Highlights</a></div>
    </div>
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Sandbox/ForrestChristianInstallingVdt"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Sandbox/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Sandbox" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Sandbox"></a>  <a href="/bin/view/Sandbox/WebHome" class="twikiCurrentWebHomeLink twikiLink">Sandbox</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/ForrestChristianInstallingVdt?t=1487267488;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Sandbox/ForrestChristianInstallingVdt" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Sandbox/ForrestChristianInstallingVdt?pdftitle=ForrestChristianInstallingVdt" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>