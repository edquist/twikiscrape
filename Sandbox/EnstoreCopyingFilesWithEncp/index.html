<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> EnstoreCopyingFilesWithEncp &lt; Sandbox &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/EnstoreCopyingFilesWithEncp?_T=16 Feb 2017" type="application/x-wiki" title="edit EnstoreCopyingFilesWithEncp" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><meta name="robots" content="noindex,nofollow"> 
<base href="https://twiki.opensciencegrid.org/bin/view/Sandbox/EnstoreCopyingFilesWithEncp"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <link rel="stylesheet" type="text/css" href="https://twiki.opensciencegrid.org/twiki/pub/Documentation/Tools/exercises.css">
<h1><a name="Copying_Files_with_encp"></a>  Copying Files with encp </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Setup_encp"> Setup encp </a>
</li> <li> <a href="?cover=print#Encp_Command_Syntax_and_Usage"> Encp Command Syntax and Usage</a>
</li> <li> <a href="?cover=print#Copy_Files_to_and_from_Enstore_M"> Copy Files to and from Enstore Media </a> <ul>
<li> <a href="?cover=print#Run_encp"> Run encp </a>
</li> <li> <a href="?cover=print#Examples"> Examples </a>
</li></ul> 
</li> <li> <a href="?cover=print#Additional_Diagnostic_Executable"> Additional Diagnostic Executables </a> <ul>
<li> <a href="?cover=print#ecrc"> ecrc </a>
</li> <li> <a href="?cover=print#ddencp"> ddencp </a> <ul>
<li> <a href="?cover=print#Usage"> Usage </a>
</li></ul> 
</li> <li> <a href="?cover=print#en_check"> en_check </a> <ul>
<li> <a href="?cover=print#Usage_AN1"> Usage </a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#More_About_encp"> More About encp </a> <ul>
<li> <a href="?cover=print#Preventing_Unwanted_Overwriting"> Preventing Unwanted Overwriting </a>
</li> <li> <a href="?cover=print#Killing_an_encp_Job"> Killing an encp Job </a>
</li> <li> <a href="?cover=print#Encp_Transfer_Rates_Defined"> Encp Transfer Rates Defined </a>
</li> <li> <a href="?cover=print#Isolating_Source_of_Bottlenecks"> Isolating Source of Bottlenecks </a>
</li> <li> <a href="?cover=print#Encp_Error_Handling"> Encp Error Handling </a>
</li> <li> <a href="?cover=print#Finding_files_in_different_Ensto"> Finding files in different Enstore systems </a> <ul>
<li> <a href="?cover=print#File_reads"> File reads</a>
</li> <li> <a href="?cover=print#File_writes"> File writes</a>
</li></ul> 
</li> <li> <a href="?cover=print#Order_of_Processing_Queued_Reque"> Order of Processing Queued Requests </a>
</li> <li> <a href="?cover=print#NULL_File_Directories"> NULL File Directories </a>
</li> <li> <a href="?cover=print#Important_Environment_Variables"> Important Environment Variables </a>
</li></ul> 
</li> <li> <a href="?cover=print#Encp_Command_Options"> Encp Command Options</a>
</li></ul> 
</div>
<p />
<p />
<form name="EDITTHIS" action="/bin/edit/Sandbox/EnstoreCopyingFilesWithEncp" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487268886" name="t"></form>
<p />
encp is an end-user command used to copy data files from disk to storage media and vice-versa. Its use is being discouraged in favor of the dCache, however we document it here for completeness. 
<p />
Encp is maintained in KITS and in AFS product space as a separate product from Enstore, and is designed to be used in conjunction with it. Encp does not support recursive copies of data to and from Enstore; ensync is provided as a wrapper to encp for that purpose when writing to Enstore, see <a href="/bin/view/Sandbox/EnstoreCopyingDirStructuresWithEnsync" class="twikiLink">Copying Directory Structures with Ensync</a>. Encp can copy multiple files to a single directory only. Encp can be used only from on-site machines in the fnal.gov domain. For off-site use, see section <a href="/bin/view/Documentation/StorageDcacheCopying" class="twikiLink">Using the dCache to Copy Files to/from Enstore</a>. 
<p />
In this chapter, we assume you have UPS/UPD running on your local machine. 
<p />
<p />
<h1><a name="Setup_encp"></a> Setup encp </h1>
To setup encp, run the command: 
<p />
<pre>
setup -q &#60;qualifier&#62; encp
</pre>
<p />
where &lt;qualifier&gt; stands for one of the Enstore system hosts. Currently, these include: 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">stken</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> for general Fermilab (and CMS) users </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">d0en</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> for D0 users </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">cdfen</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> for CDF users </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
For example, a CDF experimenter would type: 
<p />
<pre class="screen">
$ <b>setup -q cdfen encp</b>
</pre>
<p />
If you don't specify the qualifier, the environment variable <code>ENSTORE_CONFIG_HOST</code> may get set to the wrong value (see <a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#ImportantEnvironmentVariables" class="twikiCurrentTopicLink twikiAnchorLink">Important Environment Variables</a>). Check that <code>ENSTORE_CONFIG_HOST</code> specifies the correct server. 
<p />
<p />
<h1><a name="Encp_Command_Syntax_and_Usage"></a> Encp Command Syntax and Usage </h1>
<code>encp</code> plays the same role in the Enstore system that cp plays in UNIX. 
<p />
<pre>
 &#37; encp &#91;&#60;options&#62;] &#60;source&#95;file&#62; &#60;destination&#95;file&#62;
</pre>
<p />
With the exception of the option <code>--help</code>, we defer the list and definitions of options to <span class="twikiNewLink">encp Command Options<a href="/bin/edit/Sandbox/EncpCommandOptions?topicparent=Sandbox.EnstoreCopyingFilesWithEncp" rel="nofollow" title="encp Command Options (this topic does not yet exist; you can create it)">?</a></span>, and instead proceed with usage information. 
<p />
Use the <code>--help</code> option to request the option listing for encp (see <span class="twikiNewLink">encp Command Options<a href="/bin/edit/Sandbox/EncpCommandOptions?topicparent=Sandbox.EnstoreCopyingFilesWithEncp" rel="nofollow" title="encp Command Options (this topic does not yet exist; you can create it)">?</a></span>), or the <code>--usage</code> option for syntax information: 
<p />
<pre class="screen">
% <b>encp --usage</b>

  encp [OPTIONS]... <source file> <destination file>
  encp [OPTIONS]... <source file> [source file [...]]\<destination>
</pre>
<p />
<p />
<h1><a name="Copy_Files_to_and_from_Enstore_M"></a> Copy Files to and from Enstore Media </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Run_encp"></a> Run encp </span></h2>
First, setup encp (using the -q flag). You can use filename expansion (wildcard characters to specify a group of files). We recommend, however, that you copy one file at a time. Run the command as follows to copy a file to Enstore: 
<p />
<pre>
encp &#91;&#60;options&#62;] /&#60;path-to&#62;/.../&#60;localfilename&#62; \
  /pnfs/&#60;storage-group&#62;/.../&#60;targetdir&#62;/&#60;remotefilename&#62;
</pre>
<p />
The presence of /pnfs/ in the destination path indicates that this is a copy to the Enstore system (see section 1.2 PNFS Namespace). To copy from Enstore, change the source and destination file specifications, e.g.,: 
<p />
<pre>
&#37; encp &#91;&#60;options&#62;] /pnfs/&#60;storage-group&#62;/.../&#60;targetdir&#62;/&#60;remotefilename&#62; \ 
   /&#60;path-to&#62;/.../&#60;localfilename&#62; 
</pre>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Examples"></a> Examples </span></h2>
Standard copy to Enstore; no options. Copy myfile to the directory <code>/pnfs/expt1/subdir/</code>: 
<p />
<pre class="screen">
% <b>encp /path/to/myfile /pnfs/expt1/subdir/</b>
</pre>
<p />
Standard copy; no options. Download <code>/pnfs/expt1/subdir/myfile</code> to a different local directory from the cwd, and change the filename: 
<p />
<pre class="screen"> 
% <b>encp /pnfs/expt1/subdir/myfile /other/local/dir/newfilename</b>
</pre>
<p />
<p />
Request the process to output some information to screen (--verbose). Again, copy myfile to the directory /pnfs/expt1/subdir/: 
<p />
<pre class="screen">
% <b>encp --verbose 3 /path/to/myfile /pnfs/expt1/subdir/</b>
</pre>
<p />
Copy all the files in the cwd starting with the string trigger1 to <code>/pnfs/expt1/subdir/</code>: 
<p />
<pre class="screen">
% <b>encp ./trigger1* /pnfs/expt1/subdir/</b>
</pre>
<p />
Copy all the files in <code>/pnfs/expt1/subdir/</code> starting with the string trigger1 to the cwd: 
<p />
<pre class="screen">
% <b>encp /pnfs/expt1/subdir/trigger1* .</b>
</pre>
<p />
<p />
<h1><a name="Additional_Diagnostic_Executable"></a> Additional Diagnostic Executables </h1>
Packaged with encp are three executables: <ul>
<li> ecrc: calculates the CRC of a file located on disk
</li> <li> ddencp: file to file copy using the same mechanism that encp uses.
</li> <li> en_check: reports if the specified file is on tape. 
</li></ul> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ecrc"></a> ecrc </span></h2>
Usage: 
<p />
<pre>
   ecrc &#91;-0 &#124; -1] &#91;-d &#124; -h &#124; -H &#124; -a] &#91;-v] &#60;file&#95;name&#62;
</pre>
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-0</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Use enstore's 0 seeded adler32 CRC algorithm. (default) </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-1</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Use the standardized 1 seeded adler32 CRC algorithm. The actual adler32 algorithm says that the CRC value shoule be initialized to 1. Enstore uses 0 for this value; not 1. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-d</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Display the output in decimal form (default). </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-h</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Display the output in lower case hexidecimal form. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-H</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Display the output in upper case hexidecimal form. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">-a</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> Display both the zero and one seeded CRCs in decimal and hexidecimal. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
For example,
<p />
<pre class="screen">
$ <b>ecrc -v ~/test_files/10MB_002</b>

  size 10485760 buf_size 1048576 blocks 10 rest 0 
  CRC 1294565006
</pre>
<p />
To see what CRC information Enstore knows, see <span class="twikiNewLink">EnstorePnfs<a href="/bin/edit/Sandbox/EnstorePnfs?topicparent=Sandbox.EnstoreCopyingFilesWithEncp" rel="nofollow" title="EnstorePnfs (this topic does not yet exist; you can create it)">?</a></span>, in particular the --xref option of the enstore pnfs command. 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ddencp"></a> ddencp </span></h2>
<code>ddencp</code> copies a local file to another local file. It uses the same mechanism that encp uses. Its uses include: measuring disk rates, checking for disk problems and determining which filesystems support different types of i/o. 
<p />
<h3><a name="Usage"></a> Usage </h3>
<p />
<pre>
   ddencp &#91;-cevt] &#91;-a &#60;# of buffers&#62;] &#91;-b &#60;buffer size&#62;] \
   &#91;-l &#60;mmap buffer size&#62;] &#91;-dmSDR] &#60;source&#95;file&#62; &#91;-dmSDR] \
   &#60;dest&#95;file&#62;
</pre>
<p />
Where:
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-c</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Remove the source file's contents from the filesystems buffer cache before performing the file transfer. This allows the user to always read from disk and get more accurate rates. This option does not work on all systems. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-e</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Performs a complete readback and CRC check of the destination file. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-v</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Print out verbose information. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-t</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Use the multithreaded implementation. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-d</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Use direct i/o instead of POSIX i/o. This type of i/o bypasses the filesystem's buffer cache. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-m</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Use memmory mapped i/o instead of POSIX i/o. If -t is also specified the -t switch is ignored. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-S</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Use the O_SYNC option when opening the file. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-D</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Use the O_DSYNC option when opening the file. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-R</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Use the O_RSYNC option when opening the file. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-a</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> When used with -t, this option specifies the number of buffers that are used for the transfer. (default 3) </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">-b</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> This specifies the size of the transfer buffer. When used with the -t option, this is the size of each of the buffers. (default 256K) </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">-l</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> When using memmory mapped i/o, -m, this is the size of each segment of file that is mapped at one time. (default 256K) The position of the -d, -m, -S, -D and -R switches does effect the behavior. If the switch appears before the source_file, then it is active for just the source file. If it appears after the source file, but before the destination file then it only effects the destination file. To use the same switch for both the source and destination it must be specifed twice, once for each file. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="en_check"></a> en_check </span></h2>
<code>en_check</code> determines if a file is on tape. 
<p />
<h3><a name="Usage_AN1"></a> Usage </h3>
<p />
<pre class="screen">
en_check <pnfs_path>
</pre>
<p />
Results (exit statuses): 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">0</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> file is on tape </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">1</font> </th>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> file is not on tape </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">2</font> </th>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> it was unable to determine (at this time) if it is on tape or is not on tape </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
 Reasons for exit status 2 include but are not limited to: 
    * Enstore is down for maintenance
    * the tape on which the file is believed to exist is in NOACCESS or NOTALLOWED state.
<p />
With the use of dCache, obtaining a non-success exit status is expected until dCache writes the file into Enstore. 
<p />
<p />
<h1><a name="More_About_encp"></a> More About encp </h1>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Preventing_Unwanted_Overwriting"></a> Preventing Unwanted Overwriting </span></h2>
When an encp job starts, it first creates a zero length output file for every input file. In this way it reserves the necessary filenames and thus prevents another party from starting a competing encp process which would clobber the first. 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Killing_an_encp_Job"></a> Killing an encp Job </span></h2>
There are four traditional ways to abort a process: 
<p /> <ul>
<li> Ctrl-C (SIGINT) 
</li> <li> Ctrl-\ (SIGQUIT) 
</li> <li> kill (SIGTERM) 
</li> <li> kill -9 (SIGKILL) 
</li></ul> 
<p />
The first three result in encp removing any remaining zero length files (as discussed directly above). With a &#8220;kill -9&#8221;, no cleanup occurs. For multi-file transfers, files successfully transferred before the signal is caught will be left alone. 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Encp_Transfer_Rates_Defined"></a> Encp Transfer Rates Defined </span></h2>
You can find out the network rates by running the command encp --verbose 1 or from the Encp History page (see section 10.10 Encp History). 
<p /> <dl>
<dt> <strong>Network transfer rate</strong> </dt><dd> The rate at which the file was transferred over the network between the encp node and the mover node, in megabytes per second. 
</dd></dl> 
<p /> <dl>
<dt> <strong>Transfer rate</strong> </dt><dd> The rate measured when moving the file between the disk local to encp and the tape, in megabytes per second (includes reading file, network transfer of file and writing file, does not include tape mount or seek times). 
</dd></dl> 
<p /> <dl>
<dt> <strong>Drive rate</strong> </dt><dd> The rate measured when reading/writing from/to the tape drive, in megabytes per second. 
</dd></dl> 
<p /> <dl>
<dt> <strong>Disk rate</strong> </dt><dd> The rate of reading/writing the file from/to the disk local to encp, in megabytes per second. 
</dd></dl> 
<p /> <dl>
<dt> <strong>Overall rate</strong> </dt><dd> The rate for the overall process (from when the mover connects to encp until the mover sends its final &#8220;success or failure&#8221; message to encp), including all encp and media overhead, in megabytes per second (this does not include time spent in the library manager queue). 
</dd></dl> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Isolating_Source_of_Bottlenecks"></a> Isolating Source of Bottlenecks </span></h2>
Encp (as of v3_1) supports isolating the rate transfers in the tape, disk and network via the option --threaded used in conjunction with the option --verbose with a value of 1 or higher. If --threaded is not specified, then the network and disk rates are calculated the same way as before, and display the same value as one another. The various rates are defined in the online monitoring pages, under <a href="http://www-stken.fnal.gov/enstore/encpHelp.html" target="_top">Encp History Help</a>.
<p />
Here is an example without <code>--threaded</code> (with off-topic output removed for brevity): 
<p />
<pre class="screen">
 % <b>encp --verbose 1 /pnfs/xyz/10MB_002 /tmp/myfile</b>
	...
  Transfer /pnfs/xyz/10MB_002 -> /tmp/myfile: 10485760 bytes

  copied from 'TEST01' at 1.57 MB/S 
  (1.67 MB/S network) (2.87 MB/S drive) (1.67 MB/S disk) 
  ... 
  Completed transferring 
  14.2875500917 sec. 
  10485760 bytes in 1 files in 
  Overall rate = 0.7 MB/sec. Drive rate = 2.87 MB/sec. 
  Network rate = 1.67 MB/sec. Exit status = 0. 
</pre>
<p />
Note in the above output, the network and disk rates are the same. Here is an example with <code>--threaded</code> and <code>--verbose 1</code> (abbreviated output); note that the rates are separated, so that you can see where the bottleneck is (the disk, in this case):
<p />
<pre class="screen">
% <b>encp --verbose 1 --threaded /pnfs/xyz/10MB_002 /tmp/myfile </b>
  ... 
  Transfer /pnfs/xyz/10MB_002 -> /tmp/myfile: 
  10485760 bytes copied from &#8216;TEST01&#8217; at 2.41 MB/S 
  (8.09 MB/S network) (9.36 MB/S drive) (2.71 MB/S disk) 
  ... 
  Completed transferring 
  14.9129179716 sec. 
  10485760 bytes in 1 files in 
  Overall rate = 0.671 MB/sec. Drive rate = 9.36 MB/sec. 
  Network rate = 8.09 MB/sec. Exit status = 0. 
</pre>
<p />
The network and drive each have rates above 8 MB/s, and the disk rate is only 2.71 MB/s. 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Encp_Error_Handling"></a> Encp Error Handling </span></h2>
<code>encp</code> has functionality to retry and resubmit requests, where we distinguish between these two terms. Encp will retry (i.e., resend) a request after an error occurs. Encp will resubmit a request if it has been waiting for a mover for over 15 minutes; this is not due to an error condition but rather to keep queues current regardless of the server condition. The encp exit statuses are zero (0) for success, one (1) for error. 
<p />
There are two general classifications of errors in encp: those that can be retried and those that can&#8217;t. Three &#8220;retriable&#8221; errors can occur before the error &#8220;TOO_MANY_RETRIES&#8221; occurs. 
<p />
The most common nonretriable errors include:  <dl>
<dt> <code>NOACCESS</code> </dt><dd> the system has marked the volume as &#8220;potentially&#8221; bad 
</dd> <dt> <code>NOTALLOWED</code> </dt><dd> an enstore administrator has marked a tape as unavailable for user access USERERROR usually is a file accessibility problem (doesn&#8217;t exist, has wrong permissions, etc.) 
</dd></dl> 
<p />
Among the less common ones, there are: 
<p /> <dl>
<dt> <code>VERSION_MISMATCH</code> </dt><dd>  the encp version is no longer compatible with the running Enstore system 
</dd> <dt> <code>CRC_MISMATCH</code> </dt><dd> indicates a corruption error 
</dd> <dt> <code>FILE_WAS_MODIFIED</code> </dt><dd> encp determined that another file modified the file during the transfer 
</dd></dl> 
<p />
Ask your Enstore administrator if you see others. 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Finding_files_in_different_Ensto"></a> Finding files in different Enstore systems </span></h2>
<h3><a name="File_reads"></a> File reads </h3>
When reading from Enstore, encp can determine whether the current value of $ENSTORE_CONFIG_HOST (see section <a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#ImportantEnvironmentVariables" class="twikiCurrentTopicLink twikiAnchorLink">Important Environment Variables</a>) is pointing to the Enstore system that contains the requested file. If it points to the wrong one, encp will try the other Enstore installations to find the requested file. If the file is found, encp will retrieve the file; if the file is not found on any Enstore system, an error is returned to the user. 
<p />
<h3><a name="File_writes"></a> File writes </h3>
When writing to Enstore; the value of $ENSTORE_CONFIG_HOST is always used.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Order_of_Processing_Queued_Reque"></a> Order of Processing Queued Requests </span></h2>
For reads, files are sorted out by volume. When all files from a single volume are complete, the next volume&#8217;s files are requested. 
<p />
For writes, one file at a time is submitted to the library manager. The order is that in which the files are specified on the command line. The tape is kept mounted during file writes on a best-effort basis. See Chapter 11: Job Priority and Queue Management for more information.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="NULL_File_Directories"></a> NULL File Directories </span></h2>
When encp accesses files via a null mover, a directory in the filepath must contain the name NULL, e.g., /pnfs/expt1/NULL/myfile. 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Important_Environment_Variables"></a> Important Environment Variables </span></h2>
There are two important environment variables that are generally set in the Enstore setup script. Users who work on more than one Enstore system (e.g., stken and cdfen) at a time in different windows may need to know about these in case they use the wrong window for a particular Enstore system! 
<p />
The variables are: 
<p /> <dl>
<dt> <code>&#36;ENSTORE_CONFIG_HOST</code> </dt><dd> points to the Enstore server that is running the configuration server (see section 8.6 Configuration Server).  <br />      All production systems currently use srv2 (i.e., cdfensrv2, d0ensrv2 or stkensrv2) as the $ENSTORE_CONFIG_HOST computer. This is different from the computer from which the pnfs filesystem is mounted (which is srv1, i.e., cdfensrv1, d0ensrv1, stkensrv1). 
</dd> <dt> <code>&#36;ENSTORE_CONFIG_PORT</code> </dt><dd> sets the port number; the value is (by convention) 7500 for all installations at Fermilab. 
</dd></dl> 
<p />
<p />
<h1><a name="Encp_Command_Options"></a> Encp Command Options </h1>
Options with <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> icons must be used with utmost care. These options, if misused, can adversely affect not only your jobs, but those of others. 
Options with <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> icons, if misused, may adversely affect your own job. They will not affect others' jobs. 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table5" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --age-time &lt;AGE_TIME&gt;<sup> <a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#FootnoteStop" class="twikiCurrentTopicLink twikiAnchorLink">&dagger;&dagger;</a></sup> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Specifies the time period, in minutes, after which the priority is eligible to change from the initial job priority. We recommend that you don&#8217;t set this, just use the default (which is &#8220;never&#8221;). </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --array-size &lt;ARRAY_SIZE&gt; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Sets the number of buffers in the array. If --threaded is specified but this option is not, array-size defaults to 3. If this is used without --threaded, this value becomes 1 and is ignored. Changing this value for multi-threaded transfers may increase transfer speed. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --buffer-size &lt;BUFFER_SIZE&gt; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Sets the number of bytes of data to transfer at one time (default is 256k). Increasing this value may increase transfer speed. This value must remain lower than the available memory. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --bypass-filesystem-max-filesize-check </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Disables the check to protect against the user reading from Enstore a file larger than the maximum size file the local filesystem supports. Use this switch with care. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --check </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Checks that enstore is running, that the metadata is ok, and that encp would thus start. Running the encp command successfully using this switch is not sufficient to guarantee that a transfer would succeed.   <br />     Result of 0 is success, 1 is failure, 2 means indeterminable at this time. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --data-access-layer </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Turns on special status printing; output has standardized format whether error occurred or not. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --delayed-dismout &lt; DELAY&gt; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Specifies time period in minutes to delay dismount of volume. Use this to tell Enstore: &#8220;More work is coming for the volume, don&#8217;t dismount the volume too quickly once the current transfer is completed.&#8221; </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --delpri &lt;DELPRI&gt;<sup> <a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#FootnoteStop" class="twikiCurrentTopicLink twikiAnchorLink">&dagger;&dagger;</a></sup> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Changes the initial job priority by specified value after a period given by the age-time switch. We recommend that you don&#8217;t set this, just use the default (1). </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --direct-io </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Uses direct I/O for disk access on supporting file systems<a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#FootnoteDirectIo" class="twikiCurrentTopicLink twikiAnchorLink">&dagger;</a>. Generally, direct I/O makes disk access slower. But when the size of the read/write buffer is made large enough, say, 64Mb or larger, direct I/O is faster because of the skipped memory-to-memory copy. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --ecrc </td>
			<td bgcolor="#f2f3f6" colspan="2" valign="top" class="twikiTableCol2"> "Enstore crc". This can be used when reading from Enstore. After a file is written to disk, this causes Enstore to reread the disk copy of the file and recalculate the checksum on it. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --ephemeral<sup><a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#FootnoteEphemeral" class="twikiCurrentTopicLink twikiAnchorLink">&dagger;</a></sup> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> This option creates a temporary file family of name &#8220;ephemeral&#8221;, and copies files to this ephemeral file family on storage media in the order specified. Overrides file family tag in /pnfs destination directory. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --file-family &lt;FILE_FAMILY&gt;<sup><a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#FootnoteEphemeral" class="twikiCurrentTopicLink twikiAnchorLink">&Dagger;</a></sup> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> This is used to write data on volumes assigned to specified file family. Overrides file family tag in /pnfs destination directory. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --help </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Displays the list of options for encp. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --mmap-io </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Uses memory-mapped I/O for disk access on supporting file systems (see the Enstore Glossary for an explanation). Make sure you have read and write permissions on the file. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --mmap-size &lt;MMAP_SIZE&gt; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> The amount of data to map from the file to local memory at one time in bytes (default is 96Mb); use with --mmap-io. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --no-crc </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Tells encp to bypass the crc1 on the local file. (For the minor performance enhancement that this affords, you lose both the encp crc and the one performed by the mover; we discourage use of this option.) </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --pnfs-is-automounted </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Typically, users should not automount pnfs. If you do, you can specify this option. It alerts encp to retry errors due to known OS automounting problems. Do not use this in non-automounted cases; it can slow the setup of the transfer. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="stop" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/stop.gif" height="16" border="0" /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --priority &lt;PRIORITY&gt;<sup> <a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#FootnoteStop" class="twikiCurrentTopicLink twikiAnchorLink">&dagger;&dagger;</a></sup> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Sets the initial job priority to the specified integer value. We recommend that you don&#8217;t set this, just use the default. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --threaded </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Multithreads the actual data transfer. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> --usage </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Displays information about the encp options. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> --verbose &lt;LEVEL&gt; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Changes the amount of information printed about the transfer; provide an integer value. Default is 0. Larger integer numbers provide more &#8220;verbosity&#8221;. Largest meaningful number may change as development continues. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> --version </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Displays encp version information. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<a name="FootnoteDirectIo"></a>
 $ <strong><sup>&dagger;</sup></strong>: Direct I/O is not universally supported; some filesystems, versions of filesystems, kernels, etc. do not support it. If this doesn&#8217;t work for you, contact an enstore admin, and communicate your kernel, library versions, filesystem and filesystem version.
<a name="FootnoteEphemeral"></a> <dl>
<dt> <strong><sup>&Dagger;</sup></strong> </dt><dd> The options --ephemeral and --file-family require care when used so that tapes do not get mounted in a way that causes improper and/or inefficient tape usage. Beware of runaway scripts! |
</dd></dl> 
<a name="FootnoteStop"></a> <dl>
<dt> <strong><sup>&dagger;&dagger;</sup></strong> </dt><dd> If you feel compelled to set <code>--age-time</code>, <code>--delpri</code> or <code>--priority</code>, please email <code>enstore-admin at fnal gov</code> first with an explanation, as the defaults should work in almost all cases and changing them may affect other users. Priority goes in strict number sequence, where a higher number means higher priority. Note that Enstore's selection of which file to transfer at a given time uses a much more complicated algorithm than simple priority, however. See Chapter 11: Job Priority and Queue Management. 
</dd></dl> 
<p />
<p />
<p />
%BOTTOMMATTER%</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Sandbox<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a> &gt; <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> &gt; <a href="/bin/view/Sandbox/ForrestChristianSandbox" class="twikiLink">ForrestChristianSandbox</a> &gt; <a href="/bin/view/Sandbox/EnstoreIntro" class="twikiLink">EnstoreIntro</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>EnstoreCopyingFilesWithEncp</span> <br />    
Topic revision: r4 - 13 Mar 2007 - 15:29:44 - <span class="twikiNewLink">ForrestChristian<a href="/bin/edit/Sandbox/ForrestChristian?topicparent=Sandbox.EnstoreCopyingFilesWithEncp" rel="nofollow" title="ForrestChristian (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />