<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> BeStMan &lt; ReleaseDocumentation &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/ReleaseDocumentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/ReleaseDocumentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/ReleaseDocumentation/BeStMan?_T=16 Feb 2017" type="application/x-wiki" title="edit BeStMan" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/ReleaseDocumentation/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/ReleaseDocumentation/BeStMan"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#9999FF;
	}
	.patternBookView {
		border-color:#9999FF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('https://twiki.opensciencegrid.org/twiki/pub/ReleaseDocumentation/BeStMan/centerpageborder-rd.css');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Berkley_Storage_Manager_BeStMan"></a> Berkley Storage Manager (BeStMan) </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#About_this_Document"> About this Document</a>
</li> <li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#Engineering_Considerations"> Engineering Considerations</a>
</li> <li> <a href="?cover=print#How_to_get_Help"> How to get Help?</a>
</li> <li> <a href="?cover=print#Requirements"> Requirements</a>
</li> <li> <a href="?cover=print#BeStMan_Installation_Procedure"> BeStMan Installation Procedure </a> <ul>
<li> <a href="?cover=print#Verify_Xinetd_Status"> Verify Xinetd Status</a>
</li> <li> <a href="?cover=print#Verify_the_BeStMan_Service_Certi"> Verify the BeStMan Service Certificate</a>
</li> <li> <a href="?cover=print#Use_Pacman_to_Install_BeStMan"> Use Pacman to Install BeStMan</a>
</li> <li> <a href="?cover=print#Install_a_Certificate_Authority"> Install a Certificate Authority Package</a>
</li> <li> <a href="?cover=print#Run_the_Post_Install_Script"> Run the Post-Install Script</a>
</li></ul> 
</li> <li> <a href="?cover=print#BeStMan_Configuration"> BeStMan Configuration</a> <ul>
<li> <a href="?cover=print#Default_Configuration"> Default Configuration</a>
</li> <li> <a href="?cover=print#Configure_using_GUMS"> Configure using GUMS</a>
</li> <li> <a href="?cover=print#Configure_Volatile_Storage_Optio"> Configure Volatile Storage (Optional)</a>
</li> <li> <a href="?cover=print#Configure_Custodial_Storage_Opti"> Configure Custodial Storage (Optional)</a>
</li> <li> <a href="?cover=print#Complex_Configuration"> Complex Configuration</a>
</li> <li> <a href="?cover=print#Modify_etc_sudoers"> Modify /etc/sudoers</a>
</li> <li> <a href="?cover=print#GridFTP_Configuration"> GridFTP  Configuration</a> <ul>
<li> <a href="?cover=print#Gratia_GridFTP_Transfer_Probe_Co"> Gratia GridFTP Transfer Probe Configuration</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Enable_Services"> Enable Services</a>
</li> <li> <a href="?cover=print#Service_Activation"> Service Activation</a>
</li> <li> <a href="?cover=print#Trash_Trash_Integration_with_the"> Trash/Trash/Integration with the information system</a>
</li> <li> <a href="?cover=print#Validation_of_Service_Operation"> Validation of Service Operation</a> <ul>
<li> <a href="?cover=print#Site_registration_and_daily_moni"> Site registration and daily monitoring</a>
</li> <li> <a href="?cover=print#Self_testing_with_srm_clients"> Self-testing with srm clients</a> <ul>
<li> <a href="?cover=print#Preparing_to_run_srm_client_comm"> Preparing to run srm-client command on the BeStMan node</a>
</li> <li> <a href="?cover=print#Preparing_to_run_srm_client_AN1"> Preparing to run srm-client command from the different node</a>
</li> <li> <a href="?cover=print#Executing_SRM_client_commands"> Executing SRM-client commands </a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Troubleshooting"> Troubleshooting</a> <ul>
<li> <a href="?cover=print#File_Locations"> File Locations</a>
</li> <li> <a href="?cover=print#Open_Ports"> Open Ports</a>
</li> <li> <a href="?cover=print#Debugging_Procedure"> Debugging Procedure</a> <ul>
<li> <a href="?cover=print#Verifying_GUMS"> Verifying GUMS </a>
</li> <li> <a href="?cover=print#Verifying_GridFTP"> Verifying GridFTP </a>
</li> <li> <a href="?cover=print#Verifying_BeStMan_full_mode"> Verifying BeStMan-full-mode</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#References"> References</a>
</li> <li> <a href="?cover=print#Screen_Dump_of_the_Complete_Inst"> Screen Dump of the Complete Install Process </a> <ul>
<li> <a href="?cover=print#Basic_Installation_and_Configura"> Basic Installation and Configuration</a>
</li> <li> <a href="?cover=print#Advanced_Installation_and_Config"> Advanced Installation and Configuration</a>
</li></ul> 
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</div>
<p />
<p />
<!-- conventions used in this document <ul>
<li> Local UCL_HOST = bestman
</li> <li> Local BESTMAN_TYPE=full
</li> <li> Local UCL_CWD=/opt/osg-1.2.32-bestman
</li></ul> 
-->
<p />
<h1><a name="About_this_Document"></a> About this Document </h1>
<p />
<img width="16" alt="hand" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/hand.gif" height="16" border="0" /> This document is for Storage System Administrators. It contains the installation procedure for a <a href="https://sdm.lbl.gov/bestman/" target="_top">Berkeley Storage Manager (BeStMan)</a> in <a href="/bin/view/ReleaseDocumentation/BeStMan#FullMode" class="twikiCurrentTopicLink twikiAnchorLink">full-mode</a>. This document applies to the latest release <font color="#ff0000"> OSG-1.2.28 </font>. 
<p />
<p />
Conventions used in this document:
<p />
<p />
<font color="#808080">A <i>User Command Line</i> is illustrated by a green box that displays a prompt:</font>
<p />
<pre class="screen">
  [user@bestman /opt/osg-1.2.32-bestman]$
</pre>
<p />
<font color="#808080">A <i>Root Command Line</i> is illustrated by a red box that displays the <em>root</em> prompt:</font>
<p />
<pre class="rootscreen">
  [root@bestman /opt/osg-1.2.32-bestman]$
</pre>
<p />
<font color="#808080"><i>Lines in a file</i> are illustrated by a yellow box that displays the desired lines in a file:</font>
<pre class="file">
priorities=1
</pre>
<p />
<p />
<p />
<h1><a name="Introduction"></a> Introduction </h1>
<p />
<p />
<a href="https://sdm.lbl.gov/bestman/" target="_top">Berkeley Storage Manager (BeStMan)</a> is a generic <a href="https://sdm.lbl.gov/srm-wg/doc/SRM.v2.2.html" target="_top">SRM v2.2</a> load balancing front-end for transfer servers and disk-based storage systems. It was developed by the <a href="https://sdm.lbl.gov/" target="_top">Scientific Data Management Group</a> at <a href="http://www.lbl.gov" target="_top">Lawrence Berkeley National Laboratory</a>.
<p />
BeStMan works on top of any disk-based POSIX-compliant file-systems. It is known to work on file systems such as NFS, GPFS, PVFS2, GFS, Ibrix, HFS+, Hadoop, XrootdFS and Lustre and integrates with various file transfer services, such as gsiftp, http, https, bbftp and ftp.
<p />
<p />
<a name="FullMode"></a>
BeStMan in full-mode is fully compliant with SRM v2.2. It provides support for the dynamic management of the available storage space and queuing of SRM requests. It can be configured to support Mass Storage Services (MSS). If you are not planning to use dynamic space management, request queuing and not interested in MSS support you should consider to install <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationBestmanGateway" target="_top">BeStMan-gateway</a> instead.
<p />
<p />
For general information on storage software architecture, implementations and use, please read <a href="https://twiki.grid.iu.edu/bin/view/Documentation/StorageInfrastructureSoftware" target="_top">on storage infrastructure software</a>. For information on planning, installing and validating storage software see <a href="https://twiki.grid.iu.edu/bin/view/Documentation/StorageSiteAdministrator" target="_top">here</a>.
<p />
<p />
<h1><a name="Engineering_Considerations"></a> Engineering Considerations </h1>
<p />
<p />
<p />
BeStMan requires at least one node with following components to be installed:  <ul>
<li> BeStMan implements SRM v2.2 
</li> <li> GridFTP server 
</li> <li> <a href="/bin/view/Trash/ReleaseDocumentationGratiaTransferProbe" class="twikiLink">Gratia gridftp transfer probe</a> (optional) - a cron job reporting file transfers to the <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationGratiaSiteCollector" target="_top">Gratia collector</a>
</li></ul> 
<p />
<p />
<p />
Please answer following questions before you proceed with installation and configuration of BeStMan-full-mode storage element: 
<p /> <dl>
<dt> Q. <em>What authorization mechanism do you prefer?</em>  </dt><dd> Decide between a grid-mapfile or a <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationInstallConfigureAndManageGUMS" target="_top">GUMS</a> server for authorization. <br />     We recommend to use GUMS as the most flexible solution; most large sites use GUMS.
</dd></dl> 
<p /> <dl>
<dt> Q. <em>How many GridFTP servers you will need?</em> </dt><dd> Choose to run multiple GridFTP servers for load balancing and better performance. We recommend to install additional GridFTP servers if your Storage Element: 
</dd>  </dl><ul>
<li> is serving data to more than 250 cores for VOs that use storage heavily (e.g. CMS, ATLAS, CDF, and D0)
</li> <li> is managing more than 50 TB of disk space
</li> <li> has more than 1Gbps bandwidth: plan on at least one GridFTP server for each 4Gbps of available bandwidth to maximize throughput 
</li></ul> 
<p /> <dl>
<dt> Q. <em>Do you need to enable Gratia gridftp-transfer probes?</em>  </dt><dd> The Gratia gridftp-transfer probes provide OSG storage statistics for accounting purposes. More details can be found at the  <a href="https://twiki.grid.iu.edu/bin/view/Accounting/WebHome" target="_top">Gratia Home Page</a>. The reports include the source and destination of transfers, certificate subject of transfer initiator, as well as the size and status of the transferred file. <br />     The probe needs to be installed on every GridFTP server which may be different from your BeStMan server.
</dd></dl> 
<p />
<p />
<p /> <dl>
<dt> Q. <em>What kind of storage do you like to provide to your users?</em> </dt><dd> Choose between a <strong>volatile cache</strong> (files are stored for a fixed amount of time), a <strong>custodial cache</strong> (files are stored until deleted) or provide <strong>both</strong>. You can also allow users to write to storage areas that are outside the storage space managed by BeStMan.
</dd></dl> 
<p />
<p />
<p />
<h1><a name="How_to_get_Help"></a> How to get Help? </h1>
<p /> <ul>
<li> see the <a href="/bin/view/ReleaseDocumentation/BeStMan#DebugInfo" class="twikiCurrentTopicLink twikiAnchorLink">debugging section</a> below for problems installing or operating the storage element
</li> <li> follow <a href="/bin/view/ReleaseDocumentation/HelpProcedure" class="twikiLink">this procedure</a> if you can't resolve the problem
</li> <li> contact the developers at <a href="mailto&#58;osg&#45;storage&#64;opensciencegrid&#46;org">osg-storage&#64;opensciencegrid.org</a> or <a href="mailto&#58;srm&#64;lbl&#46;gov">srm&#64;lbl.gov</a>
</li></ul> 
<p />
<p />
<p />
<p />
<h1><a name="Requirements"></a> Requirements </h1>
<p /> <ol>
<li> all procedures in this document require <em>root</em> privileges
</li> <li> the installation procedure requires <span class="twikiNewLink">Pacman<a href="/bin/edit/ReleaseDocumentation/PacmanInstall?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="Pacman (this topic does not yet exist; you can create it)">?</a></span> version &gt;= 3.28 to be installed
</li> <li> you will need at least 1 server to install the software
</li> <li> the extended internet daemon <a href="http://en.wikipedia.org/wiki/Xinetd" target="_top">xinetd</a> must be installed and running on the server
</li> <li> the operation of BeStMan requires a valid service certificate. If you are planning to support access to your SE by <a href="/bin/view/Trash/ReleaseDocumentationLcgUtilities" class="twikiLink">LCG-Utils tools</a> this certificate <strong>must</strong> be the copy of the host certificate (see <a href="/bin/view/ReleaseDocumentation/BeStMan#Verify_the_BeStMan_Certificate" class="twikiCurrentTopicLink twikiAnchorLink">this section</a> for details). Otherwise use a valid <a href="/bin/view/ReleaseDocumentation/GetGridCertificates#Request_a_Service_Certificate" class="twikiAnchorLink">service certificate</a>.
</li> <li> the service certificate must be owned by the Unix user that is running BeStMan
</li> <li> the firewall must allow incoming connections to the BeStMan ports (default:10080,10443)
</li> <li> the firewall must allow incoming connections to the GridFTP port (default 2811)
</li> <li> outgoing connections must be allowed from high ports ( typically in range 32769-65535 ). We recommend to consult the <a href="/bin/view/ReleaseDocumentation/ComputeElementFirewalls" class="twikiLink">Firewall Guide</a> if you install the GridFTP server for the first time.
</li> <li> Grid users will authenticate with your site using their grid certificates. The users have to be authorized in order to access your SE. You'll need to determine the authorization mode you wish to use before you can proceed with installation(see <span class="twikiNewLink">for details<a href="/bin/edit/ReleaseDocumentation/AboutAuthorizationForCE?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="for details (this topic does not yet exist; you can create it)">?</a></span>). 
</li> <li> the server must have a fully qualified domain name and a valid <a href="/bin/view/ReleaseDocumentation/GetGridCertificates#Request_a_Host_Certificate" class="twikiAnchorLink">host certificate</a> installed in <code>/etc/grid-security</code>
</li></ol> 
<p />
<p />
<p />
<h1><a name="BeStMan_Installation_Procedure"></a> BeStMan Installation Procedure </h1>
<p />
The installation procedure consists of the following steps:
<p /> <ol>
<li> verify the operation of <code>xinetd</code>
</li> <li> verify the service certificate for BeStMan
</li> <li> create an installation directory
</li> <li> use <span class="twikiNewLink">Pacman<a href="/bin/edit/ReleaseDocumentation/PacmanInstall?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="Pacman (this topic does not yet exist; you can create it)">?</a></span> to install BeStMan
</li> <li> <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationGetHostServiceCertificates#Setup_Initial_Certificate_Author" target="_top">install the CA Certificates and the Certificate Revocation List</a>
</li> <li> execute the post installation script 
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Verify_Xinetd_Status"></a> Verify Xinetd Status </span></h2>
<p />
The GridFTP service will be started by the <code>xinetd</code> service on connection requests. Please verify that <code>xinetd</code> is running:
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ /etc/init.d/xinetd status
<font color="#ff0000">xinetd (pid xxxx) is running...</font>
</pre>
<p />
Otherwise consult the documentation provided with your operating system to find out how to install <code>xinetd</code>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Verify_the_BeStMan_Service_Certi"></a> Verify the BeStMan Service Certificate </span></h2>
<p />
By default BeStMan is using the certificate and key installed in <code>/etc/grid-security/http/httpcert.pem</code> and <code>/etc/grid-security/http/httpkey.pem</code> respectively.  If you don't require support for LCG-Utils simply proceed to <a href="/bin/view/ReleaseDocumentation/GetGridCertificates#Retrieve_and_Install_the_Service" class="twikiAnchorLink">request and install a service certificate</a>.
<p />
on     In order to handle requests from LCG-Utils, BeStMan must be configured to use a copy of the host certificate as its service certificate. This is mandatory for all BeStMan servers supporting the ATLAS experiment. Also some grid users are using <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationLcgUtilities" target="_top">lcg-utils</a> to access the SE. 
<p />
There are two ways to solve this problem:
<p /> <ol>
<li> If you don't have a service certificate installed in <code>/etc/grid-security/http</code>, simply copy the host certificate to the location of the service certificate:
</li></ol> 
<p />
<pre class="rootscreen">
[root@bestman ~]$mkdir -p /etc/grid-security/http
[root@bestman ~]$cp /etc/grid-security/hostcert.pem /etc/grid-security/http/httpcert.pem
[root@bestman ~]$cp /etc/grid-security/hostkey.pem /etc/grid-security/http/httpkey.pem
[root@bestman ~]$chown -R <font color="#ff0000">user.group</font> /etc/grid-security/http
[root@bestman ~]$chmod 600 /etc/grid-security/http/httpcert.pem /etc/grid-security/http/httpkey.pem
</pre>
<p /> <ol>
<li> If you have a service certificate installed in  <code>/etc/grid-security/http</code> already, create a new sub-directory and copy the host certificate to this location:
</li></ol> 
<p />
<pre class="rootscreen">
[root@bestman ~]$mkdir -p /etc/grid-security/bestmancert
[root@bestman ~]$cp /etc/grid-security/hostcert.pem /etc/grid-security/bestmancert/bestmancert.pem
[root@bestman ~]$cp /etc/grid-security/hostkey.pem /etc/grid-security/bestmancert/bestmankey.pem
[root@bestman ~]$chown -R <font color="#ff0000">user.group</font> /etc/grid-security/bestmancert
[root@bestman ~]$chmod 600 /etc/grid-security/bestmancert/bestmancert.pem  /etc/grid-security/bestmancert/bestmankey.pem
</pre>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  <code>user</code> and <code>group</code> must correspond to the Unix account used to run BeStMan!
</dd></dl> 
<p />
on    
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Use_Pacman_to_Install_BeStMan"></a> Use Pacman to Install BeStMan </span></h2>
<p />
Next, we will use <span class="twikiNewLink">Pacman<a href="/bin/edit/ReleaseDocumentation/PacmanInstall?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="Pacman (this topic does not yet exist; you can create it)">?</a></span> to install BeStMan into the current working directory (<code>/opt/osg-1.2.32-bestman</code>).
<p />
If you are using the <a href="/bin/view/Trash/ReleaseDocumentationInstallConfigureAndManageGUMS" class="twikiLink">Grid User Management System (GUMS)</a> as a Grid Identity Mapping Service, you will need to define the <code>$VDT_GUMS_HOST</code> environment variable first. Otherwise skip this step. 
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ export VDT_GUMS_HOST=<font color="#ff0000">&lt;your GUMS hostname&gt;</font>
</pre>
<p />
To download  the BeStMan  package from the <a href="http://software.grid.iu.edu/osg-1.2" target="_top">http://software.grid.iu.edu/osg-1.2</a> cache execute the <code>pacman</code> command. Pacman will ask whether you want to "trust the caches and accept the license", answer <code>yall</code> and <code>y</code> to install the BeStMan package:
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ pacman -get http://software.grid.iu.edu/osg-1.2:Bestman
</pre>
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdReleaseDocumentationBeStMan1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdReleaseDocumentationBeStMan1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdReleaseDocumentationBeStMan1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ pacman -get http://software.grid.iu.edu/osg-1.2:Bestman
Do you want to add [http://software-itb.grid.iu.edu/osg-1.2] to [trusted.caches]? (y/n/yall): yall
Beginning VDT prerequisite checking script vdt-common/vdt-prereq-check...        

All prerequisite checks are satisfied.
                                             

========== IMPORTANT ==========
Most of the software installed by the VDT *will not work* until you install
certificates.  To complete your CA certificate installation, see the notes
in the post-install/README file.
</div></div> <!--/twistyPlugin-->
</pre>
<p />
<p />
<p />
Please check the installation log file <code>/opt/osg-1.2.32-bestman/vdt-install.log</code> for errors if the installation failed. Otherwise proceed.
<p />
on    
<p />
<p />
<p />
<!-- instructions to install and enable CA Certificates and the CRL -->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_a_Certificate_Authority"></a> Install a Certificate Authority Package </span></h2>
<p />
You will need to install a <a href="/bin/view/Documentation/GlossaryC#DefsCA" class="twikiAnchorLink">Certificate Authority</a> package. For more information and options see <span class="twikiNewLink">this document<a href="/bin/edit/ReleaseDocumentation/CaCertificatesInstall?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="this document (this topic does not yet exist; you can create it)">?</a></span>.
<p />
on    
on    
on    
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Run_the_Post_Install_Script"></a> Run the Post-Install Script </span></h2>
<p />
At last run the <code>vdt-post-install</code> script to finish the installation:
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ vdt-post-install
Starting...
Configuring PRIMA... Done.
Configuring EDG-Make-Gridmap... Done.
Done.
</pre>
<p />
This completes the installation of the BeStMan server. Move to the next section to configure the BeStMan-full-mode and GridFTP server. You may also choose to configure the Gratia transfer probe at this time (see <a href="/bin/view/ReleaseDocumentation/BeStMan#Engineering_Considerations" class="twikiCurrentTopicLink twikiAnchorLink">this section</a> for detailed explanation).
<p />
If you want to install additional GridFTP servers on the different nodes, please follow <a href="/bin/view/Trash/ReleaseDocumentationGsiFtpStandAlone" class="twikiLink">this document for GridFTP server installation</a>. See <a href="/bin/view/ReleaseDocumentation/BeStMan#Engineering_Considerations" class="twikiCurrentTopicLink twikiAnchorLink">this section</a> for reasoning. 
<p />
<p />
<p />
<h1><a name="BeStMan_Configuration"></a> BeStMan Configuration </h1>
<p />
You will first need to configure BeStMan in order to enable it as a service. The configuration process is controlled by the BeStMan configuration script ( <code>$VDT_LOCATION/bestman/setup/configure</code> ). The full list of BeStMan configuration options is provided by the <a href="http://sdm.lbl.gov/bestman/docs/bestman-guide.html" target="_top">Bestman Administrative Guide</a>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Default_Configuration"></a> Default Configuration </span></h2>
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ /opt/osg-1.2.32-bestman/vdt/setup/configure_bestman --server y
</pre>
<p />
This command will configure BeStMan using following defaults:
<p /> <ul>
<li> run BeStMan using Unix account <code>daemon</code>
</li> <li> use certificate <code>/etc/grid-security/http/httpcert.pem</code> and key <code>/etc/grid-security/http/httpkey.pem</code>
</li> <li> listen on secure port <code>10443</code> and public port <code>10080</code>
</li> <li> assume gridftp server is running on the same server listening on port <code>2811</code>
</li> <li> use grid-mapfile for authorization
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configure_using_GUMS"></a> Configure using GUMS </span></h2>
<p />
<pre class="rootscreen">
<code>[root@bestman /opt/osg-1.2.32-bestman]$$VDT_LOCATION/vdt/setup/configure_bestman --server y \</br>
        --gums-host <font color="#ff0000">&lt;hostname of GUMS server&gt;</font> \</br>
        --gums-port <font color="#ff0000">&lt;port of GUM server&gt;</font></code>
</pre>
<p />
This command will configure BeStMan using following settings:
<p /> <ul>
<li> run BeStMan using Unix account <code>daemon</code>
</li> <li> listen on secure port <code>10443</code> and public port <code>10080</code>
</li> <li> assume gridftp server is running on the same server listening on port <code>2811</code>
</li> <li> use GUMS for authorization
</li></ul> 
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  Please, see <a href="/bin/view/ReleaseDocumentation/BeStMan#Requirements" class="twikiCurrentTopicLink twikiAnchorLink">Requirements</a> and <a href="/bin/view/ReleaseDocumentation/BeStMan#Verify_Service_Certificate_for_B" class="twikiCurrentTopicLink twikiAnchorLink">Verify Service Certificate</a> section for more details.
</dd></dl> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configure_Volatile_Storage_Optio"></a> Configure Volatile Storage (Optional) </span></h2>
<p />
Volatile storage limits the lifetime of stored data. After the storage lifetime of the data expired, the file will be deleted.
<p />
<pre class="rootscreen">
<code>--volatile-file-lifetime <font color="#ff0000">&lt;maximum storage lifetime in secondes&gt;</font> \</br>
--cache-size <font color="#ff0000">&lt;the size of volatile cache area in MB allocated for storage&gt;</font> \</br></code>
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configure_Custodial_Storage_Opti"></a> Configure Custodial Storage (Optional) </span></h2>
<p />
If you want to create a custodial storage place where files could be stored unless they are explicitly deleted by user you will need to add the following options to the configuration above:
<p />
<pre class="rootscreen">
<code>--with-custodial-storage-path <font color="#ff0000">&lt;path to custodial storage&gt;</font> /</br>
--with-custodial-storage-size <font color="#ff0000">&lt;size of custodial storage in MB&gt;</font></code>
</pre>
<p />
Additionally you may want to either <em>allow</em> or <em>block</em> access to certain storage paths, but not both:
<p />
<pre class="rootscreen">
<code>--with-allowed-paths  <font color="#ff0000">&lt;semicolon separated list of allowed storage paths&gt;</font></code>
</pre>
<p />
<pre class="rootscreen">
<code>--with-blocked-paths  <font color="#ff0000">&lt;semicolon separated list of blocked storage paths&gt;</font></code>
</pre>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  By default <code>$VDT_LOCATION/vdt-app-data/bestman/cache</code> will be used to store volatile data.
</dd></dl> 
<p />
on     Keep in mind that BeStMan will not be able to manage space in the areas specified in the list unless it is not also specified as custodial area.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Complex_Configuration"></a> Complex Configuration </span></h2>
<p />
Many more options are available to configure BeStMan according to more specific requirements:
<p />
<pre class="rootscreen">
<code>[root@bestman /opt/osg-1.2.32-bestman]$ vdt/setup/configure_bestman  --server y \</br>
        --user <font color="#ff0000">&lt;Unix user-name used to run BeStMan&gt;</font> \</br>
        --cert <font color="#ff0000">&lt;location of bestman service certificate&gt;</font> \</br>
        --key  <font color="#ff0000">&lt;location of bestman service key&gt;</font> \</br>
        --gums-host <font color="#ff0000">&lt;hostname of GUMS server&gt;</font> \</br>
        --gums-port <font color="#ff0000">&lt;port of GUM server&gt;</font>
        --http-port <font color="#ff0000">&lt;public SRM port&gt;</font> \</br>
        --https-port <font color="#ff0000">&lt;secure SRM port&gt;</font> \</br>
        --globus-tcp-port-range <font color="#ff0000">&lt;low_port&gt;,&lt;high_port&gt;</font> \</br>
        --volatile-file-lifetime <font color="#ff0000">&lt;maximum storage lifetime in secondes&gt;</font> \</br>
        --cache-size <font color="#ff0000">&lt;the size of volatile cache area in MB allocated for storage&gt;</font> \</br>
        --with-transfer-servers <font color="#ff0000">&lt;coma separated list of GridFTP servers&gt;</font></code>
</pre>
<p />
Where :
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Argument Value</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Default Value</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>user</b></code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> daemon </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> name of the non-privileged user that runs BeStMan server process </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>bestman_service_cert</b></code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> /etc/grid-security/http/httpcert.pem </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> is a path to service certificate </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>bestman_service_key</b></code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> /etc/grid-security/http/httpkey.pem </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> is a path to service certificate private key </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>public_port</b></code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> 10080 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> BeStMan public port </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>secure_port</b></code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> 10443 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> BeStMan private port  <img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> Please, make sure that these two ports are open if  you have a firewall on your node </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>low_port,high_port</b></code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> N/A </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> the open ports range that is allowed for all outbound globus connections for gridftp (see also how to deal with firewall in <a href="/bin/view/ReleaseDocumentation/BeStMan#GridFTP_Configuration" class="twikiCurrentTopicLink twikiAnchorLink"> in this section</a>) </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>cache_size</b></code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> disk partition </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> the size of volatile cache area in MB allocated for storage </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>lifetime</b></code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> 30 minutes </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> the time in seconds that file stored in BeStMan volatile cache will be available </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>GUMS_hostname</b></code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> localhost </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> is the FQDN name of GUMS server </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code><b>GUMS_port</b></code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> 8443 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> is the port of GUMS  server </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code><b>GridFTP_servers_list</b></code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> localhost </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> is a list FQDN of your GridFTP servers, separated by ; . e.g. “gsiftp://host1.domain.tld;gsiftp://host2.domain.tld” </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
This command will allow you to configure BeStMan that will manage a volatile space located under <code>$VDT_LOCATION/vdt-app-data/bestman/cache directory</code>. The size of the area will be controlled by specified  <code>cache_size</code> or by size of the disk partition. The files that are stored at this area will be available ONLY during <code>lifetime</code> period.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Modify_etc_sudoers"></a> Modify /etc/sudoers </span></h2>
<p />
<pre class="file">
# Comment out this line, if it is in your =/etc/sudoers= file (RHEL5+)
#Defaults    requiretty

Cmnd_Alias SRM_CMD = /bin/rm, /bin/mkdir, /bin/rmdir, /bin/mv, /bin/ls 
Runas_Alias SRM_USR = ALL, !root 
<font color="#ff0000">&lt;user_name&gt;</font> ALL=(SRM_USR) NOPASSWD: SRM_CMD
 </pre>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  <code>user_name</code> refers to the Unix account running the BeStMan server process. 
</dd></dl> 
<p />
<p />
<p />
<p />
<a name="GridFTP"></a>  
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="GridFTP_Configuration"></a> GridFTP  Configuration </span></h2>
<p />
GridFTP server comes with BeStMan installation and have to be configured if used with it GUMS authorization method.
<p />
If you are using GUMS authorization method, please, copy the following two files from <code><b>$VDT_LOCATION/post-install</b></code> to  <code><b>/etc/grid-security</b></code>. Otherwise go to the next <a href="/bin/view/ReleaseDocumentation/BeStMan#NextStep1" class="twikiCurrentTopicLink twikiAnchorLink">step</a>: 
 <pre class="rootscreen">
<code>[root@bestman /opt/osg-1.2.32-bestman]$cp $VDT_LOCATION/post-install/prima-authz.conf /etc/grid-security 
[root@bestman /opt/osg-1.2.32-bestman]$cp $VDT_LOCATION/post-install/gsi-authz.conf /etc/grid-security</code> 
</pre>
<p />
<p />
<a name="NextStep1"></a>
If you have a firewall, the open port range for the gridftp should be properly set. In order to do so you will have to modify <code><b>vdt-local-setup.sh</b></code> and <code><b>vdt-local-setup.csh</b></code> files
<pre class="file">
<code>
#edit $VDT_LOCATION/vdt/etc/vdt-local-setup.sh 
GLOBUS_TCP_SOURCE_RANGE=<font color="#ff0000">low_port,high_port</font>
GLOBUS_TCP_PORT_RANGE=<font color="#ff0000">low_port,high_port</font>
export GLOBUS_TCP_SOURCE_RANGE
export GLOBUS_TCP_PORT_RANGE </code>
</pre>
<p />
Where <code><b>low_port, high_port</b></code>  controls all outbound globus connections for gridftp (e.g 40000,49150). You should select the same range of ports you have selected during BeStMan-full-mode configuration with  --globus-tcp-port-range <font color="#ff0000">low_port,high_port</font> option.
<p />
You can have multiple installation of GridFTP servers located on  the nodes you have specified in BeStMan-full mode configuration (see  <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationGsiFtpStandAlone" target="_top">separate GridFTP installation</a> if you want to install it as a stand-alone server).
<p />
You will need to make sure that users have write permissions in to the storage area.  
<p />
<p />
<p />
<h3><a name="Gratia_GridFTP_Transfer_Probe_Co"></a> Gratia GridFTP Transfer Probe Configuration </h3>
<p />
To enable and configure the Gratia GrdFTP transfer probe for the GridFTP server that comes with BeStMan follow the instructions in
 <a href="/bin/view/Trash/ReleaseDocumentationGratiaTransferProbe" class="twikiLink">Preparing, Installing and Validating Gratia transfer probe</a>
<p />
<p />
<p />
<p />
<p />
<h1><a name="Enable_Services"></a> Enable Services </h1>
<p />
Before a service can be <a href="/bin/view/ReleaseDocumentation/StartingServices#Service_Activation" class="twikiAnchorLink">activated</a> it needs to be <em>enabled</em>. You can <a href="/bin/view/ReleaseDocumentation/StartingServices#List_Registered_Services" class="twikiAnchorLink">list</a> the status of registered services to see if a service is enabled or disabled.
<p />
To enable a registered service use <code>vdt-control</code>:
<p />
<pre class="screen">
[user@bestman /opt/osg-1.2.32-bestman]$ vdt-control <font color="#ff0000">--enable</font> vdt-rotate-logs gsiftp gratia-gridftp-transfer (gums-host-cron|edg-mkgridmap)
</pre>
<p />
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  Please only choose <code>gums-host-cron</code> if you are using GUMS. If you want to generate local dynamic gridmap file choose <code>edg-mkgridmap</code> service instead.  If you are using existing gridmap file that has been already installed on your system, do not specify neither <code><b>gums-host-cron</b></code> nor <code><b>edg-mkgridmap</b></code> services.
</dd></dl> 
<p />
If you have decided to use grid-map file for authorization and would like that it has been automatically generated for you do the following after you have enabled <code><b>edg-mkgridmap</b></code> service :
<pre class="rootscreen">
<code>[root@bestman /opt/osg-1.2.32-bestman]$ edg/sbin/edg-mkgridmap</code>
</pre>
<p />
<p />
<h1><a name="Service_Activation"></a> Service Activation </h1>
<p />
Use <code>vdt-control</code> to <em>activate</em> registered services. This will:
<p /> <ul>
<li> add entries to crontab for <code>cron</code> services
</li> <li> add control scripts to <code>/etc/init.d</code> for <code>init</code> services
</li> <li> start new <code>init</code> services
</li> <li> configure the xinet daemon for <code>xinet</code> services
</li></ul> 
<p />
Unprivileged users must provide the <code>--non-root</code> argument to <code>vdt-control</code> to install <code>cron</code> services. All other services require <em>root</em> privileges.
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ vdt-control <font color="#ff0000">--on</font> 
</pre>
<p />
<code>vdt-control</code> will <em>fail</em> to activate any service that is already provided by the operating system. In this case you may <em>force</em> the activation of the new service provided by the <a href="http://vdt.cs.wisc.edu" target="_top">Virtual Data Toolkit</a>:
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ vdt-control <font color="#ff0000">--force</font> --on 
</pre>
<p />
Another reason for <code>vdt-control</code> to fail to activate a service may be that the service was previously installed by another installation of the <a href="http://vdt.cs.wisc.edu" target="_top">Virtual Data Toolkit</a> which has not been <em>deactivated</em> yet. In this case you must <em>force</em> the deactivation of the existing service before you continue to install the new service:
<p />
<pre class="rootscreen">
[root@bestman /opt/osg-1.2.32-bestman]$ vdt-control <font color="#ff0000">--force</font> --off 
[root@bestman /opt/osg-1.2.32-bestman]$ vdt-control --on 
</pre>
<p />
<p />
<p />
<p />
<p />
<h1><a name="Trash_Trash_Integration_with_the"></a> Trash/Trash/Integration with the information system </h1>
<p />
Trash/Trash/Integration of the SE with the central information systems takes place during the Compute Element installation/configuration. See the topic <a href="/bin/view/ReleaseDocumentation/GenericInformationProviders" class="twikiLink">Generic Information Providers</a>. The SE does not collect or publish information independently.
<p />
<p />
<h1><a name="Validation_of_Service_Operation"></a> Validation of Service Operation </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Site_registration_and_daily_moni"></a> Site registration and daily monitoring </span></h2>
<p />
Once you have your SE setup and configured, you can register it with the <a href="http://datagrid.lbl.gov/sitereg/" target="_top">LBNL SRM monitoring system</a>. This will run daily tests against your SE and the results can be viewed <a href="http://datagrid.lbl.gov/osg/" target="_top">here</a>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Self_testing_with_srm_clients"></a> Self-testing with srm clients </span></h2>
<p />
In order to verify that the system is functional you will need to have access to srm client commands, be able to create a proxy certificate (<code><b>grid-proxy-init</b></code> or <code><b>voms_proxy_init</b></code> command) and have access to your certificate and private key.
<p />
There are multiple ways of doing this.
<p />
<p />
<h3><a name="Preparing_to_run_srm_client_comm"></a> Preparing to run srm-client command on the BeStMan node </h3>
If you don't have an access to the  node where <a href="/bin/view/ReleaseDocumentation/ClientInstallationGuide" class="twikiLink">OSG Client</a> is installed  you can still test BeStMan. <ul>
<li> Login on the BeStMan node as "yourself"
</li> <li> Setup location of BeStMan installation
</li></ul> 
<pre class="screen">
<code>source /opt/osg-1.2.32-bestman/setup.sh</code>
</pre>
<p />
Make sure that you have access to your certificate and private key on that node. You will need it to create a proxy certificate. Execute grid-proxy-init :
<pre class="screen">
<code>grid-proxy-init
Your identity: .....
Enter GRID pass phrase for this identity:</code>
</pre>
<p />
You will need to add the path to all the srm client commands to your <code><b>PATH</b></code> environment variable. 
<pre class="screen">
<code>export PATH=$PATH:$VDT_LOCATION/bestman/bin</code>
</pre>
<p />
<h3><a name="Preparing_to_run_srm_client_AN1"></a> Preparing to run srm-client command from the different node </h3>
<p />
 You may have an access to the node where OSG client is already installed and  where you have your certificate and key. If you want to install OSG Client use instructions  provided in <a href="/bin/view/ReleaseDocumentation/ClientInstallationGuide" class="twikiLink">in that installation Guide</a>. Then generate a proxy certificate by issuing <code><b>grid_proxy_init</b></code> or <em>voms_proxy_init</em>:
<pre class="screen">
<code>source <font color="#ff0000">VDT_LOCATION</font>/setup.sh
grid-proxy-init
Your identity: .....
Enter GRID pass phrase for this identity:</code>
</pre>
<p />
or
<p />
<pre class="screen">
<code>source <font color="#ff0000">VDT_LOCATION</font>/setup.sh
voms-proxy-init -voms <font color="#ff0000">VO</font>
Enter GRID pass phrase for this identity:</code>
</pre>
Where  <code><b>VDT_LOCATION</b></code> is the directory where the client is installed and <code><b>VO</b></code> name of your Virtual Organization.
<p />
<p />
<h3><a name="Executing_SRM_client_commands"></a> Executing SRM-client commands </h3>
<p />
After you create a proxy certificate, you may try to verify BeStMan-full-mode with srm client commands:
<p />
Execute srm-ping: 
<pre class="screen">
 <code>srm-ping srm://<font color="#ff0000">BeStMan_host:secured_http_port</font>/srm/v2/server
srm-ping   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
SRM-CLIENT: Connecting to serviceurl httpg://fg0x1.fnal.gov:10443/srm/v2/server
SRM-PING: Tue Mar 02 14:17:38 CST 2010  Calling SrmPing Request...
versionInfo=v2.2
Extra information (Key=Value)
backend_type=BeStMan
backend_version=2.2.1.3.8
backend_build_date=2009-12-03T05:09:14.000Z 
gsiftpTxfServers[0]=gsiftp://fg0x1.fnal.gov
clientDN=/DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508821
gumsIDMapped=fnalgrid</code>
</pre>
<p />
Please check that your <code><b>gumsIDMapped</b></code> is not <code><b>null</b></code>. If this is the case you have probably misconfigured your grid-mapfile or GUMS related configuration.
If you have reasonable result you may try to srm copy. In order to do so create a file <code><b>test</b></code> in <code><b>/tmp</b></code> directory and write into the default volatile space:
<p />
<pre class="screen">
<code>srm-copy   file:////tmp/test1  srm://BeStMan_host:secured_http_port/srm/v2/server\?SFN=/srmcache/~/test_1
srm-copy   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdReleaseDocumentationBeStMan2show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdReleaseDocumentationBeStMan2hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdReleaseDocumentationBeStMan2toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
SRM-CLIENT: Tue Mar 02 14:19:20 CST 2010 Connecting to httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-CLIENT: Tue Mar 02 14:19:20 CST 2010 Calling SrmPrepareToPutRequest now ...
request.token=fnalgrid:1_PUT_3055620301
status=SRM_REQUEST_QUEUED
explanation=null
SRM-CLIENT: Next status call in 10 seconds.
SRM-CLIENT: Tue Mar 02 14:19:32 CST 2010 Calling Status at Tue Mar 02 14:19:32 CST 2010
SRM-CLIENT: Result Status from SRM (srmStatusOfPutRequest)=SRM_SUCCESS

SRM-CLIENT: RemainingPinTime=289
SRM-CLIENT: received TURL=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-1258657694/te
st_1

SRM-CLIENT: Tue Mar 02 14:19:32 CST 2010 start file transfer
SRM-CLIENT:Source=file:////tmp/test
SRM-CLIENT:Target=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-1258657694/test_1

SRM-CLIENT: Tue Mar 02 14:19:35 CST 2010 end file transfer for file:////tmp/test

SRM-CLIENT: Tue Mar 02 14:19:35 CST 2010 Calling putDone for srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_1
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT: Request completed with success

SRM-CLIENT: Printing text report now ...
</div></div> <!--/twistyPlugin-->
SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=fnalgrid:1_PUT_3055620301
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file:////tmp/test
SRM-CLIENT*TARGETURL[0]=srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_1
SRM-CLIENT*TRANSFERURL[0]=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-1258657694/te
st_1
SRM-CLIENT*ACTUALSIZE[0]=15
SRM-CLIENT*FILE_STATUS[0]=SRM_SUCCESS
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT: PutDone is called successfully</code>
</pre>
If you turn on Gratia GridFTP transfer probes, you should be able to see the accounting information by accessing your Gratia collector. See details in  <a href="/bin/view/Trash/ReleaseDocumentationGratiaTransferProbe" class="twikiLink">Preparing, Installing and Validating Gratia transfer probe</a>.
<p />
<h1><a name="Troubleshooting"></a> Troubleshooting </h1>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="File_Locations"></a> File Locations </span></h2>
<p />
You could find log and configuration files for each of the module in the following location: 
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Module Name</font></a> </th>
			<th bgcolor="#d8dde4" align="right" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Configuration files</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Log files</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> BeStMan </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> $VDT_LOCATION/bestman/conf/bestman.rc </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> $VDT_LOCATION/vdt-app-data/bestman/logs/event.srm.log<br/>$VDT_LOCATION/vdt-app-data/bestman/logs/bestman.log </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> GridFTP </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> $VDT_LOCATION/vdt/services/vdt-run-gsiftp.sh.env </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> $VDT_LOCATION/globus/var/log/gridftp.log<br/> $VDT_LOCATION/globus/var/log/gridftp-auth.log </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Open_Ports"></a> Open Ports </span></h2>
<p />
The following ports are opened for the installed services
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Module Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Port Number</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/ReleaseDocumentation/BeStMan?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Protocol</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> BeStMan </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> default 10080 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> tcp </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol">  </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> default 10443 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> tcp </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> GridFTP </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> 2811 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> tcp </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast">  </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> lowPort,maxPort if needed to control outbound globus connections </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> tcp </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<a name="DebugInfo"></a>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Debugging_Procedure"></a> Debugging Procedure </span></h2>
If  system validation failed, you would probably need to check the each component in order 
to verify your installation. In order to do so you should check all of them in the following order:  <ul>
<li> GUMS (if in use) 
</li> <li> GridFTP 
</li> <li> BeStMan 
</li></ul> 
<p />
<h3><a name="Verifying_GUMS"></a> Verifying GUMS </h3>
<p />
Make sure that the service certificate you specified for BeStMan  configuration with  
<code><b>--cert service_cert</b></code> , <code><b>--key service_key</b></code>  options and GridFTP service certificate are 
accepted by GUMS  (see <a href="https://twiki.grid.iu.edu/bin/view/Trash/ReleaseDocumentationInstallConfigureAndManageGUMS" target="_top">GUMS Installation Documentation</a>)   
<p />
Get mapping <code><b>uid</b></code> for your certificate and verify that this <code><b>uid</b></code> exists on BeStMan and GridFTP node. 
<p />
<h3><a name="Verifying_GridFTP"></a> Verifying GridFTP </h3>
<p />
Login on the node where you have installed have your certificate installed and  access to <a href="http://software.grid.iu.edu/osg-1.2:wn_client" target="_top">http://software.grid.iu.edu/osg-1.2:wn_client</a> or  <a href="http://software.grid.iu.edu/osg-1.2:client" target="_top">http://software.grid.iu.edu/osg-1.2:client</a>.
<p />
You will need to get your <code><b>voms-proxy</b></code> or <code><b>grid_proxy</b></code> certificate see <span class="twikiNewLink">this section<a href="/bin/edit/ReleaseDocumentation/ValidationOfServiceOperation?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="this section (this topic does not yet exist; you can create it)">?</a></span> : 
<p />
Then test GridFTP: 
<pre class="screen">
<code>source <font color="#ff0000">VDT_LOCATION</font>/setup.sh 
echo “This is a test” >/tmp/test 
globus-url-copy -dbg file:///tmp/test gsiftp://<font color="#ff0000">GridFtp_host</font>/tmp/test 
</pre>
<p />
Check the GridFTP logs if you have encountered any errors.
<p />
<h3><a name="Verifying_BeStMan_full_mode"></a> Verifying BeStMan-full-mode </h3>
<p />
First, make sure that BeStMan is running: 
<pre class="screen">
# ps auxww|grep $VDT_LOCATION/bestman|grep -v grep
daemon   27648  0.0  0.0  4944 1168 pts/2    S    07:46   0:00 /bin/sh /usr/local/osg-bestman/bestman/sbin/bestman.server
daemon   27676  3.3  7.4 715240 155208 pts/2 Sl   07:46   1:59 /usr/local/osg-bestman/jdk1.6/bin/java -server -Xmx512m -Dorg.globus.tcp.port.range=20000,25000 -DX509_CERT_DIR=/usr/local/osg-bestman/globus/TRUSTED_CA -Daxis.ServerConfigFile=/usr/local/osg-bestman/bestman/conf/server-config.wsdd gov.lbl.srm.server.Server /usr/local/osg-bestman/bestman/conf/bestman.rc
</pre>
<p />
If BeStMan is not running check information in that log files <code><b>$VDT_LOCATION/vdt-install.log</b></code> and  <code><b>$VDT_LOCATION/vdt-app-data/bestman/logs/bestman.log</b></code>.
<p />
There is no error in the log file (<code><b>$VDT_LOCATION/vdt-app-data/bestman/logs/event.srm.log</b></code>)
<p />
<p />
<h1><a name="References"></a> References </h1>
<p /> <ul>
<li> <a href="/bin/view/Trash/ReleaseDocumentationBestmanGateway" class="twikiLink">OSG BeStMan Gateway Mode page</a>
</li> <li> <a href="https://twiki.grid.iu.edu/bin/view/Documentation/StorageInfrastructureSoftware" target="_top">Storage infrastructure software</a>. 
</li> <li>  <a href="https://twiki.grid.iu.edu/bin/view/Documentation/StorageSiteAdministrator" target="_top">Information on planning, installing and validating storage software</a>
</li> <li> <a href="/bin/view/Trash/ReleaseDocumentationBestmanGatewayXrootd" class="twikiLink">OSG BeStMan Gateway and Xrootd page</a>
</li> <li> <a href="/bin/view/Trash/ReleaseDocumentationBestmanOnCE" class="twikiLink">OSG BeStMan Gateway on CE page</a>
</li> <li> <a href="https://twiki.grid.iu.edu/bin/view/Storage/SEToolsTipsFAQs" target="_top">Tips and FAQ</a>
</li> <li> <a href="/bin/view/Trash/ReleaseDocumentationGratiaTransferProbe" class="twikiLink">OSG Gratia Transfer Probe page</a>
</li> <li> <a href="/bin/view/Trash/ReleaseDocumentationLBNLSrmClient" class="twikiLink">SRM v2.2 LBNL client command line examples</a>
</li> <li> <a href="/bin/view/Documentation/Release3/SrmTester" class="twikiLink">SRM-Tester</a>    * <a href="http://sdm.lbl.gov/bestman" target="_top">BeStMan official website</a>
</li> <li> <a href="http://sdm.lbl.gov/bestman" target="_top">BeStMan website at LBNL</a> - <a href="http://sdm.lbl.gov/bestman/docs/bestman-guide.html" target="_top">BeStMan User guides</a>, <a href="http://sdm.lbl.gov/bestman/docs/bestman-faq.html" target="_top">BeStMan FAQ</a> and latest downloadable tar files available here. Latest downloadables should be the same version as in VDT.
</li> <li> <a href="http://hep-t3.physics.umd.edu/HowToForAdmins.html#osginstall" target="_top">UMD BeStMan Admin Instruction</a> - UMD experience on how to admin BeStMan
</li> <li> <a href="http://wt2.slac.stanford.edu/xrootdfs/bestman-gateway.html" target="_top">SLAC BeStMan Gateway mode Instruction</a> - SLAC guide on BeStMan gateway mode
</li> <li> <a href="http://www.usatlas.bnl.gov/twiki/bin/view/Admins/BestMan" target="_top">US ATLAS BeStMan instruction page</a>
</li> <li> <a href="http://datagrid.lbl.gov/osg" target="_top">OSG SRM Daily Testing Results</a> - OSG provides SRM v2.2 daily testing. Site registration is needed <a href="http://datagrid.lbl.gov/sitereg" target="_top">HERE</a>
</li> <li> <a href="http://sdm.lbl.gov/srm-wg" target="_top">SRM specifications and collaboration</a> - from SRM collaboration working group
</li> <li> <a href="http://s-2.sourceforge.net/" target="_top">S2</a> - A SRM v2.2 test suite from CERN. It provides basic functionality tests based on use cases, and cross-copy tests, as part of the certification process and supports file access/transfer protocols: rfio, dcap, gsidcap, gsiftp
</li></ul> 
<p />
<p />
<h1><a name="Screen_Dump_of_the_Complete_Inst"></a> Screen Dump of the Complete Install Process </h1>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Basic_Installation_and_Configura"></a> Basic Installation and Configuration </span></h2>
<p />
Below is a screen dump of basic installation and configuration of BeStMan: <ul>
<li> create and using gridmap file for authorization
</li> <li> running on default ports
</li> <li> using default certificate and key files
</li> <li> using default volatile storage area 
</li> <li> not enabling gratia probe services
</li></ul> 
<span class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdReleaseDocumentationBeStMan3show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><span class="twikiLinkLabel twikiUnvisited">More...</span></a> </span> <span id="twistyIdReleaseDocumentationBeStMan3hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><span class="twikiLinkLabel twikiUnvisited">Close</span></a> </span>  </span><!--/twistyPlugin twikiMakeVisibleInline--> <span class="twistyPlugin"><span id="twistyIdReleaseDocumentationBeStMan3toggle" class="twistyContent twikiMakeHidden twistyInited">
Login as root:
<pre class="rootscreen">
#cd /usr/local
#cd pacman-3.29
#source setup.sh
#cd ..
#mkdir osg_1.2-bestman
#pacman -get http://software.grid.iu.edu/osg-1.2:Bestman
Do you want to add [http://software.grid.iu.edu/osg-1.2] to [trusted.caches]? (y/n/yall): yall
Beginning VDT prerequisite checking script vdt-common/vdt-prereq-check...       

All prerequisite checks are satisfied.
                                                                          


========== IMPORTANT ==========
Most of the software installed by the VDT *will not work* until you install
certificates.  To complete your CA certificate installation, see the notes
in the post-install/README file.


# source setup.sh
# $VDT_LOCATION/vdt/bin/vdt-ca-manage setupca --location local -url osg
Setting CA Certificates for VDT installation at '/usr/local/osg_1.2-bestman'

Setup completed successfully.
# vdt-post-install
Starting...
Configuring PRIMA... Done.
Configuring EDG-Make-Gridmap... Done.
Completed all configuration.

# vdt-version

You have installed a subset of VDT version 2.0.0p13:

Software                                                 Status              
--------                                                 ------              
Berkeley Storage Manager (BeStMan) 2.2.1.3.8             OK                  
vdt-ca-manage 1.1                                        OK                  
vdt-update-certs 2.5                                     OK                  
CA Certificates 1.13 (includes IGTF 1.34 CAs)            -                   
EDG Make Gridmap 3.0.0                                   OK                  
Fetch CRL 2.6.6                                          OK                  
GPT 3.2-4.0.8p1                                          OK                  
Gratia GridFTP Probe 1.06.13b-1                          OK                  
Grid User Management System (GUMS) Client 1.3.17         OK                  
Java 5 SDK 1.5.0_21                                      OK                  
Java 6 SDK 1.6.0_16                                      OK                  
Logrotate 3.7                                            OK                  
PRIMA Authorization Module 0.8.4                         OK                  
pyOpenSSL module 0.9                                     OK                  
VOMS Client 1.8.8-2p1                                    OK                  
Wget 1.11.4                                              OK                  


Status legend:
OK: Software is up to date with the latest release in VDT version 2.0.0
- : Not enough information to determine if updates are available.
See man page for more information.

# vdt-control --list
Service                 | Type   | Desired State
------------------------+--------+--------------
fetch-crl               | cron   | do not enable
vdt-rotate-logs         | cron   | do not enable
vdt-update-certs        | cron   | do not enable
gsiftp                  | inetd  | do not enable
gratia-gridftp-transfer | cron   | do not enable
gums-host-cron          | cron   | do not enable
edg-mkgridmap           | cron   | do not enable

# $VDT_LOCATION/vdt/setup/configure_bestman --server y 

# vdt-control -enable fetch-crl vdt-rotate-logs vdt-update-certs edg-mkgridmap gsiftp
running 'vdt-register-service --name fetch-crl --enable'... ok
running 'vdt-register-service --name vdt-rotate-logs --enable'... ok
running 'vdt-register-service --name vdt-update-certs --enable'... ok

# vdt-control --list
Service                 | Type   | Desired State
------------------------+--------+--------------
fetch-crl               | cron   | enable
vdt-rotate-logs         | cron   | enable
vdt-update-certs        | cron   | enable
gsiftp                  | inetd  | enable
gratia-gridftp-transfer | cron   | do not enable
gums-host-cron          | cron   | do not enable
edg-mkgridmap           | cron   | enable
bestman                 | init   | enable
# $VDT_LOCATION/edg/sbin/edg-mkgridmap

# vdt-control --on
enabling cron service fetch-crl... ok
enabling cron service vdt-rotate-logs... ok
enabling cron service vdt-update-certs... ok
enabling inetd service gsiftp... ok
skipping cron service 'gratia-gridftp-transfer' -- marked as disabled
skipping cron service 'gums-host-cron' -- marked as disabled
enabling cron service edg-mkgridmap... ok
enabling init service bestman... ok
</pre>
Login as user:
<pre class="screen">
$ source /usr/local/osg_1.2.6_bestman/setup.sh
$ export PATH=/usr/local/osg_1.2.6_bestman/bestman/bin:$PATH
$ grid-proxy-init 
Your identity: /DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508821
Enter GRID pass phrase for this identity:
Creating proxy ...................................... Done
Your proxy is valid until: Fri Feb 19 03:27:02 2010

$ srm-ping srm://fg0x1.fnal.gov:10443/srm/v2/server 
srm-ping   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Connecting to serviceurl httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-PING: Tue Mar 02 15:15:29 CST 2010  Calling SrmPing Request...
versionInfo=v2.2

Extra information (Key=Value)
backend_type=BeStMan
backend_version=2.2.1.3.8
backend_build_date=2009-12-03T05:09:14.000Z 
gsiftpTxfServers[0]=gsiftp://fg0x1.fnal.gov
clientDN=/DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508821
localIDMapped=fnalgrid

$ echo "This is a test " > /tmp/test

$ srm-copy   file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test
srm-copy   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Tue Mar 02 15:15:59 CST 2010 Connecting to httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-CLIENT: Tue Mar 02 15:16:00 CST 2010 Calling SrmPrepareToPutRequest now ...
request.token=fnalgrid:0_PUT_3041267912
status=SRM_REQUEST_QUEUED
explanation=null
SRM-CLIENT: Next status call in 10 seconds.
SRM-CLIENT: Tue Mar 02 15:16:11 CST 2010 Calling Status at Tue Mar 02 15:16:11 CST 2010
SRM-CLIENT: Result Status from SRM (srmStatusOfPutRequest)=SRM_SUCCESS

SRM-CLIENT: RemainingPinTime=289
SRM-CLIENT: received TURL=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-1603597117/test

SRM-CLIENT: Tue Mar 02 15:16:12 CST 2010 start file transfer
SRM-CLIENT:Source=file:////tmp/test
SRM-CLIENT:Target=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-1603597117/test

SRM-CLIENT: Tue Mar 02 15:16:15 CST 2010 end file transfer for file:////tmp/test

SRM-CLIENT: Tue Mar 02 15:16:15 CST 2010 Calling putDone for srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT: Request completed with success

SRM-CLIENT: Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=fnalgrid:0_PUT_3041267912
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file:////tmp/test
SRM-CLIENT*TARGETURL[0]=srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test
SRM-CLIENT*TRANSFERURL[0]=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-1603597117/test
SRM-CLIENT*ACTUALSIZE[0]=15
SRM-CLIENT*FILE_STATUS[0]=SRM_SUCCESS
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT: PutDone is called successfully
</pre>
</span></span> <!--/twistyPlugin-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Advanced_Installation_and_Config"></a> Advanced Installation and Configuration </span></h2>
<p />
The is a screen dump of basic installation and configuration of BeStMan: <ul>
<li> using GUMS for authorization
</li> <li> running on specified ports
</li> <li> using different certificate and key files
</li> <li> specifying custodial storage area
</li> <li> enabling gratia probe services
</li></ul> 
<p />
<span class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdReleaseDocumentationBeStMan4show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><span class="twikiLinkLabel twikiUnvisited">More...</span></a> </span> <span id="twistyIdReleaseDocumentationBeStMan4hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><span class="twikiLinkLabel twikiUnvisited">Close</span></a> </span>  </span><!--/twistyPlugin twikiMakeVisibleInline--> <span class="twistyPlugin"><span id="twistyIdReleaseDocumentationBeStMan4toggle" class="twistyContent twikiMakeHidden twistyInited">
Login as root:
<pre class="rootscreen">
#cd /usr/local
#cd pacman-3.29
#source setup.sh
#cd ..
# mkdir osg_1.2-bestman
# cd osg_1.2-bestman
#  export VDT_GUMS_HOST=gums.fnal.gov
#  pacman -get http://software.grid.iu.edu/osg-1.2:Bestman
Do you want to add [http://software.grid.iu.edu/osg-1.2] to [trusted.caches]? (y/n/yall): yall
Beginning VDT prerequisite checking script vdt-common/vdt-prereq-check...       

All prerequisite checks are satisfied.
                                                                          


========== IMPORTANT ==========
Most of the software installed by the VDT *will not work* until you install
certificates.  To complete your CA certificate installation, see the notes
in the post-install/README file.

# source setup.sh
# $VDT_LOCATION/vdt/bin/vdt-ca-manage setupca --location local -url osg
Setting CA Certificates for VDT installation at '/usr/local/osg_1.2-bestman'

Setup completed successfully.
# vdt-post-install 
Starting...
Configuring PRIMA... Done.
Configuring EDG-Make-Gridmap... Done.
Completed all configuration.

# cp $VDT_LOCATION/post-install/prima-authz.conf /etc/grid-security 
# cp $VDT_LOCATION/post-install/gsi-authz.conf /etc/grid-security 

# $VDT_LOCATION/vdt/setup/configure_bestman --server y --gums-host gums.fnal.gov --gums-port 8443 --cert /etc/grid-security/http1/httpcert.pem --key  /etc/grid-security/http1/httpkey.pem --with-custodial-storage-path /cache  --with-custodial-storage-size 10000
# mkdir /cache
# chown daemon.daemon /cache
# chmod 777 /cache
# $VDT_LOCATION/vdt/setup/configure_gratia --probe-cron --force-probe-config --site-name FERMI_TEST_1 --report-to gratia-osg-itb.opensciencegrid.org:8881 --probe gridftp-transfer
[root@fg0x1 osg_1.2-bestman]# vdt-control --enable fetch-crl  vdt-rotate-logs vdt-update-certs  gums-host-cron vdt-update-certs gsiftp gratia-gridftp-transfer
running 'vdt-register-service --name fetch-crl --enable'... ok
running 'vdt-register-service --name vdt-rotate-logs --enable'... ok
running 'vdt-register-service --name vdt-update-certs --enable'... ok
running 'vdt-register-service --name gums-host-cron --enable'... ok
running 'vdt-register-service --name vdt-update-certs --enable'... ok
running 'vdt-register-service --name gsiftp --enable'... ok
running 'vdt-register-service --name gratia-gridftp-transfer --enable'... ok
[root@fg0x1 osg_1.2-bestman]# vdt-control --list
Service                 | Type   | Desired State
------------------------+--------+--------------
fetch-crl               | cron   | enable
vdt-rotate-logs         | cron   | enable
vdt-update-certs        | cron   | enable
gsiftp                  | inetd  | enable
gratia-gridftp-transfer | cron   | enable
gums-host-cron          | cron   | enable
edg-mkgridmap           | cron   | do not enable
bestman                 | init   | enable
</pre>
<p />
Login as user:
<pre class="screen">
$ source /usr/local/osg_1.2.6_bestman/setup.sh
$ export PATH=/usr/local/osg_1.2.6_bestman/bestman/bin:$PATH
$ grid-proxy-init 
Your identity: /DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508821
Enter GRID pass phrase for this identity:
Creating proxy ...................................... Done
Your proxy is valid until: Fri Feb 19 03:27:02 2010
$ srm-ping srm://fg0x1.fnal.gov:10443/srm/v2/server 
srm-ping   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Connecting to serviceurl httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-PING: Tue Mar 02 16:22:49 CST 2010  Calling SrmPing Request...
versionInfo=v2.2

Extra information (Key=Value)
backend_type=BeStMan
backend_version=2.2.1.3.8
backend_build_date=2009-12-03T05:09:14.000Z 
gsiftpTxfServers[0]=gsiftp://fg0x1.fnal.gov
clientDN=/DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508821
gumsIDMapped=fnalgrid

$ srm-copy   file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test
srm-copy   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Tue Mar 02 16:28:08 CST 2010 Connecting to httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-CLIENT: Tue Mar 02 16:28:08 CST 2010 Calling SrmPrepareToPutRequest now ...
request.token=fnalgrid:2_PUT_3078426836
status=SRM_REQUEST_QUEUED
explanation=null
SRM-CLIENT: Next status call in 10 seconds.
SRM-CLIENT: Tue Mar 02 16:28:20 CST 2010 Calling Status at Tue Mar 02 16:28:20 CST 2010
SRM-CLIENT: Result Status from SRM (srmStatusOfPutRequest)=SRM_SUCCESS

SRM-CLIENT: RemainingPinTime=289
SRM-CLIENT: received TURL=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-732596058/test

SRM-CLIENT: Tue Mar 02 16:28:21 CST 2010 start file transfer
SRM-CLIENT:Source=file:////tmp/test
SRM-CLIENT:Target=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-732596058/test

SRM-CLIENT: Tue Mar 02 16:28:23 CST 2010 end file transfer for file:////tmp/test

SRM-CLIENT: Tue Mar 02 16:28:23 CST 2010 Calling putDone for srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT: Request completed with success

SRM-CLIENT: Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=fnalgrid:2_PUT_3078426836
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file:////tmp/test
SRM-CLIENT*TARGETURL[0]=srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test
SRM-CLIENT*TRANSFERURL[0]=gsiftp://fg0x1.fnal.gov//usr/local/osg_1.2-bestman/vdt-app-data/bestman/cache/fnalgrid/V.0.0-732596058/test
SRM-CLIENT*ACTUALSIZE[0]=15
SRM-CLIENT*FILE_STATUS[0]=SRM_SUCCESS
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT: PutDone is called successfully

$ #reserve the space

$ srm-sp-reserve  srm://fg0x1.fnal.gov:10443/srm/v2/server  -retentionpolicy custodial -userdesc my_token  -size 1000 -gsize 1000  -lifetime -1    
srm-sp-reserve   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 

SRM-CLIENT: Exception from client=Unable to locate a login configuration
SRM-CLIENT: Connecting to serviceurl httpg://fg0x1.fnal.gov:10443/srm/v2/server
SRM-CLIENT: Tue Mar 02 16:27:50 CST 2010 Calling SrmReserveSpace

SRM-CLIENT: .......................
        Status Code=SRM_SUCCESS
        SpaceToken=P.2
        TotalReservedSpaceSize=1000
        Guaranteed Space Size=1000
        Lifetime=-1

Printing text report now...

SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*REQUEST-TOKEN=null
SRM-CLIENT*SPACE-TOKEN=P.2
SRM-CLIENT*EXPLANATION=null
SRM-CLIENT*TOTALRESERVEDSPACESIZE=1000
SRM-CLIENT*GUARANTEEDSPACESIZE=1000
SRM-CLIENT*LIFETIME=-1

$ srm-copy   file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test_sp -spacetoken P.2
srm-copy   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Tue Mar 02 16:28:47 CST 2010 Connecting to httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-CLIENT: Tue Mar 02 16:28:48 CST 2010 Calling SrmPrepareToPutRequest now ...
request.token=fnalgrid:3_PUT_3078426836
status=SRM_REQUEST_QUEUED
explanation=null
SRM-CLIENT: Next status call in 10 seconds.
SRM-CLIENT: Tue Mar 02 16:28:59 CST 2010 Calling Status at Tue Mar 02 16:28:59 CST 2010
SRM-CLIENT: Result Status from SRM (srmStatusOfPutRequest)=SRM_SUCCESS

SRM-CLIENT: RemainingPinTime=289
SRM-CLIENT: received TURL=gsiftp://fg0x1.fnal.gov//cache/fnalgrid/P.2-1620785401/test_sp

SRM-CLIENT: Tue Mar 02 16:29:00 CST 2010 start file transfer
SRM-CLIENT:Source=file:////tmp/test
SRM-CLIENT:Target=gsiftp://fg0x1.fnal.gov//cache/fnalgrid/P.2-1620785401/test_sp

SRM-CLIENT: Tue Mar 02 16:29:02 CST 2010 end file transfer for file:////tmp/test

SRM-CLIENT: Tue Mar 02 16:29:02 CST 2010 Calling putDone for srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_sp
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT: Request completed with success

SRM-CLIENT: Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=fnalgrid:3_PUT_3078426836
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file:////tmp/test
SRM-CLIENT*TARGETURL[0]=srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_sp
SRM-CLIENT*TRANSFERURL[0]=gsiftp://fg0x1.fnal.gov//cache/fnalgrid/P.2-1620785401/test_sp
SRM-CLIENT*ACTUALSIZE[0]=15
SRM-CLIENT*FILE_STATUS[0]=SRM_SUCCESS
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT: PutDone is called successfully
</pre>
</span></span> <!--/twistyPlugin-->
<p />
<p />
<p />
<h1><a name="Comments"></a> Comments </h1>
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <span class="twikiNewLink">PM2RPM<a href="/bin/edit/ReleaseDocumentation/PM2RPM?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="PM2RPM (this topic does not yet exist; you can create it)">?</a></span>_TASK = SE </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Main/RobertEngel" class="twikiLink">RobertEngel</a> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> 28 Aug 2011 - 06:24 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/ReleaseDocumentation/BeStMan" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/ReleaseDocumentation/FirstLast?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">DouglasStrain<a href="/bin/edit/ReleaseDocumentation/DouglasStrain?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="DouglasStrain (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/ReleaseDocumentation/ComputeElement?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = Storage
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/ReleaseDocumentation/EndUser?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/ReleaseDocumentation/SysAdmin?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Installation  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/ReleaseDocumentation/FirstLast?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       =  Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/ReleaseDocumentation/FirstLast?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">DouglasStrain<a href="/bin/edit/ReleaseDocumentation/DouglasStrain?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="DouglasStrain (this topic does not yet exist; you can create it)">?</a></span> Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: ReleaseDocumentation<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><span class="twikiNewLink">Trash/Trash/Integration<a href="/bin/edit/Trash/Trash/Integration/WebHome?topicparent=ReleaseDocumentation.BeStMan" rel="nofollow" title="Trash/Trash/Integration (this topic does not yet exist; you can create it)">?</a></span> &gt; <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>BeStMan</span> <br />    
Topic revision: r103 - 07 Feb 2017 - 20:59:04 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />