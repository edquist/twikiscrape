<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> ProblemsEncounteredByVOsDuringJobSubmission &lt; Production &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Production/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Production/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Production/ProblemsEncounteredByVOsDuringJobSubmission?_T=16 Feb 2017" type="application/x-wiki" title="edit ProblemsEncounteredByVOsDuringJobSubmission" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Production/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Production/ProblemsEncounteredByVOsDuringJobSubmission"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <div class="twikiToc"> <ul>
<li> <a href="?cover=print#Purpose">Purpose</a>
</li> <li> <a href="?cover=print#Text_Color_Interpretation">Text Color Interpretation</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_select"> Problems encountered when selecting/targeting an optimal subset of sites</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_access"> Problems encountered when accessing remote sites</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_trying"> Problems encountered when trying to deploy software (either on a WN or on a Gatekeeper)</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_submit"> Problems encountered when submitting a job</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_runnin"> Problems encountered when running a job</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_managi"> Problems encountered when managing persistent data (using SRM)</a>
</li> <li> <a href="?cover=print#Problems_encountered_when_accoun"> Problems encountered when accounting usage and counting errors</a>
</li> <li> <a href="?cover=print#How_are_Job_error_messages_handl"> How are Job error messages handled?</a>
</li> <li> <a href="?cover=print#Additional_thoughts_from_VOs"> Additional thoughts from VOs</a>
</li> <li> <a href="?cover=print#OSGMM_Site_Verification_Checks"> OSGMM Site Verification Checks</a>
</li> <li> <a href="?cover=print#Results_Recommendations_and_Issu"> Results: Recommendations and Issues (for discussion)</a>
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Purpose"></a> Purpose </span></h2>
This document is being used to create a centralized list of problems encountered by different VOs when they submit jobs to the OSG. The purpose of this document is to use this information in developing a strategic approach for tackling/testing for as many of these problems as is reasonable. A more broadly scoped list of problems directly reported by VOs is available  <span class="twikiNewLink">here<a href="/bin/edit/Trash/Trash/VirtualOrganizations/DirectFeedbackOnProductionProblemsOrBottlenecks?topicparent=Production.ProblemsEncounteredByVOsDuringJobSubmission" rel="nofollow" title="here (this topic does not yet exist; you can create it)">?</a></span>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Text_Color_Interpretation"></a> Text Color Interpretation </span></h2> <ul>
<li> <font color="#0000ff"> Blue text represents problems that are solved (or rendered irrelevant) with either OSGMM or that could be added to a Pilot based system. (Some tests would need to be added to the Pilot systems to bring equivalency with OSGMM.) </font>
</li> <li> <font color="#00ffff"> Aqua text represents problems that are solved by OSGMM, but currently not by Pilots </font>
</li> <li> <font color="#ff6600"> Orange text represents problems that are not addressed by either OSGMM or Pilots </font>
</li> <li> Regular black text represents "other" issues
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_select"></a> Problems encountered when selecting/targeting an optimal subset of sites </span></h2> <ol>
<li> <font color="#0000ff"> Which information system and which mechanism to use for retrieving a list of all OSG sites? (nanoHUB, SBGrid) </font>
</li> <li> <font color="#0000ff"> Which workflow management system (and which logical tests) to use for probing all sites? (nanoHUB, SBGrid) </font>
</li> <li> <font color="#0000ff"> Which logic/system/mechanism to use for selecting a 'suitable targeted subset' of sites from all sites across OSG? (CompBioGrid, nanoHUB, SBGrid, Glue-X) </font>
</li> <li> <font color="#0000ff"> Which mechanisms to use for dynamically ranking all sites within this targeted subset of sites? (CompBioGrid, nanoHUB, SBGrid, Glue-X) </font>
</li> <li> <font color="#ff6600"> Fermilab VO relies on ReSS. Some of the information is not readily available via the GLUE Schema 1.3 and thus not via ReSS. For instance, the GLUE schema only specifies the total memory which is available on a given worker node, but it gives no information if, for instance, the batch system will kill a job if it uses &gt;900MB of memory. (Fermilab VO) </font>
</li> <li> <font color="#ff6600"> How to understand Preemption Policies of sites? Currently there is only a binary yes or no, with no way to tell how long a VO's job hasto finish, or which VOs get pre-empted, etc. There are some other fields not present in the GLUE schema, i.e. scratch disk space available per node, which Fermilab VO had to add as customized attributes. (SBGrid, Fermilab VO, nanoHUB) </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_access"></a> Problems encountered when accessing remote sites </span></h2> <ol>
<li> <font color="#0000ff"> Do sites that advertise access to specific VOs actually allow that VO to run?
</li> <li>  Is GRAM working?
</li> <li> Is the Grid-proxy expired?
</li> <li> For users registered as members of more than one VO, is the access properly mapped at sites? (SBGrid, NEBioGrid) </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_trying"></a> Problems encountered when trying to deploy software (either on a WN or on a Gatekeeper) </span></h2> <ol>
<li> <font color="#00ffff"> Is GridFTP up and available to be used to stage-in scripts for building software stacks? (LIGO) </font>
</li> <li> <font color="#0000ff"> Are outgoing connections available?
</li> <li> Is $OSG_APP defined, mounted, and provisioned, and does it have the correct permissions set?
</li> <li> Is $OSG_APP mounted read-only on the worker nodes?
</li> <li> Is $OSG_APP over quota? (Is the size reasonable, sometimes it is underestimated?) </font>
</li> <li> <font color="#00ffff"> Are development tools available (configure, make, C &amp; C++ compilers)? (LIGO)
</li> <li> Are development tools available (configure, make, C &amp; C++ compilers) only on the head node? </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_submit"></a> Problems encountered when submitting a job </span></h2> <ol>
<li> <font color="#0000ff"> Does the output location for the job exist and have the correct permissions? </font>
</li> <li> <font color="#0000ff"> Is the output location over quota? </font>
</li> <li> <font color="#0000ff"> Is GridFTP available to stage the job?
</li> <li> Is Condor-G working correctly on the submit host? (Is the configuration correct?)
</li> <li> Is the jobmanager working?
</li> <li> Is the Condor grid_monitor working? </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_runnin"></a> Problems encountered when running a job </span></h2> <ol>
<li> <font color="#0000ff"> Is $OSG_DATA defined, mounted, and provisioned, and does it have the correct permissions set?
</li> <li> Is $OSG_DATA over quota? (again reasonable use is often underestimated)
</li> <li> Is $OSG_WN_TMP defined, mounted, and provisioned, and does it have the correct permissions set?
</li> <li> Is $OSG_WN_TMP over quota? </font>
</li> <li> <font color="#ff6600"> Is the worker node architecture compatible with the software that was built on the head node? </font>
</li> <li> <font color="#0000ff"> Are outgoing connections being blocked by a firewall?
</li> <li> Are hostnames being resolved? </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_managi"></a> Problems encountered when managing persistent data (using SRM) </span></h2> <ol>
<li> <font color="#ff6600"> Which sites on OSG provide persistent opportunistic storage? (D0, SBGrid, IceCube, Glue-X) </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Problems_encountered_when_accoun"></a> Problems encountered when accounting usage and counting errors </span></h2> <ol>
<li> How to resolve anomalies in reporting of errors, and thus error in wasted wall hours, when using Pilot based job management? (GEANT4, SBGrid, and other VOs using Pilots)
</li> <li> Is OSG Accounting error-proof? E.g., how to understand wall hours consumption of partially executed workflows or evicted jobs? (SBGrid)
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="How_are_Job_error_messages_handl"></a> How are Job error messages handled? </span></h2> <ol>
<li> <font color="#0000ff"> <span class="twikiNewLink">GridJobStatus<a href="/bin/edit/Production/GridJobStatus?topicparent=Production.ProblemsEncounteredByVOsDuringJobSubmission" rel="nofollow" title="GridJobStatus (this topic does not yet exist; you can create it)">?</a></span>: Done; Globus error 8 </font>
</li> <li> ...
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Additional_thoughts_from_VOs"></a> Additional thoughts from VOs </span></h2> <ol>
<li> <font color="#0000ff"> "The various discussions I had during the AHM and your presentation made me think that the pilot job should do more than just verify the OSG environment. I think the user should be able to configure the pilot in such a way that it verifies whatever requirements the user's application has. The pilots that are started on behalf of the user should also keep a record of errors which in turn could be used to create statistics. Both features are currently present in our <a href="mailto&#58;E&#64;OSG">E&#64;OSG</a> software." (Robert E., LIGO) </font>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="OSGMM_Site_Verification_Checks"></a> OSGMM Site Verification Checks </span></h2>
<p />
Fatal / fork (head node)
<p /> <ul>
<li> $HOME disk usage over 30 GB
</li> <li> $OSG_APP not defined
</li> <li> $OSG_DATA not defined
</li> <li> $OSG_WN_TMP not defined
</li></ul> 
<p />
Advertised (non-fatal) / fork (head node)
<p /> <ul>
<li> Is $OSG_APP writable?
</li> <li> Is $OSG_DATA writable?
</li> <li> $GLOBUS_LOCATION path
</li></ul> 
<p />
Fatal / jobmanager (worker node)
<p /> <ul>
<li> $OSG_APP not defined
</li> <li> $OSG_DATA not defined
</li> <li> $OSG_WN_TMP not defined
</li> <li> $OSG_GRID not defined
</li></ul> 
<p />
Advertised (non-fatal) / jobmanager (worker node)
<p /> <ul>
<li> Is $OSG_APP/$VO_NAME/jobenv.sh sourceable?
</li> <li> Is $OSG_GRID/setup.sh sourceable?
</li> <li> GB disk free for $OSG_DATA
</li> <li> GB disk free for $OSG_APP
</li> <li> GB disk free for $OSG_WN_TMP
</li> <li> Is globus-url-copy installed?
</li> <li> Is wget installed?
</li> <li> Does the site allow outbound network traffic?
</li> <li> Is $OSG_APP writable?
</li> <li> Is $OSG_DATA writable?
</li> <li> Is $OSG_WN_TMP writable?
</li> <li> $GLOBUS_LOCATION path
</li> <li> CPU bitness
</li> <li> Number of cores on the node
</li> <li> Total memory
</li> <li> Memory per core
</li> <li> Is the site using pool accounts?
</li></ul> 
<p />
The above tests are the standard ones shipped with OSGMM. VOs can add their own. Using Trash/Engagement as an example, we use the non-fatal tests for advertising available software (installed by the OSGMM maintenance jobs), and run more functional tests such as verifying that globus-url-copy can copy a file, and by that testing if for example the CRLs are updated correctly on the worker nodes.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Results_Recommendations_and_Issu"></a> Results: Recommendations and Issues (for discussion) </span></h2>
<p />
If the OSG pilot based projects (e.g. GlideinWMS and PANDA for starters) could incorporate the site verification and site maintenance features of OSGMM, one could make a strong case that these should be the recommended models for new VOs to use on the OSG. <ol>
<li> It is recommended that a common site verification test group be created (and included in the VDT) for general use As a baseline, it should incorporate a subset of the tests (TBD) currently in the OSGMM site verification suite. 
</li> <li> It is recommended that the site verification tests be incorporated into the pilot projects.
</li> <li> It is recommended that Pilot projects also incorporate the ability to run site maintenance jobs that verify and build (when needed) requested software components needed by VOs to run. 
</li> <li> Opportunistic storage remains a problem and should be tackled separately, although this may eventually require some new components to be included to the site verification and or site maintenance harness. 
</li></ol> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Production<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Production/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>ProblemsEncounteredByVOsDuringJobSubmission</span> <br />    
Topic revision: r16 - 12 Oct 2016 - 15:24:27 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />