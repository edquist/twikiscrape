&lt;style type=&quot;text/css&quot;&gt;
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
&lt;/style&gt;

---+ Monday Exercise 1.2: Experiment With Basic HTCondor Commands

The goal of this exercise is to use the basic informational HTCondor commands, =condor_status= and =condor_q=. They will be useful for monitoring your jobs and available slots throughout the day.

This exercise should take only a few minutes.


---++ Viewing Slots

As discussed in the lecture, the =condor_status= command is used to view the current state of slots in an HTCondor pool.

At its most basic, the command is very simple:

&lt;pre class=&quot;screen&quot;&gt;
%UCL_PROMPT_SHORT% &lt;strong&gt;condor_status&lt;/strong&gt;
&lt;/pre&gt;

This command, running on our (CHTC) pool, will produce a lot of output; there is one line per slot, and we typically have over 10,000 slots.

Here is a sample of the main part of the output:

&lt;pre class=&quot;screen&quot;&gt;
slot1_31@e437.chtc.wisc.edu        LINUX      X86_64 Unclaimed Idle      0.000 8053  0+01:14:34
slot1_32@e437.chtc.wisc.edu        LINUX      X86_64 Unclaimed Idle      0.000 8053  0+03:57:00
slot1_33@e437.chtc.wisc.edu        LINUX      X86_64 Unclaimed Idle      0.000 8053  1+00:05:17
slot1@e438.chtc.wisc.edu           LINUX      X86_64 Owner     Idle      0.300  250  7+03:22:21
&lt;em&gt;slot1_1@e438.chtc.wisc.edu         LINUX      X86_64 Claimed   Busy      0.930 1024  0+02:42:08&lt;/em&gt;
slot1_2@e438.chtc.wisc.edu         LINUX      X86_64 Claimed   Busy      3.530 1024  0+02:40:24
&lt;/pre&gt;

This output consists of 8 columns:

| *Col* | *Example* | *Meaning* |
| Name | =slot1_1@e438.chtc.wisc.edu= | Slot name and hostname |
| !OpSys | =LINUX= | Operating system |
| Arch | =X86_64= | Machine architecture (e.g., Intel 64 bit) |
| State | =Claimed= | State of the slot (=Unclaimed= is available, =Owner= is being used by the machine owner, =Claimed= is matched to a job) |
| Activity | =Busy= | Is there activity on the slot? |
| !LoadAv | =0.930= | Load average, a measure of activity on the slot |
| Mem | =1024= | Memory available to the slot, in MB |
| !ActvtyTime | =0+02:42:08= | Amount of time spent in current activity (days + hours:minutes:seconds) |

At the end of the slot listing, there is a summary. Here is a sample:

&lt;pre class=&quot;screen&quot;&gt;
                     Machines Owner Claimed Unclaimed Matched Preempting  Drain

        X86_64/LINUX    11831     0   11194       631       0          0      6
      X86_64/WINDOWS        2     2       0         0       0          0      0

               Total    11833     2   11194       631       0          0      6
&lt;/pre&gt;

There is one row of summary for each machine architecture/operating system combination. The columns are the different states that a slot can be in. The final row gives a summary of slot states for the whole pool.

*Questions:*

   * For the sample above, how many 64-bit Linux slots are available? (Hint: Unclaimed = available.)
   * For the sample above, how many slots total are being used by their owner?

Now, run =condor_status= yourself and try these:

   * How many 64-bit Linux slots are in the pool right now? How does that compare to the sample above?
   * How many of those 64-bit Linux slots are available now?


---++ Viewing Jobs

The =condor_q= command lists jobs that are on this submit machine and that are running or waiting to run. The =_q= part of the name is meant to suggest the word “queue”, or list of jobs _waiting_ to finish.

---+++ Viewing Your Own Jobs

The simplest form of the command lists only your jobs:

&lt;pre class=&quot;screen&quot;&gt;
%UCL_PROMPT_SHORT% &lt;strong&gt;condor_q&lt;/strong&gt;
&lt;/pre&gt;

The main part of the output (which may be empty!) shows one job ID per line:

&lt;pre class=&quot;screen&quot;&gt;
-- Schedd: learn.chtc.wisc.edu : &lt;...&gt; : ...
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
&lt;em&gt;2359.0   cat             6/20 12:19   0+00:00:00 I  0   0.0  hostname  &lt;/em&gt;
&lt;/pre&gt;

This output consists of 8 columns:

| *Col* | *Example* | *Meaning* |
| ID | =2359.0= | Job ID, which is the =cluster=, a dot character (=.=), and the =process= |
| OWNER | =cat= | The user ID of the user who submitted the job |
| SUBMITTED | =6/20 12:19= | The date and time when the job was submitted |
| RUN_TIME | =0+00:00:00= | Total time spent running so far (days + hours:minutes:seconds) |
| ST | =I= | Status of job: =I= is Idle (waiting to run), =R= is Running, =H= is Held, etc. |
| PRI | =0= | Job priority (see next lecture) |
| SIZE | =0.0= | Current run-time memory usage, in MB |
| CMD | =hostname= | Name of the executable to be run |

At the end of the job listing, there is a summary. Here is a sample:

&lt;pre class=&quot;screen&quot;&gt;
1 jobs; 0 completed, 0 removed, 1 idle, 0 running, 0 held, 0 suspended
&lt;/pre&gt;

It shows total counts of jobs in the different possible states.

*Questions:*

   * For the sample above, when was the job submitted?
   * For the sample above, was the job running or not yet? How can you tell?


---+++ Viewing Everyone’s Jobs

By default, the =condor_q= command shows *your* jobs only. To see everyone’s jobs that are queued on the machine, add the =-all= option:

&lt;pre class=&quot;screen&quot;&gt;
%UCL_PROMPT_SHORT% &lt;strong&gt;condor_q -all&lt;/strong&gt;
&lt;/pre&gt;

Run that command now and use its output to answer the following questions:

   * How many jobs are queued in total (i.e., running or waiting to run)?
   * How many jobs from this submit machine are running right now?


---+++ Extra Information

Both =condor_status= and =condor_q= have many command-line options, some of which significantly change their output. You will explore a few of the most useful options in the next lecture and set of exercises, but if you want to experiment now, go ahead! There are a few ways to learn more about the commands:

   * Use the (brief) built-in help for the commands, e.g.: =condor_q -h=
   * Read the installed man(ual) pages for the commands, e.g.: =man condor_q=
   * Find the command in [[http://research.cs.wisc.edu/htcondor/manual/][the online manual]]; *note:* the text online is the same as the =man= text, only formatted for the web
