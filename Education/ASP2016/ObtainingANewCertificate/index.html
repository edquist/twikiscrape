<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> ObtainingANewCertificate &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/ObtainingANewCertificate?_T=16 Feb 2017" type="application/x-wiki" title="edit ObtainingANewCertificate" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/ObtainingANewCertificate"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <link rel="stylesheet" type="text/css" href="https://twiki.opensciencegrid.org/twiki/pub/Education/ASP2016/WorkshopTutorialModules/exercises.css">
<p />
<h1><a name="Obtaining_a_New_Certificate"></a>  Obtaining a New Certificate </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Create_a_certificate_request"> Create a certificate request</a>
</li> <li> <a href="?cover=print#Sign_the_Request"> Sign the Request</a>
</li> <li> <a href="?cover=print#Proxy_certificate_using_GCS_Cert"> Proxy certificate using GCS Certificates</a>
</li></ul> 
</div>
<p />
<p />
<form name="EDITTHIS" action="/bin/edit/Education/ASP2016/ObtainingANewCertificate" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487215570" name="t"></form>
<p />
A valid certificate was already installed for you and configuration was set up to use it. In this step we will attempt to get a new certificate from Globus Certificate Service. Globus Certificate Service(GCS) is a web-based CA service that issues certificates.
<p />
These are not secure certificates since anyone can obtain certificates from this CA and are generally used for testing. But since an infrastructure needs to trust a CA for anyone to use the certificate issued by the CA, issuing such certificates doesn't pose any security threat. For instance the certificates you obtain from this CA can be used to submit jobs or transfer files on the server running on your local machine, but will fail if you submit jobs on the remote cluster, since the cluster does not trust GCS CA.
<p />
<h3><a name="Create_a_certificate_request"></a> Create a certificate request </h3>
<pre class="screen">
[train31 ~]$ <userinput>grid-cert-request -dir testCerts</userinput>
Enter your name, e.g., John Smith: <userinput>Trainee 31</userinput>
A certificate request and private key is being created.
You will be asked to enter a PEM pass phrase.
This pass phrase is akin to your account password, 
and is used to protect your key file.
If you forget your pass phrase, you will need to
obtain a new certificate.

Generating a 1024 bit RSA private key
..........++++++
...............++++++
writing new private key to '/home/train31/testCerts/userkey.pem'
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
...
A private key and a certificate request has been generated with the subject:

/C=US/O=Globus Alliance/OU=User/CN=Trainee 31

If the CN=Trainee 31 is not appropriate, rerun this
script with the -force -cn "Common Name" options.

Your private key is stored in /home/train31/testCerts/userkey.pem
Your request is stored in /home/train31/testCerts/usercert_request.pem
..
[train31 ~]$ 
</pre>
<p />
The command will ask for a pass phrase and this is used to encrypt the private key. The <code>-dir</code> option stores the created certificates in the specified directory. This is so that we don't overwrite the certificates in the default directory 
<p />
on      Ignore notes on emailing it. We will upload it.
<p />
<pre class="screen">
[train31 ~]$ <userinput>ls -lt testCerts/</userinput>
total 8
-rw-r--r--  1 train31 train31 1322 Jun 23 10:10 usercert_request.pem
-r--------  1 train31 train31  963 Jun 23 10:10 userkey.pem
-rw-r--r--  1 train31 train31    0 Jun 23 10:10 usercert.pem
[train31 ~]$ 
</pre>
<p />
The <code>testCerts</code> directory has three files:  <ol>
<li> <code>usercert_request.pem</code>: the request that the CA needs to sign.
</li> <li> <code>userkey.pem</code>: the file with encrypted private key. Note the permissions on the file.
</li> <li> <code>usercert.pem</code>: a place holder for the signed certificate obtained from the CA. It currently has a zero file size.
</li></ol> 
<p />
<p />
<h3><a name="Sign_the_Request"></a> Sign the Request </h3>
The request must now be signed by the CA, which in our case is the GCS. The GCS allows for the certificate request to be pasted on to their webpage.  <ol>
<li> In your browser open <a href="http://gcs.globus.org:8080/gcs/index.html" target="_top">Globus Certificate Service</a>. 
</li> <li> Click <strong>Acquiring User Certificate</strong> under <strong>Available Services</strong>. <br />     The first two steps have already been completed: the CA certificate has been installed on your machine.
</li> <li> , Choose the second option, <strong>Paste the certificate request text in the box below</strong>.
</li> <li> Open <code>testCerts/usercert_request.pem</code>, copy its complete contents and paste them into the text box. <br />     <br />     The service returns the signed certificate. 
</li> <li> Copy the contents from <code>----BEGIN CERTIFICATE----</code> to <code>----END CERTIFICATE----</code> into <code>testCerts/usercert.pem</code>.
</li></ol> 
<p />
<h3><a name="Proxy_certificate_using_GCS_Cert"></a> Proxy certificate using GCS Certificates </h3>
First we need to ensure the GCS certificates have been installed correctly and a proxy can be generated.
<p />
<pre class="screen">
[train31 ~]$ <userinput>grid-proxy-init -cert testCerts/usercert.pem -key testCerts/userkey.pem -out gcsProxy -verify</userinput>
Your identity: /C=US/O=Globus Alliance/OU=User/CN=10c00791bfb.54294d53
Enter GRID pass phrase for this identity: <em><strong># not echoed!</strong></em>
Creating proxy ............................................ Done
Proxy Verify OK
Your proxy is valid until: Fri Jun 23 22:14:26 2006
[train31 ~]$ 
</pre>
<p />
The certificate name is chosen in random by GCS. This is because there is no explicit Registration Authority to determine that the name is unique. There are several options used: <ul>
<li> <code>-cert</code> and <code>-key</code> allow you to specify non-default certificate and key file locations.
</li> <li> <code>-out</code> allows you to specify a non-default location for the proxy file.
</li> <li> <code>-verify</code> ensures that both the certificates used to create proxy and the CA are installed correctly and valid.
</li></ul> 
<p />
The contents of this proxy can be viewed using the <em>grid-proxy-info</em>.
<p />
<pre class="screen">
[train31 ~]$ <userinput>grid-proxy-info -file gcsProxy </userinput>
subject  : /C=US/O=Globus Alliance/OU=User/CN=10c00791bfb.54294d53/CN=1488313937
issuer   : /C=US/O=Globus Alliance/OU=User/CN=10c00791bfb.54294d53
identity : /C=US/O=Globus Alliance/OU=User/CN=10c00791bfb.54294d53
type     : Proxy draft (pre-RFC) compliant impersonation proxy
strength : 512 bits
path     : gcsProxy
timeleft : 11:58:33
[train31 ~]$ 
</pre>
<p />
The <code>-file</code> allows you to specify a non-default location for the proxy file.
<p />
The environment variable <em>X509_USER_PROXY</em> can be set to the proxy location. These tools will use that rather than default location. 
<p />
on      The issuer of the proxy is the DN from your GCS certificate.
<p />
<p />
<p />
<p />
<hr />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Backlinks"></a>  Backlinks </span></h2>
<p />
<hr/>
Twiki topics in <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> web containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Last Updated by </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <a href="/bin/view/Education/ASP2016/AGWSecurityExercises" class="twikiLink">AGWSecurityExercises</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross - 06 Dec 2016 - 18:12</a> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <a href="/bin/view/Education/ASP2016/LectureTwoTutorial" class="twikiLink">LectureTwoTutorial</a> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross - 06 Dec 2016 - 18:12</a> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Education/ASP2016/MidwestWSSecurityTutorial" class="twikiLink">MidwestWSSecurityTutorial</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross - 06 Dec 2016 - 18:12</a> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">3</span></div><!--/patternSearchResultCount--><p />
<p />
<p />
Twiki topics in all others webs containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<p />
<a href="/twiki/bin/oops/Education/ASP2016/ObtainingANewCertificate?template=backlinksweb" target="_top">All references to this document in the <strong>Education/ASP2016</strong> web only</a>  <br />      <a href="/twiki/bin/oops/Education/ASP2016/ObtainingANewCertificate?template=backlinksallwebs" target="_top">All references to this document in <strong>all</strong> webs</a>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Child_Topics"></a>  Child Topics </span></h2>
<p />
<strong><em>Immediate children of this topic include the following:</em></strong>
<ul></ul>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Updates"></a>  Major Updates </span></h2>
<p />
-- <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> - 2007 Jan 29: pulled from original <br />    </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education/ASP2016<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><span class="twikiNewLink">SecurityTeamWorkingArea<a href="/bin/edit/Security/SecurityTeamWorkingArea?topicparent=Education/ASP2016.ObtainingANewCertificate" rel="nofollow" title="SecurityTeamWorkingArea (this topic does not yet exist; you can create it)">?</a></span> &gt; <a href="/bin/view/Education/ASP2016/WorkshopTutorialModules" class="twikiLink">WorkshopTutorialModules</a> &gt; <a href="/bin/view/Education/ASP2016/LectureTwoTutorial" class="twikiLink">LectureTwoTutorial</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>ObtainingANewCertificate</span> <br />    
Topic revision: r2 - 02 Mar 2007 - 13:33:11 - <span class="twikiNewLink">BenClifford<a href="/bin/edit/Education/ASP2016/BenClifford?topicparent=Education/ASP2016.ObtainingANewCertificate" rel="nofollow" title="BenClifford (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />