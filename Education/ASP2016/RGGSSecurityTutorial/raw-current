<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> RGGSSecurityTutorial &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/RGGSSecurityTutorial?_T=16 Feb 2017" type="application/x-wiki" title="edit RGGSSecurityTutorial" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/RGGSSecurityTutorial"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#D0D0D0" />&nbsp;<a href="/bin/view/Education/ASP2016/WebHome">Education/ASP2016 Web</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Education/ASP2016/GridWorkshops" class="twikiLink">GridWorkshops</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Education/ASP2016/RioGrandeGridSchool2007" class="twikiLink">RioGrandeGridSchool2007</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/Education/ASP2016/RioGrandeGridSchool2007Syllabus" class="twikiLink">RioGrandeGridSchool2007Syllabus</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/RGGSSecurityTutorial" title='Topic revision: 6 (06 Dec 2016 - 18:12:47)'>RGGSSecurityTutorial</a> <span class='patternRevInfo'>(06 Dec 2016, <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">%LINKCSS%

---+!! Tutorial: Security and Certificates on the Grid

%TOC{depth=&quot;3&quot;}%

---++ Introduction

This exercise will provide hands-on experience in using various tools to setup and use GSI for working on the grid. The first few sections delve into certificates and proxies and demonstarate how pre-configured credentials can be used to run some grid enable programs. The later sections discuss steps involved in obtaining a new certificate and using them on the grid. 

The exercise uses tools like _globus-job-run_ and _globus-url-copy_ to execute jobs on the grid and move files across machines respectively. This exercise does not deal in detail with those tools, but focuses more on the security aspects. These tools and related technology will be discussed in lectures and exercises later.

---++ Notes information

These notes have been written to lead you through the exercises on your own and provide commands to type, expected output and notes highlighting the key aspects of a particular step. Feel free to ask the TAs for help if you have any problems or have any questions.

These notes have transcripts from runs on machine *%LOGINHOST%*. Replace that with your machine name wherever appropriate.

The exercise notes was prepared by running as user *%LOGINNAME%*. Replace that with your username in all command line parameters.

You will see two styles of machine text here:

&lt;pre class=&quot;screen&quot;&gt;
&lt;userinput&gt;Text like this is input that you should type.&lt;/userinput&gt;
Text like this is the output you should get.
&lt;/pre&gt;

For example:

&lt;pre class=&quot;screen&quot;&gt;
$ &lt;userinput&gt;date&lt;/userinput&gt;
Wed May 31 11:54:58 BST 2006
&lt;/pre&gt;



---++ Basic steps


---+++ Checking GLOBUS_LOCATION setup
The machine is set up with Globus Toolkit install and an environment variable =GLOBUS_LOCATION= pointing to the install should be set up.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ &lt;userinput&gt;echo $GLOBUS_LOCATION&lt;/userinput&gt;
/sw/gt-4.0.4
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ 
&lt;/pre&gt;

The command line clients that are installed as part of Globus Toolkit have already been added to your PATH.

&lt;!-- ***  Comments plugin to create comments table for section   ***    --&gt;
&lt;span style=&quot;text-align:center; font-weight:bold; font-size:1.2em;&quot;&gt;ADD A COMMENT&lt;/span&gt;
%STARTMore%

%TABLE{ }%
|  *COMMENT*  |  *NAME*  |  *DATE*  |
%COMMENT{ type=&quot;tableappend&quot; }%

%ENDMore%
&lt;!-- ***  End Comment                                            ***    --&gt;


---++ Using Certificates

%INCLUDE{ &quot;UsingCertificates&quot; }%



---++ Using Grid Proxy certificates

%INCLUDE{ &quot;GridProxyCertificates&quot; }%

---++ Retrieving a certificate from the DOEGrids CA

%INCLUDE{ &quot;RetrievingANewCertificateWithDOEGridsCA&quot; }%

---++ Using DOEGrids credentials

---+++ Setting up clients to use DOEGrids proxy
To use the proxy genrated from your new credentials from DOEGrids, set the environment variable =X509_USER_PROXY= to point to your proxy file.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ &lt;userinput&gt;export X509_USER_PROXY=YourNameProxy&lt;/userinput&gt;
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ 
&lt;/pre&gt;


---+++ Using DOEGrids credentials to transfer file to remote server

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;globus-url-copy gsiftp://localhost:2811/home/%LOGINNAME%/tempFile gsiftp://%OTHERHOST%:2811/tmp/%LOGINNAME%TestFile&lt;/userinput&gt;
error: globus_ftp_client: the server responded with an error
535 535-FTPD GSSAPI error: GSS Major Status: Authentication Failed
535-FTPD GSSAPI error: GSS Minor Status Error Chain:
535-FTPD GSSAPI error: 
535-FTPD GSSAPI error: accept_sec_context.c:170: gss_accept_sec_context: SSLv3 handshake problems
535-FTPD GSSAPI error: globus_i_gsi_gss_utils.c:881: globus_i_gsi_gss_handshake: Unable to verify remote side&#39;s credentials
535-FTPD GSSAPI error: globus_i_gsi_gss_utils.c:854: globus_i_gsi_gss_handshake: SSLv3 handshake problems: Couldn&#39;t do ssl handshake
535-FTPD GSSAPI error: OpenSSL Error: s3_srvr.c:1816: in library: SSL routines, function SSL3_GET_CLIENT_CERTIFICATE: no certificate returned
535-FTPD GSSAPI error: globus_gsi_callback.c:351: globus_i_gsi_callback_handshake_callback: Could not verify credential
535-FTPD GSSAPI error: globus_gsi_callback.c:443: globus_i_gsi_callback_cred_verify: Could not verify credential: self signed certificate in certificate chain
535 FTPD GSSAPI error: accepting context
[%LOGINNAME%@%LOGINHOST% ~]$ 
&lt;/pre&gt;

The above error indicates that the authentication failed because the CA who signed the certificate from which the proxy was created is not trusted on that machine. 

Note that the lifetime of proxy and certificates is valid. But since the chain of trust starts from the CA and the CA is not trusted, authentication fails.

Just to make sure your command is accurate, unset the =X509_USER_PROXY= variable: 


&lt;pre class=&quot;screen&quot;&gt;[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;unset X509_USER_PROXY&lt;/userinput&gt;&lt;/pre&gt;

Submit using your locally issued certificate. 

&lt;pre class=&quot;screen&quot;&gt;[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;globus-url-copy gsiftp://localhost:2811/home/%LOGINNAME%/tempFile gsiftp://%OTHERHOST%:2811/tmp/%LOGINNAME%TestFile&lt;/userinput&gt;&lt;/pre&gt;

You&#39;ll see that you are able to transfer, because that CA is trusted on that server.

---+++ Using DOEGrids credentials to transfer file  with in local cluster
Now lets try running the same command using the DOEGrids proxy to transfer file with in local cluster. This cluster has been set up to trust the DOEGrids CA. In this example %LOGINHOST% is local machine and %OTHERHOST% is remote machine. 

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;export X509_USER_PROXY=YourNameProxy&lt;/userinput&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;globus-url-copy gsiftp://localhost:2811/home/%LOGINNAME%/tempFile gsiftp://%OTHERHOST%:2811/tmp/%LOGINNAME%Test&lt;/userinput&gt;
error: globus_ftp_client: the server responded with an error
530 530-Login incorrect. :
 globus_gss_assist: Gridmap lookup failure: 
Could not map /C=US/O=Globus Alliance/OU=User/CN=10c00791bfb.54294d53
530-
530 End.
[%LOGINNAME%@%LOGINHOST% ~]$ 
&lt;/pre&gt;

The transfer fails here with authorization exceptions. 

The client authenticated with the server and the server established your identity as the DN specified in the error message. In this case:

&lt;verbatim&gt;/C=US/O=Globus Alliance/OU=User/CN=10c00791bfb.54294d53&lt;/verbatim&gt;

But the identity established in authentication is not authorized to use the service. The service uses &lt;nop&gt;GridMap authorization, where a mapping of of authorized identities (DNs) is mapped to local user names.

&lt;!-- ***  Comments plugin to create comments table for section   ***    --&gt;
&lt;span style=&quot;text-align:center; font-weight:bold; font-size:1.2em;&quot;&gt;ADD A COMMENT&lt;/span&gt;
%STARTMore%

%TABLE{ }%
|  *COMMENT* |  *NAME*  |  *DATE*  |
%COMMENT{ type=&quot;tableappend&quot; }%

%ENDMore%
&lt;!-- ***  End Comment                                            ***    --&gt;


---++ Contents of &lt;nop&gt;GridMap file
The local &lt;nop&gt;GridFTP service and the one on remote machine is configured to use a gridmap file located in =etc/grid-security/gridmap-file=. This file is write protected so only administrators can change it to give access. But the file can be read by anyone.

For example:

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;more /etc/grid-security/grid-mapfile &lt;/userinput&gt;
#
# Automatically generated by gx-gen-mapfile (gx-map 0.5.1)
# at Fri 2006-06-23 15:26:02 UTC on %LOGINHOST%.
# DO NOT EDIT THIS FILE.  ANY CHANGES YOU MAKE WILL BE LOST ON THE NEXT UPDATE.
#
&quot;/C=US/O=Globus Alliance/OU=User/CN=101497d3dcd.3dcd5aef&quot; ranantha
&quot;/C=US/O=Globus Alliance/OU=User/CN=10bd8f410f6.5f0086b4&quot; benc
&quot;/C=US/O=Globus Alliance/OU=User/CN=10bf234e01a.ac286cfa&quot; ranantha
&quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train10/UID=train10&quot; train10
&quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train11/UID=train11&quot; train11
&quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train12/UID=train12&quot; train12
...
&quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train58/UID=train58&quot; train58
&quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train59/UID=train59&quot; train59
&quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train60/UID=train60&quot; train60
&quot;/DC=org/DC=doegrids/OU=People/CN=Gaurang Mehta 998137&quot; gmehta
[%LOGINNAME%@%LOGINHOST% ~]$ 
&lt;/pre&gt;

This gridmap file has been created using a tool (it can also be hand written).

Only the listed DNs are allowed to access the GRAM server.

Each entry is a mapping from DN to username. For example, DN &lt;tt&gt;%CERTSUBJECT%&lt;/tt&gt; is mapped to usename =%LOGINNAME%=.

%NOTE% The identity presented by credenitals you used in previous step is not in the gridmap file. 

&lt;!-- ***  Comments plugin to create comments table for section   ***    --&gt;
&lt;span style=&quot;text-align:center; font-weight:bold; font-size:1.2em;&quot;&gt;ADD A COMMENT&lt;/span&gt;
%STARTMore%

%TABLE{ }%
|  *COMMENT*  |  *NAME*  |  *DATE*  |
%COMMENT{ type=&quot;tableappend&quot; }%

%ENDMore%
&lt;!-- ***  End Comment                                            ***    --&gt;



---++ Using gx-gridmap to add DOEGrids certificate DN to gridmap
Typically an administrator is required to add users to the gridmap file and is an out of band activity. The tool =gx-gridmap=, if set up by the admnistator, can be used by anyone who has access to a machine to add an identity to the gridmap file. The actual addition is not instant and it will take a few minutes to reflect on the gridmap file.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;gx-request -quick-add&lt;/userinput&gt;
About to map distinguished name
    &quot;/C=US/O=SDSC/OU=SDSC/CN=Account Train55/UID=%LOGINNAME%&quot;
to user
    %LOGINNAME%
Proceed? [yn] &lt;userinput&gt;y&lt;/userinput&gt;
Mapping request submitted.
The grid-mapfile should be updated in a few minutes
[%LOGINNAME%@%LOGINHOST% ~]$ 
&lt;/pre&gt;

This update may take a few minutes. You can look for the update by searching the gridmap file for your DN.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;grep &quot;%CERTSUBJECT%&quot; /etc/grid-security/grid-mapfile &lt;/userinput&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;grep &quot;%CERTSUBJECT%&quot; /etc/grid-security/grid-mapfile &lt;/userinput&gt;
&quot;%CERTSUBJECT%&quot; %LOGINNAME%
[%LOGINNAME%@%LOGINHOST% ~]$ 
&lt;/pre&gt;

You have to do a similar step in the remote machine (i.e %OTHERHOST% in this example).

First, let us get the DN we want mapped on the remote machine.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;grid-proxy-info -subject&lt;/userinput&gt;
%CERTSUBJECT%/CN=1488313937
&lt;/pre&gt;

The output needs to be pasted in the command you run on remote machine. In a second terminal, ssh to the remote machine.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOST% ~]$ &lt;userinput&gt;ssh %OTHERHOST%&lt;/userinput&gt;
[%LOGINNAME%@%OTHERHOST% ~]$ &lt;userinput&gt;gx-request -interactive&lt;/userinput&gt;
The gx-request command lets you submit a request to modify the
Globus grid-mapfile(s) on one or more machines.  Once the request
is submitted, the updates should occur within a few minutes.

A grid-mapfile entry maps a DN (Distinguished Name) to a Unix
user name.  For example, an entry like
    &quot;/O=Big University/OU=Small Department/CN=John Doe&quot; jdoe
allows a user holding a Globus certificate with the specified
DN to run Globus jobs under the Unix account &quot;jdoe&quot;.

gx-request can be run interactively or with command-line arguments.

In this interactive mode, you will be asked a series of questions.
Enter your responses followed by &amp;gt;return&gt;.

Single-letter menu responses are case-insensitive; other responses
must be entered exactly.

If there is a default response indicated by the prompt, you can
enter it by just typing &amp;gt;return&gt;.

(a) Add a grid-mapfile entry
(r) Remove a grid-mapfile entry
(u) Request an update of the grid-mapfiles
(x) Exit
(The &quot;set&quot; operation is not currently available in interactive mode.)
What do you want to do? [arux] &lt;userinput&gt;a&lt;/userinput&gt;
You can specify the DN in one of the following ways:
(c) Certificate, extract from /home/%LOGINNAME%/.globus/usercert.pem
(f) File, extract from a specified certificate file
(i) Input the DN directly
(x) Exit
How do you want to specify the DN? [cfix]&lt;userinput&gt;i&lt;/userinput&gt;
Enter distinguished name: &lt;userinput&gt;%CERTSUBJECT%&lt;/userinput&gt;
You may provide your e-mail address if you wish.
It will be recorded in the request log, and may be used
to contact you if there is a problem with your certificate.
E-mail address (&amp;gt;return&gt; for none): 

You may provide an optional comment.
If you do, it will be recorded in the request log.
Press return if you don&#39;t wish to provide a comment.
Comment: 

About to map distinguished name
    &quot;%CERTSUBJECT%&quot;
to user
    %LOGINNAME%
Proceed? [yn]&lt;userinput&gt;y&lt;/userinput&gt;
Mapping request submitted.
The grid-mapfile should be updated in a few minutes
[%LOGINNAME%@%OTHERHOST% ~]$ 
&lt;/pre&gt;

The update takes a few minutes.

&lt;!-- ***  Comments plugin to create comments table for section   ***    --&gt;
&lt;span style=&quot;text-align:center; font-weight:bold; font-size:1.2em;&quot;&gt;ADD A COMMENT&lt;/span&gt;
%STARTMore%

%TABLE{ }%
|  *COMMENT*  |  *NAME*  |  *DATE*  |
%COMMENT{ type=&quot;tableappend&quot; }%

%ENDMore%
&lt;!-- ***  End Comment                                            ***    --&gt;



---+++ Using DOEGrids trusted credentials to transfer file with in local server&lt;/h4&gt;
Now that the gridmap file has been updated such that your identity is authorized to submit jobs, lets try the command again.

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ &lt;userinput&gt;globus-url-copy gsiftp://localhost:2811/home/%LOGINNAME%/tempFile gsiftp://%OTHERHOST%.:2811/tmp/%LOGINNAME%Test 
&lt;/userinput&gt;
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ 
&lt;/pre&gt;

The client authenticated succesfully with the server. So the server knows the identity of the client. A handshake occured between the client and server to establish a &amp;quot;context&amp;quot;, which is a secret key used to secure the message.

The request and response was then signed using that context, so that it cannot be tampered with.

We can explicitly request for this message to be encrypted, so that no one else can read it. Then the same context is used to encrypt the message.

To ensure the transfer occured, lets ssh to remote machine and look for file:

&lt;pre class=&quot;screen&quot;&gt;
[%LOGINNAME%@%LOGINHOSTSHORT% ~]$ &lt;userinput&gt;ssh %OTHERHOST%&lt;/userinput&gt;
[%LOGINNAME%@%OTHERHOSTSHORT% ~]$ &lt;userinput&gt;ls -lt /tmp/%LOGINNAME%Test&lt;/userinput&gt;
-rw-r--r--  1 %LOGINNAME% %LOGINNAME% 43 Jun 23 12:07 /tmp/%LOGINNAME%Test
[%LOGINNAME%@%OTHERHOSTSHORT% ~]$ 
&lt;/pre&gt;

&lt;!-- ***  Comments plugin to create comments table for section   ***    --&gt;
&lt;span style=&quot;text-align:center; font-weight:bold; font-size:1.2em;&quot;&gt;ADD A COMMENT&lt;/span&gt;
%STARTMore%

%TABLE{ }%
|  *COMMENT*  |  *NAME*  |  *DATE*  |
%COMMENT{ type=&quot;tableappend&quot; }%


%ENDMore%
&lt;!-- ***  End Comment                                            ***    --&gt;


&lt;!--
Main.ForrestChristian - 24 Mar 2007 - Added VARIABLES
--&gt;
&lt;!--                                                                            
      * Set LOGINHOST = workshop4.ci.uchicago.edu
      * Set LOGINHOSTSHORT = workshop4
      * Set LOGINIP = 131.193.181.56
      * Set GRIDHOST = tg-login.sdsc.teragrid.org
      * Set OTHERHOST = workshop3.ci.uchicago.edu
      * Set OTHERHOSTSHORT = workshop3
      * Set CERTSUBJECT = /O=Grid/OU=OSG/CN=Training User 99
      * Set LOGINNAME = train99
      * Set HOMEDIR = /home/%LOGINNAME%
--&gt;

 </textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/RGGSSecurityTutorial?t=1487215529;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Education/ASP2016/RGGSSecurityTutorial' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Education/ASP2016/RGGSSecurityTutorial?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Education/ASP2016/RGGSSecurityTutorial?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r6&nbsp;<a rel="nofollow" href="/bin/rdiff/Education/ASP2016/RGGSSecurityTutorial?rev1=6;rev2=5">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Education/ASP2016/RGGSSecurityTutorial?rev=5">r5</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Education/ASP2016/RGGSSecurityTutorial?rev1=5;rev2=4">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Education/ASP2016/RGGSSecurityTutorial?rev=4">r4</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Education/ASP2016/RGGSSecurityTutorial?rev1=4;rev2=3">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Education/ASP2016/RGGSSecurityTutorial?rev=3">r3</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Education/ASP2016/RGGSSecurityTutorial?rev1=3;rev2=2">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Education/ASP2016/RGGSSecurityTutorial?rev=2">r2</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Education/ASP2016/RGGSSecurityTutorial?template=backlinksweb' rel='nofollow' title='Search the Education/ASP2016 Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/RGGSSecurityTutorial' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Education/ASP2016/RGGSSecurityTutorial?template=oopsmore&amp;param1=6&amp;param2=6' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r6 - 06 Dec 2016 - 18:12:47 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top"><br/>Register</a>
<p />
<p />
<!-- Google CSE Search Box Ends
<h5><a name="Common_links"></a> Common links </h5> <ul>
<li> <a href="/bin/view/Main/WebHome" class="twikiLink">OSG TWiki home</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome" class="twikiLink">RPM Install guides - OSG 3.0</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Pacman Install guides OSG 1.2</a>
</li> <li> <a href="/bin/view/Documentation/WebHome" class="twikiLink">Technical Documentation</a>
</li> <li> <a href="/bin/view/Documentation/SiteAdminResources" class="twikiLink">Contact Info</a> 
</li> <li> <strong><a href="/bin/view/Main/ICantFindItForm" class="twikiLink">I can't find it!</a></strong>  -->
</li></ul> 
<div class="container">
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="Home">About the OSG</a></div>
        <div id="item"><a  style="" href="/bin/view/Documentation/UsingTheGrid" class="twikiLink" title="Instructions for Using OSG">New Users</a></div>
        <div id="item"><a href="http://myosg.grid.iu.edu/map?map_attrs_shownr=on&amp;all_sites=on&amp;active=on&amp;active_value=1&amp;disable_value=1&amp;gridtype=on&amp;gridtype_1=on" target="_top">OSG Sites</a></div>
        <div id="item"><a  style="" href="http://myosg.grid.iu.edu/vosummary?all_vos=on&amp;active=on&amp;active_value=1&amp;datasource=summary" target="_top" title="List of Virtual Organizations">OSG VOs</a></div>
        <div id="item"><a href="http://display.grid.iu.edu/" target="_top">OSG Usage Graphs</a></div>
        <div id="item"><a  style="" href="https://indico.fnal.gov/categoryDisplay.py?categId=86" target="_top" title="OSG Event Calendar">Events</a></div>
       <div id="item"><a href="/bin/view/Management/OSGOrganizationInformation" class="twikiLink">OSG Organization</a></div>
<p />
    </div>
<p />
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head">OSG at Work</div>
        <div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Official Documentation Home">Technical Documentation</a></div>
        <div id="item"><a href="/bin/view/Security/WebHome" class="twikiLink">Security</a></div>
        <div id="item"><a href="/bin/view/SoftwareTeam/WebHome" class="twikiLink">Software Team</a></div>
        <div id="item"><a href="/bin/view/Education/WebHome" class="twikiLink">Education</a></div>
        <div id="item"><a href="/bin/view/Management/WebHome" class="twikiLink">Management</a></div>
        <div id="item"><a  style="" href="/bin/view/Management/ScientificPublications" class="twikiLink" title="Scientific Publications and Citing OSG">Scientific Publications</a></div>
        <div id="item"><a href="/bin/view/Management/OSGResearchHighlights" class="twikiLink">Research Highlights</a></div>
    </div>
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Education/ASP2016/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Education/ASP2016/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Education/ASP2016/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Education/ASP2016/RGGSSecurityTutorial"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Education/ASP2016/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Education/ASP2016" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Education_ASP2016"></a>  <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/RGGSSecurityTutorial?t=1487215529;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Education/ASP2016/RGGSSecurityTutorial" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Education/ASP2016/RGGSSecurityTutorial?pdftitle=RGGSSecurityTutorial" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>