<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> NetworkingConstraints &lt; Education &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/NetworkingConstraints?_T=16 Feb 2017" type="application/x-wiki" title="edit NetworkingConstraints" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/NetworkingConstraints"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h3><a name="Overview"></a> Overview </h3>
We assume you got here because you do not have a wide open network configuration for your cluster.
So let's assume the worst case scenario:<br>
<p /> <ul>
<li> You have an institutional Firewall that you can do nothing about, except request some exceptions.
</li> <li> You want to run your cluster behind a NAT, and have a minimal set of hosts exposed to the "public"     network.
</li> <li> You got both of the above.
</li></ul> 
<p />
Let's go from the inside out.
<p />
<h3><a name="NAT"></a> NAT </h3>
OSG supports clusters where all worker nodes are behind a network address translation firewall. However the OSG CE itself and any other computers that run OSG services must have a network interface that has a routable IP address in addition to an interface that connects it to the same network as the worker nodes. For example the OSG CE and the OSG Gridftp server (if on another machine) must be dual homed. 
<p />
In general you probably want to avoid installing OSG infrastructure on the same host that implements the NAT. It is also not necessary for the OSG CE to be configured to forward IP traffic if it is not installed on the same machine that is the NAT firewall. 
<p />
<em>CMS Note: Tier 3s will also need a PhEDEx host on the public network.</em>
<p />
<h3><a name="Firewall"></a> Firewall </h3>
It is recommended that you run some sort of host based IP filtering firewall on your OSG service nodes. To assist in configuring your IP firewall please read through the <a href="https://twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/CEInstallGuide#Firewalls" target="_top">Firewall</a> documentation in OSG. Unless you open the ports specified your OSG CE may not work correctly. 
<p />
You should also check to make sure that there are no additional choke style firewalls upstream of your OSG. For example if your institution or department has a central firewall for all traffic. If you do have a firewall upstream from your OSG CE you will need to coordinate with your department or institutions network group to configure the firewall to open the ports specified in <a href="https://twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/CEInstallGuide#Firewalls" target="_top">Firewall</a>.
<p />
If you put your Gridftp server on a separate node from your OSG CE it can be configured with the same exceptions as those documented for the OSG CE.
<p />
<em>CMS Note: The PhEDEx host at a Tier 3 will need to have the same Firewall exceptions as the OSG CE.</em>
<p />
<h3><a name="DNS"></a> DNS </h3>
<p />
<h4><a name="All_of_the_IP_addresses_which_ar"></a> All of the IP addresses which are used for internal and external interfaces should have their forward and reverse DNS properly configured. </h4>
<p />
If you are using a private class IP network for machines behind a NAT firewall you should either configure a DNS server internally to perform forward and reverse DNS for the internal IP network, or create a /etc/hosts file that contains all of the IP to name mappings required for your internal network. All external interfaces should have their forward and reverse DNS properly configured. This is usually managed by whoever administrates your department or institutions network. 
<p />
To test to determine if forward and reverse DNS is properly configured for your external IP addresses you can run
<p />
<pre>
tmartin&#64;newport:~$ nslookup osg-gw-2.t2.ucsd.edu
Server:         128.54.16.2
Address:        128.54.16.2#53

Name:   osg-gw-2.t2.ucsd.edu
Address: 137.110.141.17

tmartin&#64;newport:~$ nslookup 137.110.141.17
Server:         128.54.16.2
Address:        128.54.16.2#53

17.141.110.137.in-addr.arpa     name &#61; osg-gw-2.t2.ucsd.edu.
</pre>
<p />
<h4><a name="The_hostname_of_your_OSG_CE_shou"></a> The hostname of your OSG CE should be configured to be the Fully Qualified Domain Name (FQDN) of the primary network interface with a routable IP address. </h4>
<p />
If your OSG CE is dual homed you should configure the hostname to be the same as the FQDN of the external network interface. 
<p />
<p />
-- <a href="/bin/view/Main/FkW" class="twikiLink">FkW</a> - 16 Feb 2007
-- <a href="/bin/view/Main/TerrenceMartin" class="twikiLink">TerrenceMartin</a> - 21 Feb 2007</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/TierThreePrerequisiteDocument" class="twikiLink">TierThreePrerequisiteDocument</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>NetworkingConstraints</span> <br />    
Topic revision: r3 - 23 Feb 2007 - 16:53:55 - <a href="/bin/view/Main/BurtHolzman" class="twikiLink">BurtHolzman</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />