<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> LectureFiveTutorial &lt; Education &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/LectureFiveTutorial?_T=16 Feb 2017" type="application/x-wiki" title="edit LectureFiveTutorial" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/LectureFiveTutorial"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!-- deprecated -->
<p />
<h1><a name="Tutorial_Grid_Resources_and_Job"></a>  Tutorial: Grid Resources and Job Management </h1>
Earlier, we learned about Condor-G and DAGMan.  Now we will submit some simple jobs using these components.
<p />
In the exercises below, students should select one from the list of gridlab hosts (e.g., gridlab2, gridlab3, or gridlab4, at random) to use throughout the exercise, rather than all choosing gridlab2. Use the host you select &mdash; gridlab2, gridlab3 or gridlab4 &mdash; whenever the notes say "gridlab2".
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Table_of_Contents"></a>  Table of Contents </span></h2>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Getting_Set_Up"> Getting Set Up</a> <ul>
<li> <a href="?cover=print#Log_Into_LOGINHOST"> Log Into %LOGINHOST%</a>
</li> <li> <a href="?cover=print#Check_Condor_with_condor_q"> Check Condor with condor_q</a>
</li> <li> <a href="?cover=print#Create_Your_Working_Directories"> Create Your Working Directories</a>
</li> <li> <a href="?cover=print#Create_a_Short_Lived_Proxy"> Create a Short-Lived Proxy</a>
</li> <li> <a href="?cover=print#Test_with_globus_job_run"> Test with globus-job-run</a>
</li></ul> 
</li> <li> <a href="?cover=print#Submitting_a_Simple_Grid_Job_wit"> Submitting a Simple Grid Job with Condor-G</a> <ul>
<li> <a href="?cover=print#Create_the_Submit_File"> Create the Submit File</a>
</li> <li> <a href="?cover=print#Create_the_Program"> Create the Program</a>
</li> <li> <a href="?cover=print#Test_the_program"> Test the program</a>
</li> <li> <a href="?cover=print#Submit_your_test_job_to_Condor_G">  Submit your test job to Condor-G.</a>
</li> <li> <a href="?cover=print#Monitoring_Progress_with_tail"> Monitoring Progress with tail</a>
</li> <li> <a href="?cover=print#Verifying_completed_jobs"> Verifying completed jobs</a>
</li> <li> <a href="?cover=print#Submitting_a_job_to_other_hosts"> Submitting a job to other hosts</a>
</li></ul> 
</li> <li> <a href="?cover=print#Held_Jobs"> Held Jobs</a>
</li> <li> <a href="?cover=print#A_Simple_DAG"> A Simple DAG</a> <ul>
<li> <a href="?cover=print#Create_a_script_to_monitor_the_q"> Create a script to monitor the queue</a>
</li> <li> <a href="?cover=print#Create_a_minimal_DAG"> Create a minimal DAG</a>
</li> <li> <a href="?cover=print#Submit_the_DAG"> Submit the DAG</a> <ul>
<li> <a href="?cover=print#Watching_the_Logs"> Watching the Logs</a>
</li></ul> 
</li> <li> <a href="?cover=print#Verify_your_results"> Verify your results:</a>
</li> <li> <a href="?cover=print#Cleaning_Up"> Cleaning Up</a>
</li></ul> 
</li> <li> <a href="?cover=print#A_More_Complex_DAG"> A More Complex DAG</a> <ul>
<li> <a href="?cover=print#Change_watch_condor_q_script"> Change watch_condor_q script</a>
</li> <li> <a href="?cover=print#Examine_your_results"> Examine your results.</a>
</li> <li> <a href="?cover=print#Examine_your_log"> Examine your log</a>
</li> <li> <a href="?cover=print#Optional_Multiple_Globus_Schedul"> Optional: Multiple Globus Schedulers</a>
</li></ul> 
</li> <li> <a href="?cover=print#Handling_Jobs_That_Fail_with_DAG"> Handling Jobs That Fail with DAGMan</a> <ul>
<li> <a href="?cover=print#Create_a_script"> Create a script</a>
</li> <li> <a href="?cover=print#Modify_the_submit"> Modify the submit</a>
</li> <li> <a href="?cover=print#Resubmit_the_DAG"> Resubmit the DAG</a>
</li> <li> <a href="?cover=print#Monitor_progress"> Monitor progress</a>
</li> <li> <a href="?cover=print#Check_your_results"> Check your results</a>
</li> <li> <a href="?cover=print#Adding_a_POST_script"> Adding a POST script</a> <ul>
<li> <a href="?cover=print#Cleaning_up"> Cleaning up</a>
</li></ul> 
</li> <li> <a href="?cover=print#Create_the_script_to_check_outpu"> Create the script to check output</a> <ul>
<li> <a href="?cover=print#Modify_dag"> Modify dag</a>
</li> <li> <a href="?cover=print#Resubmit_the_DAG_AN1"> Resubmit the DAG</a>
</li> <li> <a href="?cover=print#Monitor_the_job"> Monitor the job</a>
</li> <li> <a href="?cover=print#Check_your_results_AN1"> Check your results</a>
</li></ul> 
</li> <li> <a href="?cover=print#Examine_mydag_dag_rescue"> Examine mydag.dag.rescue</a> <ul>
<li> <a href="?cover=print#Resubmitting_rescue_DAG"> Resubmitting rescue DAG</a>
</li></ul> 
</li> <li> <a href="?cover=print#Check_your_results_AN2"> Check your results.</a>
</li></ul> 
</li></ul> 
</div>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Getting_Set_Up"></a> Getting Set Up </span></h2>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/GettingSetUp" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216694" name="t"></form>
<p />
<a name="setup"></a>
The following steps will prepare your account for completing the exercises in this tutorial. We will: <ol>
<li> Log onto %LOGINHOST%
</li> <li> Check that Condor is working
</li> <li> Create working directories
</li> <li> Get a grid proxy
</li> <li> Test this set up by trying to run on the remote machine
</li></ol> 
<p />
<h3><a name="Log_Into_LOGINHOST"></a> Log Into <code>%LOGINHOST%</code> </h3>
<p />
First, log into %LOGINHOST%. This will be our client machine for these exercises.
<p />
<h3><a name="Check_Condor_with_condor_q"></a> Check Condor with condor_q </h3>
Condor should already be set up and running on %LOGINHOST%. You can check this by running <code><a href="http://www.cs.wisc.edu/condor/manual/v6.7/condor_q.html" target="_top">condor_q</a></code>:
<p />
<pre class="screen">
$ <userinput>condor_q</userinput>

-- Submitter: %LOGINHOST% : <%LOGINIP%:36236> : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held
</pre>
<p />
Everyone will be using the same Condor installation for these exercises. You will see other students' jobs in the queue alongside your own.
<p />
<h3><a name="Create_Your_Working_Directories"></a> Create Your Working Directories </h3>
<p />
Next, we are going to create some directories for you to work in. We'll make them in your home directory.
<p />
<pre class="screen">
$ <userinput>cd ~</userinput>

$ <userinput>mkdir condor-tutorial</userinput>
$ <userinput>cd condor-tutorial</userinput>
$ <userinput>mkdir submit</userinput>
</pre>
<p />
<p />
<h3><a name="Create_a_Short_Lived_Proxy"></a> Create a Short-Lived Proxy </h3>
You will need to createa  short-lived proxy for this tutorial. The default proxy length is 12 hours.  For a long lived task, you might create proxies with lifespans of 24 hours, several days, or even several months. 
<p />
Run <code>grid-proxy-info</code> to make sure that you don't already have a grid proxy on this machine.
<p />
<pre class="screen">
$ <userinput>grid-proxy-info -all</userinput>

ERROR: Couldn't find a valid proxy.
Use -debug for further information.
</pre>
<p />
Run <code>grid-proxy-init</code> to create a proxy with a life of four hours. The <code>-verify</code> option is not required, but can is useful for debugging. <code>-verify</code> will warn you if an expected <span class="firstterm">Certificate Authority</span> (CA) certificate is missing.
<p />
<pre class="screen">
$ <userinput>grid-proxy-init -hours 4 -verify</userinput>
Your identity: %CERTSUBJECT%
Enter GRID pass phrase for this identity: <userinput><em>[Your pass phrase]</em></userinput>
Creating proxy ........................................... Done
Proxy Verify OK
Your proxy is valid until Thu Jul 10 16:06:13 2003
$ <userinput>grid-proxy-info -all</userinput>
subject  : %CERTSUBJECT%/CN=171244628
issuer   : %CERTSUBJECT%
type     : full
strength : 512 bits
timeleft : 3:59:57
</pre>
<p />
<h3><a name="Test_with_globus_job_run"></a> Test with globus-job-run </h3>
Run <code><userinput>globus-job-run %LOGINHOST% /bin/date</userinput></code> on %LOGINHOST% to test that everything is working:
<p />
<pre class="screen">
$ <userinput>globus-job-run %LOGINHOST% /bin/date</userinput>

Wed Jun 2 17:57:49 CDT 2004
</pre>
<p />
Our basic Globus setup appears to be functioning.
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span style="text-align:center; font-weight:bold; font-size:1.2em;">ADD A COMMENT</span>
<span id="twid_1show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_1hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_1toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Add to run grid-proxy-destroy if find one when run grid-proxy-info -all. </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> 01 Jun 2007 - 17:35 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/GettingSetUp" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                            <strong>*</strong>    -->
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Submitting_a_Simple_Grid_Job_wit"></a> Submitting a Simple Grid Job with Condor-G </span></h2>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/SubmitSimpleGridJobWithCondorG" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216694" name="t"></form>
<p />
Now we are ready to submit our first job with Condor-G.  The basic procedure is to create a Condor job submit description file.  This file can tell Condor what executable to run, what resources to use, how to handle failures, where to store the job's output, and many other characteristics of the job submission.  Then this file is given to condor_submit.
<p />
There are many options that can be specified in a Condor-G submit description file.  We will start out with just a few. We'll be sending the job to the computer "%LOGINHOST%" and running under the "jobmanager-fork" job manager.  We're setting notification to never to avoid getting email messages about the completion of our job, and redirecting the stdout/err of the job back to the submission computer. 
<p />
For more information, see the <a href="http://www.cs.wisc.edu/condor/manual/v6.9/condor_submit.html" target="_top">condor_submit manual</a>.
<p />
<p />
on      Feel free to use your favorite editor, but we will demonstrate with <strong>cat</strong> in the example below.  When using cat to create files, press <strong>Ctrl+D</strong> to close the file &mdash; don't actually type <code>[Ctrl+D]</code> into the file.  Whenever you create a file using cat, we suggest you use cat to display the file and confirm that it contains the expected text.
<p />
<h3><a name="Create_the_Submit_File"></a> Create the Submit File </h3>
Move to our scratch submission directory and create the submit file. Verify that it was entered correctly:
<p />
<pre class="screen">
$ <userinput>cd ~/condor-tutorial/submit</userinput>
$ <userinput>cat &gt; myjob.submit
executable=myscript.sh
arguments=TestJob 10
output=results.output
error=results.error
log=results.log
notification=never
universe=grid
grid_resource=gt2 %LOGINHOST%/jobmanager-fork
queue
<em>[Ctrl+D]</em></userinput>
$ <userinput>cat myjob.submit</userinput>

executable=myscript.sh
arguments=TestJob 10
output=results.output
error=results.error
log=results.log
notification=never
universe=grid
grid_resource=gt2 %LOGINHOST%/jobmanager-fork
queue
</pre>
<p />
<p />
<h3><a name="Create_the_Program"></a> Create the Program </h3>
Create a small program to run on the grid:
<p />
<pre class="screen">
$ <userinput>cat &gt; myscript.sh
#! /bin/sh

echo "I'm process id $$ on" `hostname`
echo "This is sent to standard error" 1&gt;&2
date
echo "Running as binary $0" "$@"
echo "My name (argument 1) is $1"
echo "My sleep duration (argument 2) is $2"
sleep $2
echo "Sleep of $2 seconds finished.  Exiting"
echo "RESULT: 0 SUCCESS"
<em>[Ctrl+D]</em> </userinput>
$ <userinput>cat myscript.sh</userinput>
#! /bin/sh

echo "I'm process id $$ on" `hostname`
echo "This is sent to standard error" 1&gt;&2
date
echo "Running as binary $0" "$@"
echo "My name (argument 1) is $1"
echo "My sleep duration (argument 2) is $2"
sleep $2
echo "Sleep of $2 seconds finished.  Exiting"
echo "RESULT: 0 SUCCESS"
</pre>
<p />
<h3><a name="Test_the_program"></a> Test the program </h3>
Make the program executable and test it.
<p />
<pre class="screen">
$ <userinput>chmod a+x myscript.sh</userinput>
$ <userinput>./myscript.sh TEST 1</userinput>
I'm process id 3428 on %LOGINHOST%
This is sent to standard error
Thu Jul 10 12:21:11 CDT 2006
Running as binary ./myscript.sh TEST 1
My name (argument 1) is TEST
My sleep duration (argument 2) is 1
Sleep of 1 seconds finished.  Exiting
RESULT: 0 SUCCESS
</pre>
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_2show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_2hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_2toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/SubmitSimpleGridJobWithCondorG" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<h3><a name="Submit_your_test_job_to_Condor_G"></a> Submit your test job to Condor-G. </h3>
<p />
<pre class="screen">
$ <userinput>condor_submit myjob.submit</userinput>

Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 1.
</pre>
<p />
Run <a href="http://www.cs.wisc.edu/condor/manual/v6.9/condor_q.html" target="_top">condor_q</a> to see the progress of your job.  You may also want to run <code>condor_q&nbsp;-globus</code> at regular intervals to see Globus-specific status information. (See the <a href="http://www.cs.wisc.edu/condor/manual/v6.9/condor_q.html" target="_top">condor_q manual</a> for more information.)
<p />
<pre class="screen">
$ <userinput>condor_q</userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   1.0   %LOGINNAME%         7/10 17:28   0+00:00:00 I  0   0.0  myscript.sh TestJo

1 jobs; 1 idle, 0 running, 0 held
$ <userinput>condor_q -globus</userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   1.0   %LOGINNAME%       UNSUBMITTED fork     %OTHERHOST%   %HOMEDIR%/cond
$ <userinput>condor_q</userinput>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   1.0   %LOGINNAME%         7/10 17:28   0+00:00:27 R  0   0.0  myscript.sh TestJo

1 jobs; 0 idle, 1 running, 0 held
$ <userinput>condor_q -globus</userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   1.0   %LOGINNAME%       ACTIVE fork     %OTHERHOST%   %HOMEDIR%/cond
$ <userinput>condor_q</userinput>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   1.0   %LOGINNAME%         7/10 17:28   0+00:00:40 C  0   0.0  myscript.sh       

0 jobs; 0 idle, 0 running, 0 held
$ <userinput>condor_q -globus</userinput>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   1.0   adesmet       DONE fork     %OTHERHOST%   %HOMEDIR%/cond

$ <userinput>condor_q</userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held
</pre>
<p />
<p />
<p />
<h3><a name="Monitoring_Progress_with_tail"></a> Monitoring Progress with <code>tail</code> </h3>
In another window, run <code>tail -f</code> on the log file for your job to monitor progress. Re-run <code>tail</code> when you submit one or more jobs throughout this tutorial. You will see how typical Condor-G jobs progress. Use <strong><userinput>Ctrl+C</userinput></strong> to stop watching the file.
<p />
<pre class="screen">
$ <userinput>cd ~/condor-tutorial/submit</userinput>
$ <userinput>tail -f --lines=500 results.log</userinput>
000 (001.000.000) 07/10 17:28:48 Job submitted from host: <%LOGINIP%:35688>
...
017 (001.000.000) 03/24 19:13:30 Job submitted to Globus
    RM-Contact: %LOGINHOST%/jobmanager-fork
    JM-Contact: https://%LOGINHOST%:34127/28997/1174763610/
    Can-Restart-JM: 1
...
027 (001.000.000) 07/10 17:29:01 Job submitted to grid resource
    GridResource: gt2 %LOGINHOST%/jobmanager-fork
    GridJobId: gt2 %LOGINHOST%/jobmanager-fork https://%LOGINHOST%:51277/31413/1174756212/
...
001 (001.000.000) 07/10 17:29:01 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
005 (001.000.000) 07/10 17:30:08 Job terminated.
        (1) Normal termination (return value 0)
                Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
                Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
                Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
                Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
        0  -  Run Bytes Sent By Job
        0  -  Run Bytes Received By Job
        0  -  Total Bytes Sent By Job
        0  -  Total Bytes Received By Job
...

</pre>
<p />
<p />
<p />
<h3><a name="Verifying_completed_jobs"></a> Verifying completed jobs </h3>
When the job is no longer listed in condor_q, or when the log file reports "Job terminated," the results can be viewed using the <a href="http://www.cs.wisc.edu/condor/manual/v6.9/condor_history.html" target="_top">condor_history</a> command:
<p />
<pre class="screen">
$ <userinput>condor_history</userinput>
 ID      OWNER            SUBMITTED     RUN_TIME ST   COMPLETED CMD
   1.0   %LOGINNAME%         7/10 10:28   0+00:00:00 C   ???        %HOMEDIR%/cond
</pre>
<p />
When the job completes, verify that the output is as expected. The binary name is different from what you created because of how Globus and Condor-G cooperate to stage your file to execute computer.
<p />
<pre class="screen">
$ <userinput>ls</userinput>
myjob.submit  myscript.sh*  results.error  results.log   results.output
$ <userinput>cat results.error</userinput>
This is sent to standard error
$ <userinput>cat results.output </userinput>
$I'm process id 733 on %LOGINHOST%
Thu Jul 10 17:28:57 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/28/fcae5001dbcd99cc476984b4151284/md5/af/355c4959dc83a74b18b7c03eb27201/data TestJob 10
My name (argument 1) is TestJob
My sleep duration (argument 2) is 10
Sleep of 10 seconds finished.  Exiting
RESULT: 0 SUCCESS
</pre>
<p />
If you didn't watch the results.log file with <code>tail -f</code>, you will want to examine the logged information:
<p />
<pre class="screen">
$ <userinput>cat results.log </userinput>
</pre>
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_3show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_3hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_3toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/SubmitSimpleGridJobWithCondorG" enctype="multipart/form-data" name="tableappend1" id="tableappend1">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="1"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<h3><a name="Submitting_a_job_to_other_hosts"></a> Submitting a job to other hosts </h3>
%OTHERHOST% is also running a little Condor pool. Try submitting a job to it through Condor-G and Globus. 
<p />
Create a new submit file:
<p />
<pre class="screen">
$ <userinput>cat &gt; myjob2.submit
executable=myscript.sh
arguments=TestJob 10
output=results2.output
error=results2.error
log=results2.log
notification=never
universe=grid
grid_resource=gt2 %OTHERHOST%/jobmanager-condor
queue
<em>[Ctrl+D]</em></userinput>
$ <userinput>cat myjob2.submit</userinput>
executable=myscript.sh
arguments=TestJob 10
output=results2.output
error=results2.error
log=results2.log
notification=never
universe=grid
grid_resource=gt2 %OTHERHOST%/jobmanager-condor
queue
</pre>
<p />
Notice that the setting for the <code>grid_resource</code> now refers to <code>condor</code> instead of <code>fork</code>. Globus will submit the job to Condor on %OTHERHOST% instead of running the job directly.
<p />
Submit the job to Condor-G:
<p />
<pre class="screen">
$ <userinput>condor_submit myjob2.submit</userinput>
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 2.
</pre>
<p />
You can monitor the job's progress just like the first job. If you log into %OTHERHOST% in another window, you can see your job in the Condor queue there. Be quick, or the job will finish before you look!
<p />
<pre class="screen">
$ <userinput>ssh %OTHERHOST%</userinput>
%LOGINNAME%@%OTHERHOST%'s password: 
$ <userinput>condor_status</userinput>

Name          OpSys       Arch   State      Activity   LoadAv Mem   ActvtyTime

vm100@clu1.ph LINUX       INTEL  Unclaimed  Idle       0.000     9  0+00:03:35
vm10@clu1.phy LINUX       INTEL  Unclaimed  Idle       0.000     9  0+00:03:33
vm11@clu1.phy LINUX       INTEL  Unclaimed  Idle       0.000     9  0+00:03:34
vm12@clu1.phy LINUX       INTEL  Unclaimed  Idle       0.000     9  0+00:03:35
...
vm99@clu1.phy LINUX       INTEL  Unclaimed  Idle       0.000     9  0+00:03:34
vm9@clu1.phys LINUX       INTEL  Unclaimed  Idle       0.000     9  0+00:03:32

                     Machines Owner Claimed Unclaimed Matched Preempting

         INTEL/LINUX      100     0       0       100       0          0

               Total      100     0       0       100       0          0
$ <userinput>condor_q</userinput>

-- Submitter: %OTHERHOST% : <%LOGINIP%:36311> : %OTHERHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  11.0   %LOGINNAME%         7/10 23:04   0+00:00:00 I  0   0.0  data TestJob 10

1 jobs; 1 idle, 0 running, 0 held
</pre>
<p />
Clean up the results after the second job has finished running:
<p />
<pre class="screen">
$ <userinput>rm results.* results2.*</userinput>
</pre>
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_4show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_4hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_4toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/SubmitSimpleGridJobWithCondorG" enctype="multipart/form-data" name="tableappend2" id="tableappend2">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="2"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Held_Jobs"></a> Held Jobs </span></h2>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/CondorHeldJobs" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216694" name="t"></form>
<p />
When an problem occurs in the middleware, Condor-G will <span class="firstterm">hold</span> your job. Held jobs remain in the queue, waiting for user intervention. When you resolve the problem, you can use <a href="http://www.cs.wisc.edu/condor/manual/v6.7/condor_release.html" target="_top">condor_release</a> to free the job to continue.
<p />
Use <a href="http://www.cs.wisc.edu/condor/manual/v6.9/condor_hold.html" target="_top">condor_hold</a> to manually place jobs on hold (e.g., to delay your run).
<p />
For this example, we'll make the output file non-writable.  The job will be unable to copy the results back and will be placed on hold.
<p />
Submit the job again, but this time immediately after submitting it, mark the output file as read-only:
<p />
<pre class="screen">
$ <userinput>condor_submit myjob.submit ; chmod a-w results.output</userinput>
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 3.
</pre>
<p />
Watch the job with <code>tail</code>.  When the job goes on hold, use <strong><userinput>Ctrl+C</userinput></strong> to exit tail.  Note that condor_q reports that the job is in the <code>H</code> or Held state.
<p />
<pre class="screen">
$ <userinput>tail -f --lines=500 results.log</userinput>

000 (003.000.000) 07/12 22:35:44 Job submitted from host: <%LOGINIP%:32864>
...
027 (003.000.000) 07/12 22:35:57 Job submitted to grid resource
    GridResource: gt2 %LOGINHOST%/jobmanager-fork
    GridJobId: gt2 %LOGINHOST%/jobmanager-fork https://%LOGINHOST%:44026/31670/1174757075/
...
001 (003.000.000) 07/12 22:35:57 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
012 (003.000.000) 07/12 22:36:52 Job was held.
        Globus error 155: the job manager could not stage out a file
        Code 2 Subcode 155
...
<userinput><em>[Ctrl+C]</em></userinput>
$ <userinput>condor_q</userinput>

 
-- Submitter: %LOGINHOST% : <%LOGINIP%:32864> : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD
   2.0   %LOGINNAME%         7/12 22:35   0+00:00:55 H  0   0.0  myscript.sh TestJo
 
1 jobs; 0 idle, 0 running, 1 held
</pre>
<p />
Fix the problem (make the file writable again), then release the job. You can specifiy the job's ID, or just use "-all" to release all held jobs.
<p />
<pre class="screen">
$ <userinput>chmod u+w results.output</userinput>
$ <userinput>condor_release -all</userinput>
All jobs released.
</pre>
<p />
Run <code>tail -f</code> in another window to watch the log until the job finishes:
<p />
<pre class="screen">
$ <userinput>tail -f --lines=500 results.log</userinput>
000 (003.000.000) 07/12 22:35:44 Job submitted from host: <%LOGINIP%:32864>
...
027 (003.000.000) 07/12 22:35:57 Job submitted to grid resource
    GridResource: gt2 %LOGINHOST%/jobmanager-fork
    GridJobId: gt2 %LOGINHOST%/jobmanager-fork https://%LOGINHOST%:44026/31670/1174757075/...
...
001 (003.000.000) 07/12 22:35:57 Job executing on host: %LOGINHOST%
...
012 (003.000.000) 07/12 22:36:52 Job was held.
        Globus error 155: the job manager could not stage out a file
        Code 2 Subcode 155
...
013 (003.000.000) 07/12 22:44:33 Job was released.
        via condor_release (by user %LOGINNAME%)
...
027 (003.000.000) 07/12 22:35:57 Job submitted to grid resource
    GridResource: gt2 %LOGINHOST%/jobmanager-fork
    GridJobId: gt2 %LOGINHOST%/jobmanager-fork https://%LOGINHOST%:44026/31670/1174757075/...
...
001 (003.000.000) 07/12 22:44:46 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
005 (003.000.000) 07/12 22:44:51 Job terminated.
        (1) Normal termination (return value 0)
                Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
                Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
                Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
                Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
        0  -  Run Bytes Sent By Job
        0  -  Run Bytes Received By Job
        0  -  Total Bytes Sent By Job
        0  -  Total Bytes Received By Job
...
<userinput><em>[Ctrl+C]</em></userinput>
</pre>
<p />
After your job has finished running, check that the results have been retreived successfully:
<p />
<pre class="screen">
$ <userinput>cat results.output</userinput>
I'm process id 12528 on %LOGINHOST%
Sat Jul 12 22:35:53 CEST 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/6d/217f3f7926c06a529143f6129bf269/md5/a7/2af94ba728c69c588e523a99baaefd/data TestJob 10
My name (argument 1) is TestJob
My sleep duration (argument 2) is 10
Sleep of 10 seconds finished.  Exiting
RESULT: 0 SUCCESS
</pre>
<p />
Clean up the results before continuing:
<p />
<pre class="screen">
$ <userinput>rm results.*</userinput>
</pre>
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_5show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_5hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_5toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table5" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/CondorHeldJobs" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="A_Simple_DAG"></a> A Simple DAG </span></h2>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/SimpleDag" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216694" name="t"></form>
<p />
<h3><a name="Create_a_script_to_monitor_the_q"></a> Create a script to monitor the queue </h3>
Create a small shell script to monitor the Condor-G queue. We will use this throughout the rest of the tutorial:
<p />
<pre class="screen">
$ <userinput>cat &gt; watch_condor_q
#! /bin/sh
while true; do
     condor_q
     condor_q -globus
     sleep 10
done
<em>[Ctrl+D]</em></userinput>
$ <userinput>cat watch_condor_q</userinput>
#! /bin/sh
while true; do
     condor_q
     condor_q -globus
     sleep 10
done
$ <userinput>chmod a+x watch_condor_q </userinput>
</pre>
<p />
<p />
<h3><a name="Create_a_minimal_DAG"></a> Create a minimal DAG </h3>
Create a minimal DAG for DAGMan. This DAG will have a single node.
<p />
<pre class="screen">
$ <userinput>cat &gt; mydag.dag
Job HelloWorld myjob.submit
<em>[Ctrl+D]</em></userinput>
$ <userinput>cat mydag.dag</userinput>
Job HelloWorld myjob.submit
</pre>
<p />
<h3><a name="Submit_the_DAG"></a> Submit the DAG </h3>
This section requires you to have three windows open. We will submit the DAG in the first window and watch the progress of it and the job in the other two. We will do these in the following order: <ol>
<li> In the first window, submit the DAG and then watch condor with <code>watch_condor_q</code>.
</li> <li> In the second window, tail the results log.
</li> <li> In the third window, tail the DAGMan log.
</li></ol> 
<p />
Submit the DAG with <code><a href="http://www.cs.wisc.edu/condor/manual/v6.9/condor_submit_dag.html" target="_top">condor_submit_dag</a></code> and watch the run with <code>watch_condor_q</code>. <code>condor_dagman</code> is running as a job and submits your real job on your behalf, without your direct intervention. You might see the <code>C</code> (completed) state as your job finishes, but that often goes by too quickly to notice.
<p />
<pre class="screen">
$ <userinput>condor_submit_dag mydag.dag</userinput>

Checking your DAG input file and all submit files it references.
This might take a while... 
Done.
-----------------------------------------------------------------------
File for submitting this DAG to Condor   : mydag.dag.condor.sub
Log of DAGMan debugging messages         : mydag.dag.dagman.out
Log of Condor library debug messages     : mydag.dag.lib.out
Log of the life of condor_dagman itself  : mydag.dag.dagman.log

Condor Log file for all jobs of this DAG : results.log
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 2.
-----------------------------------------------------------------------
$ <userinput>./watch_condor_q </userinput>
</pre>
<p />
<h4><a name="Watching_the_Logs"></a> Watching the Logs </h4>
<p />
In the first log window, watch the job log file as your job runs:
<pre class="screen">
$ <userinput>tail -f --lines=500 results.log</userinput>
</pre>
<p />
In a third window, watch DAGMan's log file by runnning <tt><userinput>tail -f --lines=500 mydag.dag.dagman.out</userinput></tt>. We suggest that you re-run this command whenever you submit a DAG during the remainder of this tutorial. This will show you how a typical DAG progresses.  Use <strong><userinput>[Ctrl+C]</userinput></strong> to stop watching the file. An example is shown below:
<p />
<pre class="screen">
$ <userinput>cd ~/condor-tutorial/submit</userinput>
$ <userinput>tail -f --lines=500 mydag.dag.dagman.out</userinput>

7/10 10:36:43 ******************************************************
7/10 10:36:43 ** condor_scheduniv_exec.6.0 (CONDOR_DAGMAN) STARTING UP
7/10 10:36:43 ** $CondorVersion: 6.8.4 Apr 22 2006 $
7/10 10:36:43 ** $CondorPlatform: INTEL-LINUX-GLIBC22 $
7/10 10:36:43 ** PID = 26844
7/10 10:36:43 ******************************************************
7/10 10:36:44 DaemonCore: Command Socket at &lt;%LOGINIP%:34571&gt;
7/10 10:36:44 argv[0] == "condor_scheduniv_exec.6.0"
7/10 10:36:44 argv[1] == "-Debug"
7/10 10:36:44 argv[2] == "3"
7/10 10:36:44 argv[3] == "-Lockfile"
7/10 10:36:44 argv[4] == "mydag.dag.lock"
7/10 10:36:44 argv[5] == "-Condorlog"
7/10 10:36:44 argv[6] == "results.log"
7/10 10:36:44 argv[7] == "-Dag"
7/10 10:36:44 argv[8] == "mydag.dag"
7/10 10:36:44 argv[9] == "-Rescue"
7/10 10:36:44 argv[10] == "mydag.dag.rescue"
7/10 10:36:44 Condor log will be written to results.log
7/10 10:36:44 DAG Lockfile will be written to mydag.dag.lock
7/10 10:36:44 DAG Input file is mydag.dag
7/10 10:36:44 Rescue DAG will be written to mydag.dag.rescue
7/10 10:36:44 Parsing mydag.dag ...
7/10 10:36:44 Dag contains 1 total jobs
7/10 10:36:44 Bootstrapping...
7/10 10:36:44 Number of pre-completed jobs: 0
7/10 10:36:44 Submitting Job HelloWorld ...
7/10 10:36:44    assigned Condor ID (7.0.0)
7/10 10:36:45 Event: ULOG_SUBMIT for Job HelloWorld (7.0.0)
7/10 10:36:45 0/1 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 10:37:05 Event: ULOG_GLOBUS_SUBMIT for Job HelloWorld (7.0.0)
7/10 10:37:05 Event: ULOG_EXECUTE for Job HelloWorld (7.0.0)
7/10 10:38:10 Event: ULOG_JOB_TERMINATED for Job HelloWorld (7.0.0)
7/10 10:38:10 Job HelloWorld completed successfully.
7/10 10:38:10 1/1 done, 0 failed, 0 submitted, 0 ready, 0 pre, 0 post
7/10 10:38:10 All jobs Completed!
7/10 10:38:10 **** condor_scheduniv_exec.6.0 (condor_DAGMAN) EXITING WITH STATUS 0
</pre>
<p />
<p />
The first window, running <code>watch_condor_q</code>, should look something like the following:
<p />
<pre class="screen">
$ <userinput>./watch_condor_q </userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   2.0   %LOGINNAME%         7/10 17:33   0+00:00:03 R  0   2.6  condor_dagman -f -
   3.0   %LOGINNAME%         7/10 17:33   0+00:00:00 I  0   0.0  myscript.sh TestJo

2 jobs; 1 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   3.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   2.0   %LOGINNAME%         7/10 17:33   0+00:00:33 R  0   2.6  condor_dagman -f -
   3.0   %LOGINNAME%         7/10 17:33   0+00:00:15 R  0   0.0  myscript.sh TestJo

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   3.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   %HOMEDIR%/cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   2.0   %LOGINNAME%         7/10 17:33   0+00:01:03 R  0   2.6  condor_dagman -f -
   3.0   %LOGINNAME%         7/10 17:33   0+00:00:45 R  0   0.0  myscript.sh TestJo

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   3.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        


<em><userinput>[Ctrl+C]</userinput></em>
</pre>
<p />
<p />
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_6show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_6hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_6toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table6" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=6;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=6;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=6;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/SimpleDag" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<h3><a name="Verify_your_results"></a> Verify your results: </h3>
<p />
<pre class="screen">
$ <userinput>ls -l</userinput>
total 12
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%        28 Jul 10 10:35 mydag.dag
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%       523 Jul 10 10:36 mydag.dag.condor.sub
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%       608 Jul 10 10:38 mydag.dag.dagman.log
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%      1860 Jul 10 10:38 mydag.dag.dagman.out
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%        29 Jul 10 10:38 mydag.dag.lib.out
-rw-------    1 %LOGINNAME%  %LOGINNAME%         0 Jul 10 10:36 mydag.dag.lock
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%       175 Jul  9 18:13 myjob.submit
-rwxr-xr-x    1 %LOGINNAME%  %LOGINNAME%       194 Jul 10 10:36 myscript.sh
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%        31 Jul 10 10:37 results.error
-rw-------    1 %LOGINNAME%  %LOGINNAME%       833 Jul 10 10:38 results.log
-rw-r--r--    1 %LOGINNAME%  %LOGINNAME%       261 Jul 10 10:37 results.output
-rwxr-xr-x    1 %LOGINNAME%  %LOGINNAME%        81 Jul 10 10:35 watch_condor_q
$ <userinput>cat results.error </userinput>
This is sent to standard error
$ <userinput>cat results.output </userinput>
I'm process id 29149 on %LOGINHOST%
This is sent to standard error
Thu Jul 10 10:38:44 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/aa/ceb9e04077256aaa2acf4dff670897/md5/27/2f50da149fc049d07b1c27f30b67df/data TEST 1
My name (argument 1) is TEST
My sleep duration (argument 2) is 1
Sleep of 1 seconds finished.  Exiting
RESULT: 0 SUCCESS
</pre>
<p />
Looking at DAGMan's various files, we see that DAGMan itself ran as a Condor job (specifically, a scheduler universe job):
<p />
<pre class="screen">
$ <userinput>ls</userinput>
mydag.dag         mydag.dag.dagman.log  mydag.dag.lib.out  myjob.submit  results.error  results.output
mydag.dag.condor.sub  mydag.dag.dagman.out  mydag.dag.lock     myscript.sh   results.log    watch_condor_q
$ <userinput>cat mydag.dag.condor.sub</userinput>
# Filename: mydag.dag.condor.sub
# Generated by condor_submit_dag mydag.dag
universe   = scheduler
executable   = /path/to/condor/bin/condor_dagman
getenv      = True
output      = mydag.dag.lib.out
error      = mydag.dag.lib.out
log      = mydag.dag.dagman.log
remove_kill_sig   = SIGUSR1
arguments   = -f -l . -Debug 3 -Lockfile mydag.dag.lock -Condorlog results.log -Dag mydag.dag -Rescue mydag.dag.rescue
environment   = _CONDOR_DAGMAN_LOG=mydag.dag.dagman.out;_CONDOR_MAX_DAGMAN_LOG=0
queue
$ <userinput>cat mydag.dag.dagman.log</userinput>
000 (006.000.000) 07/10 10:36:43 Job submitted from host: &lt;%LOGINIP%:33785&gt;
...
001 (006.000.000) 07/10 10:36:44 Job executing on host: &lt;%LOGINIP%:33785&gt;

...
005 (006.000.000) 07/10 10:38:10 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
</pre>
<p />
If you weren't watching the DAGMan output file with tail -f, you can examine the file with the following command:
<p />
<pre class="screen">
$ <userinput>cat mydag.dag.dagman.out</userinput>
</pre>
<p />
<h3><a name="Cleaning_Up"></a> Cleaning Up </h3>
Clean up your results.  Be careful when deleting the <code>mydag.dag.*</code> to <em>not</em> delete the <code>mydag.dag</code> file. Note the <code>.*</code>!
<p />
<pre class="screen">
$ <userinput>rm mydag.dag.* results.*</userinput>
</pre>
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_7show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_7hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_7toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table7" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=7;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=7;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=7;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/SimpleDag" enctype="multipart/form-data" name="tableappend1" id="tableappend1">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="1"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="A_More_Complex_DAG"></a> A More Complex DAG </span></h2>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/ComplexDag" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216694" name="t"></form>
<p />
Typically each node in a DAG will have its own Condor submit file. Create some more submit files by copying our existing file.  For simplicity during this tutorial, we'll keep the submit files very similar, notably using the same executable. In real-world use, your submit files and executables can differ.
<p />
<pre class="screen">
$ <userinput>cp myjob.submit job.setup.submit</userinput>
$ <userinput>cp myjob.submit job.work1.submit</userinput>
$ <userinput>cp myjob.submit job.work2.submit</userinput>
$ <userinput>cp myjob.submit job.workfinal.submit</userinput>
$ <userinput>cp myjob.submit job.finalize.submit</userinput>
</pre>
<p />
Edit the various submit files.  Change the output and error entries to point to <code>results.NODE.output</code> and <code>results.NODE.error</code> files where "NODE" is actually the middle word in the submit file (<code>job.NODE.submit</code>). So <code>job.finalize.error</code> would include:
<p />
<pre class="programlisting">
output=results.finalize.output
error=results.finalize.error
</pre>
<p />
Here is one possible set of settings for the output entries:
<p />
<pre class="screen">
$ <userinput>grep '^output=' job.*.submit</userinput>
job.finalize.submit:output=results.finalize.output
job.setup.submit:output=results.setup.output
job.work1.submit:output=results.work1.output
job.work2.submit:output=results.work2.output
job.workfinal.submit:output=results.workfinal.output
</pre>
<p />
This prevents the various nodes from overwriting each other's output.
<p />
Do not change the log entries.  DAGMan requires that all nodes output their logs in the same location.  Condor will ensure that the different jobs will not overwrite each other's entries in the log. 
<p />
on      Never versions of DAGMan lift this requirement, and allow each job to use its own log file &mdash; but you may want to use one common log file anyway because it's convenient to have all of your job status information in a single place.
<p />
Change the arguments entries so that the first argument is something unique to each node (perhaps the NODE name).
<p />
For node work2, change the second argument to 120 so that it looks something like:
<p />
<pre class="programlisting">
arguments=MyWorkerNode2 120
</pre>
<p />
Add the new nodes to your DAG:
<p />
<pre class="screen">
$ <userinput>cat mydag.dag </userinput>
Job HelloWorld myjob.submit
$ <userinput>cat &gt;&gt; mydag.dag
Job Setup job.setup.submit
Job WorkerNode_1 job.work1.submit
Job WorkerNode_Two job.work2.submit
Job CollectResults job.workfinal.submit
Job LastNode job.finalize.submit
PARENT Setup CHILD WorkerNode_1 WorkerNode_Two
PARENT WorkerNode_1 WorkerNode_Two CHILD CollectResults
PARENT CollectResults CHILD LastNode
<em>[Ctrl+D]</em></userinput>
$ <userinput>cat mydag.dag </userinput>
Job HelloWorld myjob.submit
Job Setup job.setup.submit
Job WorkerNode_1 job.work1.submit
Job WorkerNode_Two job.work2.submit
Job CollectResults job.workfinal.submit
Job LastNode job.finalize.submit
PARENT Setup CHILD WorkerNode_1 WorkerNode_Two
PARENT WorkerNode_1 WorkerNode_Two CHILD CollectResults
PARENT CollectResults CHILD LastNode
<userinput><em>[Ctrl+D]</em></userinput>
</pre>
<p />
<h3><a name="Change_watch_condor_q_script"></a> Change watch_condor_q script </h3>
<code>condor_q -dag</code> will organize jobs into their associated DAGs. Change <code>watch_condor_q</code> to use this:
<p />
<pre class="screen">
$ <userinput>rm watch_condor_q</userinput>
$ <userinput>cat &gt; watch_condor_q
#! /bin/sh
while true; do
    echo ....
    echo .... Output from condor_q
    echo ....
     condor_q
    echo ....
    echo .... Output from condor_q -globus
    echo ....
     condor_q -globus
    echo ....
    echo .... Output from condor_q -dag
    echo ....
     condor_q -dag
     sleep 10
done
<em>[Ctrl+D]</em></userinput>
$ <userinput>cat watch_condor_q</userinput>
#! /bin/sh
while true; do
    echo ....
    echo .... Output from condor_q
    echo ....
     condor_q
    echo ....
    echo .... Output from condor_q -globus
    echo ....
     condor_q -globus
    echo ....
    echo .... Output from condor_q -dag
    echo ....
     condor_q -dag
     sleep 10
done
$ <userinput>chmod a+x watch_condor_q </userinput>
</pre>
<p />
Submit your new DAG and monitor it.
<p />
In separate windows, run <tt><userinput>tail -f --lines=500 results.log</tt></userinput> and <tt><userinput>tail -f --lines=500 mydag.dag.dagman.out</tt></userinput> to monitor the job's progress.
<p />
<pre class="screen">
$ <userinput>condor_submit_dag mydag.dag</userinput>

Checking your DAG input file and all submit files it references.
This might take a while... 
Done.
-----------------------------------------------------------------------
File for submitting this DAG to Condor   : mydag.dag.condor.sub
Log of DAGMan debugging messages         : mydag.dag.dagman.out
Log of Condor library debug messages     : mydag.dag.lib.out
Log of the life of condor_dagman itself  : mydag.dag.dagman.log

Condor Log file for all jobs of this DAG : results.log
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 8.
-----------------------------------------------------------------------
$ <userinput>./watch_condor_q</userinput>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   adesmet         7/10 17:45   0+00:00:08 R  0   2.6  condor_dagman -f -
   5.0   adesmet         7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh TestJo
   6.0   adesmet         7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held

<span id="twid_8show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_8hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_8toggle" class="twistyMakeHidden">
-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   5.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   6.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:00:08 R  0   2.6  condor_dagman -f -
   5.0    |-HelloWorld   7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh TestJo
   6.0    |-Setup        7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:00:12 R  0   2.6  condor_dagman -f -
   5.0   %LOGINNAME%         7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh TestJo
   6.0   %LOGINNAME%         7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   5.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   6.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:00:12 R  0   2.6  condor_dagman -f -
   5.0    |-HelloWorld   7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh TestJo
   6.0    |-Setup        7/10 17:45   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:00:42 R  0   2.6  condor_dagman -f -
   5.0   %LOGINNAME%         7/10 17:45   0+00:00:24 R  0   0.0  myscript.sh TestJo
   6.0   %LOGINNAME%         7/10 17:45   0+00:00:24 R  0   0.0  myscript.sh Setup 

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;128.105.185.14:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   5.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   6.0   adesmet       ACTIVE fork     gk2   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:00:42 R  0   2.6  condor_dagman -f -
   5.0    |-HelloWorld   7/10 17:45   0+00:00:24 R  0   0.0  myscript.sh TestJo
   6.0    |-Setup        7/10 17:45   0+00:00:24 R  0   0.0  myscript.sh Setup 

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:01:12 R  0   2.6  condor_dagman -f -
   5.0   %LOGINNAME%         7/10 17:45   0+00:00:54 R  0   0.0  myscript.sh TestJo
   6.0   %LOGINNAME%         7/10 17:45   0+00:00:54 R  0   0.0  myscript.sh Setup 

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   5.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   6.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:01:12 R  0   2.6  condor_dagman -f -
   5.0    |-HelloWorld   7/10 17:45   0+00:00:54 R  0   0.0  myscript.sh TestJo
   6.0    |-Setup        7/10 17:45   0+00:00:54 R  0   0.0  myscript.sh Setup 

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:01:42 R  0   2.6  condor_dagman -f -
   7.0   %LOGINNAME%         7/10 17:46   0+00:00:00 I  0   0.0  myscript.sh work1 
   8.0   %LOGINNAME%         7/10 17:46   0+00:00:00 I  0   0.0  myscript.sh Worker

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   7.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   8.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:01:42 R  0   2.6  condor_dagman -f -
   7.0    |-WorkerNode_  7/10 17:46   0+00:00:00 I  0   0.0  myscript.sh work1 
   8.0    |-WorkerNode_  7/10 17:46   0+00:00:00 I  0   0.0  myscript.sh Worker

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:02:12 R  0   2.6  condor_dagman -f -
   7.0   %LOGINNAME%         7/10 17:46   0+00:00:27 R  0   0.0  myscript.sh work1 
   8.0   %LOGINNAME%         7/10 17:46   0+00:00:27 R  0   0.0  myscript.sh Worker

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   7.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   8.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:02:12 R  0   2.6  condor_dagman -f -
   7.0    |-WorkerNode_  7/10 17:46   0+00:00:27 R  0   0.0  myscript.sh work1 
   8.0    |-WorkerNode_  7/10 17:46   0+00:00:27 R  0   0.0  myscript.sh Worker

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:02:42 R  0   2.6  condor_dagman -f -
   7.0   %LOGINNAME%         7/10 17:46   0+00:00:57 R  0   0.0  myscript.sh work1 
   8.0   %LOGINNAME%         7/10 17:46   0+00:00:57 R  0   0.0  myscript.sh Worker

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   7.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond
   8.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:02:43 R  0   2.6  condor_dagman -f -
   7.0    |-WorkerNode_  7/10 17:46   0+00:00:58 R  0   0.0  myscript.sh work1 
   8.0    |-WorkerNode_  7/10 17:46   0+00:00:58 R  0   0.0  myscript.sh Worker

3 jobs; 0 idle, 3 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:03:13 R  0   2.6  condor_dagman -f -
   8.0   %LOGINNAME%         7/10 17:46   0+00:01:28 R  0   0.0  myscript.sh Worker

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   8.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:03:13 R  0   2.6  condor_dagman -f -
   8.0    |-WorkerNode_  7/10 17:46   0+00:01:28 R  0   0.0  myscript.sh Worker

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:03:43 R  0   2.6  condor_dagman -f -
   8.0   %LOGINNAME%         7/10 17:46   0+00:01:58 R  0   0.0  myscript.sh Worker

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   8.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:03:43 R  0   2.6  condor_dagman -f -
   8.0    |-WorkerNode_  7/10 17:46   0+00:01:58 R  0   0.0  myscript.sh Worker

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:04:13 R  0   2.6  condor_dagman -f -
   9.0   %LOGINNAME%         7/10 17:49   0+00:00:02 R  0   0.0  myscript.sh workfi

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   9.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:04:13 R  0   2.6  condor_dagman -f -
   9.0    |-CollectResu  7/10 17:49   0+00:00:02 R  0   0.0  myscript.sh workfi

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:04:43 R  0   2.6  condor_dagman -f -
   9.0   %LOGINNAME%         7/10 17:49   0+00:00:32 R  0   0.0  myscript.sh workfi

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   9.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:04:43 R  0   2.6  condor_dagman -f -
   9.0    |-CollectResu  7/10 17:49   0+00:00:32 R  0   0.0  myscript.sh workfi

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:05:13 R  0   2.6  condor_dagman -f -
   9.0   %LOGINNAME%         7/10 17:49   0+00:01:02 R  0   0.0  myscript.sh workfi

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
   9.0   %LOGINNAME%       DONE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:05:13 R  0   2.6  condor_dagman -f -
   9.0    |-CollectResu  7/10 17:49   0+00:01:02 C  0   0.0  myscript.sh workfi

1 jobs; 0 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:05:43 R  0   2.6  condor_dagman -f -
  10.0   %LOGINNAME%         7/10 17:50   0+00:00:13 R  0   0.0  myscript.sh Final 

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
  10.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:05:44 R  0   2.6  condor_dagman -f -
  10.0    |-LastNode     7/10 17:50   0+00:00:13 R  0   0.0  myscript.sh Final 

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:06:14 R  0   2.6  condor_dagman -f -
  10.0   %LOGINNAME%         7/10 17:50   0+00:00:43 R  0   0.0  myscript.sh Final 

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
  10.0   %LOGINNAME%       ACTIVE fork     %LOGINHOST%   /tmp/<em>username</em>-cond


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
   4.0   %LOGINNAME%         7/10 17:45   0+00:06:14 R  0   2.6  condor_dagman -f -
  10.0    |-LastNode     7/10 17:50   0+00:00:43 R  0   0.0  myscript.sh Final 

2 jobs; 0 idle, 2 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:35688&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held

<em><userinput>[Ctrl+C]</userinput></em>
</div>
</pre>
<p />
Watching the logs or the condor_q output, you'll note that the <span class="twikiNewLink">CollectResults<a href="/bin/edit/Education/CollectResults?topicparent=Education.LectureFiveTutorial" rel="nofollow" title="CollectResults (this topic does not yet exist; you can create it)">?</a></span> node (<code>workfinal</code>) wasn't run until both of the <span class="twikiNewLink">WorkerNode<a href="/bin/edit/Education/WorkerNode?topicparent=Education.LectureFiveTutorial" rel="nofollow" title="WorkerNode (this topic does not yet exist; you can create it)">?</a></span> nodes (<code>work1</code> and <code>work2</code>) finished.
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_9show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_9hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_9toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table8" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=8;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=8;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=8;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ComplexDag" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<h3><a name="Examine_your_results"></a> Examine your results. </h3>
<p />
<pre class="screen">
$ <userinput>ls</userinput>
job.finalize.submit   mydag.dag.condor.sub  myscript.sh           results.setup.error   results.workfinal.error
job.setup.submit      mydag.dag.dagman.log  results.error        results.setup.output  results.workfinal.output
job.work1.submit      mydag.dag.dagman.out  results.finalize.error   results.work1.error   watch_condor_q
job.work2.submit      mydag.dag.lib.out     results.finalize.output  results.work1.output
job.workfinal.submit  mydag.dag.lock       results.log           results.work2.error
mydag.dag         myjob.submit       results.output        results.work2.output
$ <userinput>tail --lines=500 results.*.error</userinput>
==&gt; results.finalize.error &lt;==
This is sent to standard error

==&gt; results.setup.error &lt;==
This is sent to standard error

==&gt; results.work1.error &lt;==
This is sent to standard error
<span id="twid_10show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_10hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_10toggle" class="twistyMakeHidden">
==&gt; results.work2.error &lt;==
This is sent to standard error

==&gt; results.workfinal.error &lt;==
This is sent to standard error
$ <userinput>tail --lines=500 results.*.output</userinput>

==&gt; results.finalize.output &lt;==
I'm process id 29614 on %LOGINHOST%
Thu Jul 10 10:53:58 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/0d/7c60aa10b34817d3ffe467dd116816/md5/de/03c3eb8a20852948a2af53438bbce1/data Finalize 1
My name (argument 1) is Finalize
My sleep duration (argument 2) is 1
Sleep of 1 seconds finished.  Exiting

==&gt; results.setup.output &lt;==
I'm process id 29337 on %LOGINHOST%
Thu Jul 10 10:50:31 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/a5/fab7b658db65dbfec3ecf0a5414e1c/md5/f4/e9a04ae03bff43f00a10c78ebd60fd/data Setup 1
My name (argument 1) is Setup
My sleep duration (argument 2) is 1
Sleep of 1 seconds finished.  Exiting

==&gt; results.work1.output &lt;==
I'm process id 29444 on %LOGINHOST%
Thu Jul 10 10:51:04 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/2e/17db42df4e113f813cea7add42e03e/md5/f6/f1bd82a2fec9a3a372a44c009a63ca/data WorkerNode1 1
My name (argument 1) is WorkerNode1
My sleep duration (argument 2) is 1
Sleep of 1 seconds finished.  Exiting

==&gt; results.work2.output &lt;==
I'm process id 29432 on %LOGINHOST%
Thu Jul 10 10:51:03 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/ea/9a3c8d16346b2fea808cda4b5969fa/md5/f6/f1bd82a2fec9a3a372a44c009a63ca/data WorkerNode2 120
My name (argument 1) is WorkerNode2
My sleep duration (argument 2) is 120
Sleep of 120 seconds finished.  Exiting

==&gt; results.workfinal.output &lt;==
I'm process id 29554 on %LOGINHOST%
Thu Jul 10 10:53:27 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/c9/7ba5d43acad3d9ebdfa633839e75c3/md5/11/cd84efa75305d54100f0f451b46b35/data WorkFinal 1
My name (argument 1) is WorkFinal
My sleep duration (argument 2) is 1
Sleep of 1 seconds finished.  Exiting
</div>
</pre>
<p />
<h3><a name="Examine_your_log"></a> Examine your log </h3>
<p />
<pre class="screen">
$ <userinput>cat results.log</userinput>
000 (005.000.000) 07/10 17:45:24 Job submitted from host: <%LOGINHOST%:35688>
    DAG Node: HelloWorld
...
000 (006.000.000) 07/10 17:45:24 Job submitted from host: <%LOGINHOST%:35688>
    DAG Node: Setup
...
017 (006.000.000) 07/10 17:45:42 Job submitted to Globus
    RM-Contact: gk2:/jobmanager-fork
    JM-Contact: https://gk2:2349/914/1057877133/
    Can-Restart-JM: 1
...
001 (006.000.000) 07/10 17:45:42 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...

<span id="twid_11show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_11hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_11toggle" class="twistyMakeHidden">

017 (005.000.000) 07/10 17:45:42 Job submitted to Globus
    RM-Contact: %LOGINHOST%:/jobmanager-fork
    JM-Contact: https://%LOGINHOST%:2348/915/1057877133/
    Can-Restart-JM: 1
...
001 (005.000.000) 07/10 17:45:42 Job executing on host: gk2
...
005 (005.000.000) 07/10 17:46:50 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
005 (006.000.000) 07/10 17:46:50 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
000 (007.000.000) 07/10 17:46:55 Job submitted from host: <%LOGINHOST%:35688>
    DAG Node: WorkerNode_1
...
000 (008.000.000) 07/10 17:46:56 Job submitted from host: <%LOGINHOST%:35688>
    DAG Node: WorkerNode_Two
...
017 (008.000.000) 07/10 17:47:09 Job submitted to Globus
    RM-Contact: %LOGINHOST%:/jobmanager-fork
    JM-Contact: https://%LOGINHOST%:2364/1037/1057877219/
    Can-Restart-JM: 1
...
001 (008.000.000) 07/10 17:47:09 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
017 (007.000.000) 07/10 17:47:09 Job submitted to Globus
    RM-Contact: %LOGINHOST%:/jobmanager-fork
    JM-Contact: https://%LOGINHOST%:2367/1040/1057877220/
    Can-Restart-JM: 1
...
001 (007.000.000) 07/10 17:47:09 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
005 (007.000.000) 07/10 17:48:17 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
005 (008.000.000) 07/10 17:49:18 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
000 (009.000.000) 07/10 17:49:22 Job submitted from host: <%LOGINHOST%:35688>
    DAG Node: CollectResults
...
017 (009.000.000) 07/10 17:49:35 Job submitted to Globus
    RM-Contact: %LOGINHOST%:/jobmanager-fork
    JM-Contact: https://%LOGINHOST%:2383/1185/1057877366/
    Can-Restart-JM: 1
...
001 (009.000.000) 07/10 17:49:35 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
005 (009.000.000) 07/10 17:50:42 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
000 (010.000.000) 07/10 17:50:42 Job submitted from host: <%LOGINHOST%:35688>
    DAG Node: LastNode
...
017 (010.000.000) 07/10 17:50:55 Job submitted to Globus
    RM-Contact: %LOGINHOST%:/jobmanager-fork
    JM-Contact: https://%LOGINHOST%:2392/1247/1057877446/
    Can-Restart-JM: 1
...
001 (010.000.000) 07/10 17:50:55 Job executing on host: gt2 %LOGINHOST%/jobmanager-fork
...
005 (010.000.000) 07/10 17:52:02 Job terminated.
   (1) Normal termination (return value 0)
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Run Local Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Remote Usage
      Usr 0 00:00:00, Sys 0 00:00:00  -  Total Local Usage
   0  -  Run Bytes Sent By Job
   0  -  Run Bytes Received By Job
   0  -  Total Bytes Sent By Job
   0  -  Total Bytes Received By Job
...
</div>
</pre>
<p />
Examine the DAGMan log
<p />
<pre class="screen">
$ <userinput>cat mydag.dag.dagman.out</userinput>
7/10 17:45:24 ******************************************************
7/10 17:45:24 ** condor_scheduniv_exec.4.0 (CONDOR_DAGMAN) STARTING UP
7/10 17:45:24 ** $CondorVersion: 6.8.4 Apr 22 2006 $
7/10 17:45:24 ** $CondorPlatform: INTEL-LINUX-GLIBC22 $
7/10 17:45:24 ** PID = 18826
7/10 17:45:24 ******************************************************
7/10 17:45:24 DaemonCore: Command Socket at <%LOGINHOST%:35774>
7/10 17:45:24 argv[0] == "condor_scheduniv_exec.4.0"
7/10 17:45:24 argv[1] == "-Debug"
<span id="twid_12show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_12hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_12toggle" class="twistyMakeHidden">
7/10 17:45:24 argv[2] == "3"
7/10 17:45:24 argv[3] == "-Lockfile"
7/10 17:45:24 argv[4] == "mydag.dag.lock"
7/10 17:45:24 argv[5] == "-Condorlog"
7/10 17:45:24 argv[6] == "results.log"
7/10 17:45:24 argv[7] == "-Dag"
7/10 17:45:24 argv[8] == "mydag.dag"
7/10 17:45:24 argv[9] == "-Rescue"
7/10 17:45:24 argv[10] == "mydag.dag.rescue"
7/10 17:45:24 Condor log will be written to results.log
7/10 17:45:24 DAG Lockfile will be written to mydag.dag.lock
7/10 17:45:24 DAG Input file is mydag.dag
7/10 17:45:24 Rescue DAG will be written to mydag.dag.rescue
7/10 17:45:24 Parsing mydag.dag ...
7/10 17:45:24 Dag contains 6 total jobs
7/10 17:45:24 Bootstrapping...
7/10 17:45:24 Number of pre-completed jobs: 0
7/10 17:45:24 Submitting Job HelloWorld ...
7/10 17:45:24    assigned Condor ID (5.0.0)
7/10 17:45:24 Submitting Job Setup ...
7/10 17:45:24    assigned Condor ID (6.0.0)
7/10 17:45:25 Event: ULOG_SUBMIT for Job HelloWorld (5.0.0)
7/10 17:45:25 Event: ULOG_SUBMIT for Job Setup (6.0.0)
7/10 17:45:25 0/6 done, 0 failed, 2 submitted, 0 ready, 0 pre, 0 post
7/10 17:45:45 Event: ULOG_GLOBUS_SUBMIT for Job Setup (6.0.0)
7/10 17:45:45 Event: ULOG_EXECUTE for Job Setup (6.0.0)
7/10 17:45:45 Event: ULOG_GLOBUS_SUBMIT for Job HelloWorld (5.0.0)
7/10 17:45:45 Event: ULOG_EXECUTE for Job HelloWorld (5.0.0)
7/10 17:46:55 Event: ULOG_JOB_TERMINATED for Job HelloWorld (5.0.0)
7/10 17:46:55 Job HelloWorld completed successfully.
7/10 17:46:55 Event: ULOG_JOB_TERMINATED for Job Setup (6.0.0)
7/10 17:46:55 Job Setup completed successfully.
7/10 17:46:55 Submitting Job WorkerNode_1 ...
7/10 17:46:55    assigned Condor ID (7.0.0)
7/10 17:46:55 Submitting Job WorkerNode_Two ...
7/10 17:46:56    assigned Condor ID (8.0.0)
7/10 17:46:56 Event: ULOG_SUBMIT for Job WorkerNode_1 (7.0.0)
7/10 17:46:56 Event: ULOG_SUBMIT for Job WorkerNode_Two (8.0.0)
7/10 17:46:56 2/6 done, 0 failed, 2 submitted, 0 ready, 0 pre, 0 post
7/10 17:47:11 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_Two (8.0.0)
7/10 17:47:11 Event: ULOG_EXECUTE for Job WorkerNode_Two (8.0.0)
7/10 17:47:11 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_1 (7.0.0)
7/10 17:47:11 Event: ULOG_EXECUTE for Job WorkerNode_1 (7.0.0)
7/10 17:48:21 Event: ULOG_JOB_TERMINATED for Job WorkerNode_1 (7.0.0)
7/10 17:48:21 Job WorkerNode_1 completed successfully.
7/10 17:48:21 3/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 17:49:21 Event: ULOG_JOB_TERMINATED for Job WorkerNode_Two (8.0.0)
7/10 17:49:21 Job WorkerNode_Two completed successfully.
7/10 17:49:21 Submitting Job CollectResults ...
7/10 17:49:22    assigned Condor ID (9.0.0)
7/10 17:49:22 Event: ULOG_SUBMIT for Job CollectResults (9.0.0)
7/10 17:49:22 4/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 17:49:37 Event: ULOG_GLOBUS_SUBMIT for Job CollectResults (9.0.0)
7/10 17:49:37 Event: ULOG_EXECUTE for Job CollectResults (9.0.0)
7/10 17:50:42 Event: ULOG_JOB_TERMINATED for Job CollectResults (9.0.0)
7/10 17:50:42 Job CollectResults completed successfully.
7/10 17:50:42 Submitting Job LastNode ...
7/10 17:50:42    assigned Condor ID (10.0.0)
7/10 17:50:42 Event: ULOG_SUBMIT for Job LastNode (10.0.0)
7/10 17:50:42 5/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 17:50:57 Event: ULOG_GLOBUS_SUBMIT for Job LastNode (10.0.0)
7/10 17:50:57 Event: ULOG_EXECUTE for Job LastNode (10.0.0)
7/10 17:52:02 Event: ULOG_JOB_TERMINATED for Job LastNode (10.0.0)
7/10 17:52:02 Job LastNode completed successfully.
7/10 17:52:02 6/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 0 post
7/10 17:52:02 All jobs Completed!
7/10 17:52:02 **** condor_scheduniv_exec.4.0 (condor_DAGMAN) EXITING WITH STATUS 0

</div>
</pre>
<p />
Clean up your results.  Be careful about deleting the <code>mydag.dag.*</code> files, you do not want to delete the <code>mydag.dag</code> file, just <code>mydag.dag.*</code>.
<p />
<pre class="screen">
$ <userinput>rm mydag.dag.* results.*</userinput>
</pre>
<p />
<p />
<a name="optional_multi_resource"></a>
<h3><a name="Optional_Multiple_Globus_Schedul"></a> Optional: Multiple Globus Schedulers </h3>
<p />
If you're ahead of schedule, you can try redoing this section, but with other Grid sites.  Modify some of the grid_resource entries in your submit files to point to other servers (such as <code>evitable.uchicago.edu</code>, <code>terminable.uchicago.edu</code>  or <code>workshop3/jobmanager-condor</code>).  A single DAG can send jobs to a variety of sites.  Condor-G is capable of managing jobs being distributed to many different sites simultaneously.
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_13show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_13hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_13toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table9" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ComplexDag" enctype="multipart/form-data" name="tableappend1" id="tableappend1">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="1"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Handling_Jobs_That_Fail_with_DAG"></a> Handling Jobs That Fail with DAGMan </span></h2>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/HandlingFailedJobsWithDagMan" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216694" name="t"></form>
<p />
DAGMan can handle a situation where some of the nodes in a DAG fails. DAGMan will run as many nodes as possible, then create a rescue DAG making it easy to continue when the problem is fixed.
<p />
<p />
<h3><a name="Create_a_script"></a> Create a script </h3>
Let's create a script that will fail so we can see this:
<p />
<pre class="screen">
$ <userinput>cat &gt; myscript2.sh
#! /bin/sh

echo "I'm process id $$ on" `hostname`
echo "This is sent to standard error" 1&gt;&2
date
echo "Running as binary $0" "$@"
echo "My name (argument 1) is $1"
echo "My sleep duration (argument 2) is $2"
sleep $2
echo "Sleep of $2 seconds finished.  Exiting"
echo "RESULT: 1 FAILURE"
exit 1

<em>[Ctrl+D]</em></userinput>

$ <userinput>cat myscript2.sh</userinput>
#! /bin/sh

echo "I'm process id $$ on" `hostname`
echo "This is sent to standard error" 1&gt;&2
date
echo "Running as binary $0" "$@"
echo "My name (argument 1) is $1"
echo "My sleep duration (argument 2) is $2"
sleep $2
echo "Sleep of $2 seconds finished.  Exiting"
echo "RESULT: 1 FAILURE"
exit 1
$ <userinput>chmod a+x myscript2.sh</userinput>
</pre>
<p />
<p />
<h3><a name="Modify_the_submit"></a> Modify the submit </h3>
Modify job.work2.submit to run myscript2.sh instead of myscript.sh:
<p />
<pre class="screen">
$ <userinput>rm job.work2.submit</userinput>
$ <userinput>cat &gt; job.work2.submit
executable=myscript2.sh
output=results.work2.output
error=results.work2.error
log=results.log
notification=never
universe=grid
grid_resource=gt2 %LOGINHOST%/jobmanager-fork
arguments=WorkerNode2 60
queue

<em><strong>[Ctrl+D]</strong></em>
</userinput>
$ <userinput>cat job.work2.submit</userinput>
executable=myscript2.sh
output=results.work2.output
error=results.work2.error
log=results.log
notification=never
universe=grid
grid_resource=gt2 %LOGINHOST%/jobmanager-fork
arguments=WorkerNode2 60
queue
</pre>
<p />
<h3><a name="Resubmit_the_DAG"></a> Resubmit the DAG </h3>
Submit the dag again.
<p />
<pre class="screen">
$ <userinput>condor_submit_dag mydag.dag</userinput>

Checking your DAG input file and all submit files it references.
This might take a while... 
Done.
-----------------------------------------------------------------------
File for submitting this DAG to Condor   : mydag.dag.condor.sub
Log of DAGMan debugging messages         : mydag.dag.dagman.out
Log of Condor library debug messages     : mydag.dag.lib.out
Log of the life of condor_dagman itself  : mydag.dag.dagman.log

Condor Log file for all jobs of this DAG : results.log
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 15.
-----------------------------------------------------------------------
</pre>
<p />
<p />
<h3><a name="Monitor_progress"></a> Monitor progress </h3>
Use <code>watch_condor_q</code> to watch the jobs until they finish.
<p />
In separate windows run <code>tail -f --lines=500 results.log</code> and <code>tail -f --lines=500 mydag.dag.dagman.out</code> to monitor the job's progress.
<p />
<pre class="screen">
$ <userinput>./watch_condor_q</userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  15.0   %LOGINNAME%         7/10 11:11   0+00:00:04 R  0   2.6  condor_dagman -f -
  16.0   %LOGINNAME%         7/10 11:11   0+00:00:00 I  0   0.0  myscript.sh       
  17.0   %LOGINNAME%         7/10 11:11   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
  16.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   %HOMEDIR%/condo
  17.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   %HOMEDIR%/condo


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  15.0   %LOGINNAME%         7/10 11:11   0+00:00:04 R  0   2.6  condor_dagman -f -
  16.0    |-HelloWorld   7/10 11:11   0+00:00:00 I  0   0.0  myscript.sh       
  17.0    |-Setup        7/10 11:11   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


<em>Output of watch_condor_q truncated</em>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held
<userinput><em>[Ctrl+C]</em></userinput>
</pre>
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_14show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_14hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_14toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table10" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=10;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=10;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=10;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/HandlingFailedJobsWithDagMan" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<p />
<h3><a name="Check_your_results"></a> Check your results </h3>
<p />
<pre class="screen">
$ <userinput>ls</userinput>
job.finalize.submit   mydag.dag.condor.sub  myscript.sh           results.output      results.work2.output
job.setup.submit      mydag.dag.dagman.log  myscript2.sh        results.setup.error   results.workfinal.error
job.work1.submit      mydag.dag.dagman.out  results.error        results.setup.output  results.workfinal.output
job.work2.submit      mydag.dag.lib.out     results.finalize.error   results.work1.error   watch_condor_q
job.workfinal.submit  mydag.dag.lock       results.finalize.output  results.work1.output
mydag.dag         myjob.submit       results.log           results.work2.error
$ <userinput>cat results.work2.output</userinput>
I'm process id 29921 on %LOGINHOST%
Thu Jul 10 11:12:42 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/87/459c159766cefb36f0d75023de0e35/md5/70/5d82b930ec61460d9c9ca65cbe5a8a/data WorkerNode2 60
My name (argument 1) is WorkerNode2
My sleep duration (argument 2) is 60
Sleep of 60 seconds finished.  Exiting
RESULT: 1 FAILURE
$ <userinput>cat mydag.dag.dagman.out</userinput>
7/10 11:11:55 ******************************************************
7/10 11:11:55 ** condor_scheduniv_exec.15.0 (CONDOR_DAGMAN) STARTING UP
7/10 11:11:55 ** $CondorVersion: 6.8.4 Apr 22 2003 $
7/10 11:11:55 ** $CondorPlatform: INTEL-LINUX-GLIBC22 $
7/10 11:11:55 ** PID = 27126
7/10 11:11:55 ******************************************************
7/10 11:11:55 DaemonCore: Command Socket at &lt;%LOGINHOST%:34769&gt;
<em><span id="twid_15show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_15hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_15toggle" class="twistyMakeHidden"></em>
7/10 11:11:55 argv[0] == "condor_scheduniv_exec.15.0"
7/10 11:11:55 argv[1] == "-Debug"
7/10 11:11:55 argv[2] == "3"
7/10 11:11:55 argv[3] == "-Lockfile"
7/10 11:11:55 argv[4] == "mydag.dag.lock"
7/10 11:11:55 argv[5] == "-Condorlog"
7/10 11:11:55 argv[6] == "results.log"
7/10 11:11:55 argv[7] == "-Dag"
7/10 11:11:55 argv[8] == "mydag.dag"
7/10 11:11:55 argv[9] == "-Rescue"
7/10 11:11:55 argv[10] == "mydag.dag.rescue"
7/10 11:11:55 Condor log will be written to results.log
7/10 11:11:55 DAG Lockfile will be written to mydag.dag.lock
7/10 11:11:55 DAG Input file is mydag.dag
7/10 11:11:55 Rescue DAG will be written to mydag.dag.rescue
7/10 11:11:55 Parsing mydag.dag ...
7/10 11:11:55 Dag contains 6 total jobs
7/10 11:11:55 Bootstrapping...
7/10 11:11:55 Number of pre-completed jobs: 0
7/10 11:11:55 Submitting Job HelloWorld ...
7/10 11:11:55    assigned Condor ID (16.0.0)
7/10 11:11:55 Submitting Job Setup ...
7/10 11:11:55    assigned Condor ID (17.0.0)
7/10 11:11:56 Event: ULOG_SUBMIT for Job HelloWorld (16.0.0)
7/10 11:11:56 Event: ULOG_SUBMIT for Job Setup (17.0.0)
7/10 11:11:56 0/6 done, 0 failed, 2 submitted, 0 ready, 0 pre, 0 post
7/10 11:12:16 Event: ULOG_GLOBUS_SUBMIT for Job HelloWorld (16.0.0)
7/10 11:12:16 Event: ULOG_EXECUTE for Job HelloWorld (16.0.0)
7/10 11:12:16 Event: ULOG_GLOBUS_SUBMIT for Job Setup (17.0.0)
7/10 11:12:16 Event: ULOG_EXECUTE for Job Setup (17.0.0)
7/10 11:12:21 Event: ULOG_JOB_TERMINATED for Job HelloWorld (16.0.0)
7/10 11:12:21 Job HelloWorld completed successfully.
7/10 11:12:21 1/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:12:31 Event: ULOG_JOB_TERMINATED for Job Setup (17.0.0)
7/10 11:12:31 Job Setup completed successfully.
7/10 11:12:31 Submitting Job WorkerNode_1 ...
7/10 11:12:32    assigned Condor ID (18.0.0)
7/10 11:12:32 Submitting Job WorkerNode_Two ...
7/10 11:12:32    assigned Condor ID (19.0.0)
7/10 11:12:32 Event: ULOG_SUBMIT for Job WorkerNode_1 (18.0.0)
7/10 11:12:32 Event: ULOG_SUBMIT for Job WorkerNode_Two (19.0.0)
7/10 11:12:32 2/6 done, 0 failed, 2 submitted, 0 ready, 0 pre, 0 post
7/10 11:12:47 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_Two (19.0.0)
7/10 11:12:47 Event: ULOG_EXECUTE for Job WorkerNode_Two (19.0.0)
7/10 11:12:47 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_1 (18.0.0)
7/10 11:12:47 Event: ULOG_EXECUTE for Job WorkerNode_1 (18.0.0)
7/10 11:13:07 Event: ULOG_JOB_TERMINATED for Job WorkerNode_1 (18.0.0)
7/10 11:13:07 Job WorkerNode_1 completed successfully.
7/10 11:13:07 3/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:13:57 Event: ULOG_JOB_TERMINATED for Job WorkerNode_Two (19.0.0)
7/10 11:13:57 Job WorkerNode_Two completed successfully.
7/10 11:13:57 Submitting Job CollectResults ...
7/10 11:13:57    assigned Condor ID (20.0.0)
7/10 11:13:57 Event: ULOG_SUBMIT for Job CollectResults (20.0.0)
7/10 11:13:57 4/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:14:12 Event: ULOG_GLOBUS_SUBMIT for Job CollectResults (20.0.0)
7/10 11:14:12 Event: ULOG_EXECUTE for Job CollectResults (20.0.0)
7/10 11:14:32 Event: ULOG_JOB_TERMINATED for Job CollectResults (20.0.0)
7/10 11:14:32 Job CollectResults completed successfully.
7/10 11:14:32 Submitting Job LastNode ...
7/10 11:14:32    assigned Condor ID (21.0.0)
7/10 11:14:32 Event: ULOG_SUBMIT for Job LastNode (21.0.0)
7/10 11:14:32 5/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:14:47 Event: ULOG_GLOBUS_SUBMIT for Job LastNode (21.0.0)
7/10 11:14:47 Event: ULOG_EXECUTE for Job LastNode (21.0.0)
7/10 11:15:02 Event: ULOG_JOB_TERMINATED for Job LastNode (21.0.0)
7/10 11:15:02 Job LastNode completed successfully.
7/10 11:15:02 6/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 0 post
7/10 11:15:02 All jobs Completed!
7/10 11:15:02 **** condor_scheduniv_exec.15.0 (condor_DAGMAN) EXITING WITH STATUS 0
</div>
</pre>
<p />
Uh oh, DAGMan ran that remaining nodes based on bad data from node work2. Normally DAGMan checks the return code and considers non-zero a failure.  We did modify myscript2.sh to return non-zero.  That would normally work, but we're using Condor-G, not normal Condor.  Condor-G relies on Globus and Globus doesn't return error codes.
<p />
<p />
<h3><a name="Adding_a_POST_script"></a> Adding a POST script </h3>
If you're interested in having DAGMan notice a failed job and stopping the DAG at that point, you'll need to use a POST script to detect the problem.  One solution is to wrap your executable in a script that will output the executable's return code to stdout and have the POST script scan the stdout for the status.  Of perhaps your executable's normal output contains enough information to make the decision.
<p />
In this case, our executable is emitting a well known message.  Let's add a POST script.
<p />
<p />
<h4><a name="Cleaning_up"></a> Cleaning up </h4>
First, clean up your results.  
<p /> <dl>
<dt> <strong><font color="#ff0000"> WARNING </font></strong> </dt><dd> Be careful about deleting the <code>mydag.dag.*</code> files. Do not delete the <code>mydag.dag</code> file. Note the ending <code>.*</code>!
</dd></dl> 
<p />
<pre class="screen">
$ <userinput>rm mydag.dag.* results.*</userinput>
</pre>
<p />
<p />
<h3><a name="Create_the_script_to_check_outpu"></a> Create the script to check output </h3>
Now create a script to check the output.
<p />
<pre class="screen">
$ <userinput>cat &gt; postscript_checker
#! /bin/sh
grep 'RESULT: 0 SUCCESS' $1 &gt; /dev/null 2&gt;/dev/null

<strong><em>Ctrl-D</em></strong></userinput>

$ <userinput>cat postscript_checker</userinput>
#! /bin/sh
grep 'RESULT: 0 SUCCESS' $1 &gt; /dev/null 2&gt;/dev/null
$ <userinput>chmod a+x postscript_checker </userinput>
</pre>
<p />
<p />
<p />
<h4><a name="Modify_dag"></a> Modify dag </h4>
Modify your mydag.dag to use the new script for the nodes. 
<p />
<pre class="screen">
$ <userinput>cat &gt;&gt;mydag.dag
Script POST Setup postscript_checker results.setup.output
Script POST WorkerNode_1 postscript_checker results.work1.output
Script POST WorkerNode_Two postscript_checker results.work2.output
Script POST CollectResults postscript_checker results.workfinal.output
Script POST LastNode postscript_checker results.finalize.output

<strong><em>[Ctrl+D]</em></strong></userinput>

$ <userinput>cat mydag.dag</userinput>
Job HelloWorld myjob.submit
Job Setup job.setup.submit
Job WorkerNode_1 job.work1.submit
Job WorkerNode_Two job.work2.submit
Job CollectResults job.workfinal.submit
Job LastNode job.finalize.submit
PARENT Setup CHILD WorkerNode_1 WorkerNode_Two
PARENT WorkerNode_1 WorkerNode_Two CHILD CollectResults
PARENT CollectResults CHILD LastNode
Script POST Setup postscript_checker results.setup.output
Script POST WorkerNode_1 postscript_checker results.work1.output
Script POST WorkerNode_Two postscript_checker results.work2.output
Script POST CollectResults postscript_checker results.workfinal.output
Script POST LastNode postscript_checker results.finalize.output
$ <userinput>ls</userinput>
job.finalize.submit  job.work1.submit  job.workfinal.submit  myjob.submit  myscript2.sh        watch_condor_q
job.setup.submit     job.work2.submit  mydag.dag        myscript.sh   postscript_checker
</pre>
<p />
<p />
<h4><a name="Resubmit_the_DAG_AN1"></a> Resubmit the DAG </h4>
Submit the DAG again with the new POST scripts in place.
<p />
<pre class="screen">
$ <userinput>condor_submit_dag mydag.dag</userinput>

Checking your DAG input file and all submit files it references.
This might take a while... 
Done.
-----------------------------------------------------------------------
File for submitting this DAG to Condor   : mydag.dag.condor.sub
Log of DAGMan debugging messages         : mydag.dag.dagman.out
Log of Condor library debug messages     : mydag.dag.lib.out
Log of the life of condor_dagman itself  : mydag.dag.dagman.log

Condor Log file for all jobs of this DAG : results.log
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 22.
-----------------------------------------------------------------------
</pre>
<p />
<h4><a name="Monitor_the_job"></a> Monitor the job </h4>
Watch the job with <code>watch_condor_q</code>. 
<p />
In separate windows run <tt class="in">tail -f --lines=500 results.log</tt> and <tt><userinput>tail -f --lines=500 mydag.dag.dagman.out</userinput></tt> to monitor the job's progress.
<p />
<pre class="screen">
$ <userinput>./watch_condor_q </userinput>


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  22.0   %LOGINNAME%         7/10 11:25   0+00:00:03 R  0   2.6  condor_dagman -f -
  23.0   %LOGINNAME%         7/10 11:25   0+00:00:00 I  0   0.0  myscript.sh       
  24.0   %LOGINNAME%         7/10 11:25   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
  23.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   %HOMEDIR%/condo
  24.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   %HOMEDIR%/condo


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  22.0   %LOGINNAME%         7/10 11:25   0+00:00:03 R  0   2.6  condor_dagman -f -
  23.0    |-HelloWorld   7/10 11:25   0+00:00:00 I  0   0.0  myscript.sh       
  24.0    |-Setup        7/10 11:25   0+00:00:00 I  0   0.0  myscript.sh Setup 

3 jobs; 2 idle, 1 running, 0 held


<em>[Output of watch_condor_q truncated]</em>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held
<userinput><em>[Ctrl+C]</em></userinput>
</pre>
<p />
<p />
<p />
<p />
<h4><a name="Check_your_results_AN1"></a> Check your results </h4>
<p />
<pre class="screen">
$ <userinput>ls</userinput>
job.finalize.submit   mydag.dag          mydag.dag.rescue   results.error         results.work1.error
job.setup.submit      mydag.dag.condor.sub  myjob.submit   results.log         results.work1.output
job.work1.submit      mydag.dag.dagman.log  myscript.sh      results.output         results.work2.error
job.work2.submit      mydag.dag.dagman.out  myscript2.sh   results.setup.error   results.work2.output
job.workfinal.submit  mydag.dag.lib.out     postscript_checker   results.setup.output  watch_condor_q
$ <userinput>cat mydag.dag.dagman.out</userinput>
7/10 11:25:35 ******************************************************
7/10 11:25:35 ** condor_scheduniv_exec.22.0 (CONDOR_DAGMAN) STARTING UP
7/10 11:25:35 ** $CondorVersion: 6.8.4 Apr 22 2003 $
7/10 11:25:35 ** $CondorPlatform: INTEL-LINUX-GLIBC22 $
7/10 11:25:35 ** PID = 27251
7/10 11:25:35 ******************************************************
<span id="twid_16show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_16hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_16toggle" class="twistyMakeHidden">
7/10 11:25:35 DaemonCore: Command Socket at &lt;128.105.185.14:34913&gt;
7/10 11:25:35 argv[0] == "condor_scheduniv_exec.22.0"
7/10 11:25:35 argv[1] == "-Debug"
7/10 11:25:35 argv[2] == "3"
7/10 11:25:35 argv[3] == "-Lockfile"
7/10 11:25:35 argv[4] == "mydag.dag.lock"
7/10 11:25:35 argv[5] == "-Condorlog"
7/10 11:25:35 argv[6] == "results.log"
7/10 11:25:35 argv[7] == "-Dag"
7/10 11:25:35 argv[8] == "mydag.dag"
7/10 11:25:35 argv[9] == "-Rescue"
7/10 11:25:35 argv[10] == "mydag.dag.rescue"
7/10 11:25:35 Condor log will be written to results.log
<span id="twid_17show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_17hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_17toggle" class="twistyMakeHidden">
7/10 11:25:35 DAG Lockfile will be written to mydag.dag.lock
7/10 11:25:35 DAG Input file is mydag.dag
7/10 11:25:35 Rescue DAG will be written to mydag.dag.rescue
7/10 11:25:35 Parsing mydag.dag ...
7/10 11:25:35 jobName: Setup
7/10 11:25:35 jobName: WorkerNode_1
7/10 11:25:35 jobName: WorkerNode_Two
7/10 11:25:35 jobName: CollectResults
7/10 11:25:35 jobName: LastNode
7/10 11:25:35 Dag contains 6 total jobs
7/10 11:25:35 Bootstrapping...
7/10 11:25:35 Number of pre-completed jobs: 0
7/10 11:25:35 Submitting Job HelloWorld ...
7/10 11:25:35    assigned Condor ID (23.0.0)
7/10 11:25:35 Submitting Job Setup ...
7/10 11:25:35    assigned Condor ID (24.0.0)
7/10 11:25:36 Event: ULOG_SUBMIT for Job HelloWorld (23.0.0)
7/10 11:25:36 Event: ULOG_SUBMIT for Job Setup (24.0.0)
7/10 11:25:36 0/6 done, 0 failed, 2 submitted, 0 ready, 0 pre, 0 post
7/10 11:25:56 Event: ULOG_GLOBUS_SUBMIT for Job HelloWorld (23.0.0)
7/10 11:25:56 Event: ULOG_EXECUTE for Job HelloWorld (23.0.0)
7/10 11:25:56 Event: ULOG_GLOBUS_SUBMIT for Job Setup (24.0.0)
7/10 11:25:56 Event: ULOG_EXECUTE for Job Setup (24.0.0)
7/10 11:26:01 Event: ULOG_JOB_TERMINATED for Job HelloWorld (23.0.0)
7/10 11:26:01 Job HelloWorld completed successfully.
7/10 11:26:01 1/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:26:11 Event: ULOG_JOB_TERMINATED for Job Setup (24.0.0)
7/10 11:26:11 Job Setup completed successfully.
7/10 11:26:11 Running POST script of Job Setup...
7/10 11:26:11 1/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 1 post
7/10 11:26:16 Event: ULOG_POST_SCRIPT_TERMINATED for Job Setup (24.0.0)
7/10 11:26:16 POST Script of Job Setup completed successfully.
7/10 11:26:16 Submitting Job WorkerNode_1 ...
7/10 11:26:16    assigned Condor ID (25.0.0)
7/10 11:26:16 Submitting Job WorkerNode_Two ...
7/10 11:26:17    assigned Condor ID (26.0.0)
7/10 11:26:17 Event: ULOG_SUBMIT for Job WorkerNode_1 (25.0.0)
7/10 11:26:17 Event: ULOG_SUBMIT for Job WorkerNode_Two (26.0.0)
7/10 11:26:17 2/6 done, 0 failed, 2 submitted, 0 ready, 0 pre, 0 post
7/10 11:26:32 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_1 (25.0.0)
7/10 11:26:32 Event: ULOG_EXECUTE for Job WorkerNode_1 (25.0.0)
7/10 11:26:32 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_Two (26.0.0)
7/10 11:26:32 Event: ULOG_EXECUTE for Job WorkerNode_Two (26.0.0)
7/10 11:26:52 Event: ULOG_JOB_TERMINATED for Job WorkerNode_1 (25.0.0)
7/10 11:26:52 Job WorkerNode_1 completed successfully.
7/10 11:26:52 Running POST script of Job WorkerNode_1...
7/10 11:26:52 2/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 1 post
7/10 11:26:57 Event: ULOG_POST_SCRIPT_TERMINATED for Job WorkerNode_1 (25.0.0)
7/10 11:26:57 POST Script of Job WorkerNode_1 completed successfully.
7/10 11:26:57 3/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:27:42 Event: ULOG_JOB_TERMINATED for Job WorkerNode_Two (26.0.0)
7/10 11:27:42 Job WorkerNode_Two completed successfully.
7/10 11:27:42 Running POST script of Job WorkerNode_Two...
7/10 11:27:42 3/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 1 post
7/10 11:27:47 Event: ULOG_POST_SCRIPT_TERMINATED for Job WorkerNode_Two (26.0.0)
7/10 11:27:47 POST Script of Job WorkerNode_Two failed with status 1
7/10 11:27:47 3/6 done, 1 failed, 0 submitted, 0 ready, 0 pre, 0 post
7/10 11:27:47 ERROR: the following job(s) failed:
7/10 11:27:47 ---------------------- Job ----------------------
7/10 11:27:47       Node Name: WorkerNode_Two
7/10 11:27:47          NodeID: 3
7/10 11:27:47     Node Status: STATUS_ERROR    
7/10 11:27:47           Error: POST Script failed with status 1
7/10 11:27:47 Job Submit File: job.work2.submit
7/10 11:27:47     POST Script: postscript_checker results.work2.output
7/10 11:27:47   Condor Job ID: (26.0.0)
7/10 11:27:47       Q_PARENTS: 1, &lt;END&gt;
7/10 11:27:47       Q_WAITING: &lt;END&gt;

7/10 11:27:47      Q_CHILDREN: 4, &lt;END&gt;
7/10 11:27:47 ---------------------------------------   &lt;END&gt;
7/10 11:27:47 Writing Rescue DAG file...
7/10 11:27:47 **** condor_scheduniv_exec.22.0 (condor_DAGMAN) EXITING WITH STATUS 1
</div>
</pre>
<p />
DAGMan notices that one of the jobs failed.  DAGMan ran as much of the DAG as possible and logged enough information to continue the run when the situation is resolved.
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_18show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_18hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_18toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table11" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=11;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=11;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=11;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/HandlingFailedJobsWithDagMan" enctype="multipart/form-data" name="tableappend1" id="tableappend1">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="1"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<h3><a name="Examine_mydag_dag_rescue"></a> Examine mydag.dag.rescue </h3>
Look at the rescue DAG. It's the same structurally as your original DAG, but notes that finished are marked DONE.  (DAGMan also reorganized the file.) When you submit the rescue DAG, DONE nodes will be skipped.
<p />
<pre class="screen">
$ <userinput>cat mydag.dag.rescue </userinput>
# Rescue DAG file, created after running
#   the mydag.dag DAG file
#
# Total number of Nodes: 6
# Nodes premarked DONE: 3
# Nodes that failed: 1
#   WorkerNode_Two,&lt;ENDLIST&gt;

JOB HelloWorld myjob.submit DONE

JOB Setup job.setup.submit DONE
SCRIPT POST Setup postscript_checker results.setup.output

JOB WorkerNode_1 job.work1.submit DONE
SCRIPT POST WorkerNode_1 postscript_checker results.work1.output

JOB WorkerNode_Two job.work2.submit 
SCRIPT POST WorkerNode_Two postscript_checker results.work2.output

JOB CollectResults job.workfinal.submit 
SCRIPT POST CollectResults postscript_checker results.workfinal.output

JOB LastNode job.finalize.submit 
SCRIPT POST LastNode postscript_checker results.finalize.output


PARENT Setup CHILD WorkerNode_1 WorkerNode_Two
PARENT WorkerNode_1 CHILD CollectResults
PARENT WorkerNode_Two CHILD CollectResults
PARENT CollectResults CHILD LastNode
</pre>
<p />
We know there is a problem with the work2 step.  Let's "fix" it.
<p />
<pre class="screen">
$ <userinput>rm myscript2.sh</userinput>
$ <userinput>cp myscript.sh myscript2.sh</userinput>
</pre>
<p />
<h4><a name="Resubmitting_rescue_DAG"></a> Resubmitting rescue DAG </h4>
Now we can submit our rescue DAG. 
<p /> <dl>
<dt> <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd> If you didn't fix the problem, DAGMan would have generated another rescue DAG (<code>mydag.dag.rescue.rescue</code>).
</dd></dl> 
<p />
In separate windows run <tt class="in">tail -f --lines=500 results.log</tt> and <tt class="in">tail -f --lines=500 mydag.dag.dagman.out</tt> to monitor the job's progress.
<p />
<p />
<pre class="screen">
$ <userinput>condor_submit_dag mydag.dag.rescue </userinput>

Checking your DAG input file and all submit files it references.
This might take a while... 
Done.
-----------------------------------------------------------------------
File for submitting this DAG to Condor   : mydag.dag.rescue.condor.sub
Log of DAGMan debugging messages         : mydag.dag.rescue.dagman.out
Log of Condor library debug messages     : mydag.dag.rescue.lib.out
Log of the life of condor_dagman itself  : mydag.dag.rescue.dagman.log

Condor Log file for all jobs of this DAG : results.log
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 27.
-----------------------------------------------------------------------
$ <userinput>./watch_condor_q </userinput>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  27.0   %LOGINNAME%         7/10 11:34   0+00:00:01 R  0   2.6  condor_dagman -f -
  28.0   %LOGINNAME%         7/10 11:34   0+00:00:00 I  0   0.0  myscript2.sh Worke

2 jobs; 1 idle, 1 running, 0 held

<span id="twid_19show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_19hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_19toggle" class="twistyMakeHidden">
-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        
  28.0   %LOGINNAME%       UNSUBMITTED fork     %LOGINHOST%   %HOMEDIR%/condo


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  27.0   %LOGINNAME%         7/10 11:34   0+00:00:01 R  0   2.6  condor_dagman -f -
  28.0    |-WorkerNode_  7/10 11:34   0+00:00:00 I  0   0.0  myscript2.sh Worke

2 jobs; 1 idle, 1 running, 0 held

<strong><em>[Output of watch_condor_q truncated]</em></strong>

-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER          STATUS  MANAGER  HOST                EXECUTABLE        


-- Submitter: %LOGINHOST% : &lt;%LOGINIP%:33785&gt; : %LOGINHOST%
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 idle, 0 running, 0 held

<userinput><em>[Ctrl+C]</em></userinput>
</div>
</pre>
<p />
<p />
<p />
<h3><a name="Check_your_results_AN2"></a> Check your results. </h3>
<p />
<pre class="screen">
$ <userinput>ls</userinput>
job.finalize.submit   mydag.dag.lib.out         myscript2.sh          results.work1.error
job.setup.submit      mydag.dag.rescue         postscript_checker       results.work1.output
job.work1.submit      mydag.dag.rescue.condor.sub  results.error       results.work2.error
job.work2.submit      mydag.dag.rescue.dagman.log  results.finalize.error   results.work2.output
job.workfinal.submit  mydag.dag.rescue.dagman.out  results.finalize.output  results.workfinal.error
mydag.dag         mydag.dag.rescue.lib.out      results.log          results.workfinal.output
mydag.dag.condor.sub  mydag.dag.rescue.lock      results.output       watch_condor_q
mydag.dag.dagman.log  myjob.submit         results.setup.error
mydag.dag.dagman.out  myscript.sh         results.setup.output
$ <userinput>cat mydag.dag.rescue.dagman.out</userinput>
7/10 11:34:33 ******************************************************
7/10 11:34:33 ** condor_scheduniv_exec.27.0 (CONDOR_DAGMAN) STARTING UP
7/10 11:34:33 ** $CondorVersion: 6.8.4 Apr 22 2003 $
7/10 11:34:33 ** $CondorPlatform: INTEL-LINUX-GLIBC22 $
7/10 11:34:33 ** PID = 27317
7/10 11:34:33 ******************************************************
<span id="twid_20show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_20hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_20toggle" class="twistyMakeHidden">
7/10 11:34:33 DaemonCore: Command Socket at &lt;%LOGINIP%:35032&gt;
7/10 11:34:33 argv[0] == "condor_scheduniv_exec.27.0"
7/10 11:34:33 argv[1] == "-Debug"
7/10 11:34:33 argv[2] == "3"
7/10 11:34:33 argv[3] == "-Lockfile"
7/10 11:34:33 argv[4] == "mydag.dag.rescue.lock"
7/10 11:34:33 argv[5] == "-Condorlog"
7/10 11:34:33 argv[6] == "results.log"
7/10 11:34:33 argv[7] == "-Dag"
7/10 11:34:33 argv[8] == "mydag.dag.rescue"
7/10 11:34:33 argv[9] == "-Rescue"
7/10 11:34:33 argv[10] == "mydag.dag.rescue.rescue"
7/10 11:34:33 Condor log will be written to results.log
7/10 11:34:33 DAG Lockfile will be written to mydag.dag.rescue.lock
7/10 11:34:33 DAG Input file is mydag.dag.rescue
7/10 11:34:33 Rescue DAG will be written to mydag.dag.rescue.rescue
7/10 11:34:33 Parsing mydag.dag.rescue ...
7/10 11:34:33 jobName: Setup
7/10 11:34:33 jobName: WorkerNode_1
7/10 11:34:33 jobName: WorkerNode_Two
7/10 11:34:33 jobName: CollectResults
7/10 11:34:33 jobName: LastNode
7/10 11:34:33 Dag contains 6 total jobs
7/10 11:34:33 Deleting older version of results.log
7/10 11:34:33 Bootstrapping...
7/10 11:34:33 Number of pre-completed jobs: 3
7/10 11:34:33 Submitting Job WorkerNode_Two ...
7/10 11:34:33    assigned Condor ID (28.0.0)
7/10 11:34:34 Event: ULOG_SUBMIT for Job WorkerNode_Two (28.0.0)
7/10 11:34:34 3/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:34:54 Event: ULOG_GLOBUS_SUBMIT for Job WorkerNode_Two (28.0.0)
7/10 11:34:54 Event: ULOG_EXECUTE for Job WorkerNode_Two (28.0.0)
7/10 11:35:59 Event: ULOG_JOB_TERMINATED for Job WorkerNode_Two (28.0.0)
7/10 11:35:59 Job WorkerNode_Two completed successfully.
7/10 11:35:59 Running POST script of Job WorkerNode_Two...
7/10 11:35:59 3/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 1 post
7/10 11:36:04 Event: ULOG_POST_SCRIPT_TERMINATED for Job WorkerNode_Two (28.0.0)
7/10 11:36:04 POST Script of Job WorkerNode_Two completed successfully.
7/10 11:36:04 Submitting Job CollectResults ...
7/10 11:36:04    assigned Condor ID (29.0.0)
7/10 11:36:04 Event: ULOG_SUBMIT for Job CollectResults (29.0.0)
7/10 11:36:04 4/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:36:19 Event: ULOG_GLOBUS_SUBMIT for Job CollectResults (29.0.0)
7/10 11:36:19 Event: ULOG_EXECUTE for Job CollectResults (29.0.0)
7/10 11:36:34 Event: ULOG_JOB_TERMINATED for Job CollectResults (29.0.0)
7/10 11:36:34 Job CollectResults completed successfully.
7/10 11:36:34 Running POST script of Job CollectResults...
7/10 11:36:34 4/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 1 post
7/10 11:36:39 Event: ULOG_POST_SCRIPT_TERMINATED for Job CollectResults (29.0.0)
7/10 11:36:39 POST Script of Job CollectResults completed successfully.
7/10 11:36:39 Submitting Job LastNode ...
7/10 11:36:39    assigned Condor ID (30.0.0)
7/10 11:36:39 Event: ULOG_SUBMIT for Job LastNode (30.0.0)
7/10 11:36:39 5/6 done, 0 failed, 1 submitted, 0 ready, 0 pre, 0 post
7/10 11:36:54 Event: ULOG_GLOBUS_SUBMIT for Job LastNode (30.0.0)
7/10 11:36:54 Event: ULOG_EXECUTE for Job LastNode (30.0.0)
7/10 11:37:09 Event: ULOG_JOB_TERMINATED for Job LastNode (30.0.0)
7/10 11:37:09 Job LastNode completed successfully.
7/10 11:37:09 Running POST script of Job LastNode...
7/10 11:37:09 5/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 1 post
7/10 11:37:14 Event: ULOG_POST_SCRIPT_TERMINATED for Job LastNode (30.0.0)
7/10 11:37:14 POST Script of Job LastNode completed successfully.
7/10 11:37:14 6/6 done, 0 failed, 0 submitted, 0 ready, 0 pre, 0 post
7/10 11:37:14 All jobs Completed!
7/10 11:37:14 **** condor_scheduniv_exec.27.0 (condor_DAGMAN) EXITING WITH STATUS 0
$ <userinput>cat results.work2.output</userinput>
I'm process id 30478 on %LOGINHOST%
Thu Jul 10 11:34:46 CDT 2003
Running as binary %HOMEDIR%/.globus/.gass_cache/local/md5/23/61b50cd9b278330cac68107dd390d6/md5/5e/004f7216b8b846d548357da00985f4/data WorkerNode2 60
My name (argument 1) is WorkerNode2
My sleep duration (argument 2) is 60
Sleep of 60 seconds finished.  Exiting
RESULT: 0 SUCCESS
$ <userinput>exit</userinput>
</div>
</pre>
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<span class="educationWebAddComment">ADD A COMMENT</span>
<span id="twid_21show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_21hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_21toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table12" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=0;table=12;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=1;table=12;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/LectureFiveTutorial?cover=print;sortcol=2;table=12;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/HandlingFailedJobsWithDagMan" enctype="multipart/form-data" name="tableappend2" id="tableappend2">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="2"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                    <strong>*********</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
That's it.  There is a lot more you can do with Condor-G and DAGMan, but this basic introduction is all you need to know to get started.  Good luck!  
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Updates"></a>  Major Updates </span></h2>
-- <a href="/bin/view/Main/MichaelWilde" class="twikiLink">MichaelWilde</a> - 15 Jun 2006 <br />    
-- <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> - 29 Jan 2007 (cleaning up)</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/Education/WorkshopTutorialModules" class="twikiLink">WorkshopTutorialModules</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>LectureFiveTutorial</span> <br />    
Topic revision: r3 - 28 Feb 2007 - 18:05:32 - <span class="twikiNewLink">ForrestChristian<a href="/bin/edit/Education/ForrestChristian?topicparent=Education.LectureFiveTutorial" rel="nofollow" title="ForrestChristian (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />