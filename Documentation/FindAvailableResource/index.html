<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> FindAvailableResource &lt; Documentation &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/FindAvailableResource?_T=16 Feb 2017" type="application/x-wiki" title="edit FindAvailableResource" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/FindAvailableResource"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFF99;
	}
	.patternBookView {
		border-color:#FFFF99;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <link rel="stylesheet" type="text/css" href="https://twiki.opensciencegrid.org/twiki/pub/Documentation/Tools/exercises.css">
<p />
<h1><a name="Finding_An_Available_Resource"></a> <strong>Finding An Available Resource</strong> </h1>
<p />
This page is a part of the OSG's larger <a href="/bin/view/Documentation/UsingTheGrid" class="twikiLink">user documentation</a> tutorial.
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Finding_An_Available_Resource"> Finding An Available Resource</a> <ul>
<li> <a href="?cover=print#About_This_Document"> About This Document</a>
</li> <li> <a href="?cover=print#Requirements"> Requirements</a>
</li> <li> <a href="?cover=print#Finding_a_Compute_Element_Resour"> Finding a Compute Element Resource</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="About_This_Document"></a> About This Document </span></h2>
<p />
To run a job on the Open Science Grid, you must find at least one resource (also referred to as a <em>cluster</em> or <em>site</em>) that can run your job.  Each resource on the OSG is accessible via an <em>endpoint</em>, which is a string that provides enough information for client tools to uniquely identify the resource.
<p />
This page explains how a user can find a Globus CE endpoint via command line tools.  We will cover querying for the information in two different formats.
<p />
After reading this page, you should <ul>
<li> Be able to perform basic queries on the information systems to find a usable compute resource.
</li> <li> Understand there are two systems, BDII and ReSS, which hold machine-readable information about the OSG.
</li></ul> 
<p />
Later, we will utilize the resources you find on this page for small-scale test jobs.  We will be using the results for the beginning Condor tutorials.  Users do not usually perform their own service discovery; in the later tutorials, we will cover more advanced systems which will discover and test resources automatically.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Requirements"></a> Requirements </span></h2>
In order to finish this document, you will need the following: <ul>
<li> Your own <a href="/bin/view/Documentation/CertificateUserGet" class="twikiLink">grid certificate</a>.
</li> <li> Membership in a <a href="/bin/view/Documentation/WhatIsVO" class="twikiLink">Virtual Organization</a>.
</li> <li> Access to a machine with the <a href="/bin/view/ReleaseDocumentation/ClientInstallationGuide" class="twikiLink">OSG-Client</a> installed.
</li></ul> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Finding_a_Compute_Element_Resour"></a> Finding a Compute Element Resource </span></h2>
<p />
There are two OSG central services - called ReSS and BDII - which provide very detailed data for using OSG resources.  They contain the same data, but in different formats.  The BDII provides data in the LDIF format while ReSS provides data in a Condor ClassAd format. Both formats express the information in a schema called GLUE.
<p />
We will be using the results you receive in this page for the beginner's job management examples.  Advanced and heavy OSG users use higher-level, automated tools (so, if you find yourself programming BDII queries in shell scripts, ask for help - there might be a better tool for the job).
<p />
To get a list of contact strings for sites that support your VO, you can query the BDII server.  The traditional command line tool is called <code>ldapsearch</code>. Try the following query directly:
<p />
<pre class="screen">
<userinput>ldapsearch -LLL -h is.grid.iu.edu -p 2170 -x -b 'o=grid' '(&(objectClass=GlueCE)(GlueCEAccessControlBaseRule=VO:<font color="#ff0000">cms</font>))' GlueCEInfoHostName GlueCEInfoGatekeeperPort GlueCEInfoJobManager</userinput>
</pre>
<p />
This queries the OSG BDII server for all CEs which support the CMS VO (replace "<font color="#ff0000">cms</font>" with your VO name).  It asks for three attributes back - the hostname, port, and the name of the batch system.  One example result for CMS is:
<p />
<pre class="screen">
dn: GlueCEUniqueID=cit-gatekeeper.ultralight.org:2119/jobmanager-condor-cms_us
 er,Mds-Vo-name=CIT_CMS_T2,Mds-Vo-name=local,o=grid
GlueCEInfoHostName: cit-gatekeeper.ultralight.org
GlueCEInfoGatekeeperPort: 2119
GlueCEInfoJobManager: condor
</pre>
<p />
This information can be used for client-tools like Condor-G or globus-job-run.  A Globus resource is specified in the following format: <code>host:port/jobmanager-<batch system></code>.  From the example output above, the corresponding Globus endpoint is <code>cit-gatekeeper.ultralight.org:2119/jobmanager-condor</code>.
<p />
To query <span class="twikiNewLink">ReSS<a href="/bin/edit/Documentation/ReSS?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="ReSS (this topic does not yet exist; you can create it)">?</a></span>, we use a tool called <code>condor_status</code>.  The <code>condor_status</code> tool allows more control over the output formatting and may be more familiar to users who have previously used the Condor software.  For example, the equivalent query to the <code>ldapsearch</code> above is the following:
<p />
<pre class="screen">
<userinput>condor_status -pool osg-ress-1.fnal.gov -const 'stringListIMember("VO:<font color="#ff0000">cms</font>", GlueCEAccessControlBaseRule)' -format '%s:' GlueCEInfoHostName -format '%i' GlueCEInfoGatekeeperPort -format '/jobmanager-%s\n' GlueCEInfoJobManager | sort | uniq</userinput>
</pre>
Like before, replace "<font color="#ff0000">cms</font>" with the appropriate name for your VO.  Note the output is already converted the right format for Globus:
<br/>
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationFindAvailableResource1show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show results from sample query...</span></a> </span> <span id="twistyIdDocumentationFindAvailableResource1hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide results</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationFindAvailableResource1toggle" class="twistyContent twikiMakeHidden twistyInited">
<pre class="screen">
antaeus.hpcc.ttu.edu:2119/jobmanager-sge
belhaven-1.renci.org:2119/jobmanager-condor
ce01.cmsaf.mit.edu:2119/jobmanager-condor
cit-gatekeeper2.ultralight.org:2119/jobmanager-condor
cit-gatekeeper.ultralight.org:2119/jobmanager-condor
cms-0.mps.ohio-state.edu:2119/jobmanager-condor
cmsgrid01.hep.wisc.edu:2119/jobmanager-condor
cmsgrid02.hep.wisc.edu:2119/jobmanager-condor
cmsosgce2.fnal.gov:2119/jobmanager-condor
cmsosgce4.fnal.gov:2119/jobmanager-condor
cmsosgce.fnal.gov:2119/jobmanager-condor
cms.tier3.ucdavis.edu:2119/jobmanager-condor
cms-xen19.fnal.gov:2119/jobmanager-condor
cms-xen2.fnal.gov:2119/jobmanager-condor
condor.crc.nd.edu:2119/jobmanager-condor
d0cabosg1.fnal.gov:2119/jobmanager-pbs
d0cabosg2.fnal.gov:2119/jobmanager-pbs
fermigridosg1.fnal.gov:2119/jobmanager-condor
ff-grid2.unl.edu:2119/jobmanager-pbs
ff-grid3.unl.edu:2119/jobmanager-pbs
ff-grid.unl.edu:2119/jobmanager-pbs
fnpcosg1.fnal.gov:2119/jobmanager-condor
gluskap.phys.uconn.edu:2119/jobmanager-condor
gpn-husker.unl.edu:2119/jobmanager-condor
gridgk01.racf.bnl.gov:2119/jobmanager-condor
gridgk02.racf.bnl.gov:2119/jobmanager-condor
hepcms-0.umd.edu:2119/jobmanager-condor
heposg01.colorado.edu:2119/jobmanager-condor
iogw1.hpc.ufl.edu:2119/jobmanager-pbs
lepton.rcac.purdue.edu:2119/jobmanager-pbs
nwicg.crc.nd.edu:2119/jobmanager-condor
nys1.cac.cornell.edu:2119/jobmanager-pbs
osgce64.hepgrid.uerj.br:2119/jobmanager-condor
osg-ce.sprace.org.br:2119/jobmanager-condor
osg.crc.nd.edu:2119/jobmanager-sge
osg-east.hms.harvard.edu:2119/jobmanager-condor
osg-nemo-ce.phys.uwm.edu:2119/jobmanager-condor
osg.rcac.purdue.edu:2119/jobmanager-condor
osgserv01.slac.stanford.edu:2119/jobmanager-lsf
ouhep00.nhn.ou.edu:2119/jobmanager-condor
ouhep0.nhn.ou.edu:2119/jobmanager-condor
ouhep1.nhn.ou.edu:2119/jobmanager-condor
pf-grid.unl.edu:2119/jobmanager-condor
pg.ihepa.ufl.edu:2119/jobmanager-condor
proton.fis.cinvestav.mx:2119/jobmanager-pbs
red.unl.edu:2119/jobmanager-condor
smufarm.physics.smu.edu:2119/jobmanager-condor
tier2-01.ochep.ou.edu:2119/jobmanager-condor
tier2-02.ochep.ou.edu:2119/jobmanager-condor
tier2-03.ochep.ou.edu:2119/jobmanager-condor
top.ucr.edu:2119/jobmanager-condor
tuscany.med.harvard.edu:2119/jobmanager-condor
u2-grid.ccr.buffalo.edu:2119/jobmanager-pbs
uscms1.fltech-grid3.fit.edu:2119/jobmanager-condor
vampire.accre.vanderbilt.edu:2119/jobmanager-pbs
</pre>
</div></div> <!--/twistyPlugin-->
<br/>
<p />
One of the outputs from the command above is <code>red.unl.edu:2119/jobmanager-condor</code>.
<p />
Both <code>ldapsearch</code> and <code>condor_status</code> have long command line invocations - it might be handy to write them down.  We don't expect you to understand all the command-line options - the important knowledge here is you can repeat these queries at any time to get the list of sites you can run at for the purposes of test jobs.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Comments"></a> <strong>Comments</strong> </span></h2>
<p />
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/FindAvailableResource" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">BrianBockelman<a href="/bin/edit/Documentation/BrianBockelman?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="BrianBockelman (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/ComputeElement?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = User
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/EndUser?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = Scientist
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Training
</li></ul> 
<p />
  Please define if this document in general needs to be reviewed before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">DerekWeitzel<a href="/bin/edit/Documentation/DerekWeitzel?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="DerekWeitzel (this topic does not yet exist; you can create it)">?</a></span> Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">DerekWeitzel<a href="/bin/edit/Documentation/DerekWeitzel?topicparent=Documentation.FindAvailableResource" rel="nofollow" title="DerekWeitzel (this topic does not yet exist; you can create it)">?</a></span> Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/UsingTheGrid" class="twikiLink">UsingTheGrid</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>FindAvailableResource</span> <br />    
Topic revision: r31 - 06 Dec 2016 - 18:12:37 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />