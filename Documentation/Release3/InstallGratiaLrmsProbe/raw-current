<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> InstallGratiaLrmsProbe &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallGratiaLrmsProbe?_T=16 Feb 2017" type="application/x-wiki" title="edit InstallGratiaLrmsProbe" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaLrmsProbe"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#FFFFFF" />&nbsp;<a href="/bin/view/Documentation/Release3/WebHome">Documentation/Release3 Web</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaLrmsProbe" title='Topic revision: 7 (07 Feb 2017 - 19:34:17)'>InstallGratiaLrmsProbe</a> <span class='patternRevInfo'>(07 Feb 2017, <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">%DOC_STATUS_TABLE%

---+!! Install and Configure Gratia Probes on Local Resource Management Systems
%TOC%

&lt;!-- conventions used in this document
   * Local UCL_HOST = %URLPARAM{&quot;INPUT_HOST&quot; encode=&quot;quote&quot; default=&quot;gratia&quot;}%
   * Local UCL_USER = %URLPARAM{&quot;INPUT_USER&quot; encode=&quot;quote&quot; default=&quot;user&quot;}%
   * Local UCL_DOMAIN = %URLPARAM{&quot;INPUT_DOMAIN&quot; encode=&quot;quote&quot; default=&quot;opensciencegrid.org&quot;}%
   * Set TWISTY_OPTS_DETAILED = mode=&quot;div&quot; showlink=&quot;Show Detailed Output&quot; hidelink=&quot;Hide&quot; showimgleft=&quot;/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif&quot; hideimgleft=&quot;/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif&quot; remember=&quot;on&quot; start=&quot;hide&quot; 
--&gt;
%STARTINCLUDE%
%EDITTHIS%

---+ Work In Progress

---+ About this Document
This document is for System Administrators. 

Here we describe how to install and configure Gratia probes for Local Resource Management Systems (LRMSs aka schedulers or batch systems), like HTCondor, LSF, PBS, SGE or Grid Engine. These probes collect Job Usage Records for Gratia.

If you are installing these probes as part of a Compute Element please refer to the [[InstallComputeElement][CE Installation guide]]. You can come back to this document for custom setup instructions but the probe installation and its basic configuration will happen during the CE installation process. This is more for resources accessed directly (via Campus Grids or BOSCO).

The installation section will give you a functional installation. The setup and advanced setup cover customizations that could be useful also when the probe is in a CE. The troubleshooting is handled in a separate document.

Check the references for more information on the whole Gratia system and how to access recorded data.

In this document, EL5 will refer to Red Hat Enterprise Linux 5-based OSes, including !CentOS 5 and Scientific Linux 5; EL6 will refer to Red Hat Enterprise Linux 6-based OSes, including !CentOS 6 and Scientific Linux 6. 


---+ Introduction
%STARTSECTION{&quot;GratiaDefinition&quot;}%
The [[https://twiki.grid.iu.edu/bin/view/Accounting/WebHome][Grid Accounting Services]] collects information from the various probes and write to the database.These data could be regarding batch jobs, grid transfers, storage allocation, site availability tests or process accounting (at current survey).

The Gratia Service installation has two main parts: 
   * !MySQL database which is a persistent repository for Gratia data, 
   * Gratia Web UI/services to collect and display accounting information. This requires Apache/Tomcat.
%ENDSECTION{&quot;GratiaDefinition&quot;}%
---+ Requirements
---++ Host and OS
   * A host to install the Gratia Service (Pristine node)
   * OS is %SUPPORTED_OS%. Currently most of our testing has been done on Scientific Linux 5.
   * Time must be synchronized. You can find more in the [[HostTimeSetup][time synchronization document]].
   * Root access

---++ Users
The Gratia service installation will create a new user unless it is already created.

%STARTSECTION{&quot;Users&quot;}%
| *User* | *Default uid* | *Comment* |
| =tomcat= | 91 | Runs tomcat5 (EL5)/tomcat6 (EL6) and owns gratia configurations files and certificates. |

Note that if uids 91 is already taken but not used for the tomcat user, you will experience errors. [[https://twiki.grid.iu.edu/bin/view/Documentation/Release3/KnownProblems#Reserved_user_ids_especially_for][Details...]]
%ENDSECTION{&quot;Users&quot;}%

&lt;!--
----++ Certificates
You will need one service certificate. [[Trash.ReleaseDocumentationGetHostServiceCertificates][Here]] are instructions to request a host certificate. Optional, you can use the host certificate instead as explained in the [[#Configure_Tomcat_options][section below]].

| *Certificate* | *User that owns certificate* | *Path to certificate* |
| Tomcat service certificate | =tomcat= | =/etc/grid-security/http/httpcert.pem= &lt;br&gt; =/etc/grid-security/http/httpkey.pem= |
--&gt;

---++ Networking

Firewall information - here

%NOTE% 
---++ Additional Requirements


---+ Installation Procedure

%INCLUDE{&quot;YumRepositories&quot; section=&quot;OSGRepoBrief&quot; TOC_SHIFT=&quot;+&quot;}%

%INCLUDE{&quot;InstallCertAuth&quot; section=&quot;OSGBriefCaCerts&quot; TOC_SHIFT=&quot;+&quot;}%

%STARTSECTION{&quot;InstallOSGGratiaServiceRPMs&quot;}%

%TWISTY{%TWISTY_OPTS_DETAILED%}%   &lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% yum install fetch-crl
Loaded plugins: kernel-module, priorities
Excluding Packages from SLF 5 base
Finished
Reducing SLF 5 base jdk to included packages only
Finished
Excluding Packages from SLF 5 security updates
Finished
Reducing SLF 5 security updates jdk only to included packages only
Finished
Excluding Packages from SL 5 base
Finished
Reducing SL 5 base jdk to included packages only
Finished
1068 packages excluded due to repository priority protections
Setting up Install Process
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package fetch-crl.noarch 0:2.8.5-1.el5 set to be updated
--&gt; Finished Dependency Resolution
Beginning Kernel Module Plugin
Finished Kernel Module Plugin

Dependencies Resolved

========================================================================================================================================================
 Package                              Arch                              Version                                   Repository                       Size
========================================================================================================================================================
Installing:
 fetch-crl                            noarch                            2.8.5-1.el5                               epel                             24 k

Transaction Summary
========================================================================================================================================================
Install       1 Package(s)
Upgrade       0 Package(s)

Total download size: 24 k
Is this ok [y/N]: y
Downloading Packages:
fetch-crl-2.8.5-1.el5.noarch.rpm                                                                                                 |  24 kB     00:00     
Running rpm_check_debug
Running Transaction Test
Finished Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing     : fetch-crl                                                                                                                        1/1 

Installed:
  fetch-crl.noarch 0:2.8.5-1.el5                                                                                                                        

Complete!
&lt;/pre&gt; %ENDTWISTY%

Install Gratia Service:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% yum install gratia-service
&lt;/pre&gt;  %TWISTY{%TWISTY_OPTS_DETAILED%}%   &lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% yum install gratia-service
Loaded plugins: kernel-module, priorities
osg                                                                                                                                 | 1.9 kB     00:00     
osg/primary_db                                                                                                                      | 1.0 MB     00:00     
1290 packages excluded due to repository priority protections
Setting up Install Process
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package gratia-service.noarch 0:1.12-2.osg.el5 set to be updated
epel/filelists_db                                                                                                                   | 5.4 MB     00:01     
fermi-base/filelists                                                                                                                |  21 kB     00:00     
fermi-security/filelists_db                                                                                                         | 9.4 MB     00:00     
osg/filelists_db                                                                                                                    | 566 kB     00:00     
sl-base/filelists_db                                                                                                                | 3.6 MB     00:00     
--&gt; Processing Dependency: /usr/share/java/xml-commons-apis.jar for package: gratia-service
--&gt; Processing Dependency: emi-trustmanager-tomcat for package: gratia-service
--&gt; Processing Dependency: grid-certificates for package: gratia-service
--&gt; Processing Dependency: mysql-server for package: gratia-service
--&gt; Processing Dependency: vo-client-edgmkgridmap for package: gratia-service
--&gt; Running transaction check
---&gt; Package emi-trustmanager-tomcat.noarch 0:3.0.0-3 set to be updated
--&gt; Processing Dependency: emi-trustmanager for package: emi-trustmanager-tomcat
--&gt; Processing Dependency: bouncycastle for package: emi-trustmanager-tomcat
---&gt; Package mysql-server.x86_64 0:5.0.95-1.el5_7.1 set to be updated
--&gt; Processing Dependency: mysql = 5.0.95-1.el5_7.1 for package: mysql-server
--&gt; Processing Dependency: libmysqlclient.so.15(libmysqlclient_15)(64bit) for package: mysql-server
--&gt; Processing Dependency: perl-DBD-MySQL for package: mysql-server
--&gt; Processing Dependency: perl(DBI) for package: mysql-server
--&gt; Processing Dependency: perl-DBI for package: mysql-server
--&gt; Processing Dependency: libmysqlclient_r.so.15(libmysqlclient_15)(64bit) for package: mysql-server
--&gt; Processing Dependency: libmysqlclient_r.so.15()(64bit) for package: mysql-server
--&gt; Processing Dependency: libmysqlclient.so.15()(64bit) for package: mysql-server
---&gt; Package osg-ca-certs.noarch 0:1.27-2.osg.el5 set to be updated
---&gt; Package vo-client-edgmkgridmap.noarch 0:41-3.osg.el5 set to be updated
---&gt; Package xml-commons-apis.x86_64 0:1.3.02-0.b2.7jpp.10 set to be updated
--&gt; Running transaction check
---&gt; Package bouncycastle.x86_64 0:1.45-6.el5 set to be updated
--&gt; Processing Dependency: java &gt;= 1:1.6 for package: bouncycastle
---&gt; Package emi-trustmanager.noarch 0:3.0.3-1.sl5 set to be updated
---&gt; Package mysql.x86_64 0:5.0.95-1.el5_7.1 set to be updated
---&gt; Package perl-DBD-MySQL.x86_64 0:3.0007-2.el5 set to be updated
---&gt; Package perl-DBI.x86_64 0:1.52-2.el5 set to be updated
--&gt; Running transaction check
---&gt; Package java-1.6.0-openjdk.x86_64 1:1.6.0.0-1.25.1.10.6.el5_8 set to be updated
--&gt; Processing Dependency: tzdata-java for package: java-1.6.0-openjdk
--&gt; Processing Dependency: libgif.so.4()(64bit) for package: java-1.6.0-openjdk
--&gt; Running transaction check
---&gt; Package giflib.x86_64 0:4.1.3-7.1.el5_3.1 set to be updated
---&gt; Package tzdata-java.x86_64 0:2012b-3.el5 set to be updated
--&gt; Finished Dependency Resolution
Beginning Kernel Module Plugin
Finished Kernel Module Plugin

Dependencies Resolved

===========================================================================================================================================================
 Package                                   Arch                     Version                                         Repository                        Size
===========================================================================================================================================================
Installing:
 gratia-service                            noarch                   1.12-2.osg.el5                                  osg                               75 M
Installing for dependencies:
 bouncycastle                              x86_64                   1.45-6.el5                                      epel                             4.0 M
 emi-trustmanager                          noarch                   3.0.3-1.sl5                                     osg                              271 k
 emi-trustmanager-tomcat                   noarch                   3.0.0-3                                         osg                               30 k
 giflib                                    x86_64                   4.1.3-7.1.el5_3.1                               sl-base                           39 k
 java-1.6.0-openjdk                        x86_64                   1:1.6.0.0-1.25.1.10.6.el5_8                     fermi-security                    36 M
 mysql                                     x86_64                   5.0.95-1.el5_7.1                                fermi-security                   4.9 M
 mysql-server                              x86_64                   5.0.95-1.el5_7.1                                fermi-security                   9.9 M
 osg-ca-certs                              noarch                   1.27-2.osg.el5                                  osg                              281 k
 perl-DBD-MySQL                            x86_64                   3.0007-2.el5                                    sl-base                          147 k
 perl-DBI                                  x86_64                   1.52-2.el5                                      sl-base                          605 k
 tzdata-java                               x86_64                   2012b-3.el5                                     fermi-security                   181 k
 vo-client-edgmkgridmap                    noarch                   41-3.osg.el5                                    osg                              5.6 k
 xml-commons-apis                          x86_64                   1.3.02-0.b2.7jpp.10                             sl-base                          387 k

Transaction Summary
===========================================================================================================================================================
Install      14 Package(s)
Upgrade       0 Package(s)

Total download size: 132 M
Is this ok [y/N]: y
Downloading Packages:
(1/14): vo-client-edgmkgridmap-41-3.osg.el5.noarch.rpm                                                                              | 5.6 kB     00:00     
(2/14): emi-trustmanager-tomcat-3.0.0-3.noarch.rpm                                                                                  |  30 kB     00:00     
(3/14): giflib-4.1.3-7.1.el5_3.1.x86_64.rpm                                                                                         |  39 kB     00:00     
(4/14): perl-DBD-MySQL-3.0007-2.el5.x86_64.rpm                                                                                      | 147 kB     00:00     
(5/14): tzdata-java-2012b-3.el5.x86_64.rpm                                                                                          | 181 kB     00:00     
(6/14): emi-trustmanager-3.0.3-1.sl5.noarch.rpm                                                                                     | 271 kB     00:00     
(7/14): osg-ca-certs-1.27-2.osg.el5.noarch.rpm                                                                                      | 281 kB     00:00     
(8/14): xml-commons-apis-1.3.02-0.b2.7jpp.10.x86_64.rpm                                                                             | 387 kB     00:00     
(9/14): perl-DBI-1.52-2.el5.x86_64.rpm                                                                                              | 605 kB     00:00     
(10/14): bouncycastle-1.45-6.el5.x86_64.rpm                                                                                         | 4.0 MB     00:00     
(11/14): mysql-5.0.95-1.el5_7.1.x86_64.rpm                                                                                          | 4.9 MB     00:00     
(12/14): mysql-server-5.0.95-1.el5_7.1.x86_64.rpm                                                                                   | 9.9 MB     00:00     
(13/14): java-1.6.0-openjdk-1.6.0.0-1.25.1.10.6.el5_8.x86_64.rpm                                                                    |  36 MB     00:02     
(14/14): gratia-service-1.12-2.osg.el5.noarch.rpm                                                                                   |  75 MB     00:07     
-----------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                       11 MB/s | 132 MB     00:11     
warning: rpmts_HdrFromFdno: Header V3 DSA signature: NOKEY, key ID 217521f6
epel/gpgkey                                                                                                                         | 1.7 kB     00:00     
Importing GPG key 0x217521F6 &quot;Fedora EPEL &lt;epel@fedoraproject.org&gt;&quot; from /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL
Is this ok [y/N]: y
warning: rpmts_HdrFromFdno: Header V3 DSA signature: NOKEY, key ID 824b8603
osg/gpgkey                                                                                                                          | 1.7 kB     00:00     
Importing GPG key 0x824B8603 &quot;OSG Software Team (RPM Signing Key for Koji Packages) &lt;vdt-support@opensciencegrid.org&gt;&quot; from /etc/pki/rpm-gpg/RPM-GPG-KEY-OSG
Is this ok [y/N]: y
Running rpm_check_debug
Running Transaction Test
Finished Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing     : perl-DBI                                                                                                                           1/14 
  Installing     : mysql                                                                                                                              2/14 
  Installing     : perl-DBD-MySQL                                                                                                                     3/14 
  Installing     : mysql-server                                                                                                                       4/14 
  Installing     : giflib                                                                                                                             5/14 
  Installing     : xml-commons-apis                                                                                                                   6/14 
  Installing     : emi-trustmanager                                                                                                                   7/14 
  Installing     : vo-client-edgmkgridmap                                                                                                             8/14 
  Installing     : tzdata-java                                                                                                                        9/14 
  Installing     : java-1.6.0-openjdk                                                                                                                10/14 
  Installing     : bouncycastle                                                                                                                      11/14 
  Installing     : emi-trustmanager-tomcat                                                                                                           12/14 
  Installing     : osg-ca-certs                                                                                                                      13/14 
  Installing     : gratia-service                                                                                                                    14/14 

Installed:
  gratia-service.noarch 0:1.12-2.osg.el5                                                                                                                   

Dependency Installed:
  bouncycastle.x86_64 0:1.45-6.el5                 emi-trustmanager.noarch 0:3.0.3-1.sl5                    emi-trustmanager-tomcat.noarch 0:3.0.0-3       
  giflib.x86_64 0:4.1.3-7.1.el5_3.1                java-1.6.0-openjdk.x86_64 1:1.6.0.0-1.25.1.10.6.el5_8    mysql.x86_64 0:5.0.95-1.el5_7.1                
  mysql-server.x86_64 0:5.0.95-1.el5_7.1           osg-ca-certs.noarch 0:1.27-2.osg.el5                     perl-DBD-MySQL.x86_64 0:3.0007-2.el5           
  perl-DBI.x86_64 0:1.52-2.el5                     tzdata-java.x86_64 0:2012b-3.el5                         vo-client-edgmkgridmap.noarch 0:41-3.osg.el5   
  xml-commons-apis.x86_64 0:1.3.02-0.b2.7jpp.10   

Complete!
&lt;/pre&gt; %ENDTWISTY%
%ENDSECTION{&quot;InstallOSGGratiaServiceRPMs&quot;}%

---+ Configure
The configuration requires some initial steps.
%STARTSECTION{&quot;ConfigureMysqlServer&quot;}%
---++ Configure !MySQL Database

Before you will be able configure Gratia Service you will need to have access to !MySQL database.  The !MySQL software is installed with the =gratia-service= package. By default it will be using port 3306 and will not have password for ==root==. It is recommended to replace  a default configuration file that is installed with mysqld server (==/etc/my.cnf==)  with ==/usr/share/gratia/my-cnf.template==:
&lt;pre class=&quot;file&quot;&gt;
[mysqld]
datadir = /var/lib/mysql
socket =  /var/lib/mysql/mysql.sock
user = mysql
port = 3306

log_bin = /var/lib/mysql/mysql-bin
log =     /var/log/mysqld.log
log_bin_trust_function_creators = 1
expire_logs_days = 7
sync_binlog=1

innodb_file_per_table
innodb_data_home_dir = /var/lib/mysql
innodb_data_file_path = ibdata1:500M;ibdata2:10M:autoextend
innodb_log_group_home_dir = /var/lib/mysql
innodb_flush_log_at_trx_commit = 1
innodb_buffer_pool_size = 256M
innodb_additional_mem_pool_size = 20M
innodb_log_file_size = 64M
innodb_log_files_in_group = 2
innodb_log_buffer_size = 8M
innodb_lock_wait_timeout = 50
innodb_thread_concurrency = 2
# To prevent too large of innodb history list which affects inserts
innodb_max_purge_lag=50000



# Uncomment the following line for debugging purposes.
#log-warnings=2

# Default to using old password format for compatibility with mysql 3.x
# clients (those using the mysqlclient10 compatibility package).
old_passwords=1

# Disabling symbolic-links is recommended to prevent assorted security risks;
# to do so, uncomment this line:
# symbolic-links=0
&lt;/pre&gt;

If you are planning to collect data from a very large number of probes you can use ==/usr/share/gratia/my-cnf.large-site.template==. This configuration is used at Fermilab for the OSG collector that gathers data from all OSG sites.

In order to replace mysql configuration just copy the template selected to ==/etc/my.cnf==:
:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% cp /usr/share/gratia/my-cnf.template /etc/my.cnf
&lt;/pre&gt;
*Note* The default mysqld port (3306) is used in this configuration file. If you prefer to use some other port you have to change it here before proceeding with any other actions.

You will need to start mysqld at this time:
:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT%service mysqld start
&lt;/pre&gt;
%NOTE%  If you use ==my-cnf.large-site.template== , you may experience a false failure on the initial startup of the ==mysqld server== .  This is because it takes a significant amount of time to allocate all the space required for a large database. The ==mysqld== initd service does not know that and will think the startup has failed when it just hasn&#39;t finished.


%ENDSECTION{&quot;ConfigureMysqlServer&quot;}%
%STARTSECTION{&quot;ConfigureGratiaService&quot;}%
---++ Configure Gratia Service
The Gratia service uses two configuration files:
   * ==/etc/gratia/services/service-authorization.properties== %BR%
     This contains Gratia mysql access authorization properties, i.e., users and passwords.
   * ==/etc/gratia/services/service-configuration.properties== %BR%
     This contains the non-database properties specific to Gratia services

In newer versions (1.13.9, and possibly earlier) these files are located under /etc/gratia/services/ instead of /etc/gratia/services/ .

__/etc/gratia/services/service-authorization.properties__
&lt;pre class=&quot;file&quot;&gt;
########################################################################
# Gratia Service Authorization File.
########################################################################
[gratia]
# These are filled in automatically
gratia.reporting.version=v1.12
gratia.services.version=v1.12
#
# ##########  DB access parameters
#
service.mysql.rootpassword=%RED%ROOTDBPASSWORD%ENDCOLOR%
service.mysql.user=%RED%DBUSER%ENDCOLOR%
service.mysql.password=%RED%DBPASSWORD%ENDCOLOR%
service.reporting.user=reader
service.reporting.password=reader
#
&lt;/pre&gt;
It is wise to set a password for the !MySql ==root== user. To do so:
   * replace %RED%ROOTDBPASSWORD%ENDCOLOR% with the password desired for the ==root== user of !MySql database. You only need to specify it here in this configuration file.  A configuration script, ==install-database==, that you will run in a subsequent step will set it in the !MySql database for you.  
   * If for some reason you don&#39;t want to set this password (%RED%not recommended%ENDCOLOR%), you need to comment this line in configuration file. 

You will need to also define the !MySql user name and password for Gratia services to access the database.  This user will have update capability for the ==gratia== database that will be created later.
   * replace %RED%DBUSER%ENDCOLOR% with the user name desired.
   * replace %RED%DBPASSWORD%ENDCOLOR% with the password for that user.

Optionally, the ==gratia-reporting== service uses a user/password for read-only access to the database: ==service.reporting.user== and ==service.reporting.password==. You may change these if you desire.



__/etc/gratia/services/service-configuration.properties__ %BR%
This file contains the Gratia services related properties(only those properties that must be modified are provided in the screen below:

&lt;pre class=&quot;file&quot;&gt;
...
service.mysql.url=jdbc:mysql://%RED%DBHOSTNAME%ENDCOLOR%:%RED%DBPORT%ENDCOLOR%/gratia
....
service.open.connection=http://%RED%HOSTNAME%ENDCOLOR%:%BLUE%8880%ENDCOLOR%
service.secure.connection=https://%RED%HOSTNAME%ENDCOLOR%:%BLUE%8443%ENDCOLOR%
....
&lt;/pre&gt;

The ==service.mysql.url== property specifies the access point to the !MySql database for Gratia services.
   * The %RED%DBHOSTNAME%ENDCOLOR% can be specified as ==localhost== or with the host name of the database is running on if not this node.
   * The %RED%DBPORT%ENDCOLOR% should be changed to ==3306== (default !MySql port) or, if changed in the ==/etc/my.cnf== modified earlier, to that value.

The ==service.open.connection== and ==service.secure.connection== should be modified by replacing  %RED%HOSTNAME%ENDCOLOR% with the fully qualified host name where the service is installed. You can modify open (8880) and secure (8443) ports as well. Keep in mind that if these are changed,  any Gratia probes will have to be configured accordingly so the information that is gathered by probe could be sent  to Gratia service.

You should also configure the administrative login to Gratia service at this time. 
Please read the detailed instructions in ==/etc/gratia/services/service-configuration.properties== under 
==# ##########  Administrative login== section.

__Completing the configuration (==install-database==)__ %BR%
To complete the configuration, you will need to run the ==/usr/share/gratia/install-database== script that performs the following steps using the configuration modified above:
   1. set ==root== user password in the !MySql database
   1. create the ==gratia== database
   1. create the Gratia users (for update and read access) in the !MySql database and grant appropriate privileges for those users users
    
&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT%/usr/share/gratia/install-database

Creating Gratia database based on the properties you updated in these files:
  /etc/gratia/services/service-configuration.properties
  /etc/gratia/services/service-authorization.properties
... validating MySql port being used
... port: 3306
... root password has not been set yet.
... creating the root password specified
... creating gratia database and updating privileges

Gratia database installation complete.
&lt;/pre&gt;
%ENDSECTION{&quot;ConfigureGratiaService&quot;}%
%STARTSECTION{&quot;ConfigureTomcatService&quot;}%
---++ Configure Tomcat options
Make sure that you have the host,  and Tomcat service certificates/keys in the right directories and with the correct owners and permissions (=600= for key and =644= the certificate). [[Trash.ReleaseDocumentationGetHostServiceCertificates][Host certificate]] is required and must be in =/etc/grid-security/hostcert.pem= and =hostkey.pem=. It is recommended to provide also service certificates for Tomcat. If you don&#39;t, here are the instructions to copy the host certificate/key and set the correct owner (permissions are preserved).  Note that if you did not previously have a  tomcat user on your system, they were added during the RPM install:
   1. Tomcat service is running as user ==tomcat== and requires its service certificate and key in ==/etc/grid-security/http==. To copy the host certificate/key for this service, you need to do the following:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% cd /etc/grid-security
%UCL_PROMPT_ROOT% mkdir /etc/grid-security/http
%UCL_PROMPT_ROOT% cp hostcert.pem http/httpcert.pem
%UCL_PROMPT_ROOT% cp hostkey.pem http/httpkey.pem
%UCL_PROMPT_ROOT% chown -R tomcat:tomcat http
&lt;/pre&gt;
   1. Next, you will have to configure tomcat to enable gratia webservice and EMI trustmanager. You will have to run ==/usr/share/gratia/configure_tomcat== script:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% /usr/share/gratia/configure_tomcat
&lt;/pre&gt; %TWISTY{%TWISTY_OPTS_DETAILED%}%   &lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT%  /usr/share/gratia/configure_tomcat
====== Configuring Tomcat for gratia ====
--- Configuring Tomcat and server.xml ---
... executing: /var/lib/trustmanager-tomcat/configure.sh
Info: using default install root: /
Info: using default configuration file: //var/lib/trustmanager-tomcat/config.properties
Info: using default configuration directory: //var/lib/trustmanager-tomcat
Info: you can clean up using the following commands
      mv -f /etc/tomcat5/server.xml.old-trustmanager /etc/tomcat5/server.xml
      rm -f /usr/share/tomcat5/server/lib/bcprov*.jar
      rm -f /usr/share/tomcat5/server/lib/log4j*.jar
      rm -f /usr/share/tomcat5/server/lib/trustmanager-*.jar
      rm -f /etc/tomcat5/log4j-trustmanager.properties
      rm -f //var/lib/trustmanager-tomcat/server.xml

--- Creating log4j links ---
... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-administration/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-administration/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-registration/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-registration/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-reporting/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-reporting/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-reports/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-reports/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-services/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-services/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-servlets/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-servlets/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-soap/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-soap/WEB-INF/lib/log4j.jar -&gt; /usr/share/java/log4j.jar


--- Updating tomcat5.conf ---
... executing: cp -p /usr/share/tomcat5/conf/tomcat5.conf /usr/share/tomcat5/conf/tomcat5.conf.20120503-1417

--- Updating server.xml ---
Replacing Tomcat server.xml file: /usr/share/tomcat5/conf/server.xml
... executing: cp -p /usr/share/tomcat5/conf/server.xml /usr/share/tomcat5/conf/server.xml.20120503-1417
... executing: cp -p /usr/share/gratia/server.xml.template /usr/share/tomcat5/conf/server.xml
... executing: chmod 644         /usr/share/tomcat5/conf/server.xml
... executing: chown tomcat.root /usr/share/tomcat5/conf/server.xml

====== Completed Tomcat configuration for Gratia ===

&lt;/pre&gt; %ENDTWISTY%
(the output may look different on EL6)
%ENDSECTION{&quot;ConfigureTomcatService&quot;}%
---+ Services 
---++ Starting and Enabling Services
%STARTSECTION{&quot;StartGratiaServices&quot;}%
To start Gratia you need to start several services:
   1. %INCLUDE{&quot;InstallCertAuth&quot; section=&quot;OSGBriefFetchCrlStart&quot;}%
   1. !MySQL server needs to be running if it is not already:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% /sbin/service mysqld start
&lt;/pre&gt;
   1. Start Tomcat, required by  gratia service:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% service tomcat5 start # on EL5 only
%UCL_PROMPT_ROOT% service tomcat6 start # on EL6 only
&lt;/pre&gt;
You should also enable the appropriate services so that they are automatically started when your system is powered on: 
   * %INCLUDE{&quot;InstallCertAuth&quot; section=&quot;OSGBriefFetchCrlEnable&quot;}%
   * To enable the other services: &lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% /sbin/chkconfig mysqld on
%UCL_PROMPT_ROOT% /sbin/chkconfig tomcat5 on # on EL5 only
%UCL_PROMPT_ROOT% /sbin/chkconfig tomcat6 on # on EL6 only
&lt;/pre&gt;

*Note*: You do _not_ need to run chkconfig on the gratia service. This service is started with Tomcat.
%ENDSECTION{&quot;StartGratiaServices&quot;}%

---++ Stopping and Disabling Services
%STARTSECTION{&quot;StopGratiaServices&quot;}%
To stop Gratia you need to stop the services it uses if nothing else is using them:
   1. Stop Tomcat, if no other application is using it:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% service tomcat5 stop # on EL5 only
%UCL_PROMPT_ROOT% service tomcat6 stop # on EL6 only
&lt;/pre&gt;
   1. Stop !MySQL server if no other application is using it:&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% service mysqld stop
&lt;/pre&gt;
   1. %INCLUDE{&quot;InstallCertAuth&quot; section=&quot;OSGBriefFetchCrlStop&quot;}%
%ENDSECTION{&quot;StopGratiaServices&quot;}%

In addition, you can disable services by running the following commands.  However, you don&#39;t need to do this normally.
   * %INCLUDE{&quot;InstallCertAuth&quot; section=&quot;OSGBriefFetchCrlDisable&quot;}%
   * To disable the other services: &lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% /sbin/chkconfig mysqld off
%UCL_PROMPT_ROOT% /sbin/chkconfig tomcat5 off # on EL5 only
%UCL_PROMPT_ROOT% /sbin/chkconfig tomcat6 off # on EL6 only
&lt;/pre&gt;

*Note*: You do not need to run chkconfig on the gratia service. See above for more details.
%ENDSECTION{&quot;StopGratiaServices&quot;}%
---+ Test
To test Gratia service you can login in the Web UI and then:
   * see the administration page

Check the Web UI by accessing ==http://%RED%hostname%ENDCOLOR%:8443/gratia-administration/==.  You should see the following screenshot:
&lt;img src=&quot;%ATTACHURLPATH%/gratia-admin.png&quot; alt=&quot;gratia screenshot&quot; width=&#39;&#39;555&quot;  height=&#39;345&#39; /&gt; 

---+ Upgrade
To upgrade Gratia services you must:
   1. stop tomcat and possibly also mysqld
   1. run yum update
   1. compare the configuration files (== and ==) to the =.rpmnew= version added by the RPM update and merge when needed
   1. restart mysql and tomcat

---+ Troubleshooting

---++ Useful configuration and log files

Configuration Files
| *Service or Process* | *Configuration File* | *Description* |
|gratia|=/etc/gratia/services/service-configuration.properies=|gratia service configuration|
||=/etc/gratia/services/service-authorization.properies=|gratia service mysql passwords|
||=/etc/gratia/services/log4j.properies=|gratia service logs configuration|
|mysqld| =/var/lib/mysql/%RED%gratia%ENDCOLOR%= | gratia database |
| | =/etc/my.cnf= | !MySQL configuration, e.g. server port |
| tomcat | =/etc/tomcat5/= | Tomcat configuration files (EL5) |
| | =/etc/tomcat6/= | Tomcat configuration files (EL6) |
| | =/etc/tomcat5/Catalina/localhost/*=| gratia related tomcat configuration (EL5) |
| | =/etc/tomcat6/Catalina/localhost/*=| gratia related tomcat configuration (EL6) |

Log files
| *Service or Process* | *Log File* | *Description* |
| tomcat (EL5) | =/var/log/tomcat5/catalina.out= | This is the Tomcat log file. Problems (and a lot of noise) are reported here. |
| | =/var/log/tomcat5/trustmanager.log= | The trustmanager handles things related to authentication. Useful errors are sometimes here. |
| tomcat (EL6) | =/var/log/tomcat6/catalina.out= | This is the Tomcat log file. Problems (and a lot of noise) are reported here. |
|tomcat (EL5 &amp; EL6) | =/var/log/tomcat6/glite-security-trustmanager.log= | The trustmanager handles things related to authentication. Useful errors are sometimes here. |
|gratia|=/var/log/gratia=| All gratia related logs are here.|
|mysqld|=/var/log/mysqld.log=|!MySQL log is here.|
---+ How to get Help?
To get assistance please use [[HelpProcedure][Help Procedure]].

---+ References
Gratia Documents
   * [[Accounting/WebHome][Accounting Web/The Gratia project]]
[[InstallGratiaService][Gratia Service (Collector)]] addons:
   * InstallGratiaReporting to get various reports about resource usage and jobs via emails
Gratia Probes:
   * Accounting.ProbeInstallation

---+ Comments

%COMMENT{type=&quot;tableappend&quot;}%

&lt;!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = MarcoMambelli

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3)
   * Local DOC_AREA       = General

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local TEST_READY   = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = CarlEdquist
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %NO%


DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = CarlEdquist
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %NO%
############################################################################################################
--&gt;
</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallGratiaLrmsProbe?t=1487218252;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Documentation/Release3/InstallGratiaLrmsProbe' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Documentation/Release3/InstallGratiaLrmsProbe?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Documentation/Release3/InstallGratiaLrmsProbe?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r7&nbsp;<a rel="nofollow" href="/bin/rdiff/Documentation/Release3/InstallGratiaLrmsProbe?rev1=7;rev2=6">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaLrmsProbe?rev=6">r6</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Documentation/Release3/InstallGratiaLrmsProbe?rev1=6;rev2=5">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaLrmsProbe?rev=5">r5</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Documentation/Release3/InstallGratiaLrmsProbe?rev1=5;rev2=4">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaLrmsProbe?rev=4">r4</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Documentation/Release3/InstallGratiaLrmsProbe?rev1=4;rev2=3">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaLrmsProbe?rev=3">r3</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Documentation/Release3/InstallGratiaLrmsProbe?template=backlinksweb' rel='nofollow' title='Search the Documentation/Release3 Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaLrmsProbe' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Documentation/Release3/InstallGratiaLrmsProbe?template=oopsmore&amp;param1=7&amp;param2=7' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r7 - 07 Feb 2017 - 19:34:17 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>!<br>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top">Register</a>
<p />
<!-- <ul>
<li> Local ICO_LINKEDIN  = <img src="/twiki/pub/Documentation/WebLeftBarTop/linkedin-favicon_v3.ico" alt="linkedin-favicon_v3.ico" width='16' height='16' />
</li> <li> Local ICO_FACEBOOK = <img src="/twiki/pub/Documentation/WebLeftBarTop/FaceBook_32x32.png" alt="FaceBook_32x32.png" width='15' height='15' />
</li> <li> Set ICO_CAMPFIRE = <img src="/twiki/pub/Documentation/WebLeftBarTop/campfire-logo.jpg" alt="campfire-logo.jpg" width='25' height='20' />
</li></ul> 
-->
<p />
	<div class="container">
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="http://www.opensciencegrid.org" target="_top" title="Go to the OSG Website">Open Science Grid</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/WhatIsOSG" class="twikiLink" title="Description of OSG">About OSG</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/WhatIsVO" class="twikiLink" title="Description of Virtual Organizations">About VOs</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/NavOsgOperations" class="twikiLink" title="OSG Global Operations Center">Operations</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavOsgSecurity" class="twikiLink" title="Security Links">Security</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Technical Documentation Hub">Documentation</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/GlossaryOfTerms" class="twikiLink" title="Glossary of Terms Related to OSG">Glossary of Terms</a></div>
		</div>
<p />
<p />
<p />
		<div class="box rounded bordered" id="menu">
	                <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Documentation/Release3/NavUserMain" class="twikiLink" title="End User Information">End Users</a></div>
	                <div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavUserJoin" class="twikiLink" title="Join the OSG">Grid Accounts</a></div>
	                <div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavUserApplications" class="twikiLink" title="How to run jobs on the grid">Grid Basics</a></div>
	                <div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavUserResources" class="twikiLink" title="Run complex/demanding grid applications">Advanced Use Cases</a></div>
	                <div id="item"><a  style="" href="/bin/view/Documentation/UserHelp" class="twikiLink" title="Get user support from the OSG">User Support</a></div>			
		</div>
<p />
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a href="/bin/view/Documentation/Release3/WebHome" title="Guides for Grid Administrators">Install OSG 3!</a></div>
			<div id="item"><a href="/bin/view/Documentation/Release3.NavAdminCompute" title="Setup and Operate Compute Elements">Compute Elements</a></div>
			<div id="item"><a href="/bin/view/Documentation/Release3.NavAdminStorage" title="Setup and Operate Storage Elements">Storage Elements</a></div>
			<div id="item"><a href="/bin/view/Documentation/Release3.NavAdminSmallSites" title="Setup and Operate a small site or a OSG Campus Infrastructure">Small Sites/Campus Grids</a></div>
                        <div id="item"><a href="/bin/view/Documentation/Release3.HelpProcedure" title="Get technical help">Admin Support/Help</a></div>
			<div id="item"><a href="/bin/view/Documentation/Release3/WebHome" class="twikiCurrentWebHomeLink twikiLink">Current Release - 3.x</a></div>
			<div id="item"><a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Previous Release - 1.2</a></div>
		</div>
<p />
<p />
<p />
<!--
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a href="NavTechMain">Software Components</a></div>
			<div id="item"><a href="BestmanOverview" title="">Bestman</a></div>
			<div id="item"><a href="NavTechJobManagers" title="Job Managers">Job Managers</a></div>
			<div id="item"><a href="NavTechGIP" title="Generic Information Provider">GIP</a></div>
			<div id="item"><a href="Trash.ReleaseDocumentationNavTechGlexec" title="">Glexec</a></div>
			<div id="item"><a href="NavTechGratia" title="">Gratia</a></div>
			<div id="item"><a href="NavTechGUMS" title="">GUMS</a></div>
			<div id="item"><a href="HadoopOverview" title="">Hadoop File System</a></div>
			<div id="item"><a href="NavTechRepositories" title="">Repositories</a></div>
			<div id="item"><a href="RsvOverview" title="">RSV</a></div>
			<div id="item"><a href="NavTechVOMS" title="VOMS">VOMS</a></div>
			<div id="item"><a href="XrootdOverview" title="Xrootd">Xrootd</a></div>
		</div>
<p />
-->
<p />
<p />
		<div class="box rounded bordered" id="menu">
	  	        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Documentation/Release3/NavOsgVO" class="twikiLink" title="Links to VO information">VO Administration</a></div>
	  	        <div id="item"><a  style="" href="/bin/view/Documentation/SupportCenterDocHub" class="twikiLink" title="Support Center Information">VO Support Centers</a></div>
	  	        <div id="item"><a  style="" href="/bin/view/Documentation/UserAuthAndPrivilege" class="twikiLink" title="Authorization of Users">User Authorization</a></div>
	  	        <div id="item"><span class="twikiNewLink">VO Team Web<a  style="" href="/bin/edit/Trash/Trash/VirtualOrganizations/WebHome?topicparent=Documentation/Release3.InstallGratiaLrmsProbe" rel="nofollow" title="VO Team Web (this topic does not yet exist; you can create it)">?</a></span></div>
		</div>
<p />
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Documentation/HelpProcedure" class="twikiLink" title="Get Support/Help">Get Support/Help</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink" title="Get Support/Help">Participate/Get Help</a></div>
			<div id="item"><a  style="" href="http://osggoc.blogspot.com/" target="_top" title="Operations Blog">Operations Blog</a></div>
			<div id="item"><img src="https://twiki.opensciencegrid.org/twiki/pub/Documentation/WebLeftBarTop/campfire-logo.jpg" alt="campfire-logo.jpg" width='25' height='20' /><span class="twikiNewLink">Chat<a  style="" href="/bin/edit/Trash/Trash/SiteCoordination/ChatCalendar?topicparent=Documentation/Release3.InstallGratiaLrmsProbe" rel="nofollow" title="Chat (this topic does not yet exist; you can create it)">?</a></span></div>
		</div>
<p />
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Documentation/Release3/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Documentation/Release3/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Documentation/Release3/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
<p />
	</div>
<p />
<p />
<!--
%NOPINCLUDE{"" warn="off"}% <ul>
<li> <b><a href="/bin/view/Documentation/Release3/WebHome" class="twikiCurrentWebHomeLink twikiLink"> <img width="16" alt="home" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/home.gif" height="16" border="0" /> Documentation/Release3 Web</a></b>
</li> <li> <a href="/bin/view/Documentation/Release3/WebTopicCreator?parent=InstallGratiaLrmsProbe" target="_top"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Index</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebSearch" class="twikiLink"> <img width="16" alt="searchtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/searchtopic.gif" height="16" border="0" /> Search</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebChanges" class="twikiLink"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebNotify" class="twikiLink"> <img width="16" alt="notify" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/notify.gif" height="16" border="0" /> Notifications</a>
</li> <li> <span class="twikiNewLink"> <img width="16" alt="statistics" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/statistics.gif" height="16" border="0" /> Statistics<a href="/bin/edit/Documentation/Release3/WebStatistics?topicparent=Documentation/Release3.InstallGratiaLrmsProbe" rel="nofollow" title=" <img width="16">?</a></span>
</li> <li> <a href="/bin/view/Documentation/Release3/WebPreferences" class="twikiLink"> <img width="16" alt="wrench" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/wrench.gif" height="16" border="0" /> Preferences</a>
</li></ul> 
<p />
<hr />
%NOPINCLUDE{ "TWiki.WebLeftBarWebsList" }%
-->
<div class="twikiLeftBarPersonal">
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Documentation/Release3/InstallGratiaLrmsProbe"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Documentation/Release3/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Documentation/Release3" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Documentation_Release3"></a>  <a href="/bin/view/Documentation/Release3/WebHome" class="twikiCurrentWebHomeLink twikiLink">Documentation.Release3</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallGratiaLrmsProbe?t=1487218252;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Documentation/Release3/InstallGratiaLrmsProbe" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Documentation/Release3/InstallGratiaLrmsProbe?pdftitle=InstallGratiaLrmsProbe" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>