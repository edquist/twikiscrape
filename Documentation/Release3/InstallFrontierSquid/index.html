<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> InstallFrontierSquid &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallFrontierSquid?_T=16 Feb 2017" type="application/x-wiki" title="edit InstallFrontierSquid" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallFrontierSquid"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TABLEPLUGIN_table3--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
</style>
<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<h1><a name="Frontier_Squid_Caching_Proxy_Ins"></a>  Frontier Squid Caching Proxy Installation Guide </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#1_About_This_Document">1  About This Document</a>
</li> <li> <a href="?cover=print#2_Applicable_Versions">2  Applicable Versions</a>
</li> <li> <a href="?cover=print#3_About_Frontier_Squid">3  About Frontier Squid</a>
</li> <li> <a href="?cover=print#4_Frontier_Squid_is_Recommended">4  Frontier Squid is Recommended</a>
</li> <li> <a href="?cover=print#5_Engineering_Considerations">5  Engineering Considerations</a>
</li> <li> <a href="?cover=print#6_Requirements">6  Requirements</a> <ul>
<li> <a href="?cover=print#6_1_Host_and_OS">6.1  Host and OS</a>
</li> <li> <a href="?cover=print#6_2_Users">6.2  Users</a>
</li> <li> <a href="?cover=print#6_3_Networking">6.3  Networking</a>
</li></ul> 
</li> <li> <a href="?cover=print#7_Install_Instructions">7  Install Instructions</a> <ul>
<li> <a href="?cover=print#Install_the_Yum_Repositories_req"> Install the Yum Repositories required by OSG</a> <ul>
<li> <a href="?cover=print#Install_EPEL"> Install EPEL</a>
</li> <li> <a href="?cover=print#Install_the_Yum_priorities_packa"> Install the Yum priorities package</a>
</li> <li> <a href="?cover=print#Install_OSG_Repositories"> Install OSG Repositories</a>
</li></ul> 
</li> <li> <a href="?cover=print#7_1_Installing_Frontier_Squid">7.1  Installing Frontier Squid</a>
</li></ul> 
</li> <li> <a href="?cover=print#8_Configuring_Frontier_Squid">8  Configuring Frontier Squid</a> <ul>
<li> <a href="?cover=print#8_1_Configuring_the_Frontier_Squ">8.1  Configuring the Frontier Squid Service</a>
</li> <li> <a href="?cover=print#8_2_Configuring_the_OSG_CE">8.2  Configuring the OSG CE</a>
</li></ul> 
</li> <li> <a href="?cover=print#9_Starting_and_Stopping_the_Fron">9  Starting and Stopping the Frontier Squid Service</a>
</li> <li> <a href="?cover=print#10_Testing_Frontier_Squid">10  Testing Frontier Squid</a>
</li> <li> <a href="?cover=print#11_Frontier_Squid_Log_Files">11  Frontier Squid Log Files</a>
</li> <li> <a href="?cover=print#12_Getting_Help">12  Getting Help</a>
</li> <li> <a href="?cover=print#13_Comments">13  Comments</a>
</li></ul> 
</div>
<p />
<h1><a name="1_About_This_Document"></a> 1  About This Document </h1>
<p />
This document is intended for System Administrators who are installing <code>frontier-squid</code>, the OSG distribution of the Frontier Squid software.
<p />
on    
on    
<p />
<h1><a name="2_Applicable_Versions"></a> 2  Applicable Versions </h1>
<p />
The applicable software versions for this document are <font color="#ff0000">OSG Version &gt;= 3.1.40</font> or <font color="#ff0000">&gt;= 3.2.16 </font>.  The version of frontier-squid installed should be <font color="#ff0000"> &gt;= 2.7.STABLE9-19.1</font>.
<p />
<h1><a name="3_About_Frontier_Squid"></a> 3  About Frontier Squid </h1>
<p />
Frontier Squid is a distribution of the well-known <a href="http://squid-cache.org" target="_top">squid HTTP caching proxy software</a> that is optimized for use with applications on the Worldwide LHC Computing Grid (WLCG).  It has <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Why_use_frontier_squid_instead_o" target="_top">many advantages</a> over regular squid for common grid applications, especially Frontier and CVMFS.
<p />
The OSG distribution of frontier-squid is a straight rebuild of the upstream frontier-squid package for the convenience of OSG users.
<p />
<h1><a name="4_Frontier_Squid_is_Recommended"></a> 4  Frontier Squid is Recommended </h1>
<p />
OSG recommends that all sites run a caching proxy for HTTP and HTTPS to help reduce bandwidth and improve throughput. To that end, Compute Element (CE) installations include Frontier Squid automatically. We encourage all sites to configure and use this service, as described below.
<p />
For large sites that expect heavy load on the proxy, it may be best to run the proxy on its own host. In that case, the Frontier Squid software still will be installed on the CE, but it need not be enabled. Instead, install your proxy service on the separate host and then configure the CE host to refer to the proxy on that host.
<p />
The <code>osg-configure</code> configuration tool (version 1.0.45 and later) warns users who have not added the proxy location to their CE configuration. In the future, a proxy will be required and osg-configure will fail if the proxy location is not set.
<p />
<h1><a name="5_Engineering_Considerations"></a> 5  Engineering Considerations </h1>
<p />
If you will be supporting the Frontier application at your site, review the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Hardware" target="_top">upstream documentation Hardware considerations section</a> to determine how to size your equipment.
<p />
<h1><a name="6_Requirements"></a> 6  Requirements </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_1_Host_and_OS"></a> 6.1  Host and OS </span></h2> <ul>
<li> OS is Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>). 
</li> <li> Root access
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_2_Users"></a> 6.2  Users </span></h2>
The frontier-squid installation will create one user account unless it already exists.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">User</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>squid</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> Reduced privilege user that the squid process runs under.  Set the default gid of the "squid" user to be a group that is also called "squid". </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
The package can instead use another user name of your choice if you create a configuration file before installation.  Details are in the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Preparation" target="_top">upstream documentation Preparation section</a>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_3_Networking"></a> 6.3  Networking </span></h2>
<p />
<p />
<p />
<!-- No variables can be defined because will not be visible in the including document
Need this because double quotes used in Y in TWikiPreferences or ICON cause problems (replaced with single ones) <ul>
<li> Set ALTy = <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' />    
</li></ul> 
ALTy replacend inline whenever the icon is needed.
-->
For more details on overall Firewall configuration, please see our <a href="/bin/view/Documentation/Release3/FirewallInformation" class="twikiLink">Firewall documentation</a>.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
    <table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">  
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Service Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Protocol</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Port Number</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=3;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Inbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=4;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Outbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=5;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>  
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <a href="/bin/view/Documentation/GlossaryS#DefsSquid" class="twikiAnchorLink">Squid</a> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1"> tcp </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol2"> 3128 </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol3"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol4"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol5 twikiLastCol"> Also limited in squid ACLs. Both in and outbound must not be wide open to internet simultaneously </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="/bin/view/Documentation/GlossaryS#DefsSquidMonitor" class="twikiAnchorLink">Squid monitor</a> </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol1 twikiLast"> udp </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol2 twikiLast"> 3401 </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol3 twikiLast"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol4 twikiLast"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> Also limited in squid ACLs.  Should be limited to monitoring server addresses </td>
		</tr>  </table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
The addresses of the WLCG monitoring servers for use in firewalls are listed in the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Enabling_monitoring" target="_top">upstream documentation Enabling monitoring section</a>.
<p />
<h1><a name="7_Install_Instructions"></a> 7  Install Instructions </h1>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_Yum_Repositories_req"></a> Install the Yum Repositories required by OSG </span></h2>
<p />
The OSG RPMs currently support Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>).
<p />
OSG RPMs are distributed via the OSG yum repositories. Some packages depend on packages distributed via the <a href="http://fedoraproject.org/wiki/EPEL" target="_top">EPEL</a> repositories. So both repositories must be enabled.
<p />
<h3><a name="Install_EPEL"></a> Install EPEL </h3>
<p /> <ul>
<li> Install the EPEL repository, if not already present. <strong>Note:</strong> This enables EPEL by default. Choose the right version to match your OS version. <pre class="rootscreen">
<font color="#ff0000"># EPEL 5 (For RHEL 5, CentOS 5, and SL 5) </font>
[root@client ~]$ curl -O https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm
[root@client ~]$ rpm -Uvh epel-release-latest-5.noarch.rpm
<font color="#ff0000"># EPEL 6 (For RHEL 6, CentOS 6, and SL 6) </font>
[root@client ~]$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm
<font color="#ff0000"># EPEL 7 (For RHEL 7, CentOS 7, and SL 7) </font>
[root@client ~]$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</pre>       <strong>WARNING</strong>: if you have your own mirror or configuration of the EPEL repository, you <strong>MUST</strong> verify that the OSG repository has a better yum priority than EPEL (<a href="/bin/view/Documentation/Release3/InstallBestPractices#YumPriorities" class="twikiAnchorLink">details</a>). Otherwise, you will have strange dependency resolution (<em>depsolving</em>) issues.
</li></ul> 
<p />
<h3><a name="Install_the_Yum_priorities_packa"></a> Install the Yum priorities package </h3>
<p />
For packages that exist in both OSG and EPEL repositories, it is important to prefer the OSG ones or else OSG software installs may fail. Installing the Yum priorities package enables the repository priority system to work.
<p /> <ol>
<li> <p>Choose the correct package name based on your operating system’s major version:</p> <ul>
<li> For EL&nbsp;5 systems, use <code>yum-priorities</code>
</li> <li> For EL&nbsp;6 and EL&nbsp;7 systems, use <code>yum-plugin-priorities</code>
</li></ul> 
</li> <li> <p>Install the Yum priorities package:</p>       <pre class="rootscreen">[root@client ~]$ yum install <em>PACKAGE</em></pre>       <p>Replace <em><code>PACKAGE</code></em> with the package name from the previous step.</p>
</li> <li> <p>Ensure that <code>/etc/yum.conf</code> has the following line in the <code>[main]</code> section (particularly when using ROCKS), thereby enabling Yum plugins, including the priorities one:</p>       <pre class="file">plugins=1</pre>       <strong>NOTE</strong>: If you do not have a required key you can force the installation using <code>--nogpgcheck</code>; e.g., <code>yum install --nogpgcheck yum-priorities</code>.
</li></ol> 
<p />
<h3><a name="Install_OSG_Repositories"></a> Install OSG Repositories </h3>
<p />
<!--   1. <p>First, determine which OSG series you will be installing; 3.1 or 3.2.  The OSG 3.1 and 3.2 series are each well tested and contain the entire OSG software stack.  The 3.1 series continues to support all packages that have been released throughout its lifetime, while the 3.2 series contains newer versions of software (including HTCondor, Hadoop, glideinWMS) and removes support for obsolete packages (including CEMonitor).  Initially, most packages are identical between 3.1 and 3.2, but we expect the new series to diverge over time. <br/><br/>Note that some packages (eg, Hadoop) do not inter-operate between 3.1 and 3.2, and therefore require all nodes to use the same series.</p> -->
<p />
<ol>
   <li>
      <p>If you are upgrading from OSG 3.1 (or 3.2) to OSG 3.2 (or 3.3), remove the old OSG repository definition files and clean the Yum cache:</p>         <pre class="rootscreen">[root@client ~]$ yum clean all
[root@client ~]$ rpm -e osg-release</pre>       <p>This step ensures that local changes to <code>*.repo</code> files will not block the installation of the new OSG repositories. After this step, <code>*.repo</code> files that have been changed will exist in <code>/etc/yum.repos.d/</code> with the <code>*.rpmsave</code> extension. After installing the new OSG repositories (the next step) you may want to apply any changes made in the <code>*.rpmsave</code> files to the new <code>*.repo</code> files.</p>
   </li>
   <li>
      <p>Install the OSG repositories using one of the following methods depending on your EL version:</p>      <ol>
         <li>
            <p>For EL versions greater than EL5, install the files directly from <code>repo.grid.iu.edu</code>:</p>            <pre class="rootscreen">[root@client ~]$ rpm -Uvh <font color="#ff0000">URL</font></pre>            <p>Where <code><font color="#ff0000">URL</font></code> is one of the following:</p> <table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Series</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">EL6 URL (for RHEL 6, CentOS 6, or SL 6)</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallFrontierSquid?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">EL7 URL (for RHEL 7, CentOS 7, or SL 7)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">OSG 3.2</font> </th>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1"> <code>https://repo.grid.iu.edu/osg/3.2/osg-3.2-el6-release-latest.rpm</code> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> N/A </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">OSG 3.3</font> </th>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol1 twikiLast"> <code>https://repo.grid.iu.edu/osg/3.3/osg-3.3-el6-release-latest.rpm</code> </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <code>https://repo.grid.iu.edu/osg/3.3/osg-3.3-el7-release-latest.rpm</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
         </li>
         <li>
            <p>For EL5, download the repo file and install it using the following:</p>
            <pre class="rootscreen">[root@client ~]$ curl -O https://repo.grid.iu.edu/osg/3.2/osg-3.2-el5-release-latest.rpm
[root@client ~]$ rpm -Uvh osg-3.2-el5-release-latest.rpm</pre>
         </li>
      </ol>
   </li>
</ol>
<p />
For more details, please see our <a href="/bin/view/Documentation/Release3/YumRepositories" class="twikiLink">yum repository documentation</a>.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="7_1_Installing_Frontier_Squid"></a> 7.1  Installing Frontier Squid </span></h2>
<p />
After meeting the requirements in the previous section, install frontier-squid with this command: <pre class="rootscreen">
[root@client ~]$ yum install frontier-squid </pre>
<p />
Then enable it to start at boot time with this command: <pre class="rootscreen">
[root@client ~]$ chkconfig frontier-squid on</pre>
<p />
<h1><a name="8_Configuring_Frontier_Squid"></a> 8  Configuring Frontier Squid </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="8_1_Configuring_the_Frontier_Squ"></a> 8.1  Configuring the Frontier Squid Service </span></h2>
<p />
To configure the Frontier Squid service itself:
<p /> <ol>
<li> Follow the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid" target="_top">original Frontier Squid documentation</a>, in <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Configuration" target="_top">the Configuration section</a>       <p><strong>Note:</strong> An important difference between the standard Squid software and the Frontier Squid variant is that Frontier Squid changes are in <code>/etc/squid/customize.sh</code> instead of <code>/etc/squid/squid.conf</code>.</p>
</li> <li> Enable, start, and test the service (as described below)
</li> <li> Enable WLCG monitoring as described in the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Enabling_monitoring" target="_top">upstream documentation on enabling monitoring</a> and <a href="https://twiki.cern.ch/twiki/bin/view/LCG/WLCGSquidRegistration#OIM" target="_top">register the squid in OIM</a>.
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="8_2_Configuring_the_OSG_CE"></a> 8.2  Configuring the OSG CE </span></h2>
<p />
To configure the OSG Compute Element (CE) to know about your Frontier Squid service:
<p /> <ol>
<li> On your CE host, edit <code>/etc/osg/config.d/01-squid.ini</code> <ul>
<li> Make sure that <code>enabled</code> is set to <code>True</code>
</li> <li> Set <code>location</code> to the hostname and port of your Frontier Squid service (e.g., <code>my.squid.host.edu:3128</code>)
</li> <li> Leave the other settings at <code>DEFAULT</code> unless you have specific reasons to change them
</li></ul> 
</li> <li> <p>Run <code>osg-configure</code> to propagate the changes on your CE</p>       <p><strong>Note:</strong> You may want to finish other CE configuration tasks before running <code>osg-configure</code>. Just be sure to run it once before starting CE services.</p>
</li></ol> 
<p />
<h1><a name="9_Starting_and_Stopping_the_Fron"></a> 9  Starting and Stopping the Frontier Squid Service </h1>
<p />
<p />
Starting frontier-squid:
<pre class="rootscreen">
[root@client ~]$ service frontier-squid start
</pre> 
<p />
Stopping frontier-squid:
<pre class="rootscreen">
[root@client ~]$ service frontier-squid stop
</pre> 
<p />
<p />
<p />
<p />
<h1><a name="10_Testing_Frontier_Squid"></a> 10  Testing Frontier Squid </h1>
<p />
As any user on another computer, do the following (where <font color="#ff0000">yoursquid.your.domain</font> is the fully qualified domain name of your squid server):
<pre class="screen">
[user@client ~]$ export http_proxy=http://<font color="#ff0000">yoursquid.your.domain</font>:3128
[user@client ~]$ wget -qdO/dev/null http://frontier.cern.ch 2>&1|grep X-Cache
X-Cache: MISS from <font color="#ff0000">yoursquid.your.domain</font>
[user@client ~]$ wget -qdO/dev/null http://frontier.cern.ch 2>&1|grep X-Cache
X-Cache: HIT from <font color="#ff0000">yoursquid.your.domain</font>
</pre>
<p />
If the grep doesn't print anything, try removing it from the pipeline to see if errors are obvious.  If the second try says MISS again, something is probably wrong with the squid cache writes.  Look at the squid <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Log_file_contents" target="_top">access.log file</a> to try to see what's wrong.
<p />
If your squid will be supporting the Frontier application, it is also good to do the test in the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Testing_the_installation" target="_top">upstream documentation Testing the installation section</a>.
<p />
<h1><a name="11_Frontier_Squid_Log_Files"></a> 11  Frontier Squid Log Files </h1>
<p />
Log file contents are explained in the <a href="https://twiki.cern.ch/twiki/bin/view/Frontier/OldInstallSquid#Log_file_contents" target="_top">upstream documentation Log file contents section</a>.
<p />
<h1><a name="12_Getting_Help"></a> 12  Getting Help </h1>
To get assistance please use <a href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink">Help Procedure</a>.
<p />
<h1><a name="13_Comments"></a> 13  <strong>Comments</strong> </h1>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/InstallFrontierSquid" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
   DEAR DOCUMENT OWNER
   <code><b>===============</b></code>
<p />
   Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER          = <span class="twikiNewLink">DaveDykstra<a href="/bin/edit/Documentation/Release3/DaveDykstra?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="DaveDykstra (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|General|Trash/Trash/Integration|Monitoring|Operations|Security|Storage|Trash/Tier3|User|VO) <ul>
<li> Local DOC_AREA       = General
</li></ul> 
<p />
   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (Developer|Documenter|Scientist|Student|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (<span class="twikiNewLink">HowTo<a href="/bin/edit/Documentation/Release3/HowTo?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="HowTo (this topic does not yet exist; you can create it)">?</a></span>|Installation|Knowledge|Navigation|Planning|Training|Troubleshooting) <ul>
<li> Local DOC_TYPE       = Installation
</li></ul> 
<p />
   Please define if this document in general needs to be reviewed before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
   Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
   change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
   change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
   change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
   DEAR DOCUMENT REVIEWER
   <code><b>==================</b></code>
<p />
   Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">MarcoMambelli<a href="/bin/edit/Documentation/Release3/MarcoMambelli?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="MarcoMambelli (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 ) <ul>
<li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
   DEAR DOCUMENT TESTER
   <code><b>================</b></code>
<p />
   Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">MarkoSlyz<a href="/bin/edit/Documentation/Release3/MarkoSlyz?topicparent=Documentation/Release3.InstallFrontierSquid" rel="nofollow" title="MarkoSlyz (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 ) <ul>
<li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>InstallFrontierSquid</span> <br />    
Topic revision: r32 - 06 Dec 2016 - 18:12:41 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />