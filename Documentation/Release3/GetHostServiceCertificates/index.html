<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GetHostServiceCertificates &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/GetHostServiceCertificates?_T=16 Feb 2017" type="application/x-wiki" title="edit GetHostServiceCertificates" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/GetHostServiceCertificates"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--TABLEPLUGIN_table1--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
</style>
<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<h1><a name="How_to_Get_Host_and_Service_Cert"></a>  How to Get Host and Service Certificates </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#About_this_Document"> About this Document</a>
</li> <li> <a href="?cover=print#Requirements"> Requirements</a>
</li> <li> <a href="?cover=print#Installation"> Installation</a> <ul>
<li> <a href="?cover=print#Install_the_Yum_Repositories_req"> Install the Yum Repositories required by OSG</a> <ul>
<li> <a href="?cover=print#Install_EPEL"> Install EPEL</a>
</li> <li> <a href="?cover=print#Install_the_Yum_priorities_packa"> Install the Yum priorities package</a>
</li> <li> <a href="?cover=print#Install_OSG_Repositories"> Install OSG Repositories</a>
</li></ul> 
</li> <li> <a href="?cover=print#Install_the_CA_Certificates_A_qu"> Install the CA Certificates: A quick guide</a>
</li> <li> <a href="?cover=print#Install_the_OSG_PKI_Command_Line"> Install the OSG PKI Command Line Clients</a> <ul>
<li> <a href="?cover=print#Configuration_file_pki_clients_i"> Configuration file  pki-clients.ini </a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Validate_authentication"> Validate authentication</a>
</li> <li> <a href="?cover=print#Request_a_Host_Certificate"> Request a Host Certificate</a> <ul>
<li> <a href="?cover=print#Send_the_request"> Send the request</a> <ul>
<li> <a href="?cover=print#Detailed_description_of_the_osg"> Detailed description of the osg-cert-request usage</a>
</li></ul> 
</li> <li> <a href="?cover=print#Retrieve_and_Install_the_Host_Ce"> Retrieve and Install the Host Certificate</a> <ul>
<li> <a href="?cover=print#Detailed_description_of_the_AN1"> Detailed description of the osg-cert-retrive usage</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Request_a_Service_Certificate"> Request a Service Certificate</a> <ul>
<li> <a href="?cover=print#Install_the_Service_Certificate"> Install the Service Certificate</a>
</li></ul> 
</li> <li> <a href="?cover=print#Information_for_Grid_Admins"> Information for Grid Admins</a> <ul>
 <li>
 <ul>
<li> <a href="?cover=print#Detailed_description_of_the_AN2"> Detailed description of the osg-gridadmin-cert-request usage</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Frequently_Asked_Questions"> Frequently Asked Questions</a> <ul>
<li> <a href="?cover=print#Can_I_use_any_host_to_request_a"> Can I use any host to request a certificate for a different host?</a>
</li> <li> <a href="?cover=print#May_I_reuse_my_host_certificate"> May I reuse my host certificate as a service certificate?</a>
</li> <li> <a href="?cover=print#How_do_I_renew_a_host_service_ce"> How do I renew a host/service certificate?</a>
</li> <li> <a href="?cover=print#I_get_a_GSS_authentication_failu"> I get a "GSS authentication failure" when users try to authenticate with my site?</a>
</li> <li> <a href="?cover=print#How_can_I_check_if_I_have_a_host"> How can I check if I have a host certificate installed already?</a>
</li> <li> <a href="?cover=print#How_can_I_check_the_expiration_t"> How can I check the expiration time of my installed host certificate?</a>
</li></ul> 
</li> <li> <a href="?cover=print#References"> References</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</div>
<p />
<p />
<form name="EDITTHIS" action="/bin/edit/Documentation/Release3/GetHostServiceCertificates" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:0.75em;"><input type="hidden" value="1487212923" name="t"></form>
<p />
<p />
<h1><a name="About_this_Document"></a> About this Document </h1>
<p />
<!-- some useful definitions <ul>
<li> Local UCL_HOST = host
</li> <li> Local UCL_USER = user
</li> <li> Local UCL_CWD  = /
</li></ul> 
-->
<p />
<img width="16" alt="hand" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/hand.gif" height="16" border="0" /> This document is for system administrators. After reading this document you should be able to apply for and install a grid certificate on a grid resource. This document does not explain how to apply for a grid user certificate. To apply for a grid user certificate click <a href="/bin/view/Documentation/Release3/CertificateUserGet" class="twikiLink">here</a> instead!
<p />
<h1><a name="Requirements"></a> Requirements </h1>
<p />
Before requesting a <font color="#ff0000">new</font> host or service certificate, you should check if a certificate is not installed already using <strong>openssl</strong>. In this case you may safely skip this document:
<p />
<pre class="screen">
[user@host ~]$ openssl x509 -in <font color="#ff0000">/etc/grid-security/hostcert.pem</font> -subject -issuer -dates -noout
subject= /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=host.opensciencegrid.org
issuer=/DC=org/DC=cilogon/C=US/O=CILogon/CN=CILogon OSG CA 1
notBefore=Jan  4 21:08:09 2010 GMT
notAfter=Jan  4 21:08:09 2011 GMT
</pre>
<p />
The OSG PKI Command Line Clients are tested to work on Python version 2.4+. They have not been tested on Python version 3. 
<p />
We recommend to read background information on grid certificates which can be found <a href="/bin/view/Documentation/CertificateWhatIs" class="twikiLink">here</a>. In order to proceed you will also need:
<p /> <ul>
<li> the <strong>fully qualified domain name</strong> of the host you need a grid certificate for
</li> <li> the <strong>purpose</strong> of the certificate that explains your request to the Certificate Authority
</li> <li> the full <strong>name of the administrator</strong> responsible for the host
</li> <li> the <strong>e-mail address of the administrator</strong>
</li> <li> the <strong>telephone number of the administrator</strong>
</li> <li> the name of the <strong>Certificate Authority</strong> your project is affiliated with
</li> <li> the name of the <strong>Virtual Organization</strong> affiliated with the Certificate Authority
</li></ul> 
<p />
<p />
<h1><a name="Installation"></a> Installation </h1>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_Yum_Repositories_req"></a> Install the Yum Repositories required by OSG </span></h2>
<p />
The OSG RPMs currently support Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>).
<p />
OSG RPMs are distributed via the OSG yum repositories. Some packages depend on packages distributed via the <a href="http://fedoraproject.org/wiki/EPEL" target="_top">EPEL</a> repositories. So both repositories must be enabled.
<p />
<h3><a name="Install_EPEL"></a> Install EPEL </h3>
<p /> <ul>
<li> Install the EPEL repository, if not already present. <strong>Note:</strong> This enables EPEL by default. Choose the right version to match your OS version. <pre class="rootscreen">
<font color="#ff0000"># EPEL 5 (For RHEL 5, CentOS 5, and SL 5) </font>
[root@host /]$ curl -O https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm
[root@host /]$ rpm -Uvh epel-release-latest-5.noarch.rpm
<font color="#ff0000"># EPEL 6 (For RHEL 6, CentOS 6, and SL 6) </font>
[root@host /]$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm
<font color="#ff0000"># EPEL 7 (For RHEL 7, CentOS 7, and SL 7) </font>
[root@host /]$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</pre>       <strong>WARNING</strong>: if you have your own mirror or configuration of the EPEL repository, you <strong>MUST</strong> verify that the OSG repository has a better yum priority than EPEL (<a href="/bin/view/Documentation/Release3/InstallBestPractices#YumPriorities" class="twikiAnchorLink">details</a>). Otherwise, you will have strange dependency resolution (<em>depsolving</em>) issues.
</li></ul> 
<p />
<h3><a name="Install_the_Yum_priorities_packa"></a> Install the Yum priorities package </h3>
<p />
For packages that exist in both OSG and EPEL repositories, it is important to prefer the OSG ones or else OSG software installs may fail. Installing the Yum priorities package enables the repository priority system to work.
<p /> <ol>
<li> <p>Choose the correct package name based on your operating system’s major version:</p> <ul>
<li> For EL&nbsp;5 systems, use <code>yum-priorities</code>
</li> <li> For EL&nbsp;6 and EL&nbsp;7 systems, use <code>yum-plugin-priorities</code>
</li></ul> 
</li> <li> <p>Install the Yum priorities package:</p>       <pre class="rootscreen">[root@host /]$ yum install <em>PACKAGE</em></pre>       <p>Replace <em><code>PACKAGE</code></em> with the package name from the previous step.</p>
</li> <li> <p>Ensure that <code>/etc/yum.conf</code> has the following line in the <code>[main]</code> section (particularly when using ROCKS), thereby enabling Yum plugins, including the priorities one:</p>       <pre class="file">plugins=1</pre>       <strong>NOTE</strong>: If you do not have a required key you can force the installation using <code>--nogpgcheck</code>; e.g., <code>yum install --nogpgcheck yum-priorities</code>.
</li></ol> 
<p />
<h3><a name="Install_OSG_Repositories"></a> Install OSG Repositories </h3>
<p />
<!--   1. <p>First, determine which OSG series you will be installing; 3.1 or 3.2.  The OSG 3.1 and 3.2 series are each well tested and contain the entire OSG software stack.  The 3.1 series continues to support all packages that have been released throughout its lifetime, while the 3.2 series contains newer versions of software (including HTCondor, Hadoop, glideinWMS) and removes support for obsolete packages (including CEMonitor).  Initially, most packages are identical between 3.1 and 3.2, but we expect the new series to diverge over time. <br/><br/>Note that some packages (eg, Hadoop) do not inter-operate between 3.1 and 3.2, and therefore require all nodes to use the same series.</p> -->
<p />
<ol>
   <li>
      <p>If you are upgrading from OSG 3.1 (or 3.2) to OSG 3.2 (or 3.3), remove the old OSG repository definition files and clean the Yum cache:</p>         <pre class="rootscreen">[root@host /]$ yum clean all
[root@host /]$ rpm -e osg-release</pre>       <p>This step ensures that local changes to <code>*.repo</code> files will not block the installation of the new OSG repositories. After this step, <code>*.repo</code> files that have been changed will exist in <code>/etc/yum.repos.d/</code> with the <code>*.rpmsave</code> extension. After installing the new OSG repositories (the next step) you may want to apply any changes made in the <code>*.rpmsave</code> files to the new <code>*.repo</code> files.</p>
   </li>
   <li>
      <p>Install the OSG repositories using one of the following methods depending on your EL version:</p>      <ol>
         <li>
            <p>For EL versions greater than EL5, install the files directly from <code>repo.grid.iu.edu</code>:</p>            <pre class="rootscreen">[root@host /]$ rpm -Uvh <font color="#ff0000">URL</font></pre>            <p>Where <code><font color="#ff0000">URL</font></code> is one of the following:</p><table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/GetHostServiceCertificates?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Series</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/GetHostServiceCertificates?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">EL6 URL (for RHEL 6, CentOS 6, or SL 6)</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/GetHostServiceCertificates?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">EL7 URL (for RHEL 7, CentOS 7, or SL 7)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">OSG 3.2</font> </th>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1"> <code>https://repo.grid.iu.edu/osg/3.2/osg-3.2-el6-release-latest.rpm</code> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> N/A </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">OSG 3.3</font> </th>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol1 twikiLast"> <code>https://repo.grid.iu.edu/osg/3.3/osg-3.3-el6-release-latest.rpm</code> </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <code>https://repo.grid.iu.edu/osg/3.3/osg-3.3-el7-release-latest.rpm</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
         </li>
         <li>
            <p>For EL5, download the repo file and install it using the following:</p>
            <pre class="rootscreen">[root@host /]$ curl -O https://repo.grid.iu.edu/osg/3.2/osg-3.2-el5-release-latest.rpm
[root@host /]$ rpm -Uvh osg-3.2-el5-release-latest.rpm</pre>
         </li>
      </ol>
   </li>
</ol>
<p />
For more details, please see our <a href="/bin/view/Documentation/Release3/YumRepositories" class="twikiLink">yum repository documentation</a>.
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_CA_Certificates_A_qu"></a> Install the CA Certificates: A quick guide </span></h2>
<p />
You must perform one of the following <code>yum</code> commands below to select this host's CA certificates.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/GetHostServiceCertificates?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Set of CAs</font></a> </th>
			<th bgcolor="#d8dde4" align="right" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/GetHostServiceCertificates?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">CA certs name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/GetHostServiceCertificates?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37"> Installation command (as root)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> OSG </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> osg-ca-certs </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> <code>yum install osg-ca-certs</code> <font color="#ff0000"><b>Recommended</b></font> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> IGTF </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> igtf-ca-certs </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> <code>yum install igtf-ca-certs</code> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> None* </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> empty-ca-certs </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> <code>yum install empty-ca-certs --enablerepo=osg-empty</code> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Any** </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> Any </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <code>yum install osg-ca-scripts</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
* The <code>empty-ca-certs</code> RPM indicates you will be manually installing the CA certificates on the node. <br/>
** The <code>osg-ca-scripts</code> RPM provides a cron script that automatically downloads CA updates, and requires further configuration. <br/>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  If you use options 1 or 2, then you will need to run "yum update" in order to get the latest version of CAs when they are released. With option 4 a cron service is provided which will always download the updated CA package for you.
</dd></dl> 
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  If you use services like Apache's httpd you must restart them after each update of the CA certificates, otherwise they will continue to use the old version of the CA certificates.
</dd></dl> 
For more details and options, please see our <a href="/bin/view/Documentation/Release3/InstallCertAuth" class="twikiLink">CA certificates documentation</a>. 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_OSG_PKI_Command_Line"></a> Install the OSG PKI Command Line Clients </span></h2>
<pre class="screen">
[root@host /]$ yum install osg-pki-tools
</pre>
<h3><a name="Configuration_file_pki_clients_i"></a> Configuration file  pki-clients.ini </h3>
<p />
This configuration is correctly set by default and you will not need to change them. The information is provided in case you need it for debugging purposes.
<p />
The client checks for pki-clients.ini file at three location in order: <ul>
<li> $HOME/.osg-pki/OSG_PKI.ini
</li> <li> ./pki-clients.ini
</li> <li> /etc/osg/pki-clients.ini (default location)
</li></ul> 
<p />
The INI file contains the following information: <ul>
<li> Request URL
</li> <li> Approve URL
</li> <li> Retrieve URL
</li> <li> Host URL
</li></ul> 
<p />
<h1><a name="Validate_authentication"></a> Validate authentication </h1>
<p />
Make sure you can create a valid grid proxy.  To do so, please follow instructions: 
<p /> <ol>
<li> Double-check your configuration to make sure that you are allowed (specifically, your credentials are allowed) to access your CE. You can be either member of a VO allowed to run at the site or you can add your personal certificate locally. This will either be in your GUMS server or in your <code>edg-mkgridmap</code> configuration. 
</li> <li> Create a proxy with <code>voms-proxy-init</code> or <code>grid-proxy-init</code>. For example: <pre class="screen">
[user@host /]$ voms-proxy-init -voms <font color="#ff0000">GLOW</font>
Enter GRID pass phrase for this identity:
Your identity: /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services=People/CN=Alain Roy 424511
Creating temporary proxy ................................................................................. Done
Contacting  glow-voms.cs.wisc.edu:15001 [/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glow-voms.cs.wisc.edu] "GLOW" Done
Creating proxy ..................................................................... Done

Your proxy is valid until Fri Dec  2 01:32:47 2011
</pre>You'll substitute your own VO, of course.
</li></ol> 
<p />
<h1><a name="Request_a_Host_Certificate"></a> Request a Host Certificate </h1>
<p />
Every resource or service contributing to the grid needs a certificate issued by one of the trusted <strong>Certificate Authorities</strong>. To proceed you will need following information at hand:
<p /> <ul>
<li> the <strong>fully qualified domain</strong> name of the host you need a grid certificate for
</li> <li> the <strong>purpose</strong> of the certificate that explains your request to the Certificate Authority
</li> <li> the full <strong>name of the administrator</strong> responsible for the host
</li> <li> the <strong>e-mail address of the administrator</strong>
</li> <li> the <strong>telephone number of the administrator</strong>
</li> <li> the name of the <strong>Certificate Authority</strong> your project is affiliated with
</li> <li> the name of the <strong>Virtual Organization</strong> affiliated with the Certificate Authority
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Send_the_request"></a> Send the request </span></h2>
<p />
This command line client generates a private key and submits a request for a certificate to the OSG PKI. The request will be approved by an appropriate Grid Admin. You will receive an email when this approval has been completed containing directions on how to run 'osg-cert-retreive' to retrieve the certificate. It works in two modes: <ul>
<li> CSR is provided by the user: Here the csr provided is just trimmed for begin and end certificate lines and the request is sent to the OIM
</li> <li> CSR is not provided by the user: Here the script generates a private key for the user. Writes it to default key file name or the one specified by -o. Then generates a new csr and sends it to OIM.
</li></ul> 
<p />
The second mode will commonly be used by most OSG site admins 
<p />
Use <strong>osg-cert-request</strong> to generate a request which will be sent to the Certificate Authority you specified. Change "<font color="#ff0000">host.opensciencegrid.org</font>" to be the host name for the computer for which you need a certificate and provide your contact details for the grid admin to approve your request.
<p />
<pre class="screen">
[user@host /]$ osg-cert-request -t <font color="#ff0000">host.opensciencegrid.org</font> -e <font color="#ff0000">emailaddress@domain.com</font> -n <font color="#ff0000">"Your Name"</font> -p <font color="#ff0000">9999999999 (Ph No)</font> -v <font color="#ff0000">"Your VO"</font> -y <font color="#ff0000">"xyz@domain.com,abc@domain.com" (CC list)</font> -m <font color="#ff0000">"This is my comment"</font> -o <font color="#ff0000">hostkey.pem</font>
</pre>
<p />
Example:
<pre class="screen">
[user@host /]$ osg-cert-request -t sectest.cigi.illinois.edu -e apadmana@domain.edu -n "Anand" -p 9999999999 -m "Testing for developing security documentation" -o hostkey.pem

Writing key to hostkey.pem

Connecting to server...
Succesfully submitted
Request Id#: 570
</pre>
<p />
At this point <strong>osg-cert-request</strong> has created some files in the directory you specified and an e-mail has been sent to the Certificate Authority containing your request. The files will be needed again once you receive a reply from the Certificate Authority asking you to retrieve the certificate. Please note down the Request Id. You will need it for retrieving the signed certificate. 
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3GetHostServiceCertificates1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdDocumentation/Release3GetHostServiceCertificates1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3GetHostServiceCertificates1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<h3><a name="Detailed_description_of_the_osg"></a> Detailed description of the osg-cert-request usage </h3>
This script: <ul>
<li> Generates a new host private key and CSR
</li> <li> Only important part of CSR is CN=<hostname> component
</li> <li> Saves the host private key to disk (as specified by the user)
</li> <li> Authenticates to OIM and posts the CSR as a request to OIM
</li> <li> Returns the request ID to the user
</li> <li> If the user provides the CSR, then this script would just send the same CSR to OIM
</li></ul> 
<p />
<strong>Inputs:</strong> <ul>
<li> fully-qualified hostname
</li> <li> filename to store private key [Optional, default is ./hostkey.pem]
</li> <li> path to user's certificate [Optional, default is path specified by    $X509_USER_CERT environment variable, ~/.globus/usercert.pem]
</li> <li> path to user's private key [Optional, default is path specified by    $X509_USER_KEY environment variable, ~/.globus/userkey.pem]
</li> <li> Passphrase for user's private key via non-echoing prompt.
</li> <li> User needs to provide VO name if the requested hostname has    multiple VO's assigned
</li></ul> 
<p />
<strong>Outputs:</strong> <ul>
<li> Private key, to filename specified by '-o' or ./hostkey.pem by default
</li> <li> Request Id, to stdout
</li></ul> 
<p />
<strong>Usage</strong>: osg-cert-request [options]
<pre>
&#42;Options&#42;:

  -h, --help            show this help message and exit
  -c CSR, --csr&#61;CSR     Specify CSR name (default &#61; gennew.csr)
  -o Output Keyfile, --outkeyfile&#61;Output Keyfile
                        Specify the output filename for the retrieved user
                        certificate.  Default is ./hostkey.pem
  -y CC List, --cc&#61;CC List
                        Specify the CC list(the email id&#39;s to be CCed). Separate values by &#39;,&#39;
  -m Comment, --comment&#61;Comment
                        The comment to be added to the request
  -t CN, --hostname&#61;CN  Specify hostname for CSR (FQDN)
  -e EMAIL, --email&#61;EMAIL
                        Email address to receive certificate
  -n NAME, --name&#61;NAME  Name of user receiving certificate
  -p PHONE, --phone&#61;PHONE
                        Phone number of user receiving certificate
  -v VO, --vo&#61;VO
                        VO name of requested hostname
  -T, --test            Run in test mode
  -q, --quiet           don&#39;t print status messages to stdout
  -V, --version         Print the script version number and exit. 

</pre>
<p />
</div></div> <!--/twistyPlugin-->
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Retrieve_and_Install_the_Host_Ce"></a> Retrieve and Install the Host Certificate </span></h2>
<p />
Once the certificate has been approved by the Certificate Authority you will receive an e-mail for the GOC. Then to retrieve the host certificate we will execute <strong>osg-cert-retrieve</strong>: and use the <font color="#ff0000">request ID</font> we recorded earlier. Since certificates are public, no authentication of the user is required to retrieve them.
<p />
<pre class="screen">
[user@host /]$  osg-cert-retrieve <font color="#ff0000">570</font> -o <font color="#ff0000">hostcert.pem</font>
Using timeout of 5 minutes
Running in test mode
Connecting server to retrieve certificate...
Certificate written to hostcert.pem
</pre>
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3GetHostServiceCertificates2show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdDocumentation/Release3GetHostServiceCertificates2hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3GetHostServiceCertificates2toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<h3><a name="Detailed_description_of_the_AN1"></a> Detailed description of the osg-cert-retrive usage </h3>
<p />
This osg-cert-retrive script: <ul>
<li> Accepts a request Id from the user
</li> <li> Connects to OIM and requests the certificate identified by the request ID
</li> <li> Writes the certificate to disk (as specified by the user)
</li></ul> 
<p />
<strong>Inputs:</strong> <ul>
<li> Request ID
</li> <li> Filename to store certificate [Optional, default is ./hostcert.pem]
</li></ul> 
<p />
<strong>Outputs:</strong> <ul>
<li> Host certificate as PEM, to filename specified or ./hostcert.pem
</li></ul> 
<p />
<strong>Usage</strong>:osg-cert-retrieve -h/--help [for detailed explanations of options]
<p />
<pre>
Options:
  -h, --help            show this help message and exit
  -i ID, --id&#61;ID        Specify ID# of certificate to retrieve&#91;Required]
  -o ID, --certfile&#61;ID  Specify the output filename for the retrieved user
                        certificate . Default is ./hostcert.pem
  -T, --test            Run in test mode
  -q, --quiet           don&#39;t print status messages to stdout
  -V, --version         Print the script version number and exit. 
</pre>
<p />
</div></div> <!--/twistyPlugin-->
The certificate consists of two files (default hostcert.pem and hostkey.pem) which have been placed into the current directory. Note, If you did not use the <code>--o</code> option the filenames will be what you provided.
<p />
<img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> Please note that these files represent a <font color="#ff0000">public</font> and a <font color="#ff0000">private</font> and should be treated accordingly!
<p />
Please take a moment to verify that the <strong>certificate matches the hostname</strong> of the resource where you intend to install it before you proceed:
<p />
<pre class="screen">
[user@host /]$ grid-cert-info -file ./hostcert.pem -subject
/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=<font color="#ff0000">host.opensciencegrid.org</font>

[user@host /]$ hostname -f
<font color="#ff0000">host.opensciencegrid.org</font>
</pre>
<p />
Finally, install the certificate in the default location <strong>/etc/grid-security/</strong>:
<p />
<pre class="rootscreen">
[root@host /]$ cp ./host.opensciencegrid.orgcert.pem /etc/grid-security/hostcert.pem
[root@host /]$ chmod 444 /etc/grid-security/hostcert.pem
[root@host /]$ cp ./host.opensciencegrid.orgkey.pem /etc/grid-security/hostkey.pem
[root@host /]$ chmod 400 /etc/grid-security/hostkey.pem
</pre>
<p />
<h1><a name="Request_a_Service_Certificate"></a> Request a Service Certificate </h1>
<p />
You can use the same <strong>osg-cert-request</strong> and <strong>osg-cert-retrieve</strong> commands  to request and service certificates just like any host certificate. Just use service/hostname for the -t parameter.
<p />
<pre class="screen">
[user@host /]$ osg-cert-request -t <font color="#ff0000">http/host.opensciencegrid.org</font> -e <font color="#ff0000">emailaddress@domain.com</font> -n <font color="#ff0000">"Your Name"</font> -p <font color="#ff0000">9999999999 (Ph No)</font> -v <font color="#ff0000">"Your VO"</font> -y <font color="#ff0000">"xyz@domain.com,abc@domain.com" (CC list)</font> -m <font color="#ff0000">"This is my comment"</font> -o hostkey.pem
Writing key to ./hostkey.pem

Connecting to server...
Succesfully submitted
Request Id#: 571

</pre>
<p />
Please note down the request ID.
<p />
Once the certificate has been approved by the Certificate Authority you will receive an e-mail for the GOC. Then to retrieve the host certificate we will execute <strong>osg-cert-retrieve</strong>: and use the <font color="#ff0000">request ID</font> we recorded earlier. Since certificates are public, no authentication of the user is required to retrieve them.
<p />
<pre class="screen">
[user@host /]$  osg-cert-retrieve <font color="#ff0000">571</font> -o <font color="#ff0000">hostcert.pem</font>
Using timeout of 5 minutes
Running in test mode
Connecting server to retrieve certificate...
Certificate written to hostcert.pem
</pre>
<p />
<img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> Please note that these files represent a <font color="#ff0000">public</font> and a <font color="#ff0000">private</font> and should be treated accordingly!
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_Service_Certificate"></a> Install the Service Certificate </span></h2>
<p />
The <strong>Service Certificate</strong> should be installed under a subdirectory in <strong>/etc/grid-security</strong> indicating the name of the service. The next step will install the service certificate in the default location <strong>/etc/grid-security/http</strong>:
<p />
<pre class="rootscreen">
[root@host /]$ cp ./host.opensciencegrid.org-httpcert.pem /etc/grid-security/http/httpcert.pem
[root@host /]$ chmod 444 /etc/grid-security/http/httpcert.pem
[root@host /]$ cp ./host.opensciencegrid.org-httpkey.pem /etc/grid-security/http/httpkey.pem
[root@host /]$ chmod 400 /etc/grid-security/http/httpkey.pem
</pre>
<p />
<img width="16" alt="warning" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" height="16" border="0" /> Please note that the service certificate must also be owned by the unix user who runs the service. For <strong>Apache/Tomcat</strong> this is the <font color="#ff0000">tomcat</font> user:
<p />
<pre class="rootscreen">
[root@host /]$ chown tomcat.tomcat /etc/grid-security/http/httpcert.pem
[root@host /]$ chown tomcat.tomcat /etc/grid-security/http/httpkey.pem
</pre>
<p />
<p />
Please refer to <a href="/bin/view/Operations/OSGPKICommandlineClients" class="twikiLink">Operations/OSGPKICommandlineClients</a> for full documentation of the Client package
<p />
<h1><a name="Information_for_Grid_Admins"></a> Information for Grid Admins </h1>
If you are a grid admin then you can use a single command to request and retrieve a certificate immediately. For getting grid admin privileges please refer <a href="/bin/view/Operations/OSGPKITrustedAgent" class="twikiLink">here</a>.
<p />
Request and retrieve multliple host certificates from OIM. Authenticates to OIM and is only for use by Grid Admins for certificates they are authorized to approve. This script is only supported with all hosts being in the same domain (so we ensure they go to the same Grid Admin). The certificates are stored with the format of 'hostname-requestid.pem' (i.e. the id generated from the request for the certificate). The key is stored as 'hostname-serial-key.pem'.
<p />
Examples:
<pre class="rootscreen">
[user@host /]$ osg-gridadmin-cert-request -H host.opensciencegrid.org
</pre>
<p />
If you want to request more then one certificate you can list them in a file (one host per line) and use the following command
<pre class="rootscreen">
[user@host /]$ osg-gridadmin-cert-request -f <font color="#ff0000">hostfile</font>
</pre>
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3GetHostServiceCertificates3show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdDocumentation/Release3GetHostServiceCertificates3hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3GetHostServiceCertificates3toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<h3><a name="Detailed_description_of_the_AN2"></a> Detailed description of the osg-gridadmin-cert-request usage </h3>
<p />
This  osg-gridadmin-cert-request script does the following in the process of acquiring certificates for the hostnames specified:
<p />
    Reads a list of fully-qualified hostnames from a file specified by the user.
    For reach hostname:
    Generates a new private key and CSR
    Only important part of CSR is CN= component
    Writes the private key to a file with filename: /-key.pem
    Prompts the user for their private key pass phrase
    Pass phrase is cached so user is not re-prompted
    Authenticates to OIM and posts the CSRs as a single request to OIM
    Request id is returned and subsequently used
    Authenticates to OIM and approves the request
    Waits one minute for request to be processed by OIM
    Connects to OIM and attempts to retrieve certificates
    Writes out any certificates it retrieves with filename of /-&lt;red-id&gt;.pem
    if all certificates have been retrieved, exits loop
    Wait 5 seconds and repeat. 
<p />
Inputs:
<p />
    filename of list of hostnames
    prefix path in which to write private keys and certificares [default: .]
    path to user's certificate [Optional, default is path specified by $X509_USER_CERT environment variable, ~/.globus/usercert.pem]
    path to user's private key [Optional, default is path specified by $X509_USER_KEY environment variable, ~/.globus/userkey.pem]
    Passphrase for user's private key via non-echoing prompt. 
<p />
Outputs:
<p />
    N host certificates in PEM format
    N private keys in PEM format 
<p />
Usage:osg-gridadmin-cert-request -h/--help [for detailed explanations of options]
<p />
<p />
<strong>Options</strong>:
  -h, --help            show this help message and exit
  -k PKEY, --pkey=PKEY  Specify Requestor's private key (PEM Format).  If not
                        specified will take the value of X509_USER_KEY or
                        $HOME/.globus/userkey.pem
  -c CERT, --cert=CERT  Specify Requestor's certificate (PEM Format).  If not
                        specified will take the value of X509_USER_CERT or
                        $HOME/.globus/usercert.pem
  -T, --test            Run in test mode
  -q, --quiet           don't print status messages to stdout
  -V, --version         Print the script version number and exit. 
<p />
<strong>Hostname Options</strong>:
    Use either of these options.     Specify hostname as a single hostname
    using -H/--hostname     or specify from a file using -f/--hostfile.
<p />
    -H HOSTNAME, --hostname=HOSTNAME
                        Specify the hostname or service/hostname for which you
                        want to request the certificate for.  If specified
                        -f/--hostfile will be ignored
    -f HOSTFILE, --hostfile=HOSTFILE
                        Filename with one hostname or service/hostname per
                        line
</div></div> <!--/twistyPlugin-->
<p />
<h1><a name="Frequently_Asked_Questions"></a> Frequently Asked Questions </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Can_I_use_any_host_to_request_a"></a> Can I use any host to request a certificate for a different host? </span></h2>
<p />
<font color="#008000">YES</font>, you can use any host to create a certificate request as long as the hostname for the certificate is a fully qualified domain name.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="May_I_reuse_my_host_certificate"></a> May I reuse my host certificate as a service certificate? </span></h2>
<p />
<font color="#ff0000">NO!</font> For security reasons, please do not use clones of your host certificate for additional certificates even though it's technically possible.
<p />
<!-- No more GRAM WS
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="May_I_reuse_my_host_certific_AN1"></a>  May I reuse my host certificate for the web service implementation of GRAM? </span></h2>
<p />
<font color="#008000">YES</font>, this is the only exception to reuse your host certificate for another service. In this case the OSG configuration software will copy your host certificate to <code>/etc/grid-security/container(cert|key).pem</code> and change the owner to the <strong>globus</strong> or <strong>daemon</strong> user. Choose the username that executes the globus container.
-->
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="How_do_I_renew_a_host_service_ce"></a> How do I renew a host/service certificate? </span></h2>
<p />
There is no separate procedure. Simply ask for a new certificate the same way you asked for it the previous time.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="I_get_a_GSS_authentication_failu"></a> I get a "GSS authentication failure" when users try to authenticate with my site? </span></h2>
<p />
You likely used an <strong>alias</strong> for the host instead of the fully qualified domain name when you generated the certificate request. This can cause the GSS authentication failures similar to the following when a user tries to authenticate to the host after your certificate is installed:
<p />
<pre class="screen">
GSS authentication failure 
GSS Major Status: General failure 
GSS Minor Status Error Chain: 
accept_sec_context.c:gss_accept_sec_context:403: 
Error during delegation: Delegation protocol violation 
Failure: GSS failed Major:000d0000 Minor:00000001 Token:00000000 
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="How_can_I_check_if_I_have_a_host"></a> How can I check if I have a host certificate installed already? </span></h2>
<p />
By default the host certificate key pair will be installed in <code>/etc/grid-security/hostcert.pem</code> and <code>/etc/grid-security/hostkey.pem</code>.  You can use <strong>openssl</strong> to access basic information about the certificate:
<p />
<pre class="screen">
[root@osg-se robert]# openssl x509 -in /etc/grid-security/hostcert.pem -subject -issuer -dates -noout
subject= /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=host.opensciencegrid.org
issuer= /DC=org/DC=cilogon/C=US/O=CILogon/CN=CILogon OSG CA 1
notBefore=Apr  8 00:00:00 2013 GMT
notAfter=May 17 12:00:00 2014 GMT
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="How_can_I_check_the_expiration_t"></a> How can I check the expiration time of my installed host certificate? </span></h2>
<p />
If you installed the <a href="/bin/view/Documentation/Release3/InstallCertScripts" class="twikiLink">Certificates Script Package</a> you can use <strong>grid-cert-info</strong> to retrieve information about the certificate:
<p />
<pre class="screen">
[root@osg-se robert]# grid-cert-info -file /etc/grid-security/hostcert.pem -startdate -enddate
Jan  4 21:08:41 2010 GMT
Jan  4 21:08:41 2011 GMT
</pre>
<p />
Alternatively you can use <strong>openssl</strong>:
<p />
<pre class="screen">
[root@osg-se robert]# openssl x509 -in /etc/grid-security/hostcert.pem -dates -noout
notBefore=Jan  4 21:08:41 2010 GMT
notAfter=Jan  4 21:08:41 2011 GMT
</pre>
<p />
<h1><a name="References"></a> References </h1> <ul>
<li> <a href="http://security.ncsa.illinois.edu/research/grid-howtos/usefulopenssl.html" target="_top">Useful OpenSSL commands (from NCSA)</a> - e.g. how to convert the format of your certificate.
</li></ul> 
<p />
<p />
<p />
<h1><a name="Comments"></a> Comments </h1>
<p />
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/GetHostServiceCertificates" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<p />
<!-- CONTENT MANAGEMENT PROJECT
<p />
   DEAR DOCUMENT OWNER
   <code><b>===============</b></code>
<p />
   Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER          = <span class="twikiNewLink">AnandPadmanabhan<a href="/bin/edit/Documentation/Release3/AnandPadmanabhan?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="AnandPadmanabhan (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = Security
</li></ul> 
<p />
   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (Scientist|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = <span class="twikiNewLink">HowTo<a href="/bin/edit/Documentation/Release3/HowTo?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="HowTo (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define if this document in general needs to be reviewed before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
   Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
   change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
   change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 0
</li></ul> 
<p />
   change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 0
</li></ul> 
<p />
<p />
   DEAR DOCUMENT REVIEWER
   <code><b>==================</b></code>
<p />
   Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">MarcoMambelli<a href="/bin/edit/Documentation/Release3/MarcoMambelli?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="MarcoMambelli (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 ) <ul>
<li> Local REVIEW_PASSED  = 2
</li></ul> 
<p />
<p />
   DEAR DOCUMENT TESTER
   <code><b>================</b></code>
<p />
   Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">MarcoMambelli<a href="/bin/edit/Documentation/Release3/MarcoMambelli?topicparent=Documentation/Release3.GetHostServiceCertificates" rel="nofollow" title="MarcoMambelli (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 ) <ul>
<li> Local TEST_PASSED    = 2
</li></ul> 
<p />
-->
-- <a href="/bin/view/Main/AnandPadmanabhan" class="twikiLink">AnandPadmanabhan</a> - 8 Apr 2013</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GetHostServiceCertificates</span> <br />    
Topic revision: r31 - 06 Feb 2017 - 18:41:31 - <a href="/bin/view/Main/BrianLin" class="twikiLink">BrianLin</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />