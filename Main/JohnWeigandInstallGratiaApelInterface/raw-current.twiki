



---+!! Install Gratia-APEL Interface

%TOC%

%STARTINCLUDE%

---+ About this Document
This document is for the individual or group responsible for running the interface between Gratia and the APEL/WLCG/EGI accounting systems.
Here we describe how to install and configure the Gratia-APEL interface on a Linux machine.
When you install this service, as described here, You get all parts: !MySQL client, httpd, APEL SSM and the Gratia-APEL interface service.

This is currently only supported on an EL5 (Red Hat Enterprise Linux 5-based OS, including Red Hat Enterprise Linux 5-based OS).

---+ Introduction


---+ Requirements

---++ Host and OS
   * A host to install the Gratia Service (Pristine node desired)
   * OS is %SUPPORTED_OS%. The APEL/SSM interface software is currently only supported on EL5
   * Root access

---++ Users
At this time, _root_ user is the only one configured to run this interface.

---++ Certificates
You will need one service certificate.  This is a requirement of the APEL/SSM protocol.  
This certificate must be registered with the EGI broker network.
You can use a host certificate but the advantage of using a service certificate allows you to port the interface to another node without
re-registering it with APEL. Instructions for requesting a certificate can be found [[Trash.ReleaseDocumentationGetHostServiceCertificates][Here]].

Before you can send your messages to the APEL server, you must send your certificate DN to the APEL-SUPPORT@JISCMAIL.AC.UK 
mailing list, e.g. output from running:
&lt;pre class=&quot;screen&quot;&gt;
openssl x509 -subject -noout -in your_cert_pem_file
&lt;/pre&gt;

---+ Installation Procedure


---+ Configure


---+ Services

---+ Test


---+ Troubleshooting

---+ How to get Help?
To get assistance, please use [[HelpProcedure][Help Procedure]].

---+ References
Gratia Documents
   * [[Accounting/WebHome][Accounting Web/The Gratia project]]
   * [[Accounting/GratiaInterfacesApelLcg][Gratia Interfaces- APEL/WLCG]]
   * [[Accounting/ApelWlcgDevelopersCorner][APEL/WLCG Developers Corner twiki]].

APEL Documents
   * [[https://wiki.egi.eu/wiki/APEL/SSM][APEL SSM]]
   * [[https://wiki.egi.eu/wiki/APEL/Server][APEL/Servier]]


---+ Comments
%COMMENT{type=&quot;tableappend&quot;}%


%STOPINCLUDE%

&lt;!-- MAJOR UPDATES
For significant updates to the topic, consider adding your &#39;signature&#39; (beneath this editing box) !--&gt;
---++!! Major updates
&lt;!--Future editors should add their signatures beneath yours!--&gt;
-- Main.JohnWeigand - 08 Apr 2013

