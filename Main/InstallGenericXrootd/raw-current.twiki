%TOC{depth=&quot;3&quot;}%

---++ About This Guide

[[http://xrootd.org/][XRootD]] is a hierarchical storage system that can be used in a variety of ways to access data, typically distributed among actual storage resources. One way to use !XRootD is to have it refer to many data resources at a single site, and another way to use it is to refer to many storage systems, most likely distributed among sites. An !XRootD system includes a _redirector_, which accepts requests for data and finds a storage repository&amp;nbsp;&amp;mdash; locally or otherwise&amp;nbsp;&amp;mdash; that can provide the data to the requestor.

Use this page to learn how to install, configure, and use an !XRootD storage server for anonymous read-only access to a filesystem.


---++ Before Starting

Before starting the installation process, consider the following points:

   * *User IDs:* If it does not exist already, the installation will create the Linux user ID =xrootd= &lt;!-- no fixed UID --&gt;
   * *Networking:* The !XRootD service uses port 1094 by default


%INCLUDE{&quot;Documentation/Release3/YumRepositories&quot; section=&quot;OSGRepoBrief&quot; }%

---++ Install !XrootD Server

An installation of the !XRootD server consists of the server itself and its dependencies. Install these with Yum:

&lt;pre class=&quot;rootscreen&quot;&gt;%UCL_PROMPT_ROOT% yum install xrootd&lt;/pre&gt;

---++ Configuring the !XRootD Server

The default configuration of !XrootD from the OSG is designed for a clustered xrootd system.  Since we are installing a *standalone* !XrootD server, we have to change the configuration.

In the file =/etc/sysconfig/xrootd=, uncomment the following line:

&lt;pre class=&quot;file&quot;&gt;XROOTD_DEFAULT_OPTIONS=&quot;-l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-standalone.cfg -k fifo&quot;&lt;/pre&gt;

Next, we have to specify what directory to share, and what permissions are available on that directory.  In the file =/etc/xrootd/xrootd-standalone.cfg=, locate the line:

&lt;pre class=&quot;file&quot;&gt;all.export %RED%/tmp%ENDCOLOR%&lt;/pre&gt;

Replace the =%RED%/tmp%ENDCOLOR%= with the directory you wish to give others access.  Further, add the option =readonly= after the directory to enforce read-only access of the shared directory.

As an example, if we are sharing the directory =/store=, the option would look like:

&lt;pre class=&quot;file&quot;&gt;all.export /store readonly&lt;/pre&gt;


---++ Start the !XrootD Service

Starting the !XrootD service is through the usual =service= command:

&lt;pre class=&quot;rootscreen&quot;&gt;service xrootd start&lt;/pre&gt;

---++ Testing !XrootD

To test our new !XrootD server, we must:

   1. Install the =xrootd-client= package.
   &lt;pre class=&quot;rootscreen&quot;&gt;yum install xrootd-client&lt;/pre&gt;
   1. Create a test file in the directory we configured to share above.
   &lt;pre class=&quot;rootscreen&quot;&gt;dd if=/dev/urandom of=/store/random.big bs=1M count=20&lt;/pre&gt;
   1. Run the =xrdcp= command to test copy that file.
   &lt;pre class=&quot;rootscreen&quot;&gt;xrdcp root://localhost:1094//store/random.big ./&lt;/pre&gt;
   1. Confirm that both files are the same
   &lt;pre class=&quot;rootscreen&quot;&gt;md5sum /store/random.big ./random.big&lt;/pre&gt;

---++ Debugging Failures

If any failures occur during testing or otherwise, it can always be useful to look at the !XrootD logs located in =/var/log/xrootd=.  Further, the =xrdcp= command can increase the debugging and verbosity with the =-d3= option.

&lt;pre class=&quot;rootscreen&quot;&gt;xrdcp %RED%-d3%ENDCOLOR% root://localhost:1094//store/random.big ./&lt;/pre&gt;  
