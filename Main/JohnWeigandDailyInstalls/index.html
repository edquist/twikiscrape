<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> JohnWeigandDailyInstalls &lt; Main &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Main/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Main/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Main/JohnWeigandDailyInstalls?_T=16 Feb 2017" type="application/x-wiki" title="edit JohnWeigandDailyInstalls" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Main/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Main/JohnWeigandDailyInstalls"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFEFA6;
	}
	.patternBookView {
		border-color:#FFEFA6;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--TABLEPLUGIN_twikiAttachmentsTable--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#twikiAttachmentsTable td {border-style:solid none;}
.twikiTable#twikiAttachmentsTable th {border-style:solid none;}
.twikiTable#twikiAttachmentsTable td {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable th {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable td {vertical-align:top;}
.twikiTable#twikiAttachmentsTable th {background-color:#eceef2;}
.twikiTable#twikiAttachmentsTable th.twikiSortedCol {background-color:#e0e3e9;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#f2f3f6;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol0 {text-align:center;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol1 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol2 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol3 {text-align:right;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol4 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol5 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol6 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol7 {text-align:center;}
</style></head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Daily_Installs"></a> Daily Installs </h1>
<p />
<!--
<p /> <ul>
<li> Set VIEWTHISTOPIC = <div class="twikiSmall"><a href="JohnWeigandDailyInstalls">View this section</a></div>  -->
</li></ul> 
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Daily_Installs"> Daily Installs</a> <ul>
<li> <a href="?cover=print#Background"> Background</a>
</li> <li> <a href="?cover=print#Minimal_machine_requirements"> Minimal machine requirements</a>
</li> <li> <a href="?cover=print#Basic_Design"> Basic Design</a>
</li> <li> <a href="?cover=print#Caveats"> Caveats</a>
</li> <li> <a href="?cover=print#Disclaimers"> Disclaimers</a>
</li> <li> <a href="?cover=print#General_Installation_Information"> General Installation Information</a> <ul>
<li> <a href="?cover=print#Directory_structure"> Directory structure</a>
</li> <li> <a href="?cover=print#osg_install_sh_script"> osg-install.sh script</a>
</li> <li> <a href="?cover=print#cron_processes"> cron processes</a>
</li> <li> <a href="?cover=print#environment_files"> environment files</a>
</li></ul> 
</li> <li> <a href="?cover=print#Installations"> Installations</a> <ul>
<li> <a href="?cover=print#Compute_Element_CE_Worker_Node_W"> Compute Element (CE) / Worker Node (WN)</a> <ul>
<li> <a href="?cover=print#Worker_Node_WN"> Worker Node (WN)</a>
</li></ul> 
</li> <li> <a href="?cover=print#GUMS"> GUMS</a>
</li> <li> <a href="?cover=print#VOMS"> VOMS</a>
</li> <li> <a href="?cover=print#Gratia_Collector"> Gratia Collector</a>
</li></ul> 
</li> <li> <a href="?cover=print#Ignore_this_section_for_now"> Ignore this section for now</a>
</li> <li> <a href="?cover=print#tarballs"> tarballs</a>
</li></ul> 
</li></ul> 
</div>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Background"></a> Background </span></h2>
The intent of these processes is to perform a full automated installation of an OSG CE,VOMS, GUMS and WN cache install on a regular, generally daily, basis in order to verify the integrity of the installation process and to catch any problems in a timely manner.  It is a combination of shell and expect scripts using a set of environmental variables set in an osg-TYPE.RELEASE (eg. osg-ce.120) named script. The scripts are based on the OSG Installation instructions for the OSG and ITB here: <ul>
<li> <a href="https://twiki.grid.iu.edu/bin/view/ReleaseDocumentation/WebHome" target="_top">https://twiki.grid.iu.edu/bin/view/ReleaseDocumentation/WebHome</a>
</li> <li> <a href="https://twiki.grid.iu.edu/bin/view/Trash/Trash/Trash/Trash/Integration/WebHome" target="_top">https://twiki.grid.iu.edu/bin/view/Trash/Trash/Trash/Trash/Integration/WebHome</a> (note: at this time, 12/3/09, I am not certain there is any ITB release doc anymore)
</li></ul> 
<p />
This process started back in July 2005 (OSG 0.2.0) when the installation process was a of a question/answer nature. This necessitated the use of the <a href="http://expect.nist.gov/" target="_top">Expect software tool for automating interactive applications</a>.
The Expect scripts provide the capability of interacting with the various question/answer prompts that occur during the installation/configuration process. Effective with OSG 1.0, the question/answer nature of the installation process has been eliminated.  However, there is still a need to use the Expect tool for some of the configuration required after the initial installation.
<p />
All these process/programs must be run as root.  There is a verification step in most that will error the process if root is required.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Minimal_machine_requirements"></a> Minimal machine requirements </span></h2>
These OSG services are currently running on xen nodes with: <ul>
<li> 1Gb memory
</li> <li> 10 Gb disk
</li></ul> 
<p />
If you are using a shared file system for your Unix HOME directories, this package should not be installed there as there will be conflicts.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Basic_Design"></a> Basic Design </span></h2>
The basic design assumes you start with a "virgin" machine just as an admin would do if installing any of the OSG services when first getting started.    <ol>
<li> It is designed to be run on a recurring basis (daily or as needed), first restoring the machine to it's original state and then, performing the installation. 
</li> <li> It will capture the entire installation session (stdin/stdout/stderr) of everything that occurs during the installation process.  This facilitates trouble-shooting when problems do occur.
</li> <li> It sends an email notification of the success/failure of the installation
</li> <li> It performs a comparison of the current software being installed (versions) and those from the previous installation and sends an email notification only if changes are detected.
</li></ol> 
<p />
The basic "driver', so to speak, for the process is an environmental script containing variables used during the installation process.  Most of these variables represent the data you would need to know when performing a manual installation/configuration.  The others are for the automated installation itself, i.e, location of logs files, location of certificates, etc.  All of these variable are prefaced with the string "OIV_" so as not to contend (hopefully) with variables used in the OSG services being installed.
<p />
The software, while maintained in CVS, does not use conventional tagging to define the OSG/ITB version as most other systems do.  It uses the directory structure and the PATH variable to allow for installing an OSG and ITB/VTB "set".  This is maybe best shown with an example of the current release structure for the CE installation:
<p />
For an OSG 1.2 installation, the PATH variable for the installation process is set as <ul>
<li> PATH=./osg-installation-validation/OSG-120/CE/bin;YOUR_OTHER STUFF
</li></ul> 
<p />
For an ITB 1.2+ installation, the PATH variable for the installation process is set as <ul>
<li> PATH=./osg-installation-validation/ITB-130/CE/bin;./osg-installation-validation/OSG-120/CE/bin;YOUR_OTHER STUFF
</li></ul> 
<p />
This was done so it is easier to detect changes from one release to another as only the processes for the next ITB release are changed in that PATH.  Note, that this procedure was working fairly well when we were actually changing release numbers and caches at the 1.n level.  Since we don't do this anymore, it is a tad more difficult to maintain the installation software.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Caveats"></a> Caveats </span></h2> <ol>
<li> You <strong>DO</strong> have to know what you're doing and understand the OSG CE/VOMS/GUMS/WN environment to a fair degree in order to set the environmental variables correctly.
</li> <li> Installation scripts are not available for any Storage Element installations.
</li> <li> Condor is the only job manager supported.
</li> <li> For CE installs, the Worker Node is assumed to be on the Compute Element (CE)
</li> <li> The process will not handle installing multiple services on the same machine with the CE/WN being the exception
</li> <li> Firewalls are not handled at all
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Disclaimers"></a> Disclaimers </span></h2>
Since this script is intended for validation of the OSG installation, it is NOT intended as a fully automated OSG CE installation.  There are several shortcuts taken to facilitate daily cleanup and setup, mainly for Compute Element (CE) installations.: <ol>
<li> For CE/WN installs, the user work directories $APP, $DATA, $TMP and $TMP_WN are created as  normal directories (not separate file systems with any minimum space requirements defined) in the OSG installation directory (VDT_LOCATION)  under a directory called OSG.DIRS.
</li> <li> Condor is the only job manager supported and is setup with only the CE node functional.  It is also installed in the VDT_LOCATION of the CE.
</li> <li> Ganglia (or any equivalent) is not installed.  So the Trash.ReleaseDocumentationMonALISA line in the vdtFarm.conf file is not activated for ganglia.
</li> <li> If desired, site registration must be performed manually based on the instructions in the OSG CE installation guide.  The site is automatically set to active in the last step of the installation if successful. 
</li> <li> All certificates must be obtained before starting the installation. They should be stored in a separate directory from this source other than the normal /etc/grid-security location. The /etc/grid-security directory is totally removed during the installation process. They should be protected from accidental deletion by using 'chattr' command to make them immutable. <ul>
<li> mkdir YOUR_PATH/certificates
</li> <li> chattr -R +i YOUR_PATH/certificates
</li></ul> 
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="General_Installation_Information"></a> General Installation Information </span></h2>
<p />
<h3><a name="Directory_structure"></a> Directory structure </h3>
The directory structure of the installation software (osg-installation-validation) is  RELEASE/SERVICE/bin and etc.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <pre>ITB-130/bin
ITB-130/CE/bin
ITB-130/CE/etc
ITB-130/WN-CLIENT/bin
ITB-130/WN-CLIENT/etc
ITB-130/CE-CLIENT/bin
ITB-130/CE-CLIENT/etc
ITB-130/GUMS/bin
ITB-130/GUMS/etc
ITB-130/VOMS/bin
ITB-130/VOMS/etc
ITB-130/COLLECTOR/bin
ITB-130/COLLECTOR/etc
</pre> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> <pre>OSG-120/bin
OSG-120/CE/bin
OSG-120/CE/etc
OSG-120/WN-CLIENT/bin
OSG-120/WN-CLIENT/etc
OSG-120/CE-CLIENT/bin
OSG-120/CE-CLIENT/etc
OSG-120/GUMS/bin
OSG-120/GUMS/etc
OSG-120/VOMS/bin
OSG-120/VOMS/etc
OSG-120/COLLECTOR/bin
OSG-120/COLLECTOR/etc
</pre> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h3><a name="osg_install_sh_script"></a> osg-install.sh script </h3>
The main script to perform the installations is <em>osg-install.sh</em> . 
<pre>
Usage: osg-install.sh type release install|remove|shutdown  accts!noaccts

      Note 1: You must be in this script's directory in order for it to set
              the PATH variable correctly.

      Note 2: You must be root.

      type:  ce        - CE node installation
             voms      - VOMS installation
             gums      - GUMS installation
             wn-client - wn-client installation
             ce-client - ce-client installation
             collector - Gratia collector installation

      release: 130
                   120
 
      install/remove/shutdown 
         'install'  shutsdown/removes and installs 
         'remove'   will just wipe everything clean except the logs
         'shutdown' will turn everything off, but not remove anything

      accts|noaccts (only required for a CE installation)
         'accts'   specifies UNIX accounts will be created/deleted
         'noaccts' specifies UNIX accounts will NOT be created/deleted
                   It assumes all necessary accounts already exist.
                   This is the case were UNIX accounts are administered
                   centrally or in some such manner.

      This program uses the 'expect' software package to perform the 
      question and answer parts of the installation process.  
       - Download site: http://expect.nist.gov/
       - Latest released used here: expect-5.42.1-1.src.rpm 
</pre>
<p />
<h3><a name="cron_processes"></a> cron processes </h3>
There is cron file (one for each service type) that should  be installed to allow you to run this on a regular basis
<pre>
./osg-installation-validation/crontabs/
   ce-cron  (this also contains the wn-client installation)
   voms-cron
   gums-cron
   collector-cron
</pre>
<p />
The cron file (if you decide to use it) will need to be modified as it must have the full path.
<p />
<strong>IMPORTANT</strong>: These files are reinstalled at the end of each installation process.  So, if you have an existing root cron defined, you should append/prepend those entries to this file.  This will insure a clean, consistent environment.  This is one "system" file that is common to all of the installations.  You <strong>must</strong> remember to update this file whenever root's crontab requires updating.  The CE installation has several other system files 'restored" like this and are described in that section.  This root crontab is common to all installations.
<p />
<strong>WARNING</strong>: If executing from the command line, do not 'su' to become root.  Use ssh.  The 'su' does not give you  a completely clean root environment necessarily which can result in unexpected behavior.
<p />
If you are executing from the command line, use the cron entry as the example of how to do it.
<p />
<h3><a name="environment_files"></a> environment files </h3>
For each type of installation, there is a file with environmental variables that must be set for your installation.  A copy of this file can be found in the RELEASE/SERVICE/etc directory named osg-SERVICE.env.  Using the CE service as an example, the file would be ./OSG-120/CE/etc/osg-ce.env.
<p />
You need to copy the file to osg-installation-validation and name replacing the 'env' part with the release, e.g. - osg-ce-120.   When you execute the <em>osg-install.sh</em> script, the type and release arguments are used to source the appropriate file.  Additionally the PATH is set so you only execute the appropriate scripts.
<p />
Disclaimer: The individual scripts may or may not contain appropriate comments for the variables.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Installations"></a> Installations </span></h2>
The following are common to all types of installs <ol>
<li> Shuts down the previous installation if running
</li> <li> Removes the previous installation entirely
</li> <li> Restores any system files that were modified <ul>
<li> root crontab for all types
</li> <li> for the CE install: several which are defined in that area
</li></ul> 
</li> <li> Downloads and installs pacman
</li> <li> Creates the /etc/grid-security directory and populates it with the certificates required for the service type being installed.
</li> <li> Installs the CA Certificates package
</li> <li> Runs the installation for the OSG service type selected
</li> <li> Compares the current version (vdt_version/osg-version) to the previously installed one. Sends email if a change is detected.
</li> <li> Performs some testing /validation as appropriate for the service type
</li></ol> 
<p />
<p />
<h3><a name="Compute_Element_CE_Worker_Node_W"></a> Compute Element (CE) / Worker Node (WN) </h3>
<strong>Note this dependency</strong>: If you are using the daily installed GUMS to work with your CE node, you need to make sure it is installed about 1 hour prior to starting the CE installation.  In addition, if the GUMS install fails, your CE install will too.  Also note that if you don't have a GUMS server the CE install will fail unless manually modified.
<p />
The CE install performs the following: <ol>
<li> Installs the VDT supported version of Condor (optionally it can install a different Condor version from a tarball), activates and does a basic test.
</li> <li> Installs the OSG CE package
</li> <li> Installs the OSG Condor job manager setup package
</li> <li> Installs the OSG Managed Fork package
</li> <li> Creates the basic directories required for a CE installation.
</li> <li> Creates an rsvuser account
</li> <li> Validates the config.ini file against the "last known" config.ini (a template) to detect any changes. Email is sent if changes are detected.
</li> <li> Validates gridmap authorization mode <ul>
<li> creates a new grid-mapfile for the unix account and proxy below <ul>
<li> creates a unix account for testing
</li> <li> does a grid-proxy-init of root's host certificate
</li></ul> 
</li> <li> runs configure-osg for gridmap authorization
</li> <li> updates the /etc/sudoers for gridmap authorization mode
</li> <li> runs a series of  job submits and url copies for both gt2 (pre-ws) and gt4 (ws) GRAM.
</li> <li> runs site_verify.pl (this can only be run at this point as root needs to be authorized as a user using the temporary grid-mapfile
</li> <li> executes edg-mkgridmap, then removes it
</li></ul> 
</li> <li> Validates prima authorization mode (All but the job submits.  These are performed by another cron entry run using a "real" user's proxy after the installation completes.) <ul>
<li> runs configure-osg for prima authorization
</li> <li> updates the /etc/sudoers for prima authorization mode
</li> <li> test the GUMS-GIP probe
</li></ul> 
</li> <li> Creates all unix accounts and $HOME directories for all users defined in GUMS
</li> <li> validates a set of files/directories for proper permissions
</li> <li> updates the /etc/hosts.allow file allowing outside access
</li> <li> performs some rudimentary test on CEMon  <ul>
<li> verify it is reporting to each consumer
</li> <li> verify it can retrieve classads from the ReSS server
</li> <li> runs verify-gip-for-cemon-wrapper
</li></ul> 
</li> <li> runs pretty_gip_info.py (this was disabled with GIP 1.1.4 until a decision is made as to this being production or not)
</li> <li> runs all the RSV probes manually
</li></ol> 
<p />
The following files/directories are affected by this installation: <ol>
<li> /etc/grid-security - this directory is removed and re-created with each installation
</li> <li> /etc/xinetd.d files <ul>
<li> globus-gatekeeper
</li> <li> gsiftp
</li></ul> 
</li></ol> 
<p />
The system files shown below are also affected by the CE installation.  On the initial installation, the existing instance of these files are copy to a directory defined in the environment file and made immutable (to prevent accidental removal).  They are restored with each installation.  <ol>
<li> /etc/services
</li> <li> /etc/host.allow
</li> <li> /etc/sudoers
</li> <li> /etc/passwd
</li> <li> /etc/group
</li></ol> 
<strong>IMPORTANT</strong>: If you need to update these for new users (or whatever), you should make the changes in the "saved" directory.
<p />
<h4><a name="Worker_Node_WN"></a> Worker Node (WN) </h4>
There is no real dependency on the CE node installation for this to work.  However, it is designed to be installed on the CE node and will not likely work if installed a 'real' worker node.  It was created to allow for testing of the glideinWMS process using glexec.  It is installed in a different directory from the CE install.
<p />
The WN install performs the following: <ol>
<li> creates Unix accounts for glexec
</li> <li> creates the necessary tracking groups for glexec
</li> <li> installs the OSG wn-client package
</li> <li> keep VDT wn-client services disabled as they will conflict with the same CE services on the node
</li> <li> links the worker node to the CAs of the CE installation (this may be hard coded at this point in time)
</li> <li> updates the /etc/glexec/contrib/gums_interface/getmapping.cfg file to point to the GUMS server 
</li> <li> updates the /etc/glexec/tracking_groups.cfg file for the tracking groups created.
</li></ol> 
<p />
<h3><a name="GUMS"></a> GUMS </h3>
<strong>Note this dependency</strong>: If you are using the daily installed GUMS to work with your CE node, you need to make sure it is installed about 1 hour prior to starting the CE installation.  In addition, if the GUMS install fails, your CE install will too.
<p />
The GUMS install performs the following: <ol>
<li> installs the OSG GUMS package
</li> <li> enables all GUMS services
</li> <li> adds a set of admins so others (and myself) can test/use the UI from one of the files in ./GUMS/etc (this also is a validatation of a command line script)
</li> <li> updates the gums.config file from the OSG gums.template 
</li> <li> creates the necessary pool accounts for those groups requiring them.
</li> <li> runs './gums/gums updateGroups' to populate GUMS
</li> <li> tests the gums-host script script <ul>
<li> generateVOGridMapfile
</li> <li> generateGridMapfile
</li> <li> generateGrid3UserVoMap
</li></ul> 
</li> <li> tests the GUMS-GIP probe
</li></ol> 
<p />
The following files/directories are affected by this installation: <ol>
<li> /etc/grid-security - this directory is removed and re-created with each installation
</li></ol> 
<p />
<h3><a name="VOMS"></a> VOMS </h3>
The VOMS install is not dependent on any other installs nor is it depended on at this time.  It is basically a stand-alone install/test.
<p />
The VOMS install performs the following: <ol>
<li> installs the OSG VOMS package
</li> <li> enables all VOMS services
</li> <li> configures VOMS for VOs and Users defined in an ./VOMS/etc file
</li> <li> runs a series of voms-proxy-init/info tests
</li></ol> 
<p />
The following files/directories are affected by this installation: <ol>
<li> /etc/grid-security - this directory is removed and re-created with each installation
</li></ol> 
<p />
<h3><a name="Gratia_Collector"></a> Gratia Collector </h3>
Nothing as yet... no time.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Ignore_this_section_for_now"></a> Ignore this section for now </span></h2>
Using cron is the intended method for executing the installation as it insures a clean environment.
<p />
You will need to make changes to some of the variables defined in the osg-install.env file for your site.  The critical ones are:
<p />
  1. Make sure the files defined by this variable are clean of any  vdt/osg produced data as the installation process will copy them
     into the OIV_BACKUP_LOCATION directory (it will create it I hope) OIV_BACKUP_FILES
<p />
  2. Verify that none of the services defined by these variables already exist or have any vdt/osg related changes to them.
       OIV_XINETD_SERVICES
       OIV_INITD_PROCESSES
<p />
  3. Make sure you have your host and ldap certificate in the directory defined by this variable:
       OIV_CERTIFICATE_LOCATION
<p />
  4. This variables should be changed for your particular installation:
       OIV_MAIL_RECIPIENTS
       OIV_ROOT
       SITE_NAME
       VO_SPONSOR
       POLICY_URL
       ML_MONITOR_GROUP
       ML_CONTACT_NAME
       ML_SERVER_LOCATION
       ML_SERVER_COUNTRY
       ML_SERVER_LATITUDE
       ML_SERVER_LONGITUDE
       OIV_GUMS_SERVICE
<p /> <ol>
<li> Verify these the accounts defined by this variable do not exist (you can change them if you like):       OIV_TEST_USER       OIV_MISCI_USER
</li></ol> 
<p /> <ol>
<li> Append any root cron entries to the ./crontab/root cron.  Uncomment the release you wish to install and set the time.      Effect the cron.      Pray <img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/SmiliesPlugin/smile.gif" alt="smile" title="smile" border="0" />
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="tarballs"></a> tarballs </span></h2> <ul>
<li> <a href="https://twiki.opensciencegrid.org/twiki/pub/Main/JohnWeigandDailyInstalls/osg-installation-validation.2009-12-04.tgz" target="_top">OSG-120/ITB-130 12/4/2009</a>
</li></ul> 
<p />
-- <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> - 02 Dec 2009</div><!-- /patternTopic-->
<p />
<p />
<div class="twikinetRounded twikinetRoundedAttachments"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="twikiAttachments">
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="topicattachmentslistshow" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span> <span id="topicattachmentslisthide" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="topicattachmentslisttoggle" class="twistyRememberSetting twistyContent twikiMakeHidden twistyInited">
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table summary="Topic attachments" cellspacing="0" id="twikiAttachmentsTable" cellpadding="0" class="twikiTable" rules="rows" border="1"><caption>Topic attachments</caption>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">I</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attachment</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Action</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=3;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=4;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Date</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol5"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=5;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Who</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol6 twikiLastCol"> <a rel="nofollow" href="/bin/view/Main/JohnWeigandDailyInstalls?cover=print;sortcol=6;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <img width="16" alt="zip" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/zip.gif" height="16" border="0" /><span class="twikiHidden">tgz</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1 twikiLast"> <a href="/twiki/pub/Main/JohnWeigandDailyInstalls/osg-installation-validation.2009-12-04.tgz">osg-installation-validation.2009-12-04.tgz</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2 twikiLast"> <a href="/bin/attach/Main/JohnWeigandDailyInstalls?filename=osg-installation-validation.2009-12-04.tgz;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3 twikiLast"> 108.5&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4 twikiLast"> <span class="twikiNoBreak">04 Dec 2009 - 16:51</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5 twikiLast"> <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol twikiLast"> osg-installation-validation.2009-12-04.tgz </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
</div></div> <!--/twistyPlugin--></div><!--//twikiAttachments--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--></div><!-- /patternContent-->
<hr />
This topic: Main<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a> &gt; <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>JohnWeigandDailyInstalls</span> <br />    
Topic revision: r6 - 07 Feb 2017 - 19:16:29 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />