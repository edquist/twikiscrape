 &lt;!--
   * Set VIEWTHISTOPIC = &lt;div class=&quot;twikiSmall&quot;&gt;&lt;a href=&quot;%TOPIC%&quot;&gt;View this section&lt;/a&gt;&lt;/div&gt;
--&gt;

---+ Gratia Certificates

%TOC% 

%STARTINCLUDE%


---++ Installing CA certificates for administrative login
%VIEWTHISTOPIC%

If the host you are installing your collector on does *not* have a host/http certificate and the VDT CA Certificates package installed, you will have do so before you proceed.

---+++ Host/http Certificates
To obtain a host/http certificate, contact your UNIX administrator.

The host certificates should be installed in */etc/grid-security* as:
&lt;verbatim&gt;
-rw-r--r-- 1 root root 1477 May 19 10:08 hostcert.pem
-rw------- 1 root root 1675 May 19 10:09 hostkey.pem
&lt;/verbatim&gt;

The http certificate should be installed in */etc/grid-security* as:
&lt;verbatim&gt;
drwxr-xr-x 2 root root 4096 May 19 09:34 http
--rw-r--r-- 1 root root 1485 May 19 09:34 httpcert.pem
--rw------- 1 root root 1675 May 19 09:34 httpkey.pem
&lt;/verbatim&gt;


If you are running the collector as a _non-root_ user like _daemon_ , the ownership of the _http_ directory and _.pem_ files should be that user (e.g. _daemon_ ).

---+++ VDT CA Certificates package
For additional information on the OSG CA certificates process, refer to the OSG Certificate Authority Distribution documentation found here:
   * https://twiki.grid.iu.edu/bin/view/Documentation/CaDistribution
If you do not have *pacman* installed, you can install it in */usr/local*:
   * cd /usr/local
   * mkdir pacman
   * cd pacman 
   * wget http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-latest.tar.gz
   * tar zxf pacman-latest.tar.gz

To install the VDT CA Certificates package, you will need to go to the VDT site.
   * For information on how VDT installations work with pacman, refer to http://vdt.cs.wisc.edu/download.html
   * The latest VDT packages can be found here: http://vdt.cs.wisc.edu/documentation.html
   * The CA Certificates package for the 1.10.1 release is: http://vdt.cs.wisc.edu/vdt_1101_cache/CA-Certificates.pacman

To install the CA-Certificates package:
   * cd /usr/local/pacman/pacman-[VERSION}
   * source setup.sh
   * cd /usr/local
   * mkdir vdt-certificates-{VERSION]
   * cd vdt-certificates-{VERSION]
   * pacman -get http://vdt.cs.wisc.edu/vdt_1101_cache:CA-Certificates

Answer &quot;y&quot; to all the questions.

When asked where to install the certificates, it is your choice. Most common place is /etc/grid-security. If you choose another location, you will need to update the specified locations of the host and HTTP certificates and keys; and of the CA certificates and CRLs in the collector configuration (.dat) file.

In order obtain the OSG maintained list of CA&#39;s, you will have to edit the following configuration file:
   * $VDT_LOCATION/vdt/etc/vdt-update-certs.conf

adding the following line to the file:
   * cacerts_url = http://software.grid.iu.edu/pacman/cadist/ca-certs-version

Then, install the certificates:
   * cd /usr/local/vdt-certificates-{VERSION]
   * source setup.sh 
   * ./vdt/sbin/vdt-setup-ca-certificates --root (or --local depending on how you answered the question on the initial installation.

After all of the above has been done, you will need to turn on the VDT installed services (crons) necessary to maintain the certificates.
   * cd /usr/local/vdt-certificates-{VERSION]
   * source setup.sh
   * vdt-control --on

*Note:* If you are upgrading your certificates, you should then re-cycle the collectors so they re-read the certificates. You may run into some problems if you don&#39;t.

%STOPINCLUDE% 

&lt;!-- 
MAJOR UPDATES
For significant updates to the topic, consider adding your &#39;signature&#39; (beneath this editing box) 
--&gt;
&lt;!--
Future editors should add their signatures beneath yours
--&gt;


-- Main.JohnWeigand - 29 Oct 2008

