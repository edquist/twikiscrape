<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaDailyBuilds &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaDailyBuilds?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaDailyBuilds" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaDailyBuilds"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Gratia_Daily_Builds"></a> Gratia Daily Builds </h1>
<p />
<!-- <ul>
<li> Set VIEWTHISTOPIC = <div class="twikiSmall"><a href="GratiaDailyBuilds">View this section</a></div>
</li></ul> 
-->
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Gratia_Daily_Builds_AN1"> Gratia Daily Builds</a>
</li></ul> 
</div>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Gratia_Daily_Builds_AN1"></a> Gratia Daily Builds </span></h2>
<p />
<div class="twikiSmall"><a href="GratiaDailyBuilds">View this section</a></div>
<p />
On a daily basis ( <strong><em>gr6x3</em></strong> cron), a script is run to bring down the HEAD node of the Gratia svn source forge repository and perform a <strong><em>'</em></strong> <em>make release</em> <strong><em>'</em></strong>.
<p />
This allows developers to always have the latest Gratia build available for installation on their test instance.
<p />
Additionally, these daily builds will be used to perform daily upgrades of the Gratia instances described in the <a href="/bin/view/Accounting/GratiaDailyBuilds#Daily_installs_and_upgrades" class="twikiCurrentTopicLink twikiAnchorLink">Daily installs and upgrades</a> section of this document.
<p />
In svn, the script resides in <strong><em>./gratia/build-scripts/nightly-build.sh</em></strong> .
<p />
<strong>Cron entry:</strong>
<pre>
########################################################################
#-----------------------------------------------------------------------
# Nightly gratia build in /home/gratia/gratia-builds
#-----------------------------------------------------------------------
05 0 &#42; &#42; &#42;  /home/gratia/cron-scripts/nightly-build.sh --mail gratia-builds&#64;fnal.gov
#
########################################################################
</pre>
<p />
<strong>Usage: nightly-build.sh [--dir directory] [--mail addresses] [--files n] [--help]</strong>
<pre>
This script will perform an export of the HEAD of the Gratia SVN repository
and then perform a &#39;make release&#39; on the software.  

NOTE: Since it is an export, you will not be able to effect any
      commits in this area.

It will create a directory called gratia-builds in your $HOME
area unless overridden using the --dir argument. If the directory does not
exist, it will create it.

Parent source directory.. /home/gratia/gratia-builds/gratia-2008-08-14
Log file................. /home/gratia/gratia-builds/gratia-2008-08-14.log

SVN: svn

Arguments:
   --dir   - the parent directory for the gratia-builds directory
   --mail  - email address(es) to be used on completion of the build.
   --files - number of build directories to retain in /home/gratia/gratia-builds
             Since the source directory and log files are timestamped by day,
             this argument allows you to specify the number (not days) of
             builds to retain.  This is a housekeeping thing.
             It is not perfect either.  If you have too many successive days
             with failures, the symlink to the last good build will be
             invalid.
             Default: 7

Cron entry note: do not redirect stdout/stderr to /dev/null or you may be
                 oblivious to any uncaught errors.

If you run this more than once per day, the parent source directory will be
overwritten each time.  However the log file will be appended to.

On success, it will create a symbolic link to the newly built gratia source
directory called:
  /home/gratia/gratia-builds/gratia-latest

An email notification upon completion will be sent to:
  gratia-operation&#64;fnal.gov
</pre>
<p />
<p />
<p />
-- <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> - 20 Aug 2008
-- <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a> - 28 Oct 2009</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaDailyBuilds</span> <br />    
Topic revision: r4 - 24 May 2010 - 16:22:49 - <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />