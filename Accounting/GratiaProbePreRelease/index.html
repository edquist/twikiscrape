<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaProbePreRelease &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaProbePreRelease?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaProbePreRelease" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaProbePreRelease"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="OSG_Accounting_Services_Gratia_P"></a> OSG Accounting Services - Gratia - Probe Installation - <font color="#ff0000"> <strong>PRE-RELEASE PAGE</strong> </font> </span></h2>
<p />
<img src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" />     <font color="#ff0000"> The links on this page point to pre-release versions of the probe software. Please, use this software <strong>only</strong> if you have been sent to this page by a Gratia developer. </font>
<p />
<h3><a name="Preliminary_notes"></a> Preliminary notes </h3>
<p />
<OL>
<LI />Select the probe(s) you wish to install from the <a href="/bin/view/Accounting/GratiaProbePreRelease#ProbeDownloadTable" class="twikiCurrentTopicLink twikiAnchorLink">table of available probes</a>.<br />    
         <b>Note:</b> In general, the RPMs are non-architecture-specific. <b>However</b>, the <a href="/bin/view/Accounting/GratiaProbePreRelease#ProbeDownloadPbsLsf" class="twikiCurrentTopicLink twikiAnchorLink">PBS/LSF probe RPM</a> is a binary package built for a 32-bit i386 architecture. This is also true of the VDT distribution. If your platform is different, you will need to install the source RPM and follow the instructions for building it under the <i>Details</i> column in the table below.
<p />
<LI />People with VDT or OSG installations are advised to install using Pacman for those releases that provide their required probe (see the  below); if a probe you require is not available for your version or you require the latest version, please <a href="/bin/view/Accounting/GratiaProbePreRelease#RpmInstall" class="twikiCurrentTopicLink twikiAnchorLink">install from RPM</a>.
<p />
<LI />For all probe installations via Pacman or RPM, please read the appropriate detailed configuration notes ("Details" column in the <a href="/bin/view/Accounting/GratiaProbePreRelease#ProbeDownloadTable" class="twikiCurrentTopicLink twikiAnchorLink">probe table</a>).
<p />
<LI><b>Important:</b> If, previously, you had installed the probe(s) by RPM at sites where they were not yet available via OSG/VDT and are now upgrading to an OSG/VDT version that contains the probe(s), you must remove the RPM installed probe(s).  In addition, you should check your <i>root</i> crontab entry and remove the cron entry before upgrading.  The OSG/VDT installation will create a new cron entry for the probe. 
<p />
<LI />For Pacman installs, use the standard Pacman command to install the probes you require, for instance:
<p />
<pre>pacman -get Gratia-Condor-Probe</pre>
<p />
Notes:
<UL>
<LI />Please see the <a href="/bin/view/Accounting/ProbeConfigCondor#GratiaCondorGramPatch" class="twikiAnchorLink">installation notes for the condor probe</a> if you install it as it requires versions of VDT prior to 1.5.1 to be patched for operation with versions of Condor prior to v6.9.0. 
<LI />The Gratia-Probe-Common package will be pulled in as a dependency for all probes, so explicit installation is not required.
</UL>
<p />
<a name="ProbeDownloadTable"></a>
<h3><a name="Probe_availability"></a> Probe availability </h3>
<p />
<style type="text/css">
TD.cdata { text-align: center }
</style>
<p />
<table width="100%" border="1">
<thead />
<tr style="text-align: center; font-weight: bold">
<th id="probe" rowspan="2" />Probe
<th id="rpm" rowspan="2" />RPM
<th id="pname" rowspan="2" />VDT package name
<th colspan="2" scope="colgroup" />Available since
<th id="notes" rowspan="2" />Notes
<th id="details" rowspan="2" />Details
</tr>
<tr style="text-align: center; font-weight: bold">
<th id="osgver" />OSG / ITB
<th id="vdtver" />VDT
</tr>
<col width="1*" /><col width="2*" /><col width="2*" /><col width="1*" /><col width="1*" />
<col width="8*" /><col width="4*" />
<tbody />
<tr><a name="ProbeDownloadCommon">
<td headers="probe" style="font-weight: bold">ALL
<td headers="rpm" /><a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-common-0.12k-0.noarch.rpm">
gratia-probe-common-0.12k-0</a>
<td headers="pname" />Gratia-Probe-Common<td class="cdata"/>0.4.1<td class="cdata"/>1.3.10
<td headers="notes" />Common infrastructure, needed by all probes.
<td headers="details" />
</tr>
<tr><a name="ProbeDownloadCondor">
<td headers="probe" rowspan="2" />Condor
<td headers="rpm" />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-condor-0.12k-0.noarch.rpm">
gratia-probe-condor-0.12k-0</a>
<td headers="pname" rowspan="2" />Gratia-Condor-Probe
<td headers="osgver" class="cdata" rowspan="2" />0.4.1
<td headers="vdtver" class="cdata" rowspan="2" />1.3.10
<td headers="notes" />Condor probe (install on CE)<a href="/bin/view/Accounting/GratiaProbePreRelease#ProdReporting" class="twikiCurrentTopicLink twikiAnchorLink">1</a></sup>
<td headers="details" rowspan="2" /><a href="/bin/view/Accounting/ProbeConfigCondor" class="twikiLink">Condor probe configuration notes</a>
</tr>
<tr><a name="ProbeDownloadCondorItb">
<td headers="rpm" />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-condor-itb-0.12k-0.noarch.rpm">
gratia-probe-condor-itb-0.12k-0</a>
<td headers="notes" />Condor probe (install on ITB CE)<a href="/bin/view/Accounting/GratiaProbePreRelease#ItbReporting" class="twikiCurrentTopicLink twikiAnchorLink">2</a></sup>
</tr>
<tr><a name="ProbeDownloadPbsLsf">
<td headers="probe" rowspan=2 />PBS
<td headers="rpm" >
<p />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-0.12k-0.i386.rpm">
gratia-probe-pbs-lsf-0.12k-0</a>
<p />
<td headers="pname" rowspan=2 />Gratia-PBS-Probe
<td headers="osgver" class="cdata" rowspan="2" />-
<td headers="vdtver" class="cdata" rowspan="2" />1.6.0
<td headers="notes" />PBS probe (install on CE)<sup><a href="/bin/view/Accounting/GratiaProbePreRelease#ProdReporting" class="twikiCurrentTopicLink twikiAnchorLink">1</a></sup>
<td headers="details" rowspan="4" /><a href="/bin/view/Accounting/ProbeConfigPbsLsf" class="twikiLink">PBS/LSF probe configuration notes</a>
<p />
</tr>
<tr><a name="ProbeDownloadPbsLsfItb">
<td headers="rpm" />
<p />
<p />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-itb-0.12k-0.i386.rpm">
gratia-probe-pbs-lsf-itb-0.12k-0</a>
<p />
<p />
<p />
<td headers="notes" />PBS probe (install on ITB CE)<sup><a href="/bin/view/Accounting/GratiaProbePreRelease#ItbReporting" class="twikiCurrentTopicLink twikiAnchorLink">2</a></sup>
</tr>
<tr>
<td headers="probe" rowspan=2 />LSF
<td headers="rpm" >
<p />
<p />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-0.12k-0.i386.rpm">
gratia-probe-pbs-lsf-0.12k-0</a>
<p />
<p />
<p />
<td headers="pname" rowspan=2 />Gratia-LSF-Probe
<td headers="osgver" class="cdata" rowspan="2" />-
<td headers="vdtver" class="cdata" rowspan="2" />1.6.0
<td headers="notes" />LSF probe (install on CE)<sup><a href="/bin/view/Accounting/GratiaProbePreRelease#ProdReporting" class="twikiCurrentTopicLink twikiAnchorLink">1</a></sup>
</tr>
<tr>
<td headers="rpm" />
<p />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-itb-0.12k-0.i386.rpm">
gratia-probe-pbs-lsf-itb-0.12k-0</a>
<p />
<p />
<td headers="notes" />LSF probe (install on ITB CE)<sup><a href="/bin/view/Accounting/GratiaProbePreRelease#ItbReporting" class="twikiCurrentTopicLink twikiAnchorLink">2</a></sup>
</tr>
<tr>
<td headers="probe" />SGE
<td headers="rpm" />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-sge-0.12k-0.noarch.rpm">
gratia-probe-sge-0.12k-0</a>
<td headers="pname" class="cdata"/>-
<td headers="osgver" class="cdata"/>-
<td headers="vdtver" class="cdata"/>1.6.1a
<td headers="notes" />SGE probe (install on CE)<sup><a href="/bin/view/Accounting/GratiaProbePreRelease#ProdReporting" class="twikiCurrentTopicLink twikiAnchorLink">1</a></sup>
<td headers="details" /><a href="/bin/view/Accounting/ProbeConfigSge" class="twikiLink">SGE probe configuration notes</a>
</tr>
<!-- <tr>
<td headers="probe" />DCache
<td headers="rpm" />
<td headers="pname" />
<td headers="osgver" class="cdata"/>-
<td headers="vdtver" class="cdata"/>-
<td headers="notes" />
<td headers="details" />
</tr>
<tr>
<td headers="probe" />glexec
<td headers="rpm" />
<td headers="pname" />
<td headers="osgver" class="cdata"/>-
<td headers="vdtver" class="cdata"/>-
<td headers="notes" />
<td headers="details" />
</tr>
-->
<tr>
<td headers="probe" />ps-accounting
<td headers="rpm" />
<a href="http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-psacct-0.12k-0.noarch.rpm">
gratia-probe-psacct-0.12k-0</a>
<td headers="pname" class="cdata"/>-
<td headers="osgver" class="cdata"/>-
<td headers="vdtver" class="cdata"/>-
<td headers="notes" />If installed, install on CE <em>and</em> all worker nodes
<td headers="details" /><a href="/bin/view/Accounting/ProbeConfigPsacct" class="twikiLink">PS-accounting probe configuration notes</a>
</tr>
<tr>
<td headers="probe" />SOURCE
<td headers="rpm" />
<a href="http://gratia.fnal.gov/Files/probe/SRPMS/gratia-probe-0.12k-0.src.rpm">
gratia-probe-0.12k-0</a>
<td headers="pname" class="cdata"/>-
<td headers="osgver" class="cdata"/>-
<td headers="vdtver" class="cdata"/>-
<td headers="notes" />Source RPM<sup><a href="/bin/view/Accounting/GratiaProbePreRelease#PsacctReporting" class="twikiCurrentTopicLink twikiAnchorLink">3</a></sup>.
<td headers="details" /><a href="/bin/view/Accounting/ProbeSrpmNotes" class="twikiLink">Detailed notes for SRPM</a>
</tr>
</table>
<p />
<b>VDT pacman installations:</b> <br />    
This fix was been made available in the VDT 1.6.1c cache on 3/21/2007.  If you currently have 0.12i installed you should perform the following update:
<pre>
&gt; pacman -update Gratia-PBS-Probe  
    or
&gt; pacman -update Gratia-LSF-Probe
</pre>
<p />
<p />
<a name="RpmInstall"></a>
<h3><a name="Installation_from_RPM"></a> Installation from RPM </h3>
<p />
<UL>
<LI />If you install any probe at all, you will need the <code>gratia-probe-common</code> RPM listed below; this contains common infrastructure required by all probes.
<p />
<LI />The Gratia Condor currently requires that $VDT_LOCATION/gratia/var/data points to the same directory as the directory mentioned in the <code>DataFolder</code> variable of the Gratia Condor probe's <a href="/bin/view/Accounting/ProbeConfig" class="twikiLink">ProbeConfig</a> file.
<p />
<LI />Depending on your batch system, you should install the appropriate Condor or PBS/LSF probe on your CE. If you are running both batch systems, you should install both probes.
<p />
<LI />Read the configuration notes for each probe you install.
<p />
<LI />If you require the extra granularity of process accounting (unlikely except in rare circumstances), you should install the ps-accounting probe on the CE <strong>and</strong> every worker node. This is a re-incarnation of a legacy FNAL admin utility and as such is only likely to be of use to FNAL admins.
<p />
<LI />Note that the <code>gratia-probe-common</code> RPM contains example probes, <code>samplemeter.{py,pl}</code>. If you wish to write or customize your own probe, please take a look at the <a href="/bin/view/Accounting/ProbeConfigGeneral" class="twikiLink">general configuration notes</a>. For specific probes, see the appropriate notes for that probe as listed in the table below.
<p />
<LI />Install the appropriate RPMS. Note that the main install prefix may be changed with this addition to the <code>rpm</code> command line: <code>--relocate&nbsp;/opt/vdt/gratia=/desired/path</code>. It is recommended to use, for example:
<p />
<UL>
<a name="CondorProbeQuickStart"></a><LI />Condor:
<p />
<pre>rpm -Uvh --relocate /opt/vdt/gratia&#61;$VDT&#95;LOCATION/gratia \
http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-common-&#37;ProbeVersion&#37;.noarch.rpm \
http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-condor-&#37;ProbeVersion&#37;.noarch.rpm
</pre>
<p />
<a name="PbsLsfProbeQuickStart"></a><LI />PBS/LSF:
<pre>rpm -Uvh --relocate /opt/vdt/gratia&#61;$VDT&#95;LOCATION/gratia \
http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-common-&#37;ProbeVersion&#37;.noarch.rpm \
http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-&#37;ProbeVersion&#37;.i386.rpm
</pre>
</UL>
<p />
</UL>
<p />
<hr />
<h6><a name="Footnotes"></a> Footnotes </h6>
<small>
<OL>
<a name="ProdReporting"></a><LI />The default configuration files are configured to send data to the official <a href="http://gratia-osg.fnal.gov:8880/gratia-reporting" target="_top">OSG Gratia server</a>
<a name="ItbReporting"></a><LI />The default configuration files are configured to send data to the <a href="http://gratia-osg.fnal.gov:8881/gratia-reporting" target="_top">OSG Gratia ITB server</a>
<a name="PsacctReporting"></a><LI />This probe uses the Linux processing accounting facility and reporting is daily. The default configuration files are configured to send data to the <a href="http://gratia-fermi.fnal.gov:8882/gratia-reporting" target="_top">OSG Gratia psacct server</a>. Note that unlike the other probes, the psacct probe must be installed on every worker node.
</OL>
</small>
<p />
-- <a href="/bin/view/Main/PenelopeConstanta" class="twikiLink">PenelopeConstanta</a> - 30 Aug 2006
<p />
-- <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a> - 22 Feb 2007
<p />
-- <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> - 16 Mar 2007 - Added 0.12i_patch rpms for LSF and PBS probes for the changes to pbs-lsf_meter.cron.sh to resolve the lock file problems
<p />
-- <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a> - 04 Apr 2007 - Pre-release page; removed 0.12i_patch references.</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Accounting/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/Accounting/InstallationGuideVDT" class="twikiLink">InstallationGuideVDT</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaProbePreRelease</span> <br />    
Topic revision: r3 - 06 Apr 2007 - 19:13:56 - <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />