<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaReleaseV0dot32dot1c &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaReleaseV0dot32dot1c?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaReleaseV0dot32dot1c" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaReleaseV0dot32dot1c"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TABLEPLUGIN_table2--><style type="text/css" media="all">
.twikiTable#table2 th {background-color:#99CCCC;}
.twikiTable#table2 th.twikiSortedCol {background-color:#99CCCC;}
.twikiTable#table2 tr.twikiTableRowdataBg0 td {background-color:#FFFFCC;}
.twikiTable#table2 tr.twikiTableRowdataBg1 td {background-color:#FFFFFF;}
.twikiTable#table2 tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#FFFFCC;}
.twikiTable#table2 tr.twikiTableRowdataBg1 td.twikiSortedCol {background-color:#FFFFFF;}
</style>
<!--TABLEPLUGIN_table3--><style type="text/css" media="all">
.twikiTable#table3 th {background-color:#99CCCC;}
.twikiTable#table3 th.twikiSortedCol {background-color:#99CCCC;}
.twikiTable#table3 tr.twikiTableRowdataBg0 td {background-color:#FFFFCC;}
.twikiTable#table3 tr.twikiTableRowdataBg1 td {background-color:#FFFFFF;}
.twikiTable#table3 tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#FFFFCC;}
.twikiTable#table3 tr.twikiTableRowdataBg1 td.twikiSortedCol {background-color:#FFFFFF;}
</style>
<!--EDITTABLEPLUGIN--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/EditTablePlugin/edittable.css");
</style>

<!--TABLEPLUGIN_table1--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#table1 th {background-color:#99CCCC;}
.twikiTable#table1 th.twikiSortedCol {background-color:#99CCCC;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td {background-color:#FFFFCC;}
.twikiTable#table1 tr.twikiTableRowdataBg1 td {background-color:#FFFFFF;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#FFFFCC;}
.twikiTable#table1 tr.twikiTableRowdataBg1 td.twikiSortedCol {background-color:#FFFFFF;}
</style>
<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!--
These are general in nature and should be changed in the this template if the location changes: <ul>
<li> Set CURRENT_TOMCAT = <code><b>gratia09</b></code>
</li> <li> Set CURRENT_MYSQL = <strong><em>gratia06</em></strong>
</li> <li> Set NEW_TOMCAT = <code><b>gratia07</b></code>
</li> <li> Set NEW_MYSQL = <em>_ gratia07_</em>
</li> <li> Set TOMCAT_ALIAS = <code><b>gratia.opensciencegrid.org</b></code>
</li> <li> Set MYSQL_ALIAS = <code><b>gratia-db01.fnal.gov</b></code>
</li> <li> Set RELEASE_TAR_REPOSITORY = /afs/fnal.gov/files/expwww/gratia/html/Files
</li></ul> 
<p />
These are specific to a release and require changing: <ul>
<li> Set RELEASE_DATE = 3/31/2008
</li> <li> Set CURRENT_RELEASE = v0.32.1c
</li> <li> Set RELEASE_TAG = v0-32-1c
</li> <li> Set NEXT_DEVEL_VERSION = v0.33
</li> <li> Set BUILD_DIRECTORY = /home/weigand/cdcvs/gratia-v0.32.1c
</li></ul> 
-->
<p />
<p />
<h1><a name="Gratia_Release_v0_32_1c_3_31_200"></a>  Gratia Release v0.32.1c (3/31/2008 - 4/1/2008)<br /> </h1>
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Overview"> Overview</a> <ul>
<li> <a href="?cover=print#Main_New_Features"> Main New Features:</a>
</li> <li> <a href="?cover=print#Additional_Features"> Additional Features:</a>
</li> <li> <a href="?cover=print#Technical_changes_affecting_some"> Technical changes affecting some of the listed features</a>
</li></ul> 
</li> <li> <a href="?cover=print#Anticipated_downtime"> Anticipated downtime</a>
</li> <li> <a href="?cover=print#Collectors_and_Databases_Affecte"> Collectors and Databases Affected</a>
</li> <li> <a href="?cover=print#Build_the_v0_32_1c_for_distribut"> Build the v0.32.1c for distribution</a>
</li> <li> <a href="?cover=print#Upgrade_and_implementation"> Upgrade and implementation</a> <ul>
<li> <a href="?cover=print#For_fermi_itb_on_gratia08"> For <b>fermi_itb</b> on <b>gratia08</b>:</a>
</li> <li> <a href="?cover=print#For_fermi_osg_on_gratia08"> For <b>fermi_osg</b> on <b>gratia08</b>:</a>
</li> <li> <a href="?cover=print#For_qcd_on_gratia08"> For <b>qcd</b> on <b>gratia08</b>:</a>
</li> <li> <a href="?cover=print#For_itb_on_gratia09"> For <b>itb</b> on <b>gratia09</b>:</a>
</li> <li> <a href="?cover=print#For_osg_integration_on_gratia09"> For <b>osg_integration</b> on <b>gratia09</b>:</a>
</li></ul> 
</li> <li> <a href="?cover=print#Post_mortem"> Post-mortem</a>
</li></ul> 
</div>
<p />
<p />
<h1><a name="Overview"></a> Overview </h1>
This release (v0.32.1c) is a maintenance release.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Main_New_Features"></a> Main New Features: </span></h2>
NONE. 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Additional_Features"></a> Additional Features: </span></h2>
NONE.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Technical_changes_affecting_some"></a> Technical changes affecting some of the listed features </span></h2> <ul>
<li> 
</li></ul> 
<p />
<!--   -------------------------------------------- -->
<h1><a name="Anticipated_downtime"></a> Anticipated downtime </h1>
It is expected that this release will require the Gratia services and reporting to be unavailable for a very brief (10 minute) period at the most. <ul>
<li> Start: 3/31/2008  
</li> <li> Available: 3/31/2008 
</li> <li> <font color="#008000"><b>Actual: Start -  End -   </b></font>
</li></ul> 
<p />
The changes affecting downtime  for this release are: <ol>
<li> Length of time it takes to install the new software
</li></ol> 
<p />
<p />
<p />
<!--   -------------------------------------------- -->
<h1><a name="Collectors_and_Databases_Affecte"></a> Collectors and Databases Affected </h1>
<p />
The following Gratia collectors and databases will be converted with this release:
<p />
<a name="edittable1"></a>
<div class="editTable">
<form name="edittable1" action="https://twiki.opensciencegrid.org/bin/viewauth/Accounting/GratiaReleaseV0dot32dot1c#edittable1" method="post">
<input type="hidden" name="ettablenr" value="1" />
<input type="hidden" name="etedit" value="on" />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="1" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Schema</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">MySql port</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Collector URL</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=3;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Collector host</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=4;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size (bytes)</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=5;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size (rows)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol"> fermi_itb </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2"> gratia-fermi.fnal.gov:8881 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol3"> gratia08.fnal.gov: </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol4"> 208M </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol5 twikiLastCol"> 29,295 </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol0 twikiFirstCol"> fermi_osg </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol1"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol2"> gratia-fermi.fnal.gov:8880 </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol3"> gratia08.fnal.gov </td>
			<td bgcolor="#FFFFFF" align="right" valign="top" class="twikiTableCol4"> 19G </td>
			<td bgcolor="#FFFFFF" align="right" valign="top" class="twikiTableCol5 twikiLastCol"> 7,904,799 </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol"> gratia_itb </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2"> gratia.opensciencegrid.org:8881 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol3"> gratia09.fnal.gov </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol4"> 18G </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol5 twikiLastCol"> 7,789,474 </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol0 twikiFirstCol"> gratia_osg_integration </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol1"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol2"> gratia.opensciencegrid.org:8885 </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol3"> gratia09.fnal.gov </td>
			<td bgcolor="#FFFFFF" align="right" valign="top" class="twikiTableCol4"> 6.8G </td>
			<td bgcolor="#FFFFFF" align="right" valign="top" class="twikiTableCol5 twikiLastCol"> 1,367,063 </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> gratia_qcd </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1 twikiLast"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2 twikiLast"> gratia-fermi.fnal.gov:8883 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol3 twikiLast"> gratia08.fnal.gov </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol4 twikiLast"> 3.7G </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> 1,037,382 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<input type="hidden" name="etrows" value="6" />
<input class="twikiButton editTableEditButton" type="submit" value="Edit table" /> </form>
</div><!-- /editTable -->
<p />
<br />    
<p />
The following Gratia collectors and databases will <b>NOT</b> be converted with this release.  The <em>gratia</em> collector will be upgraded to the new software as part of the conversion to InnoDB. <br />    
<p />
<a name="edittable2"></a>
<div class="editTable">
<form name="edittable2" action="https://twiki.opensciencegrid.org/bin/viewauth/Accounting/GratiaReleaseV0dot32dot1c#edittable2" method="post">
<input type="hidden" name="ettablenr" value="2" />
<input type="hidden" name="etedit" value="on" />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="1" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Schema</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">MySql port</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Collector URL</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=3;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Collector host</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=4;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size (bytes)</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=5;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size (rows)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> gratia </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1 twikiLast"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2 twikiLast"> gratia.opensciencegrid.org:8880 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol3 twikiLast"> gratia09.fnal.gov </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol4 twikiLast"> 73G </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> 58,252,407 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<input type="hidden" name="etrows" value="2" />
<input class="twikiButton editTableEditButton" type="submit" value="Edit table" /> </form>
</div><!-- /editTable -->
<p />
<p />
<br />    
The following Gratia collectors and databases will <strong><em>NOT</em></strong>  be converted with this release.  These repositories contained specialized reports that have not as yet been upgraded to the new Birt V2.2 software. They will not be affected by this upgrade.<br />    
<p />
<p />
<a name="edittable3"></a>
<div class="editTable">
<form name="edittable3" action="https://twiki.opensciencegrid.org/bin/viewauth/Accounting/GratiaReleaseV0dot32dot1c#edittable3" method="post">
<input type="hidden" name="ettablenr" value="3" />
<input type="hidden" name="etedit" value="on" />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="1" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Schema</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">MySql port</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Collector URL</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=3;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Collector host</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=4;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size (bytes)</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaReleaseV0dot32dot1c?cover=print;sortcol=5;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size (rows)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol"> gratia_psacct </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2"> gratia-fermi.fnal.gov:8882 </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol3"> gratia08.fnal.gov: </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol4"> 11G </td>
			<td bgcolor="#FFFFCC" align="right" valign="top" class="twikiTableCol5 twikiLastCol"> 6,356,555 </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> gratia_osg_daily </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol1 twikiLast"> <strong><em>gratia06</em></strong>.fnal.gov:3320 </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol2 twikiLast"> gratia.opensciencegrid.org:8884 </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol3 twikiLast"> gratia09.fnal.gov </td>
			<td bgcolor="#FFFFFF" align="right" valign="top" class="twikiTableCol4 twikiLast"> .8G </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> 83,383 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<input type="hidden" name="etrows" value="3" />
<input class="twikiButton editTableEditButton" type="submit" value="Edit table" /> </form>
</div><!-- /editTable -->
<p />
<p />
<p />
<!-- BUILD DISTRIBUTION -------------------- -->
<h1><a name="Build_the_v0_32_1c_for_distribut"></a> Build the v0.32.1c for distribution </h1>
<ol>
<li>Make sure your build area contains all <em>committed</em> changes.
<ul><li>cvs update</li></ul>
</li>
<p />
<li>In <em>gratia/build-scripts/Makefile</em> , change the <em>version_default</em> to:
<ul><li>version_default = v0.33</li>
       <li>commit the change</li>
</ul>
<p />
The reason for using a version number 1 more than the current release is so that all development that occurs after this release will have the odd numbered development release (v0.33).
<p />
The current release (v0.32.1c) <strong><em>will</em></strong> get assigned  properly when the <em>cvs export</em> is performed after the tagging occurs.
</li>
<p />
<li>Tag the release:
<ul><li>cvs tag -R v0-32-1c gratia</li></ul>
       This tags everything that is in your build directory and presumably tested.
</li>
<p />
<li> <em>Into a <strong>new</strong> area</em>, export the tagged release:
<ul><li>cvs export -d gratia-v0.32.1c -r v0-32-1c gratia</li></ul>
</li>
<p />
<li>Build it for the release (this insures that tar files are produced for VDT):
<ul><li>cd gratia-v0.32.1c/build-scripts</li>
<li>source setup-jdk15.sh</li>
<li>make release</li></ul>
</li>
<p />
<li>Copy the built tar files to the release area:
<ul><li>scp ../target/*_v0.32.1c.tar   flxi07.fnal.gov:/afs/fnal.gov/files/expwww/gratia/html/Files/</li></ul> 
<font color="#ff0000"><b>This step is NOT being done for this point release</b></font>
</li>
<p />
<li>Update the version number on the <a href="/bin/view/Accounting/InstallationGuideVDT" class="twikiLink">services release TWiki page</a>:</li>
<ul><li>Edit and update the TWiki variable <em>ReleaseVersion</em>.</li></ul>
<font color="#ff0000"><b>This step is NOT being done for this point release</b></font>
</ol>
<p />
<font color="#008000"><b>Done: 3/31/08 11:45 CDT </b></font>
<p />
<p />
<!-- ----------------- UPGRADE AND IMPLEMENTATION ------------- -->
<h1><a name="Upgrade_and_implementation"></a> Upgrade and implementation </h1>
The <strong><em>upgrades should be single-threaded</em></strong> , that is, performed for each database schema one at a time.  
<p />
We will perform these upgrades based on the size of the individual database schema, in ascending order.
<p />
<!--  <ul>
<li> Set TC_NODE1      = <b>gratia08</b>
</li> <li> Set TC_INSTANCE1 = <b>fermi_itb</b>
</li></ul> 
-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="For_fermi_itb_on_gratia08"></a> For <b>fermi_itb</b> on <b>gratia08</b>: </span></h2>
  <ol type="a">
   <li> Stop the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>fermi_itb</b>  stop  </li>
</li></ul> 
<p />
  <li>Save off the logs under each tomcat instance and empty the <em>log</em> directory.   <ul>
<li> date=`date '+%Y%m%d'`
</li> <li> cd        /data/tomcat-<b>fermi_itb</b>/logs/
</li> <li> tar zcf /data/gratia_tomcat_logs_backups/tomcat-<b>fermi_itb</b>.$date.tgz   *
</li> <li> rm -f *
</li></ul> 
<p />
  <li>Install the new software on the Gratia tomcat instance:
<br />     pswd=xxx
<br />     source=/home/weigand/cdcvs/gratia-v0.32.1c
<br />     pgm=/home/weigand/cdcvs/gratia-v0.32.1c/common/configuration/update-gratia-local 
<br />     $pgm  -d $pswd -S $source  <b>fermi_itb</b>
  </li>
<p />
   <li> Start  the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>fermi_itb</b>  start
</li> <li> When the tomcat service initializes, it will detect any schema changes have been effected and a conversion process will begin. 
</li> <li> <em>tail</em> the  <em>catalina.out</em> log. When the conversion process completes the log will show the following message:<br />           "INFO: Server startup in _xxx_ms"  </ol>  <font color="#008000"><b>Start: 3/31/08 16:09  End: 3/31/08 16:12  </b></font>
</li></ul> 
</li>
<p />
<p />
<p />
<!--  <ul>
<li> Set TC_NODE2       = <b>gratia08</b>
</li> <li> Set TC_INSTANCE2 = <b>fermi_osg</b>
</li></ul> 
-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="For_fermi_osg_on_gratia08"></a> For <b>fermi_osg</b> on <b>gratia08</b>: </span></h2>
  <ol type="a">
   <li> Stop the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>fermi_osg</b>  stop  </li>
</li></ul> 
<p />
  <li>Save off the logs under each tomcat instance and empty the <em>log</em> directory.   <ul>
<li> date=`date '+%Y%m%d'`
</li> <li> cd        /data/tomcat-<b>fermi_osg</b>/logs/
</li> <li> tar zcf /data/gratia_tomcat_logs_backups/tomcat-<b>fermi_osg</b>.$date.tgz   *
</li> <li> rm -f *
</li></ul> 
<p />
  <li>Install the new software on the Gratia tomcat instance:
<br />     pswd=xxx
<br />     source=/home/weigand/cdcvs/gratia-v0.32.1c
<br />     pgm=/home/weigand/cdcvs/gratia-v0.32.1c/common/configuration/update-gratia-local 
<br />     $pgm  -d $pswd -S $source  <b>fermi_osg</b>
  </li>
<p />
   <li> Start  the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>fermi_osg</b>  start
</li> <li> When the tomcat service initializes, it will detect any schema changes have been effected and a conversion process will begin. 
</li> <li> <em>tail</em> the  <em>catalina.out</em> log. When the conversion process completes the log will show the following message:<br />           "INFO: Server startup in _xxx_ms"  </ol>  <font color="#008000"><b>Start: 3/31/08 16:16     End: 3/31/08 16:18   </b></font>
</li></ul> 
</li>
<p />
<p />
<p />
<!--  <ul>
<li> Set TC_NODE3      = <b>gratia08</b>
</li> <li> Set TC_INSTANCE3 = <b>qcd</b>
</li></ul> 
-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="For_qcd_on_gratia08"></a> For <b>qcd</b> on <b>gratia08</b>: </span></h2>
  <ol type="a">
   <li> Stop the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>qcd</b>  stop  </li>
</li></ul> 
<p />
  <li>Save off the logs under each tomcat instance and empty the <em>log</em> directory.   <ul>
<li> date=`date '+%Y%m%d'`
</li> <li> cd        /data/tomcat-<b>qcd</b>/logs/
</li> <li> tar zcf /data/gratia_tomcat_logs_backups/tomcat-<b>qcd</b>.$date.tgz   *
</li> <li> rm -f *
</li></ul> 
<p />
  <li>Install the new software on the Gratia tomcat instance:
<br />     pswd=xxx
<br />     source=/home/weigand/cdcvs/gratia-v0.32.1c
<br />     pgm=/home/weigand/cdcvs/gratia-v0.32.1c/common/configuration/update-gratia-local 
<br />     $pgm  -d $pswd -S $source  <b>qcd</b>
  </li>
<p />
   <li> Start  the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>qcd</b>  start
</li> <li> When the tomcat service initializes, it will detect any schema changes have been effected and a conversion process will begin. 
</li> <li> <em>tail</em> the  <em>catalina.out</em> log. When the conversion process completes the log will show the following message:<br />           "INFO: Server startup in _xxx_ms"  </ol>  <font color="#008000"><b>Start: 4/1/08 07:38      End: 4/1/08 07:40   </b></font>
</li></ul> 
</li>
<p />
<p />
<p />
<p />
<!--  <ul>
<li> Set TC_NODE4       = <b>gratia09</b>
</li> <li> Set TC_INSTANCE4 = <b>itb</b>
</li></ul> 
-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="For_itb_on_gratia09"></a> For <b>itb</b> on <b>gratia09</b>: </span></h2>
  <ol type="a">
   <li> Stop the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>itb</b>  stop  </li>
</li></ul> 
<p />
  <li>Save off the logs under each tomcat instance and empty the <em>log</em> directory.   <ul>
<li> date=`date '+%Y%m%d'`
</li> <li> cd        /data/tomcat-<b>itb</b>/logs/
</li> <li> tar zcf /data/gratia_tomcat_logs_backups/tomcat-<b>itb</b>.$date.tgz   *
</li> <li> rm -f *
</li></ul> 
<p />
  <li>Install the new software on the Gratia tomcat instance:
<br />     pswd=xxx
<br />     source=/home/weigand/cdcvs/gratia-v0.32.1c
<br />     pgm=/home/weigand/cdcvs/gratia-v0.32.1c/common/configuration/update-gratia-local 
<br />     $pgm  -d $pswd -S $source  <b>itb</b>
  </li>
<p />
   <li> Start  the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>itb</b>  start
</li> <li> When the tomcat service initializes, it will detect any schema changes have been effected and a conversion process will begin. 
</li> <li> <em>tail</em> the  <em>catalina.out</em> log. When the conversion process completes the log will show the following message:<br />           "INFO: Server startup in _xxx_ms"  </ol>  <font color="#008000"><b>Start: 4/1/08 07:42     End: 4/1/08 07:44   </b></font>
</li></ul> 
</li>
<p />
<p />
<p />
<p />
<!--  <ul>
<li> Set TC_NODE5       = <b>gratia09</b>
</li> <li> Set TC_INSTANCE5 = <b>osg_integration</b>
</li></ul> 
-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="For_osg_integration_on_gratia09"></a> For <b>osg_integration</b> on <b>gratia09</b>: </span></h2>
  <ol type="a">
   <li> Stop the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>osg_integration</b>  stop  </li>
</li></ul> 
<p />
  <li>Save off the logs under each tomcat instance and empty the <em>log</em> directory.   <ul>
<li> date=`date '+%Y%m%d'`
</li> <li> cd        /data/tomcat-<b>osg_integration</b>/logs/
</li> <li> tar zcf /data/gratia_tomcat_logs_backups/tomcat-<b>osg_integration</b>.$date.tgz   *
</li> <li> rm -f *
</li></ul> 
<p />
  <li>Install the new software on the Gratia tomcat instance:
<br />     pswd=xxx
<br />     source=/home/weigand/cdcvs/gratia-v0.32.1c
<br />     pgm=/home/weigand/cdcvs/gratia-v0.32.1c/common/configuration/update-gratia-local 
<br />     $pgm  -d $pswd -S $source  <b>osg_integration</b>
  </li>
<p />
   <li> Start  the tomcat init.d service for the Gratia collector: <ul>
<li> service tomcat-<b>osg_integration</b>  start
</li> <li> When the tomcat service initializes, it will detect any schema changes have been effected and a conversion process will begin. 
</li> <li> <em>tail</em> the  <em>catalina.out</em> log. When the conversion process completes the log will show the following message:<br />           "INFO: Server startup in _xxx_ms"  </ol>  <font color="#008000"><b>Start: 4/1/08 07:47     End: 4/1/08 07:49   </b></font>
</li></ul> 
<p />
<p />
<!-- ----------------- POST MORTEM  ------------- -->
<h1><a name="Post_mortem"></a> Post-mortem </h1>
At this time, this will appear to be random notes.  After the conversion, they may be organized.
<p />
<ol>
<li>osg_integration instance problems with replicated data.
<p />
The osg_integration instance (<a href="http://gratia.opensciencegrid.org:8885/gratia-reporting/" target="_top">http://gratia.opensciencegrid.org:8885/gratia-reporting/</a>) is experiencing problems with the v0.32.1c conversion.  All the other databases appear ok.
<p />
We had turned back on, late last week, the replication of specific gratia_itb probes to osg_integration and all was doing well.  Now it appears that this instance is getting into strange state when processing the replicated data.
<p />
Symptoms: <ul>
<li> the <a href="http://gratia.opensciencegrid.org:8885/gratia-administration" target="_top">http://gratia.opensciencegrid.org:8885/gratia-administration</a> page would never render... it would just spin
</li> <li> the hibernate log shows many many  many of these errors which can be viewed in /data/gratia_tomcat_logs_backups/osg_integration, which are the logs I saved this morning
</li></ul> 
<pre>
2008-04-02 01:13:41,003 org.hibernate.util.JDBCExceptionReporter [WARN]: SQL Error: 1062, SQLState: 23000
2008-04-02 01:13:41,003 org.hibernate.util.JDBCExceptionReporter [ERROR]: Duplicate entry 'F8F4C00A065268D4C189E6F440A33B54' for key 2
</pre>
I turned off ALL replication from gratia_itb to osg_integration this morning around 4/2 09:35. 
<p />
I am not certain this is related to the 0.32.1c version or is specific with replication or maybe a combination.
</li>
<p />
</ol>
<p />
<p />
<p />
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_updates"></a>  Major updates </span></h2>
<!--Future editors should add their signatures beneath yours!-->
-- <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> - 31 Mar 2008<br />    </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaReleaseV0dot32dot1c</span> <br />    
Topic revision: r4 - 02 Apr 2008 - 15:45:15 - <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />