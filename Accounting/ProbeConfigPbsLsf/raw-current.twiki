---+OSG Gratia probe configuration: PBS-LSF
&lt;ol&gt;
&lt;li&gt;[[ProbeInstallation#DownloadTable][Install]] the software. Notes:
&lt;ol&gt;
#ProbeNode&lt;li&gt;The probe should have access to:
&lt;ul&gt;
&lt;li&gt;The batch manager log area (required); and&lt;/li&gt;
&lt;li&gt; the reverse gridmap file, =osg-user-vo-map.txt=  (optional, but preferred). [This file was used to be =grid3-user-vo-map.txt=]&lt;/li&gt;
&lt;/ul&gt;
The PBS/LSF probe can in fact run on any node provided the above requirements are satisfied and =ProbeConfig= is configured correctly.
&lt;li&gt;The [[ProbeInstallation#ProbeDownloadPbsLsf][official binary RPMs]] were build on a FSL4 system: to install on a system with a different C++ compiler (eg RHEL3 and derivatives), [[ProbeSrpmNotes][recompile from SRPM]].&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
#ProbeConfig&lt;li&gt;Customize the Gratia =ProbeConfig= file. The following variables (at least)
should have appropriate values:

| *Gratia Configuration Variable=&amp;quot;Default&amp;quot;* | *Set value information* |
| !MeterName = &amp;quot;generic&amp;quot; | This value will be entered in the database to indicate where the record came from.&lt;br /&gt;We recommend a =batchsystem:FQDN= such as &quot;condor:fermigrid1.fnal.gov&quot;. |
| !SiteName = &amp;quot;Generic Site&amp;quot; | This value is used in the report to refer to the site/farm/cluster to which the head node gives access. |
| !VDTSetupFile = &amp;quot;&lt;tt&gt;MAGIC_VDT_LOCATION&lt;tt&gt;/setup.sh&amp;quot; |Path to the VDT =setup.sh= file. Please expand =MAGIC_VDT_LOCATION=. |
| !UserVOMapFile = &amp;quot;&lt;tt&gt;MAGIC_VDT_LOCATION&lt;tt&gt;/osg/etc/osg-user-vo-map.txt&amp;quot; |Path to the VDT =osg-user-vo-map.txt= (or =grid3-user-vo-map.txt=) file. Please expand =MAGIC_VDT_LOCATION=. |
&lt;/li&gt;

#UrCollectorConf&lt;li&gt;Customize the =urCollector.conf= file. The following variables (at least) should have appropriate values:

| *Gratia Configuration Variable=&amp;quot;Default&amp;quot;* | *Set value information* |
| !lrmsType = &amp;quot;pbs&amp;quot; | Set to &amp;quot;pbs&amp;quot; or &amp;quot;lsf&amp;quot; as appropriate. |
| !pbsAcctLogDir = &amp;quot;&amp;lt;path&amp;gt;&amp;quot; | Set to appropriate path for log files. |
| !lsfAcctLogDir = &amp;quot;&amp;lt;path&amp;gt;&amp;quot; | Set to appropriate path for log files. |
| !useCEJobMap = &amp;quot;no&amp;quot; | Set to yes if using a CE job map (see below). |
| !ceJobMapLog = &amp;quot;&amp;quot; | This is the location of the CE&#39;s grid user/grid job -&gt; local job ID map. It has to be specified _either_ as a directory (containing file names such as &quot;20050307&quot; or &quot;2005-03-07&quot;) _or_ as a file name prefix (including path). |
| !EnableProbe = &amp;quot;1&amp;quot; | If present, this attribute must be set to one to enable probe reporting. |
&lt;/li&gt;

&lt;li&gt;The RPM install procedure makes appropriate entries in =/etc/cron.d=
for uploading accounting information to gratia at the appropriate
time; this time is randomized.&lt;/li&gt;

&lt;li&gt;The !CollectorHost has been pre-configured to use the official OSG Gratia
collector (or the official ITB Gratia if you installed the ITB RPMs); please verify this configuration before enabling the probe.&lt;/li&gt;

&lt;li&gt;This product includes software developed by [[http://cern.ch/eu-egee/][The EU EGEE Project]].&lt;/li&gt;
&lt;/ol&gt;

-- Main.ChrisGreen - 08 Jun 2007
