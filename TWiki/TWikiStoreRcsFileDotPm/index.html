<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TWikiStoreRcsFileDotPm &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/TWikiStoreRcsFileDotPm?_T=16 Feb 2017" type="application/x-wiki" title="edit TWikiStoreRcsFileDotPm" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/TWikiStoreRcsFileDotPm"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Package_TWiki_Store_RcsFile"></a> Package <code>TWiki::Store::RcsFile</code> </h1>
<p />
This class is PACKAGE PRIVATE to Store, and should never be
used from anywhere else. Base class of implementations of stores
that manipulate RCS format files.
<p />
The general contract of the methods on this class and its subclasses
calls for errors to be signalled by Error::Simple exceptions.
<p />
Refer to Store.pm for models of usage.
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Package_TWiki_Store_RcsFile"> Package TWiki::Store::RcsFile</a> <ul>
<li> <a href="?cover=print#ClassMethod_new_session_web_topi"> ClassMethod new <tt>($session,$web,$topic,$attachment)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionInfo_ve"> ObjectMethod getRevisionInfo <tt>($version) -&gt; ($rev,$date,$user,$comment)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_LatestRevision"> ObjectMethod getLatestRevision <tt>() -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_LatestRevisionT"> ObjectMethod getLatestRevisionTime <tt>() -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_read_MetaData_name"> ObjectMethod readMetaData <tt>($name) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_WorkArea_key_di"> ObjectMethod getWorkArea <tt>($key) -&gt; $directorypath</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_save_MetaData_web_n"> ObjectMethod saveMetaData <tt>($web,$name) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_TopicNames_topi"> ObjectMethod getTopicNames <tt>() -&gt; @topics</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_WebNames_webs"> ObjectMethod getWebNames <tt>() -&gt; @webs</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_search_InWebContent"> ObjectMethod searchInWebContent <tt>($searchString,$web,\@topics,\%options) -&gt; \%map</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_moveWeb_newWeb"> ObjectMethod moveWeb <tt>($newWeb)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getRevision_version"> ObjectMethod getRevision <tt>($version) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_stored_DataExists_b"> ObjectMethod storedDataExists <tt>() -&gt; $boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getTimestamp_intege"> ObjectMethod getTimestamp <tt>() -&gt; $integer</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_restore_LatestRevis"> ObjectMethod restoreLatestRevision <tt>($wikiname)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_removeWeb_web"> ObjectMethod removeWeb <tt>($web)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_moveTopic_newWeb_ne"> ObjectMethod moveTopic <tt>($newWeb,$newTopic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_copyTopic_newWeb_ne"> ObjectMethod copyTopic <tt>($newWeb,$newTopic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_moveAttachment_newW"> ObjectMethod moveAttachment <tt>($newWeb,$newTopic,$newAttachment)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_copyAttachment_newW"> ObjectMethod copyAttachment <tt>($newWeb,$newTopic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_is_AsciiDefault_boo"> ObjectMethod isAsciiDefault <tt>() -&gt; $boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_setLock_lock_user"> ObjectMethod setLock <tt>($lock,$user)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_isLocked_user_time"> ObjectMethod isLocked <tt>() -&gt; ($user,$time)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_setLease_lease"> ObjectMethod setLease <tt>($lease)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getLease_lease"> ObjectMethod getLease <tt>() -&gt; $lease</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getStream_STREAM"> ObjectMethod getStream <tt>() -&gt; \*STREAM</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_numRevisions_intege"> ObjectMethod numRevisions <tt>() -&gt; $integer</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_initBinary"> ObjectMethod initBinary <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_initText"> ObjectMethod initText <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_add_RevisionFromTex"> ObjectMethod addRevisionFromText <tt>($text,$comment,$user,$date)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_add_RevisionFromStr"> ObjectMethod addRevisionFromStream <tt>($fh,$comment,$user,$date)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_replaceRevision_tex"> ObjectMethod replaceRevision <tt>($text,$comment,$user,$date)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_deleteRevision"> ObjectMethod deleteRevision <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_revisionDiff_rev1_r"> ObjectMethod revisionDiff <tt>($rev1,$rev2,$contextLines) -&gt; \@diffArray</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionAtTime"> ObjectMethod getRevisionAtTime <tt>($time) -&gt; $rev</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_AttachmentAttri"> ObjectMethod getAttachmentAttributes <tt>($web,$topic,$attachment)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_AttachmentList"> ObjectMethod getAttachmentList <tt>($web,$topic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_stringify"> ObjectMethod stringify <tt>()</tt></a>
</li></ul> 
</li></ul> 
</div>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ClassMethod_new_session_web_topi"></a> <a href="/bin/view/TWiki/ClassMethod" class="twikiLink">ClassMethod</a> <strong>new</strong> <tt>($session,$web,$topic,$attachment)</tt> </span></h2>
Constructor. There is one object per stored file.
<p />
Note that $web, $topic and $attachment must be untainted!
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionInfo_ve"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionInfo</strong> <tt>($version) -&gt; ($rev,$date,$user,$comment)</tt> </span></h2> <ul>
<li> <code>$version</code> if 0 or undef, or out of range (version number &gt; number of revs) will return info about the latest revision.
</li></ul> 
<p />
Returns (rev, date, user, comment) where rev is the number of the rev for which the info was recovered, date is the date of that rev (epoch s), user is the login name of the user who saved that rev, and comment is the comment associated with the rev.
<p />
Designed to be overridden by subclasses, which can call up to this method
if file-based rev info is required.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_LatestRevision"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getLatestRevision</strong> <tt>() -&gt; $text</tt> </span></h2>
Get the text of the most recent revision
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_LatestRevisionT"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getLatestRevisionTime</strong> <tt>() -&gt; $text</tt> </span></h2>
Get the time of the most recent revision
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_read_MetaData_name"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>readMetaData</strong> <tt>($name) -&gt; $text</tt> </span></h2>
Get a meta-data block for this web
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_WorkArea_key_di"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getWorkArea</strong> <tt>($key) -&gt; $directorypath</tt> </span></h2>
<p />
Gets a private directory uniquely identified by $key. The directory is
intended as a work area for plugins.
<p />
The standard is a directory named the same as "key" under
$TWiki::cfg{RCS}{WorkAreaDir}
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_save_MetaData_web_n"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>saveMetaData</strong> <tt>($web,$name) -&gt; $text</tt> </span></h2>
<p />
Write a named meta-data string. If web is given the meta-data
is stored alongside a web.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_TopicNames_topi"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getTopicNames</strong> <tt>() -&gt; @topics</tt> </span></h2>
<p />
Get list of all topics in a web <ul>
<li> <code>$web</code> - Web name, required, e.g. <code>'Sandbox'</code>
</li></ul> 
Return a topic list, e.g. <code>( 'WebChanges',&nbsp; 'WebHome', 'WebIndex', 'WebNotify' )</code>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_WebNames_webs"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getWebNames</strong> <tt>() -&gt; @webs</tt> </span></h2>
Gets a list of names of subwebs in the current web
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_search_InWebContent"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>searchInWebContent</strong> <tt>($searchString,$web,\@topics,\%options) -&gt; \%map</tt> </span></h2>
<p />
Search for a string in the content of a web. The search must be over all
content and all formatted meta-data, though the latter search type is
deprecated (use searchMetaData instead).
<p /> <ul>
<li> <code>$searchString</code> - the search string, in egrep format if regex
</li> <li> <code>$web</code> - The web to search in
</li> <li> <code>\@topics</code> - reference to a list of topics to search
</li> <li> <code>\%options</code> - reference to an options hash
</li></ul> 
The <code>\%options</code> hash may contain the following options: <ul>
<li> <code>type</code> - if <code>regex</code> will perform a egrep-syntax RE search (default '')
</li> <li> <code>casesensitive</code> - false to ignore case (defaulkt true)
</li> <li> <code>files_without_match</code> - true to return files only (default false)
</li></ul> 
<p />
The return value is a reference to a hash which maps each matching topic
name to a list of the lines in that topic that matched the search,
as would be returned by 'grep'. If <code>files_without_match</code> is specified, it will
return on the first match in each topic (i.e. it will return only one
match per topic, and will not return matching lines).
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_moveWeb_newWeb"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>moveWeb</strong> <tt>($newWeb)</tt> </span></h2>
Move a web.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getRevision_version"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevision</strong> <tt>($version) -&gt; $text</tt> </span></h2>
<p />
Get the text for a given revision. The version number must be an integer.
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_stored_DataExists_b"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>storedDataExists</strong> <tt>() -&gt; $boolean</tt> </span></h2>
Establishes if there is stored data associated with this handler.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getTimestamp_intege"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getTimestamp</strong> <tt>() -&gt; $integer</tt> </span></h2>
<p />
Get the timestamp of the file
Returns 0 if no file, otherwise epoch seconds
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_restore_LatestRevis"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>restoreLatestRevision</strong> <tt>($wikiname)</tt> </span></h2>
<p />
Restore the plaintext file from the revision at the head.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_removeWeb_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>removeWeb</strong> <tt>($web)</tt> </span></h2> <ul>
<li> <code>$web</code> - web being removed
</li></ul> 
<p />
Destroy a web, utterly. Removed the data and attachments in the web.
<p />
Use with great care! No backup is taken!
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_moveTopic_newWeb_ne"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>moveTopic</strong> <tt>($newWeb,$newTopic)</tt> </span></h2>
Move/rename a topic.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_copyTopic_newWeb_ne"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>copyTopic</strong> <tt>($newWeb,$newTopic)</tt> </span></h2>
Copy a topic.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_moveAttachment_newW"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>moveAttachment</strong> <tt>($newWeb,$newTopic,$newAttachment)</tt> </span></h2>
Move an attachment from one topic to another. The name is retained.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_copyAttachment_newW"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>copyAttachment</strong> <tt>($newWeb,$newTopic)</tt> </span></h2>
Copy an attachment from one topic to another. The name is retained.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_is_AsciiDefault_boo"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>isAsciiDefault</strong> <tt>() -&gt; $boolean</tt> </span></h2>
<p />
Check if this file type is known to be an ascii type file.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_setLock_lock_user"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>setLock</strong> <tt>($lock,$user)</tt> </span></h2>
<p />
Set a lock on the topic, if $lock, otherwise clear it.
$user is a wikiname.
<p />
SMELL: there is a tremendous amount of potential for race
conditions using this locking approach.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_isLocked_user_time"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>isLocked</strong> <tt>() -&gt; ($user,$time)</tt> </span></h2>
<p />
See if a twiki lock exists. Return the lock user and lock time if it does.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_setLease_lease"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>setLease</strong> <tt>($lease)</tt> </span></h2> <ul>
<li> <code>$lease</code> reference to lease hash, or undef if the existing lease is to be cleared.
</li></ul> 
<p />
Set an lease on the topic.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getLease_lease"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getLease</strong> <tt>() -&gt; $lease</tt> </span></h2>
<p />
Get the current lease on the topic.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getStream_STREAM"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getStream</strong> <tt>() -&gt; \*STREAM</tt> </span></h2>
<p />
Return a text stream that will supply the text stored in the topic.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_numRevisions_intege"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>numRevisions</strong> <tt>() -&gt; $integer</tt> </span></h2>
<p />
Must be provided by subclasses.
<p />
Find out how many revisions there are. If there is a problem, such
as a nonexistent file, returns 0.
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_initBinary"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>initBinary</strong> <tt>()</tt> </span></h2>
<p />
Initialise a binary file.
<p />
Must be provided by subclasses.
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_initText"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>initText</strong> <tt>()</tt> </span></h2>
<p />
Initialise a text file.
<p />
Must be provided by subclasses.
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_add_RevisionFromTex"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>addRevisionFromText</strong> <tt>($text,$comment,$user,$date)</tt> </span></h2>
<p />
Add new revision. Replace file with text. <ul>
<li> <code>$text</code> of new revision
</li> <li> <code>$comment</code> checkin comment
</li> <li> <code>$user</code> is a wikiname.
</li> <li> <code>$date</code> in epoch seconds; may be ignored
</li></ul> 
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_add_RevisionFromStr"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>addRevisionFromStream</strong> <tt>($fh,$comment,$user,$date)</tt> </span></h2>
<p />
Add new revision. Replace file with contents of stream. <ul>
<li> <code>$fh</code> filehandle for contents of new revision
</li> <li> <code>$comment</code> checkin comment
</li> <li> <code>$user</code> is a wikiname.
</li> <li> <code>$date</code> in epoch seconds; may be ignored
</li></ul> 
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_replaceRevision_tex"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>replaceRevision</strong> <tt>($text,$comment,$user,$date)</tt> </span></h2>
Replace the top revision. <ul>
<li> <code>$text</code> is the new revision
</li> <li> <code>$date</code> is in epoch seconds.
</li> <li> <code>$user</code> is a wikiname.
</li> <li> <code>$comment</code> is a string
</li></ul> 
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_deleteRevision"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>deleteRevision</strong> <tt>()</tt> </span></h2>
<p />
Delete the last revision - do nothing if there is only one revision
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_revisionDiff_rev1_r"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>revisionDiff</strong> <tt>($rev1,$rev2,$contextLines) -&gt; \@diffArray</tt> </span></h2>
rev2 newer than rev1.
Return reference to an array of [ diffType, $right, $left ]
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
!!!getRevision!!!
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionAtTime"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionAtTime</strong> <tt>($time) -&gt; $rev</tt> </span></h2>
<p />
Get a single-digit version number for the rev that was alive at the
given epoch-secs time, or undef it none could be found.
<p />
<strong>Virtual method</strong> - must be implemented by subclasses
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_AttachmentAttri"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getAttachmentAttributes</strong> <tt>($web,$topic,$attachment)</tt> </span></h2>
<p />
returns [stat] for any given web, topic, $attachment
SMELL - should this return a hash of arbitrary attributes so that 
SMELL + attributes supported by the underlying filesystem are supported
SMELL + (eg: windows directories supporting photo "author", "dimension" fields)
<p />
<p />
<p />
sub _constructAttributesForAutoAttached
as long as stat is defined, return an emulated set of attributes for that attachment.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_AttachmentList"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getAttachmentList</strong> <tt>($web,$topic)</tt> </span></h2>
<p />
returns {} of filename =&gt; { key =&gt; value, key2 =&gt; value } for any given web, topic
Ignores files starting with _ or ending with ,v
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_stringify"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>stringify</strong> <tt>()</tt> </span></h2>
Generate string representation for debugging
<p /></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TWikiStoreRcsFileDotPm</span> <br />    
Topic revision: r2 - 25 Jun 2006 - 16:26:33 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />