<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TWikiUpgradeGuide &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/TWikiUpgradeGuide?_T=16 Feb 2017" type="application/x-wiki" title="edit TWikiUpgradeGuide" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/TWikiUpgradeGuide"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <div class="twikiToc"> <ul>
<li> <a href="?cover=print#1_TWiki_Upgrade_Guide">1  TWiki Upgrade Guide</a> <ul>
<li> <a href="?cover=print#Overview"> Overview</a>
</li> <li> <a href="?cover=print#Upgrade_Requirements"> Upgrade Requirements</a>
</li> <li> <a href="?cover=print#Major_Changes_Compared_to_TWiki"> Major Changes Compared to TWiki Release 01-Sep-2004</a>
</li> <li> <a href="?cover=print#Automated_Upgrade_Procedure"> Automated Upgrade Procedure</a>
</li> <li> <a href="?cover=print#Manual_Upgrade_Procedure"> Manual Upgrade Procedure</a>
</li> <li> <a href="?cover=print#Upgrading_a_Beta"> Upgrading a Beta</a>
</li> <li> <a href="?cover=print#Upgrading_from_Cairo_to_TWiki4_a"> Upgrading from Cairo to TWiki4 (additional advice)</a> <ul>
<li> <a href="?cover=print#Favicon"> Favicon</a>
</li></ul> 
</li></ul> 
</li></ul> 
</div>
<p />
<h1><a name="1_TWiki_Upgrade_Guide"></a> 1  TWiki Upgrade Guide </h1>
<p />
<em>Upgrade from the previous TWiki 01-Sep-2004 Prodcution Release to TWiki-4.0.0</em>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Overview"></a> Overview </span></h2>
<p />
TWiki-4.0.0 is a major new release. You can chose between an automated upgrade using a script or a manual update.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Upgrade_Requirements"></a> Upgrade Requirements </span></h2>
<p /> <ul>
<li> Please review the <a href="/bin/view/TWiki/AdminSkillsAssumptions" class="twikiLink">AdminSkillsAssumptions</a> before you upgrade TWiki
</li> <li> Review <a href="http://twiki.org/cgi-bin/view/TWiki.TWikiUpgradeTo04x00x00" title="'TWiki.TWikiUpgradeTo04x00x00' on TWiki.org">TWiki:TWiki.TWikiUpgradeTo04x00x00</a> for latest information and experience notes.
</li> <li> To upgrade from a release prior to TWiki Release 01-Sep-2004, start with <a href="http://twiki.org/cgi-bin/view/TWiki.UpgradingTWiki" title="'TWiki.UpgradingTWiki' on TWiki.org">TWiki:TWiki.UpgradingTWiki</a> on TWiki.org
</li> <li> To upgrade from a standard TWiki Release 01-Sep-2004 to the latest TWiki-4.0.0 Production Release, follow the instructions below
</li> <li> Once the upgrade has been applied, an existing earlier installation will still be able to read all the topics, but should not be used to write. Make sure you take a backup!
</li> <li> Not all Plugins written for TWiki Release 01-Sep-2004 are fully supported with Dakar. Make sure the Plugins you use can be upgraded as well!
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Changes_Compared_to_TWiki"></a> Major Changes Compared to TWiki Release 01-Sep-2004 </span></h2>
<p />
See <a href="/bin/view/TWiki/TWikiReleaseNotes04x00" class="twikiLink">TWikiReleaseNotes04x00</a>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Automated_Upgrade_Procedure"></a> Automated Upgrade Procedure </span></h2>
<p />
If you would prefer to do things manually, <strong>or if you made custom modifications to distributed files</strong> (except topics), then skip to the <a href="/bin/view/TWiki/TWikiUpgradeGuide#ManualUpgradeProcedure" class="twikiCurrentTopicLink twikiAnchorLink">manual upgrade procedure</a> below.
<p />
The upgrade script is called <code>"UpgradeTwiki"</code>, and is found in the root of the distribution. It can be run by any user, though you will need to make sure you correct the permissions so that the webserver user can write all files in the new installation when you have finished. The upgrade script does <strong>not</strong> write to your existing installation.
<p />
The upgrade script will upgrade the <strong>TWiki core only</strong>. Plugins will need to be upgraded separately.
<p />
Note: To upgrade from a Beta, <strong>do not</strong> use UpgradeTWiki. Instead follow the steps outlined in <a href="/bin/view/TWiki/TWikiUpgradeGuide#Upgrading_a_Beta" class="twikiCurrentTopicLink twikiAnchorLink">Upgrading a Beta</a>, below.
<p />
It will:
<p /> <ul>
<li> Create a new TWiki installation, placing the files from the distribution there as appropriate
</li> <li> Where possible, merge the changes you've made in your existing topics and attachments into the new twiki
</li> <li> Where not possible, it will tell you, and you can inspect those differences manually
</li> <li> Create new configuration files for the new TWiki based on your existing configuation information
</li> <li> Set the permissions in the new TWiki so that it should work straight away
</li> <li> Attempt to setup authentication for your new TWiki, if you are using .htaccess in the old one
</li> <li> Tell you what else you need to do
</li></ul> 
<p />
To perform the upgrade, you need to:
<p /> <ul>
<li> Check first if there is a newer <code>UpgradeTwiki</code> script available, see <a href="http://twiki.org/cgi-bin/view/Codev.UpgradeTWiki" title="'Codev.UpgradeTWiki' on TWiki.org">TWiki:Codev.UpgradeTWiki</a>
</li> <li> Create a new directory for your new installation: Let's call this <code>distro/</code>
</li> <li> Put the distribution zip file in <code>distro/</code>
</li> <li> Unzip it
</li> <li> Choose a directory for the new installation.  I will call this <code>new_twiki</code>.  This directory must not already exist.
</li> <li> Change directory to <code>distro/</code> and run: <br />         <code>./UpgradeTwiki &lt;full path to existing_twiki's setlib.cfg&gt; &lt;full path to new_twiki&gt;</code>
</li> <li> confirm your system settings by pointing your browser to the <code>configure</code> script
</li></ul> 
<p />
Assuming all goes well, <code>UpgradeTwiki</code> will give you the final instructions.
<p />
Visit <a href="http://twiki.org/cgi-bin/view/Codev.KnownIssuesOfTWiki04x00x00" title="'Codev.KnownIssuesOfTWiki04x00x00' on TWiki.org">TWiki:Codev.KnownIssuesOfTWiki04x00x00</a> and fix known issues that apply to you.
<p />
There are a few points worth noting:
<p /> <ul>
<li> <code>UpgradeTwiki</code> may not be able to merge all the changes you made in your existing TWiki into the new installation, but it will tell you which ones it couldn't deal with
</li> <li> <code>UpgradeTwiki</code> creates the new installation in a new directory tree. It makes a complete copy of all your existing data, so: <ul>
<li> Clearly you need to point it to a location where there is enough space
</li> <li> If you have symlinks under your <code>data/</code> directory in your existing installation, these are reproduced as actual directories in the new structure.   It is up to you to pull these sub-directories out again and re-symlink as needed
</li></ul> 
</li> <li> <code>UpgradeTwiki</code> doesn't deal with custom templates or Plugins, you will have to reinstall these in the new installation.
</li> <li> If you are using the Htpasswd login manager, then note that email addresses for users have moved out of user topics and into the password database. There is a script that performs this extra upgrade step for you - see <code>tools/upgrade_emails.pl</code>.
</li></ul> 
<p />
<p />
<a name="ManualUpgradeProcedure"></a>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Manual_Upgrade_Procedure"></a> Manual Upgrade Procedure </span></h2>
<p />
The following steps are a rough guide to upgrading only. It is impossible to give detailed instructions, as what you have to do may depend on whether you can configure the webserver or not, and how much you have changed distributed files in your current TWiki release.
<p /> <ol>
<li> Follow the installation instructions, and install the new release in a new directory.
</li> <li> Copy your local webs over to the data and pub directories of the new install <ul>
<li> You could also use softlinks to link the web directories in data and pub to the old installation area
</li></ul> 
</li> <li> Unlock the rcs files in data and pub directories from the old installation using the following shell commands: <ul>
<li> <code>find data -name '*,v' -exec rcs -r -u -M '{}' \;</code>
</li> <li> <code>find pub -name '*,v' -exec rcs -r -u -M '{}' \;</code>
</li></ul> 
</li> <li> Examine your old TWiki.cfg, and for each local setting, set the corresponding value in the <code>configure</code> interface for the new install. <ul>
<li>  If you can't use <code>configure</code>, then copy the <strong>new</strong> <code>TWiki.cfg</code> to <code>LocalSite.cfg</code>, and edit <code>LocalSite.cfg</code>. Remove all the settings that you didn't change in your previous install, and change the remaining settings to the values from your <strong>old</strong> TWiki.cfg.
</li></ul> 
</li> <li> Transfer any customized and local settings from <a href="/bin/view/TWiki/TWikiPreferences" class="twikiLink">TWiki.TWikiPreferences</a> to the topic pointed at by {LocalSitePreferences} (<a href="/bin/view/Main/TWikiPreferences" class="twikiLink">Main.TWikiPreferences</a>). This avoids having to write over files in the distribution.
</li> <li> If you changed any of the topics in the original TWiki distribution, you will have to transfer your changes to the new install manually. There is no simple way to do this, though the following procedure may help: <ol>
<li> Install a copy of the original TWiki release you were using in a temporary directory
</li> <li> Use 'diff' to find changed files, and transfer the changes into the new Dakar install.
</li> <li> Install updated plugins into your new area.
</li></ol> 
</li> <li> Point your webserver at the new install.
</li> <li> Visit <a href="http://twiki.org/cgi-bin/view/Codev.KnownIssuesOfTWiki04x00x00" title="'Codev.KnownIssuesOfTWiki04x00x00' on TWiki.org">TWiki:Codev.KnownIssuesOfTWiki04x00x00</a> and fix known issues that apply to you.
</li> <li> If you are using the Htpasswd login manager, then note that email addresses for users have moved out of user topics and into the password database. There is a script that performs this extra upgrade step for you - see <code>tools/upgrade_emails.pl</code>.
</li></ol> 
<p />
You are <strong>highly</strong> recommended <strong>not</strong> to change any distributed files if you can avoid it, to simplify future upgrades!
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Upgrading_a_Beta"></a> Upgrading a Beta </span></h2>
<strong>If</strong> you followed the recommendations and avoided modifying any distributed files, then this is quite straightforward: <ol>
<li> Follow the installation instructions, and install the new release in a new directory.
</li> <li> Copy your local webs over to the data and pub directories of the new install <ul>
<li> Be careful to copy over the user topics and <span class="twikiNewLink">TWikiUsers<a href="/bin/edit/TWiki/TWikiUsers?topicparent=TWiki.TWikiUpgradeGuide" rel="nofollow" title="TWikiUsers (this topic does not yet exist; you can create it)">?</a></span>.txt in the Main web
</li></ul> 
</li> <li> Copy over your <code>bin/LocalLib.cfg</code> and <code>lib/LocalSite.cfg</code> files
</li> <li> Copy over any local files you created (such as .htpasswd and .htaccess files)
</li> <li> Point your webserver at the new install.
</li></ol> 
<strong>If</strong> you changed any of the distributed files, you will have to continue from Step 5 above.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Upgrading_from_Cairo_to_TWiki4_a"></a> Upgrading from Cairo to TWiki4 (additional advice) </span></h2>
<p />
<h3><a name="Favicon"></a> Favicon </h3>
<p />
TWiki4's <a href="/bin/view/TWiki/PatternSkin" class="twikiLink">PatternSkin</a> introduces the use of the favicon feature which most browsers use to show a small icon in front of the URL and for bookmarks.
<p />
In TWiki4 it is assumed that each web has a favicon.ico file attached to the WebPreferences topic. When you upgrade from Cairo to TWiki4 you do not have this file and you will get flooded with errors the error log of your web server. There are two solutions to this.
<p /> <ul>
<li> Attach a favicon.ico file to WebPreferences in each web.
</li> <li> Change the setting of the location of favicon.ico in TWikiPreferences so all webs use the favicon.ico from the TWiki web. This is the fastest and easiest solution.
</li></ul> 
<p />
To change the location of favicon.ico in TWikiPreferences to the TWiki web add this line to <a href="/bin/view/Main/TWikiPreferences" class="twikiLink">TWikiPreferences</a>
<p />
<pre>
   &#42; Set FAVICON &#61; &#37;PUBURLPATH&#37;/&#37;TWIKIWEB&#37;/&#37;WEBPREFSTOPIC&#37;/favicon.ico
</pre>
<p />
<p />
<p />
<strong><em>Related Topics:</em></strong> <a href="/bin/view/TWiki/AdminDocumentationCategory" class="twikiLink">AdminDocumentationCategory</a>, <a href="http://twiki.org/cgi-bin/view/TWiki.UpgradingTWiki" title="'TWiki.UpgradingTWiki' on TWiki.org">TWiki:TWiki.UpgradingTWiki</a></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TWikiUpgradeGuide</span> <br />    
Topic revision: r4 - 15 May 2006 - 03:38:42 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />