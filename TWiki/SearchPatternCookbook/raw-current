<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> SearchPatternCookbook &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/SearchPatternCookbook?_T=16 Feb 2017" type="application/x-wiki" title="edit SearchPatternCookbook" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/SearchPatternCookbook"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#FFD8AA " />&nbsp;<a href="/bin/view/TWiki/WebHome">TWiki Web</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/TWiki/SearchPatternCookbook" title='Topic revision: 3 (22 Sep 2005 - 16:24:01)'>SearchPatternCookbook</a> <span class='patternRevInfo'>(22 Sep 2005, <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">---+!! Search Pattern Cookbook

The Search function in TWiki is very powerful. Especially searches using a RegularExpression play an important part of tapping TWiki&#39;s full potential. Unfortunately RegularExpressions can be incredibly obscure to the uninitiated. 

Most people not familiar (enough) with Regular Expressions mostly cut and paste (and maybe tweak) from existing examples. This page intends to collect lots of examples together.

%TOC%

---++ Pattern 1: Extract values from a table

---+++ Problem definition
Suppose there is a topic with a table defining entries in a !TWikiForm. I.e. they define select menu items in a form template. They are then formatted like:

&lt;verbatim&gt;
| *Name* | *Type* | *Tooltip message* |
| option1 | option | |
| option2 | option | |
| option3 | option | |
&lt;/verbatim&gt;

How to extract the &#39;name&#39; values, i.e. &#39;option1&#39;, &#39;option2&#39; and &#39;option3&#39; and put them in a HTML form select input?

---+++ Solution
The following search pattern can be employed:

&lt;verbatim&gt;
&lt;form&gt;
&lt;select&gt;
%SEARCH{ &quot;^\|[^\|]*\| *option *\|&quot; topic=&quot;%TOPIC%&quot; regex=&quot;on&quot; multiple=&quot;on&quot; nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;&lt;option&gt;$pattern(^\| *(.*?) *\|.*)&lt;/option&gt;&quot; }%
&lt;/select&gt;
&lt;/form&gt;
&lt;/verbatim&gt;

which is, in effect:
&lt;form&gt;
&lt;select&gt;
%SEARCH{ &quot;^\|[^\|]*\| *option *\|&quot; topic=&quot;%TOPIC%&quot; regex=&quot;on&quot; multiple=&quot;on&quot; nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;&lt;option&gt;$pattern(^\| *(.*?) *\|.*)&lt;/option&gt;&quot; }%
&lt;/select&gt;
&lt;/form&gt;
%BR%

---++ Pattern 2: List generated from form classification

---+++ Problem
Imagine a TWiki form-based topic classification, i.e. every page has a form with several fields. How to:
   1. create a search to display all topics where one form field is set to a certain value
   1. create a search to filter the list above based on the values of a second form field

---+++ Test case
In practice: %BR%
Image a TWiki form with two fields:
   * !TopicClassification = One, Two or Three
   * !TopicStatus = Test or Final

We will:
   1. List all topics where the !TopicClassification field is set to &#39;Two&#39;
   2. Enable the user to filter this list based on the values of !TopicStatus

---+++ Solution

&lt;verbatim&gt;
%SEARCH{&quot;[T]opicClassification.*value\=.*Two;[T]opicStatus.*value\=.*%URLPARAM{type}%&quot;
regex=&quot;on&quot; casesensitive=&quot;on&quot; nosearch=&quot;on&quot; 
format=&quot;   * $topic - &lt;font face=\&quot;arial,helvetica\&quot; size=\&quot;1\&quot;&gt; 
_last modified by_ $wikiusername _on_ $date &lt;/font&gt; %BR% &amp;nbsp;&amp;nbsp;&amp;nbsp; 
&lt;font face=\&quot;arial,helvetica\&quot; size=\&quot;1\&quot;&gt; $formfield(TopicStatus) &lt;/font&gt;&quot; 
sort=&quot;topic&quot;}%
&lt;/verbatim&gt;

The filtering select dialogue is created as in Pattern 1:

&lt;verbatim&gt;
%STARTSIDEBAR%
*Filter:* %BR%
&lt;form name=&quot;selectType&quot; action=&quot;%SCRIPTURLPATH{&quot;view&quot;}%/%WEB%/&quot; &gt;
&lt;select name=&quot;type&quot; size=&quot;1&quot; onchange=&quot;document.location=this.value;&quot;&gt; 
%SEARCH{ &quot;^\|[^\|]*\| *option *\|&quot; topic=&quot;TopicClassification&quot; web=&quot;%WEB%&quot; regex=&quot;on&quot; 
multiple=&quot;on&quot; nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;&lt;option value=%INCLUDINGTOPIC%?type=$pattern(^\| *(.*?) *\|.*)&gt;$pattern(^\| *(.*?) *\|.*)&lt;/option&gt;&quot; }% 
&lt;option value=%INCLUDINGTOPIC%&gt;All pages&lt;/option&gt; &lt;/select&gt;
&lt;/form&gt;
%STOPSIDEBAR% 
&lt;/verbatim&gt;

This will create similar functionality as TWiki:Plugins.TopicClassificationAddOn
%BR%

---++ Pattern 3: Creating lists of TWiki usernames

---+++ Problem

How to populate a list box with all usernames of registered TWiki users

---+++ Solution 1: Appropriate for Sep 2004 TWiki (Cairo)

&lt;verbatim&gt;
&lt;form name=&quot;testing&quot; action=&quot;%SCRIPTURLPATH{&quot;view&quot;}%/%MAINWEB%&quot; method=&quot;get&quot;&gt;
&lt;select name=&quot;topic&quot;&gt;
&lt;option&gt;Select user...&lt;/option&gt;
%SEARCH{ &quot;Name:;Email:;Country:&quot; web=&quot;%MAINWEB%&quot; type=&quot;regex&quot; nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;&lt;option&gt;$topic&lt;/option&gt;&quot; }%
&lt;/select&gt;
&lt;input type=&quot;submit&quot; value=&quot;Go&quot; /&gt;
&lt;/form&gt;
&lt;/verbatim&gt;

Which expands to this: (here limited to all Z* users because TWiki.org has so many)

&lt;form name=&quot;testing&quot; action=&quot;%SCRIPTURLPATH{&quot;view&quot;}%/%MAINWEB%&quot; method=&quot;get&quot;&gt;
&lt;select name=&quot;topic&quot;&gt;
&lt;option&gt;Select user...&lt;/option&gt;
%SEARCH{ &quot;Name:;Email:;Country:&quot; web=&quot;%MAINWEB%&quot; type=&quot;regex&quot; topic=&quot;Z*&quot; nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;&lt;option&gt;$topic&lt;/option&gt;&quot; }%
&lt;/select&gt;
&lt;input type=&quot;submit&quot; value=&quot;Go&quot; /&gt;
&lt;/form&gt;

This searches all topics in the Main web that contain &quot;Name&quot;, &quot;Email&quot; and &quot;Country&quot; bullets. Alternatively, do a %TWIKIWEB%.FormattedSearch with =multiple=&quot;on&quot;= on the [[%MAINWEB%.TWikiUsers]] topic.

---+++ Solution 2: As Solution 1, but with possibility for multi-selecting usernames
The example of Solution 1 produces the list box.  Add a MULTIPLE to the _select_ statement, i.e.:
&lt;verbatim&gt;
&lt;select name=&quot;topic&quot; size=&quot;2&quot; MULTIPLE&gt;
&lt;/verbatim&gt;

Please note that the Search pattern is unchanged compared to Solution 1. The change is in the HTML form element.

The abovementioned modification is, in effect:
&lt;form name=&quot;testing&quot; action=&quot;%SCRIPTURLPATH{&quot;view&quot;}%/%MAINWEB%&quot; method=&quot;get&quot;&gt;
&lt;select name=&quot;topic&quot; size=&quot;2&quot; MULTIPLE&gt;
&lt;option&gt;Select user...&lt;/option&gt;
%SEARCH{ &quot;Name:;Email:;Country:&quot; web=&quot;%MAINWEB%&quot; type=&quot;regex&quot; topic=&quot;Z*&quot; nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;&lt;option&gt;$topic&lt;/option&gt;&quot; }%
&lt;/select&gt;
&lt;input type=&quot;submit&quot; value=&quot;Go&quot; /&gt;
&lt;/form&gt;

---+++ Solution 3: Appropriate for TWiki 4 (Dakar)
When the User information is stored in a UserForm (as is default in Dakar) then this list can be generated as follows:

&lt;verbatim&gt;
&lt;form name=&quot;testing&quot; action=&quot;%SCRIPTURLPATH{&quot;view&quot;}%/%MAINWEB%&quot; method=&quot;get&quot;&gt;
&lt;select name=&quot;topic&quot;&gt;
&lt;option&gt;Select user...&lt;/option&gt;
%SEARCH{&quot;%META:FORM.*[U]serForm&quot; web=&quot;%MAINWEB%&quot; regex=&quot;on&quot; casesensitive=&quot;on&quot; nosearch=&quot;on&quot; format=&quot;&lt;option&gt;$topic&lt;/option&gt;&quot; sort=&quot;topic&quot; excludetopic=&quot;Test*, TWiki*&quot;}%
&lt;/select&gt;
&lt;input type=&quot;submit&quot; value=&quot;Go&quot; /&gt;
&lt;/form&gt;
&lt;/verbatim&gt;

In the above example:
   * ==META:FORM.*[U]serForm== will search for all topics with a UserForm attached - change this if you have a different form where userdata is stored. Please note that this search does not actually extract anything from the form - it just uses it to identify the appropriate pages
   * ==excludetopic=&quot;Test*, TWiki*&quot;== allows to skip all topics starting with Test and TWiki, such as !TestUser or !TWikiAdmin. Use this if you have any special users who you do not want appearing in this list

---++ Pattern 4: Extract the parent of a given topic

---+++ Problem

How to get to the parent of the current topic to display on the page?

---+++ Solution

You might think that the following Search would do the trick:
&lt;verbatim&gt;
%SEARCH{ &quot;^%BASETOPIC%$&quot; scope=&quot;topic&quot; nosearch=&quot;on&quot; type=&quot;regex&quot; nototal=&quot;on&quot; format=&quot;[[$parent][parent_link]]&quot; }%
&lt;/verbatim&gt;

However, the =[&lt;nop&gt;[$parent][parent_link]]= link fails if the topic has no parent set (=$parent= will be empty). You can use some Plugins.SpreadSheetPlugin magic to conditionally link to the parent or to =WebHome=: =[&lt;nop&gt;[$percntCALC{$IF($EXACT($parent,), %&lt;nop&gt;HOMETOPIC%, $parent)}$percnt][parent_link]]= 

So the total Search query to find a topic&#39;s parent topic is:
&lt;verbatim&gt;
%SEARCH{ &quot;^%BASETOPIC%$&quot; scope=&quot;topic&quot; nosearch=&quot;on&quot; type=&quot;regex&quot; nototal=&quot;on&quot; format=&quot;[&lt;nop&gt;[$percntCALC{$IF($EXACT($parent,), &lt;nop&gt;%HOMETOPIC%, $parent)}$percnt][parent_link]]&quot; }%
&lt;/verbatim&gt;

---+++ Test Case
The parent topic of this topic is: %SEARCH{ &quot;^%BASETOPIC%$&quot; scope=&quot;topic&quot; nosearch=&quot;on&quot; type=&quot;regex&quot; nototal=&quot;on&quot; format=&quot;$percntCALC{$IF($EXACT($parent,), %HOMETOPIC%, $parent)}$percnt&quot; }%

---++ Pattern 5: Search and display the home topics of public webs in a list

---+++ Problem

How to find and display public webs in a drop down list box.

---+++ Solution

_Thanks to TWiki:Main.PeterThoeny for these solutions._

&lt;verbatim&gt;
&lt;form&gt;
&lt;select name=&quot;topic&quot;&gt;
&lt;option value=&quot;%TOPIC%&quot;&gt;Select...&lt;/option&gt;
%SEARCH{ &quot;%HOMETOPIC%&quot; scope=&quot;topic&quot; web=&quot;all&quot; topic=&quot;%HOMETOPIC%&quot; format=&quot;&lt;option value=\&quot;$web.$topic\&quot;&gt;$web&lt;/option&gt;&quot; separator=&quot; &quot; }%
&lt;/select&gt;
&lt;input type=&quot;submit&quot;  value=&quot;Go&quot; /&gt;
&lt;/form&gt;
&lt;/verbatim&gt;

---+++ Test case

Public webs of TWiki.

&lt;form&gt;
&lt;select name=&quot;topic&quot;&gt;
&lt;option value=&quot;%TOPIC%&quot;&gt;Select...&lt;/option&gt;
%SEARCH{ &quot;%HOMETOPIC%&quot; scope=&quot;topic&quot; web=&quot;all&quot; topic=&quot;%HOMETOPIC%&quot; format=&quot;&lt;option value=\&quot;$web.$topic\&quot;&gt;$web&lt;/option&gt;&quot; separator=&quot; &quot; }%
&lt;/select&gt;
&lt;input type=&quot;submit&quot;  value=&quot;Go&quot; /&gt;
&lt;/form&gt;

%T% For private webs, or any other webs you wish to exclude from the display, use &quot;on&quot; for the =Exclude web from a web=&quot;all&quot; search= setting in the relevant web&#39;s !WebPreferences topic.

---+++ Alternative solution

This result can also be accomplished with the %&lt;nop&gt;WEBLIST% variable.

&lt;form&gt;
&lt;select name=&quot;topic&quot;&gt;
&lt;option value=&quot;%TOPIC%&quot;&gt;Select...&lt;/option&gt;
%WEBLIST{ format=&quot;&lt;option value=\&quot;$name.%HOMETOPIC%\&quot;&gt;$name&lt;/option&gt;&quot; webs=&quot;public&quot; separator=&quot; &quot; }%
&lt;/select&gt;
&lt;input type=&quot;submit&quot; value=&quot;Go&quot; /&gt;
&lt;/form&gt;

---++ Pattern 6: Extract a value from a bullet list

---+++ Problem

Display the user name in the user&#39;s topic title

---+++ Solution

Search for the =Name:= entry.

&lt;verbatim&gt;
%SEARCH{&quot;   * [N]ame: &quot; topic=&quot;%TOPIC%&quot; regex=&quot;on&quot; casesensitive=&quot;on&quot; nosummary=&quot;on&quot; nosearch=&quot;on&quot; noheader=&quot;on&quot; nototal=&quot;on&quot; format=&quot;---+!! $pattern(.*   \* Name: ([^\n]*).*)&quot;}%
&lt;/verbatim&gt;

---+++ Test case

To create a test case, we will put a name entry here:

   * Name: John Doe

Search result:

%SEARCH{&quot;   * [N]ame: &quot; topic=&quot;%TOPIC%&quot; regex=&quot;on&quot; casesensitive=&quot;on&quot; nosummary=&quot;on&quot; nosearch=&quot;on&quot; noheader=&quot;on&quot; nototal=&quot;on&quot; format=&quot;---+!! $pattern(.*   \* Name: ([^\n]*).*)&quot;}%

---++ Pattern 7: Search for Form and Meta data: explained
---+++ Problem
Below is an example of a search that searches form data. The questions are:
   * why is this searching the metadata, shouldn&#39;t it just search the text?
   * what is the meaning of the =td..td= in the search expression? 

&lt;pre&gt;
%&lt;nop&gt;SEARCH{ &quot;[S]tatus.*(td..td|value\=).*[W]aiting&quot; casesensitive=&quot;on&quot; regex=&quot;on&quot; 
nosearch=&quot;on&quot; nototal=&quot;on&quot; format=&quot;| [[$topic]]&amp;lt;br /&gt; ($date - $rev - 
[[%&lt;nop&gt;SCRIPTURLPATH{rdiff}%/$web/$topic][Diffs]]) |&quot;}%
&lt;/pre&gt;

---+++ Solution
%SEARCH depends on grep, and grep searches the whole file, including the meta data.

An example meta data form field is:
&lt;pre&gt;
%&lt;nop&gt;META:&lt;nop&gt;FIELD{name=&quot;OperatingSystem&quot; title=&quot;OperatingSystem&quot; value=&quot;Os&lt;nop&gt;Win&quot;}%
&lt;/pre&gt;
So a search for a form field could look like:
&lt;pre&gt;
%&lt;nop&gt;SEARCH{ &quot;[O]peratingSystem.*value\=.*[O]sWin&quot; regex=&quot;on&quot; ... }%
&lt;/pre&gt;
   * Using square brackets is a trick to avoid a hit on the topic doing the search.
   * The =.*= indicate that there can be any number of any character between =OperatingSystem= and =value= in the (whole) file

Now the original file format of the category table (the predecessor of the TWiki forms) looks like this:
&lt;verbatim&gt;
&lt;td valign=&quot;top&quot; align=&quot;right&quot;&gt; OperatingSystem:  &lt;/td&gt;&lt;td&gt;  OsWin &lt;/td&gt;
&lt;/verbatim&gt;
The following search finds topics in the old and new format:
&lt;pre&gt;
%&lt;nop&gt;SEARCH{ &quot;[O]peratingSystem.*(td..td|value\=).*[O]sWin&quot; regex=&quot;on&quot; ... }%
&lt;/pre&gt;

The =td..td= matches =td&amp;lt;&amp;gt;td=; a simple search on =&quot;[O]peratingSystem.*[O]sWin&quot;= could find a hit in the topic text by coincidence.

A simple =%&lt;nop&gt;SEARCH{ &quot;[O]peratingSystem.*value\=&lt;nop&gt;.*[O]sWin&quot; ...}%= search is sufficient if you do not have topics in the old format.

---++ Pattern 8: Search all topics that have been moved
---+++ Problem
How would I go about listing all moved topics ?

---+++ Solution
Search for the META:TOPICMOVED meta data. Type this: 

=Moved topics: %&lt;nop&gt;SEARCH{ &quot;%META\:TOPICMOVED&quot; regex=&quot;on&quot; format=&quot;$topic, &quot; nosearch=&quot;on&quot; noheader=&quot;on&quot; nosummary=&quot;on&quot; }%=

to get this (limited to 10 results):

Moved topics: %SEARCH{ &quot;%META\:TOPICMOVED&quot; regex=&quot;on&quot; format=&quot;$topic, &quot; nosearch=&quot;on&quot; noheader=&quot;on&quot; nosummary=&quot;on&quot; limit=&quot;10&quot;}%


---++ Contributors

TWiki:Main.AntonAylward, TWiki:Main.ArthurClemens, TWiki:Main.JosMaccabiani, TWiki:Main.PeterThoeny, TWiki:Main.SueLocke

__Related Topics:__ UserDocumentationCategory
</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/TWiki/SearchPatternCookbook?t=1487212639;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/TWiki/SearchPatternCookbook' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/TWiki/SearchPatternCookbook?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/TWiki/SearchPatternCookbook?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r3&nbsp;<a rel="nofollow" href="/bin/rdiff/TWiki/SearchPatternCookbook?rev1=3;rev2=2">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/TWiki/SearchPatternCookbook?rev=2">r2</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/TWiki/SearchPatternCookbook?rev1=2;rev2=1">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/TWiki/SearchPatternCookbook?rev=1">r1</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/TWiki/SearchPatternCookbook?template=backlinksweb' rel='nofollow' title='Search the TWiki Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/TWiki/SearchPatternCookbook' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/TWiki/SearchPatternCookbook?template=oopsmore&amp;param1=3&amp;param2=3' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r3 - 22 Sep 2005 - 16:24:01 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<p /> <ul>
<li> <b><a href="/bin/view/TWiki/WebHome" class="twikiCurrentWebHomeLink twikiLink"> <img width="16" alt="home" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/home.gif" height="16" border="0" /> TWiki Web</a></b>
</li> <li> <a href="/bin/view/Main/TWikiUsers" class="twikiLink"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> Users</a>
</li> <li> <a href="/bin/view/Main/TWikiGroups" class="twikiLink"> <img width="16" alt="group" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/group.gif" height="16" border="0" /> Groups</a>
</li> <li> <a href="/bin/view/TWiki/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Index</a>
</li> <li> <a href="/bin/view/TWiki/WebSearch" class="twikiLink"> <img width="16" alt="searchtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/searchtopic.gif" height="16" border="0" /> Search</a>
</li> <li> <a href="/bin/view/TWiki/WebChanges" class="twikiLink"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a>
</li> <li> <a href="/bin/view/TWiki/WebNotify" class="twikiLink"> <img width="16" alt="notify" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/notify.gif" height="16" border="0" /> Notifications</a>
</li> <li> <a href="/bin/view/TWiki/WebPreferences" class="twikiLink"> <img width="16" alt="wrench" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/wrench.gif" height="16" border="0" /> Preferences</a>
</li></ul> 
<hr /> <ul>
<li> <b>User Reference</b>
</li> <li> <a href="/bin/view/TWiki/ATasteOfTWiki" class="twikiLink">ATasteOfTWiki</a>
</li> <li> <a href="/bin/view/TWiki/TextFormattingRules" class="twikiLink">TextFormattingRules</a>
</li> <li> <a href="/bin/view/TWiki/TWikiVariables" class="twikiLink">TWikiVariables</a>
</li> <li> <a href="/bin/view/TWiki/FormattedSearch" class="twikiLink">FormattedSearch</a>
</li> <li> <a href="/bin/view/TWiki/TWikiDocGraphics" class="twikiLink">TWikiDocGraphics</a>
</li> <li> <a href="/bin/view/TWiki/TWikiSkinBrowser" class="twikiLink">TWikiSkinBrowser</a>
</li> <li> <a href="/bin/view/TWiki/InstalledPlugins" class="twikiLink">InstalledPlugins</a>
</li></ul> 
<hr /> <ul>
<li> <b>Admin Maintenance</b>
</li> <li> <a href="/bin/view/TWiki/TWikiReferenceManual" class="twikiLink">Reference Manual</a>
</li> <li> <a href="/bin/view/TWiki/AdminToolsCategory" class="twikiLink">AdminToolsCategory</a>
</li> <li> <a href="/bin/view/TWiki/InterWikis" class="twikiLink">InterWikis</a>
</li> <li> <a href="/bin/view/TWiki/ManagingWebs" class="twikiLink">ManagingWebs</a>
</li> <li> <a href="/bin/view/TWiki/TWikiSiteTools" class="twikiLink">TWikiSiteTools</a>
</li> <li> <a href="/bin/view/TWiki/TWikiPreferences" class="twikiLink">TWikiPreferences</a>
</li> <li> <a href="/bin/view/TWiki/WebPreferences" class="twikiLink">WebPreferences</a>
</li></ul> 
<hr /> <ul>
<li> <b>Categories</b>
</li> <li> <a href="/bin/view/TWiki/AdminDocumentationCategory" class="twikiLink">Admin Documentation</a>
</li> <li> <a href="/bin/view/TWiki/AdminToolsCategory" class="twikiLink">Admin Tools</a>
</li> <li> <a href="/bin/view/TWiki/DeveloperDocumentationCategory" class="twikiLink">Developer Doc</a>
</li> <li> <a href="/bin/view/TWiki/UserDocumentationCategory" class="twikiLink">User Documentation</a>
</li> <li> <a href="/bin/view/TWiki/UserToolsCategory" class="twikiLink">User Tools</a>
</li></ul> 
<hr /> <ul>
<li> <strong>Webs</strong>
</li> <li> <a href="/bin/view/Accounting/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;Accounting</a>
</li> <li> <a href="/bin/view/Council/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;Council</a>
</li> <li> <a href="/bin/view/Documentation/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFF99" />&nbsp;Documentation</a>
</li> <li> <a href="/bin/view/Documentation/DocumentationTeam/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#DDDDDD" />&nbsp;<span class="twikiWebIndent"></span>DocumentationTeam</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFFFF" />&nbsp;<span class="twikiWebIndent"></span>Release3</a>
</li> <li> <a href="/bin/view/Education/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;Education</a>
</li> <li> <a href="/bin/view/Education/ASP2016/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;<span class="twikiWebIndent"></span>ASP2016</a>
</li> <li> <a href="/bin/view/Education/RDASummerSchool/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFFFF" />&nbsp;<span class="twikiWebIndent"></span>RDASummerSchool</a>
</li> <li> <a href="/bin/view/Education/SummerGridWorkshop/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;<span class="twikiWebIndent"></span>SummerGridWorkshop</a>
</li> <li> <a href="/bin/view/Engagement/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;Engagement</a>
</li> <li> <a href="/bin/view/InformationServices/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;InformationServices</a>
</li> <li> <a href="/bin/view/Interoperability/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFFCC" />&nbsp;Interoperability</a>
</li> <li> <a href="/bin/view/Main/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFEFA6" />&nbsp;Main</a>
</li> <li> <a href="/bin/view/Management/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;Management</a>
</li> <li> <a href="/bin/view/Networking/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFFFF" />&nbsp;Networking</a>
</li> <li> <a href="/bin/view/Operations/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;Operations</a>
</li> <li> <a href="/bin/view/Operations/SupportWorkArea/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFFFF" />&nbsp;<span class="twikiWebIndent"></span>SupportWorkArea</a>
</li> <li> <a href="/bin/view/Production/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#DDDDDD" />&nbsp;Production</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#9999FF" />&nbsp;ReleaseDocumentation</a>
</li> <li> <a href="/bin/view/Sandbox/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#DDDDDD" />&nbsp;Sandbox</a>
</li> <li> <a href="/bin/view/Sandbox/SubWeb/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#D0D0D0" />&nbsp;<span class="twikiWebIndent"></span>SubWeb</a>
</li> <li> <a href="/bin/view/Security/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFFFFF" />&nbsp;Security</a>
</li> <li> <a href="/bin/view/SoftwareTeam/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#DDDDDD" />&nbsp;SoftwareTeam</a>
</li> <li> <a href="/bin/view/Storage/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#0000FF" />&nbsp;Storage</a>
</li> <li> <a href="/bin/view/TWiki/WebHome"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiDocGraphics/web-bg.gif" border="0" alt="" width="16" height="16" style="background-color:#FFD8AA " />&nbsp;TWiki</a>
</li></ul> 
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/TWiki/SearchPatternCookbook"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/TWiki/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="TWiki" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="TWiki"></a>  <a href="/bin/view/TWiki/WebHome" class="twikiCurrentWebHomeLink twikiLink">TWiki</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/TWiki/SearchPatternCookbook?t=1487212639;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/TWiki/SearchPatternCookbook" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/TWiki/SearchPatternCookbook?pdftitle=SearchPatternCookbook" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>