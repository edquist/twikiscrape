<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> SiteVOSupport &lt; Operations &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Operations/SiteVOSupport?_T=16 Feb 2017" type="application/x-wiki" title="edit SiteVOSupport" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Operations/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Operations/SiteVOSupport"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TABLEPLUGIN_table1--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable td {padding:1px;}
.twikiTable th {padding:1px;}
.twikiTable#table1 {border-width:0px;}
.twikiTable#table1 th {background-color:#F3EDE7;}
.twikiTable#table1 th.twikiSortedCol {background-color:#F3EDE7;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td {background-color:#F3EDE7;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#F3EDE7;}
.twikiTable#table1 td {text-align:left;}
.twikiTable#table1 td {padding:1px;}
.twikiTable#table1 th {padding:1px;}
</style>
<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<h4><a name="THIS_TOPIC_IS_NO_LONGER_RELEVANT"></a> <font color="#ff0000">THIS TOPIC IS NO LONGER RELEVANT.</font> </h4>
<p />
<table width="100%">
<tr><td valign="top">
</td>
<td valign="top">
<h1><a name="OSG_Site_VO_Support"></a> OSG Site VO Support </h1>
<div class="twikiToc"> <ul>
 <li>
 <ul>
 <li>
 <ul>
<li> <a href="?cover=print#THIS_TOPIC_IS_NO_LONGER_RELEVANT"> <font color="#ff0000">THIS TOPIC IS NO LONGER RELEVANT.</font></a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Introduction">Introduction</a>
</li> <li> <a href="?cover=print#Current_OSG_0_4_1_procedures"> Current (OSG 0.4.1) procedures</a> <ul>
<li> <a href="?cover=print#Sites_not_using_GUMS"> Sites not using GUMS</a>
</li> <li> <a href="?cover=print#Sites_using_GUMS"> Sites using GUMS</a>
</li></ul> 
</li> <li> <a href="?cover=print#Future_OSG_0_6_0_procedures"> Future (OSG 0.6.0) procedures</a> <ul>
<li> <a href="?cover=print#Sites_not_using_GUMS_AN1"> Sites not using GUMS</a>
</li> <li> <a href="?cover=print#Sites_using_GUMS_AN1"> Sites using GUMS</a>
</li></ul> 
</li> <li> <a href="?cover=print#Deciding_if_a_OSG_site_supports"> Deciding if a OSG site supports your VO</a> <ul>
<li> <a href="?cover=print#Using_Virtual_Organization_Resou"> Using Virtual Organization Resource Selector (VORS)</a>
</li> <li> <a href="?cover=print#Error_Conditions_on_OSG_Sites_wh"> Error Conditions on OSG Sites which publish support of your VO</a> <ul>
<li> <a href="?cover=print#Failure_to_authenticate_Globus_e">  Failure to authenticate ( Globus error 7, 12, 79 )</a>
</li> <li> <a href="?cover=print#Failures_regarding_the_transfer"> Failures regarding the transfer of data or local home directory ( Globus errors 10, 73, 74,136 )</a>
</li> <li> <a href="?cover=print#General_middleware_failues"> General middleware failues ( ...?)</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Conclusions"> Conclusions</a> <ul>
<li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</li></ul> 
</div>
</td>
<td valign="top" align="right" width="25%">
</td></tr></table>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
<p />
An issue of current interest within the production OSG is the question of
if a particular VO is supported by an OSG site. This topic is not new the VO support 
architecture has been brought forward from the Grid2003 enviroment with few
modifications in the current OSG version 0.4.1. The basis of VO support by a site begins
with connecting to an OSG Registered VOMS to pull down a list of Distinguished Names (DN's) 
the second step is to map these DN's to a local account. Once this is done a site is said 
to support a VO and people from that VO are able to submit jobs to the OSG site.
<p />
The current (OSG 0.4.1) components involved in supporting VO's at a site include:
<p /> <ul>
<li>  The edg-mkgridmap, Globus Authorization callout (PRIMA), and gums-host       utilities on the CE.
</li> <li>  The Grid User Managment Service (GUMS)
</li> <li>  The distribution of an at most weekly updated pacman package called, the "VO package",      which updates files for the edg-mkgridmap and provides a template update for GUMS.      The "VO package" has both a CE component and a client component to allow updates      to OSG Client installations.
</li></ul> 
<p />
When an OSG site is installed the most recent version of the VO package is also
installed. New versions of the VO package are announced by email to the support centers and with the  <a href="http://www.grid.iu.edu/news/" target="_top">Ops RSS News Feed.</a> 
It is distributed as described in the <a href="http://osg.ivdgl.org/twiki/bin/view/Operations/SOPVoRegistration-v3" target="_top">Standard Operating Procedure</a> 
The way in which an OSG site decided to handle CE authorization determines the way in which 
sites publish the VO which they support, <a href="http://osg.ivdgl.org/twiki/bin/view/ReleaseDocumentation/OsgCEAuthorization" target="_top">OSG CE Authorization</a>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Current_OSG_0_4_1_procedures"></a> Current (OSG 0.4.1) procedures </span></h2>
<p />
<h3><a name="Sites_not_using_GUMS"></a> Sites not using GUMS </h3>
<p />
   For OSG sites that are using the edg-mkgridmap utilities to connect to each VO VOMS and retrieve
   the list of VO members, the VO members are mapped to local accounts and stored in the
   Globus file "/etc/grid-security/grid-mapfile", when a new VO package is installed the configuration 
   package for edg-mkgridmap is updated by adding a new VOMS. Also the file "grid3-user-vo-map.txt" is udpated
   to indicate to the monitoring infrastructure and to other OSG services that the VO is supported.
<p />
<p />
<h3><a name="Sites_using_GUMS"></a> Sites using GUMS </h3>
<p />
   OSG sites that are using GUMS, depend on the Globus authorization callout, PRIMA, to determine both if a
   DN's is allowed and which local account the DN will be mapped to. The gums-host utility is used to create
   the "grid3-user-vo-map.txt" file and the gums-host-cron crontab entry is used to periodically update
   the files based upon the current GUMS configuration.
<p />
   The VO package contines to be installed for reference, but the update which adds the new VO is done
   with an edit of the gums.config file, using the VO package distributed, gums.template, file as a 
   guide to the update. The file "grid3-user-vo-map.txt" is generated by a query to the GUMS, this
   is configured during installation. Again this file indicates to the monitoring infrastructure and to 
   other OSG services that the VO is supported.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Future_OSG_0_6_0_procedures"></a> Future (OSG 0.6.0) procedures </span></h2>
<p />
<p />
<h3><a name="Sites_not_using_GUMS_AN1"></a> Sites not using GUMS </h3>
<p />
   The OSG site which is using the edg-mkgridmap utilities will be extended to provide local caching in case
   of VOMS or network outages, the "grid3-user-vo-map.txt" file will be renamed "osg-user-vo-map.txt" and this 
   file will be programmatically generated each time the grid-mapfile is created. There will be two 
   additional checks added when this utility is executed which will verify that there at least one VO 
   member mapped in the grid-mapfile and that the local account which is referenced exists on the local host.
<p />
<p />
<h3><a name="Sites_using_GUMS_AN1"></a> Sites using GUMS </h3>
<p />
   The OSG site is uses GUMS, depends on the Globus authorization callout, PRIMA, to determine both if a
   DN's is allowed and which local account the DN will be mapped. The gums-host utility is used to create
   the now "osg-user-vo-map.txt" file and the gums-host-cron crontab entry is used to periodically update
   the files based upon the current GUMS configuration. The gums-host command will be extended to ensure that 
   the local account on the local host.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Deciding_if_a_OSG_site_supports"></a> Deciding if a OSG site supports your VO </span></h2>
<p />
<h3><a name="Using_Virtual_Organization_Resou"></a> Using Virtual Organization Resource Selector (VORS) </h3>
<p />
   VORS is a utility which collects the information provided by the grid3-user-vo-map.txt or osg-user-vo-map.txt
   file for each OSG site and then makes a graphical display of that information.
<p />
   <a href="http://vors-dev2.grid.iu.edu/cgi-bin/index.cgi" target="_top">VORS Deveploment link</a> 
<p />
    Using the drop down menus choose a VO, the map will refresh with the current selection of 
    OSG sites which are currently available and which publish support of the choosen VO. Below
    the map is a list if each resource. The map can be zoomed by clicking on a region of interest.
<p />
    Additionally, a summary table which displays each OSG site and the VO's which they publish
    support is provided at this <a href="http://vors-dev2.grid.iu.edu/vo-support-prod.html" target="_top">VORS page.</a>
<p />
<h3><a name="Error_Conditions_on_OSG_Sites_wh"></a> Error Conditions on OSG Sites which publish support of your VO </h3>
<p />
    If you have verified that an OSG publishes support of your VO there may
    be serveral conditions which cause failures. There are serveral types of 
    errors and it is difficult to determine from the job submission returned 
    error the exact error condintion. 
<p />
<h4><a name="Failure_to_authenticate_Globus_e"></a> Failure to authenticate ( Globus error 7, 12, 79 ) </h4>
<p />
   These are the most commonly seen errors. There are several underlying 
   causes.
<p /> <ul>
<li> Network connection failed to OSG site
</li> <li> OSG site down for scheduled or unscheduled outage
</li> <li> OSG site GUMS currently down
</li> <li> OSG site GUMS misconfigured
</li> <li> OSG site edg-mkgridmap configureation file misconfigured <ul>
<li> Due to error in the configuration
</li> <li> Due to an error in retrieving VO members from the VOMS
</li></ul> 
</li> <li> OSG site list of published VO's inaccurate
</li> <li> and probably a few more...
</li></ul> 
<p />
<h4><a name="Failures_regarding_the_transfer"></a> Failures regarding the transfer of data or local home directory ( Globus errors 10, 73, 74,136 ) </h4>
<p /> <ul>
<li> Globus error 136: the scratch directory could not be created      
</li> <li> Globus error 10: data transfer to the server failed                 
</li> <li> Globus error 73: the job manager failed to open stdout               
</li> <li> Globus error 74: the job manager failed to open stderr  
</li></ul> 
<p />
<h4><a name="General_middleware_failues"></a> General middleware failues ( ...?) </h4>
<p /> <ul>
<li> Globus error 126: it is unknown if the job was submitted             
</li> <li> Globus error 47: the gatekeeper failed to run the job manager   
</li> <li> Globus error 22: the job manager failed to create an internal script argument file               
</li> <li> Globus error 17: the job failed when the job manager attempted to run it      
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Conclusions"></a> Conclusions </span></h2>
<p />
<p />
<strong>Major updates</strong>:<br />    
<!--Future editors should add their signatures beneath yours!-->
<p />
<p />
<h3><a name="Comments"></a> Comments </h3>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Operations/SiteVOSupport" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
-- <a href="/bin/view/Main/LeighGrund" class="twikiLink">LeighGrund</a> - 02 Dec 2006
<p /></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Operations<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Operations/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>SiteVOSupport</span> <br />    
Topic revision: r13 - 22 Oct 2010 - 16:52:50 - <span class="twikiNewLink">RobertEngel<a href="/bin/edit/Operations/RobertEngel?topicparent=Operations.SiteVOSupport" rel="nofollow" title="RobertEngel (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />