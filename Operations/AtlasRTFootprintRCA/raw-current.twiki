

---+ ATLAS RT to OSG Footprint Email Blocking -- DRAFT

%TOC%

---++ Situation

After complaints during ATLAS Software Week about slow response of USATLAS to tickets sent to the OSG, it was discovered that return mails from BNL RT to the OSG Footprints had been blocked by the Footprints server. This was identified as an automated process taken by the Footprint server which has a policy of blocking an address if the following conditions are true for 5 of the previous 15 mails from a single address:

   1  The subject is exactly the same.
   2  The &quot;From:&quot; address is exactly the same.
   3  The first 50 characters of the body text of the message are exactly the same.

Mail logs on the Footprint server are only kept for  one month so the exact situation can not be completely reviewed. What we do know is the above rule was applied to mails from the incoming BNL mails. 

---++ Time Table

| Time | Event | 
| Oct 15 | BNL RT Sends mail meeting the conditions described above causing an automated ban of mail from the BNL RT Address | 
| Week of Nov 30 | Complaints during software week about slow response of USATLAS to GGUS issues raised |
| Dec 3 | Arvind Gopu and Jason Smith discuss (GGUS &lt;-&gt; GOC &lt;-&gt; USATLAS RT)  ticket exchange at length via IM, this talk was informational and no problem was reported | 
| Dec 7 | Jason, in coordination with Elizabeth Chism at the GOC, opens a ticket to test the end to end communication, the ticket is routed to BNL, but no return response is received from ATLAS |
| Dec 8 | This is reported to the FP Administrator who removes the block | 
| Dec 9 | Jason reports the Issue to Michael Ernst who forwards the issue to the OSG ET and Ruth | 
| Dec 10 | Rob talks with the Manager of the Footprint Administration Group to investigate and find details of this incident |
| Dec 10 | A mechanism is obtained from Unipress (Developers of Footprints) on how to prevent addresses from being automatically blocked, this is applied to the BNL Address|
| Dec 11 | Initial draft of this report | 

---++ Immediate Corrective Actions

   * December 8th - BNL RT address removed from FP Blocked list.
   * December 10th - BNL RT added to the &quot;Never Block This Address&quot; list on Footprints

---++ Proposed Prevention Mechanisms

   * Daily Ticket Report to VOs - A reporting list much like what is used for OSG accounting and RSV SAM stats is used to send tickets sorted by VO to a list. VO can subscribe and see on a daily basis what tickets are open at the GOC. 
   * Daily Reporting to GOC of Blocked Addresses - A list of any new blocked addresses in FP are sent to the GOC for review on a daily basis.
   * SLA between GOC and GRNOC System Engineering - specifically define service levels. 
   * Operations Meeting Attendance - Tickets which are stalled or have specific issues are reviewed, this is a window for VOs to find and review operational issues.  
   * Daily Testing Mechanism - Some automated testing of important mail addresses and ticket processes. 

-- Main.RobQ - 11 Dec 2009&lt;!-- CONTENT MANAGEMENT PROJECT

