<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> HadoopDeployments &lt; Storage &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Storage/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Storage/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Storage/HadoopDeployments?_T=16 Feb 2017" type="application/x-wiki" title="edit HadoopDeployments" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Storage/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Storage/HadoopDeployments"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#0000FF;
	}
	.patternBookView {
		border-color:#0000FF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Hadoop_Deployments"></a>  <strong><noop>Hadoop Deployments</strong> </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Hadoop_Deployments_at_CMS_Tier2"> Hadoop Deployments at CMS Tier2 Sites</a> <ul>
<li> <a href="?cover=print#Wisconsin"> Wisconsin</a> <ul>
<li> <a href="?cover=print#Networking"> Networking</a>
</li> <li> <a href="?cover=print#Machine_Types"> Machine Types</a>
</li> <li> <a href="?cover=print#Disk_Layout"> Disk Layout</a>
</li></ul> 
</li> <li> <a href="?cover=print#UCSD"> UCSD</a> <ul>
<li> <a href="?cover=print#Networking_AN1"> Networking</a>
</li> <li> <a href="?cover=print#Machine_Types_AN1"> Machine Types</a>
</li> <li> <a href="?cover=print#Disk_Layout_AN1"> Disk Layout</a>
</li></ul> 
</li> <li> <a href="?cover=print#Cern"> Cern</a> <ul>
<li> <a href="?cover=print#Machine_Types_and_Disk_Layout"> Machine Types and Disk Layout</a>
</li> <li> <a href="?cover=print#Networking_AN2"> Networking</a>
</li></ul> 
</li> <li> <a href="?cover=print#Purdue"> Purdue</a>
</li></ul> 
</li></ul> 
</div>
<p />
<h1><a name="Hadoop_Deployments_at_CMS_Tier2"></a> Hadoop Deployments at CMS Tier2 Sites </h1>
<p />
<strong>Purpose</strong>: The purpose of this page is to document the technical details of Hadoop deployments at various sites.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Wisconsin"></a> Wisconsin </span></h2>
<h3><a name="Networking"></a> Networking </h3>
Our HDFS machines are connected by single gigabit Ethernet to one of four stacks of Cisco 3750G or -E switches. The stackes have redundant 10 gigabit fiber Etherchannel uplinks or interconnects.
<h3><a name="Machine_Types"></a> Machine Types </h3>
We have a variety of machines in our cluster, ranging from dedicated 4U systems with 24 or 36 SATA disks to (old) 1U systems with 3 IDE disks. The 1U systems also run Condor and both the 1U and 4U systems may also run gridftp and xrootd.
<h3><a name="Disk_Layout"></a> Disk Layout </h3>
On all of our machines, including the dedicated 4Us, we expose each disk as a single datadir to HDFS. That means that our 4Us have lots of small RAID0 volumes (one for each disk). All of our disks are mounted under /data and automatically tested and added or removed from the HDFS configuration by a script run from cron. Each disk has a single ext3 partition.
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="UCSD"></a> UCSD </span></h2>
<h3><a name="Networking_AN1"></a> Networking </h3>
All hadoop nodes are currently connected via 1Gbps links into a Cisco 6509. We also have deployed a 10Gbps Copper module in our Cisco 6509 as we may move to a sub switch in certain racks and deploy 10Gbps cards in those nodes.
<h3><a name="Machine_Types_AN1"></a> Machine Types </h3>
All nodes have CPU and Storage. This allows us to save space and lower costs for things like Motherboards and chassis since we only purchase that once. Current nodes use an Intel chassis, an SSD for the OS, 12x 3TB disks in a JBOD, two 6-core processors, and 48GB of memory.
<h3><a name="Disk_Layout_AN1"></a> Disk Layout </h3>
We deploy our disks in a JBOD format and allow Hadoop to perform node level replication. This allows us to lose 1 disk in a node and only lose data on that single disk instead of the whole array. As well we are already mirroring so any additional RAID just consumes disks we could use for storage.
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Cern"></a> Cern </span></h2>
<h3><a name="Machine_Types_and_Disk_Layout"></a> Machine Types and Disk Layout </h3>
We deploy dedicated storage nodes of which we have three types. All are 4U boxes with either 24x 750GB disks, 24x 2TB disks or 36x 3TB disks. All nodes run Solaris (we have a variation of Solaris 10, <span class="twikiNewLink">OpenSolaris<a href="/bin/edit/Storage/OpenSolaris?topicparent=Storage.HadoopDeployments" rel="nofollow" title="OpenSolaris (this topic does not yet exist; you can create it)">?</a></span>, <span class="twikiNewLink">OpenIndiana<a href="/bin/edit/Storage/OpenIndiana?topicparent=Storage.HadoopDeployments" rel="nofollow" title="OpenIndiana (this topic does not yet exist; you can create it)">?</a></span>, but basically it's all the same). All nodes have 7+1 or 8+1 RAIDZ volumes that are exposed as data dirs to hadoop and we run most of the hadoop as replication factor = 1 except for crucial files like /store/user, /store/unmerged that are unique to us. The storage amounts to 15TB / 35TB 80TB per node depending on the config. All nodes have 1-2 hot global hot spares.
<h3><a name="Networking_AN2"></a> Networking </h3>
The interconnect right now is 1Gbit shared with worker nodes, but some of the storage nodes have 2-4 links in aggregation. I'm currently planning a tender to move the whole interconnect of our Tier 2 to 10G with possibly trunked 10G links going to the storage nodes (especially the ones running 80TB of stuff per node).
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Purdue"></a> Purdue </span></h2>
Details coming soon.</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Storage<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>HadoopDeployments</span> <br />    
Topic revision: r2 - 05 Sep 2011 - 21:20:57 - <a href="/bin/view/Main/AlexYounts" class="twikiLink">AlexYounts</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />