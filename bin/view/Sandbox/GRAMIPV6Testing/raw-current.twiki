---+ IPv6 Testing Log: !GRAM

This testing log is part of [[Sandbox.OperationsServicesIPv6CompatibilityTable][OSG IPv6 tests]]. This page captures the specific IPv6 compatibility testing process used for one software component, GRAM5. The more general IPv6 template for testing is [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/IPV6Testing][here]].


---++ Initial Setup

This test used two hosts:

| *Host* | *OS* | *OSG Release* |
| osggrid01.hep.wisc.edu | ?? |  3.2  |
| ipv6vm010.fnal.gov | Scientific Linux Fermi release 6.6(Ramsey) | 3.2 |

---+++ Installing software

Next, OSG software was installed on each system. The UCSD host was the client and the FNAL host was the server. And VOMS software was installed following the instructions here [[https://twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallVoms][VOMSInstallation]]

| *Host* | *Package* | *Version* |
| osggrid01.hep.wisc.edu | ?? |  NA |
| ipv6vm010.fnal.gov |  globus-gram-client-tools  | 11.7-1.osg32.el6 |
| ipv6vm010.fnal.gov | condor | CondorVersion: 8.3.4 Mar 02 2015 BuildID: 304666|


---++ Testing

---+++ Testing the dual-dual configuration: Yes

&lt;pre class=&quot;screen&quot;&gt;
&lt;strong&gt; globus-job-run osggrid01.hep.wisc.edu:2119 /usr/bin/id&lt;/strong&gt;
uid=1158(osg_osg) gid=622(osg_uscms01) groups=622(osg_uscms01) context=system_u:system_r:initrc_t:s0
&lt;strong&gt; condor_submit condor-gram5.submit &lt;/strong&gt;
&lt;strong&gt; cat condor-gram5.submit &lt;/strong&gt;
universe = grid
grid_resource = gt5 osggrid01.hep.wisc.edu:2119
output = test.out
log = test.log
executable =/usr/bin/id
&lt;strong&gt; tail test.out &lt;/strong&gt; 
uid=1158(osg_osg) gid=622(osg_uscms01) groups=622(osg_uscms01) context=system_u:system_r:initrc_t:s0
&lt;/pre&gt;


---+++ Testing that dual-dual communication defaults to IPv6:  No (In both condor-g and globus-job-run some communication goes over IPv6 and some over IPv4)
 
&lt;pre class=&quot;screen&quot;&gt;
&lt;strong&gt;tcpdump -i eth0 -vv ip -n host osggrid01.hep.wisc.edu &lt;/strong&gt;
144.92.181.89.43363 &gt; 131.225.41.142.47447: Flags [P.], cksum 0x0076 (incorrect -&gt; 0xa7e0), seq 7571:10941, ack 7321, win 145, options [nop,nop,TS val 3240421705 ecr 171663020], length 3370
16:52:38.268763 IP (tos 0x0, ttl 64, id 29232, offset 0, flags [DF], proto TCP (6), length 52)
    131.225.41.142.47447 &gt; 144.92.181.89.43363: Flags [.], cksum 0x594d (correct), seq 7321, ack 10941, win 160, options [nop,nop,TS val 171663045 ecr 3240421705], length 0
16:52:38.269609 IP (tos 0x0, ttl 64, id 29233, offset 0, flags [DF], proto TCP (6), length 276)
    131.225.41.142.47447 &gt; 144.92.181.89.43363: Flags [P.], cksum 0xf42b (incorrect -&gt; 0x9450), seq 7321:7545, ack 10941, win 160, options [nop,nop,TS val 171663046 ecr 3240421705], length 224
16:52:38.291471 IP (tos 0x0, ttl 57, id 25901, offset 0, flags [DF], proto TCP (6), length 301)
    144.92.181.89.43363 &gt; 131.225.41.142.47447: Flags [P.], cksum 0xc018 (correct), seq 10941:11190, ack 7545, win 167, options [nop,nop,TS val 3240421728 ecr 171663046], length 249

&lt;strong&gt;tcpdump -i eth0 -vv ip6 -n host osggrid01.hep.wisc.edu&lt;/strong&gt;
16:40:26.043941 IP6 (hlim 64, next-header TCP (6) payload length: 40) 2001:400:2410:29::142.37145 &gt; 2607:f388:101c:1000::391.gsigatekeeper: Flags [S], cksum 0x9f55 (correct), seq 4068211, win 14400, options [mss 1440,sackOK,TS val 170930820 ecr 0,nop,wscale 7], length 0
16:40:26.063995 IP6 (hlim 57, next-header TCP (6) payload length: 40) 2607:f388:101c:1000::391.gsigatekeeper &gt; 2001:400:2410:29::142.37145: Flags [S.], cksum 0x5b81 (correct), seq 1553033587, ack 4068212, win 14280, options [mss 1440,sackOK,TS val 3239689500 ecr 170930820,nop,wscale 7], length 0
16:40:26.064014 IP6 (hlim 64, next-header TCP (6) payload length: 32) 2001:400:2410:29::142.37145 &gt; 2607:f388:101c:1000::391.gsigatekeeper: Flags [.], cksum 0xc17c (correct), seq 1, ack 1, win 113, options [nop,nop,TS val 170930840 ecr 3239689500], length 0
16:40:26.067016 IP6 (hlim 64, next-header TCP (6) payload length: 198) 2001:400:2410:29::142.37145 &gt; 2607:f388:101c:1000::391.gsigatekeeper: Flags [P.], cksum 0x8785 (incorrect -&gt; 0x8ddb), seq 1:167, ack 1, win 113, options [nop,nop,TS val 170930843 ecr 3239689500], length 166
16:40:26.087010 IP6 (hlim 57, next-header TCP (6) payload length: 32) 2607:f388:101c:1000::391.gsigatekeeper &gt; 2001:400:2410:29::142.37145: Flags [.], cksum 0xc0b5 (correct), seq 1, ack 167, win 120, options [nop,nop,TS val 3239689523 ecr 170930843], length 0
16:40:26.096044 IP6 (hlim 57, next-header TCP (6) payload length: 3685) 2607:f388:101c:1000::391.gsigatekeeper &gt; 2001:400:2410:29::142.37145: Flags [P.], cksum 0x9524 (incorrect -&gt; 0xcac9), seq 1:3654, ack 167, win 120, options [nop,nop,TS val 3239689532 ecr 170930843], length 3653
16:40:26.096054 IP6 (hlim 64, next-header TCP (6) payload length: 32) 2001:400:2410:29::142.37145 &gt; 2607:f388:101c:1000::391.gsigatekeeper: Flags [.], cksum 0xb23b (correct), seq 167, ack 3654, win 135, options [nop,nop,TS val 170930872 ecr 3239689532], length 0
16:40:26.099783 IP6 (hlim 64, next-header TCP (6) payload length: 2888) 2001:400:2410:29::142.37145 &gt; 2607:f388:101c:1000::391.gsigatekeeper: Flags [.], cksum 0x9207 (incorrect -&gt; 0x8000), seq 167:3023, ack 3654, win 135, options [nop,nop,TS val 170930876 ecr 3239689532], length 2856
16:40:26.099861 IP6 (hlim 64, next-header TCP (6) payload length: 2888) 2001:400:2410:29::142.37145 &gt; 2607:f388:101c:1000::391.gsigatekeeper: Flags [.], cksum 0x9207 (incorrect -&gt; 0xf0ad), seq 3023:5879, ack 3654, win 135, options [nop,nop,TS val 170930876 ecr 3239689532], length 2856
&lt;/pre&gt;

---+++ Testing the dual server / IPv4 client configuration: Yes

Same tests were done as in the other cases


-- Main.EdgarMauricioFajardoHernandez2 - 20 Mar 2015

