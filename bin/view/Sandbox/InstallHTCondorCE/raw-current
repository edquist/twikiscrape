<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> InstallHTCondorCE &lt; Sandbox &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/InstallHTCondorCE?_T=16 Feb 2017" type="application/x-wiki" title="edit InstallHTCondorCE" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><meta name="robots" content="noindex,nofollow"> 
<base href="https://twiki.opensciencegrid.org/bin/view/Sandbox/InstallHTCondorCE"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#DDDDDD" />&nbsp;<a href="/bin/view/Sandbox/WebHome">Sandbox Web</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Sandbox/InstallHTCondorCE" title='Topic revision: 18 (15 Jan 2015 - 15:18:34)'>InstallHTCondorCE</a> <span class='patternRevInfo'>(15 Jan 2015, <a href="/bin/view/Main/BrianLin" class="twikiLink">BrianLin</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">%TOC{depth=&quot;3&quot;}%

---+ Installing and Maintaining HTCondor CE

The HTCondor CE software is a *job gateway* for an OSG Compute Element (CE). As such, HTCondor CE is the entry point for jobs coming from the OSG — it handles authorization and delegation of jobs to your local batch system. In OSG today, most CEs accept *pilot jobs* from a factory, which in turn are able to accept and run end-user jobs.

Use this page to learn how to install, configure, run, test, and troubleshoot HTCondor CE from the OSG software repositories.

---++ Before Starting

Before starting the installation process, consider the following points (consulting [[#Reference][the Reference section below]] as needed):

   * *User IDs:* If they do not exist already, the installation will create the Linux user IDs =condor= (UID 4716) and =gratia= (UID 42401)
   * *Service certificate:* The HTCondor CE service uses a host certificate at =/etc/grid-security/host*.pem=
   * *Network ports:* The HTCondor CE service listens on ports 9619 and 9620 (TCP), which must be reachable from the pilot factories that your site works with

As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:

   * Ensure the host has [[SupportedOperatingSystems][a supported operating system]]
   * Obtain root access to the host
   * Prepare [[YumRepositories][the required Yum repositories]]
   * Install [[InstallCertAuth][CA certificates]]


---++ Installation

An HTCondor CE installation consists of the job gateway (i.e., the HTCondor&amp;nbsp;CE job router) and other support software (e.g., !GridFTP, a Gratia probe, authorization software). To simplify installation, OSG provides convenience RPMs that install all required software with a single command.

&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;If you are updating an existing CE, it is recommended that you update existing software first:&lt;/p&gt;
&lt;pre class=&quot;rootscreen&quot;&gt;%UCL_PROMPT_ROOT% yum update&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Select the appropriate convenience RPM(s):&lt;/p&gt;
%TABLE{sort=&quot;off&quot;}%
| *If your batch system is…* | *Then use the following package(s)…* |
| HTCondor | =osg-ce-condor= |
| LSF | =osg-ce-lsf= |
| PBS | =osg-ce-pbs= |
| SGE | =osg-ce-sge= |
| SLURM | =osg-ce-pbs gratia-probe-slurm= |
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install the CE software:&lt;/p&gt;
&lt;pre class=&quot;rootscreen&quot;&gt;%UCL_PROMPT_ROOT% yum install &lt;em&gt;PACKAGE(S)&lt;/em&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;

%NOTE% To ease the transition from GRAM to HTCondor CEs, the convenience RPMs install both types of job gateway software. By default, the HTCondor gateway is enabled and the GRAM gateway is disabled, which is the correct configuration for most HTCondor CE-based sites (but see the gateway configuration section below for more options).

%NOTE% HTCondor&amp;nbsp;CE version 1.6 or later is required to send site resource information to OSG for matching jobs to resources.

---++ Configuration

The following section walks through the steps necessary to enable the HTCondor CE then configure it to interact with your batch system and authorization method. If your needs are greater than what is offered by the default configuration, there is a section on [[#OptionalConfig][optional configurations]].

---+++ Enabling HTCondor CE

If you are updating a GRAM CE, enable the HTCondor gateway and disable the GRAM gateway in =/etc/osg/config.d/10-gateway.ini=. This is the default in new installations: 

&lt;pre class=&quot;file&quot;&gt;
gram_gateway_enabled = False
htcondor_gateway_enabled = True
&lt;/pre&gt; \

%NOTE% If you need to run _both_ HTCondor&amp;nbsp;CE and GRAM (e.g. you need to run SAM tests), you need to enable both gateways:

&lt;pre class=&quot;file&quot;&gt;
gram_gateway_enabled = True
htcondor_gateway_enabled = True
&lt;/pre&gt;

More information about the GRAM CE can be found [[Documentation.Release3.InstallComputeElement][here]].

#BatchSystem
---+++ Configuring your batch system

Enable your batch system by editing the =enabled= field in =/etc/osg/config.d/20-&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;&amp;lt;your batch system&amp;gt;&lt;/span&gt;.ini=: 

&lt;pre class=&quot;file&quot;&gt;
enabled = &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;True&lt;/span&gt;
&lt;/pre&gt;

---++++ Non-HTCondor batch systems

This section is only required if you are *not* using HTCondor as your local batch system. If you *are* using HTCondor as your local batch system, skip to the [[#ConfiguringAuthorization][configuring authorization]] section.

---+++++ Sharing the spool directory

To transfer files between the CE and the worker nodes, HTCondor&amp;nbsp;CE requires a shared file system between worker nodes and the CE. We recommend setting up an NFS server on the CE dedicated to sharing the spool directory with the site&amp;rsquo;s worker nodes instead of using a pre-existing NFS share. By default, the spool directory is =/var/lib/condor-ce= but you can control this by setting the =SPOOL= configuration variable in =/etc/condor-ce/config.d=.  

%NOTE% Root squash must be turned off and the directory must be readable/writeable by the condor user for HTCondor&amp;nbsp;CE to function correctly.

---+++++ Disable blahp worker node proxy renewal

Turn off worker node proxy renewal in =/etc/blah.conf= by specifying the following two lines: 

&lt;pre class=&quot;file&quot;&gt;
blah_disable_wn_proxy_renewal=yes
blah_delegate_renewed_proxies=no
&lt;/pre&gt;\

%NOTE% There should be no whitespace around the =&amp;#61;=. 

#ConfiguringAuthorization
---+++ Configuring Authorization

There are two methods to manage authorization for incoming jobs, edg-mkgridmap and GUMS. edg-mkgridmap is a simpler to manage, albeit less powerful, authorization management system than GUMS. We recommend using edg-mkgridmap unless you have specific needs that require the use of GUMS. Some examples of these specific requirements are:

   * You want to map users based on rules
   * You need to support multiple VO roles
   * You need to support glexec for pilot jobs

---++++ edg-mkgridmap

   1. Edit your list of accepted VO&amp;rsquo;s in =/etc-edg-mkgridmap.conf= as specified in the [[Documentation/Release3.Edg-mkgridmap][edg-mkgridmap]] document.
   1. Under the =authorize_only= policy of =/etc/lcmaps.db=, comment out the =gumsclient= line and uncomment the =gridmapfile= line.  The resulting policy should read: \
&lt;pre class=&quot;file&quot;&gt;
authorize_only:
# gumsclient -&gt; good | bad
gridmapfile -&gt; good | bad
&lt;/pre&gt;
   1. Specify the location of your grid mapfile in =/etc/condor-ce/config.d/01-common-auth.conf=: \
&lt;pre class=&quot;file&quot;&gt;
GRIDMAP = /etc/grid-security/grid-mapfile
&lt;/pre&gt;

---++++ GUMS

   1. Install and set up GUMS as specified in the [[Documentation/Release3.InstallGums][installation document]].
   1. Set the =authorization_method= and =gums_host= in =/etc/osg/config.d/10-misc.ini=:\
&lt;pre class=&quot;file&quot;&gt;
authorization_method = &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;xacml&lt;/span&gt;
gums_host = &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;gumshost.example.com&lt;/span&gt;
&lt;/pre&gt;\
&lt;p&gt;Replacing &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;gumshost.example.com&lt;/span&gt; with the hostname of your GUMS server&lt;/p&gt;

%NOTE% Once gsi-authz.conf is in place, your local HTCondor will attempt to utilize the LCMAPS callouts if enabled in the condor_mapfile.  If this is not the desired behavior, set GSI_AUTHZ_CONF=/dev/null in the local HTCondor configuration.

---+++ Applying your configuration
[[Documentation.Release3.IniConfigurationOptions][osg-configure]] is a configuration tool that is used to configure a CE. This section covers only the HTCondor&amp;nbsp;CE-specific options of =osg-configure=. You must make other configuration changes before applying your configuration with =osg-configure=. 

   1. Verify your configuration, addressing errors as they appear: \
&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% osg-configure -v
&lt;/pre&gt;
   1. Once the previous command runs successfully without any errors, apply your configuration: \
&lt;pre class=&quot;rootscreen&quot;&gt;
%UCL_PROMPT_ROOT% osg-configure -c
&lt;/pre&gt;

#OptionalConfig
---+++ Optional Configuration

The following configuration steps are optional and will likely not be required for setting up a small site. Skip to the [[#StartingServices][starting and enabling services]] section if you are not interested in any of the following:

   * [[#JobRoutes][Transforming and filtering jobs]]
   * [[#NetworkInterfaces][Configuring for multiple network interfaces]]
   * [[#LocalUni][Limiting or disabling locally running jobs on the CE]]
   * [[#AccountingGroups][HTCondor accounting groups]]
   * [[#BinPath][Batch system client tools in non-standard locations]]
   * [[#SubmitAttr][Adding attributes to each job]]

#JobRoutes
---++++ Transforming and filtering jobs

If you need to modify or filter jobs, more information can be found in the [[Documentation/Release3.JobRouterRecipes][Job Router Recipes]] document.

%NOTE% If you need to assign jobs to HTCondor accounting groups, refer to [[#AccountingGroups][this]] section. 

#NetworkInterfaces
---++++ Configuring for multiple network interfaces
If you have multiple network interfaces with different hostnames, the HTCondor&amp;nbsp;CE daemons need to know which hostname to use when communicating to each other. Generally, you will want to set =NETWORK_HOSTNAME= to the hostname of your public interface in your =/etc/condor-ce/config.d/= directory with the line:

&lt;pre class=&quot;file&quot;&gt;
NETWORK_HOSTNAME=&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;condorce.example.com&lt;/span&gt;
&lt;/pre&gt;

Replacing &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;condorce.example.com&lt;/span&gt; text with your public interface&amp;rsquo;s hostname.

#LocalUni
---++++ Limiting or disabling locally jobs running on the CE

If you want to limit or disable jobs running locally on your CE, you will need to configure HTCondor CE&#39;s local and scheduler universes. Local and scheduler universes are HTCondor&amp;nbsp;CE&amp;rsquo;s analogue to GRAM&amp;rsquo;s managed fork: they allow jobs to be run on the CE itself. The two universes are effectively the same (scheduler universe launches a starter process for each job), so we will be configuring them in unison.

   * *To change the default limit* on the number of locally run jobs (the current default is 20), add the following to  =/etc/condor-ce/config.d/99-local.conf=: &lt;pre class=&#39;file&#39;&gt;START_LOCAL_UNIVERSE = &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;TotalLocalJobsRunning + TotalSchedulerJobsRunning &lt; &amp;lt;job limit&amp;gt;&lt;/span&gt;
START_SCHEDULER_UNIVERSE = $(START_LOCAL_UNIVERSE)&lt;/pre&gt;
   * *To only allow a specific user* to start locally run jobs, add the following to  =/etc/condor-ce/config.d/99-local.conf=: &lt;pre class=&#39;file&#39;&gt;START_LOCAL_UNIVERSE = &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;target.Owner =?= &quot;&amp;lt;username&amp;gt;&quot;&lt;/span&gt;
START_SCHEDULER_UNIVERSE = $(START_LOCAL_UNIVERSE)&lt;/pre&gt;
   * *To disable* locally run jobs, add the following to  =/etc/condor-ce/config.d/99-local.conf=: &lt;pre class=&#39;file&#39;&gt;START_LOCAL_UNIVERSE = &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;False&lt;/span&gt;
START_SCHEDULER_UNIVERSE = $(START_LOCAL_UNIVERSE)&lt;/pre&gt;

#AccountingGroups
---++++ HTCondor accounting groups

%NOTE% For HTCondor batch systems only 

If you want to provide fairshare on a group basis, as opposed to a Unix user basis, you can use HTCondor accounting groups.  They are independent of the Unix groups the user may already be in, and are [[http://research.cs.wisc.edu/condor/manual/v8.2/3_4User_Priorities.html#SECTION00447000000000000000][documented in the HTCondor manual]].  If you are using HTCondor accounting groups, you can map jobs from the CE into HTCondor accounting groups based on their numeric user id, their DN, or their VOMS attributes.

---+++++ Mapping by UID

To map UID&amp;rsquo;s to an accounting group, use =/etc/osg/uid_table.txt=. It is consulted first and contains lines of the form:

&lt;pre class=&quot;file&quot;&gt;
uid GroupName
&lt;/pre&gt;
%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Click to expand example uid_table.txt&amp;hellip;&quot;}%
&lt;pre class=&quot;file&quot;&gt;
uscms02 TestGroup
osg     other.osgedu
&lt;/pre&gt;
%ENDTWISTY%

---+++++ Mapping by DN or VOMS attribute

To map DN&amp;rsquo;s or VOMS attributes to an accounting group, use =/etc/osg/extattr_table.txt=. This file is only consulted if the user is not found in the UID file and it contains lines of the form:

&lt;pre class=&quot;file&quot;&gt;
&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;SubjectOrAttribute&lt;/span&gt; GroupName
&lt;/pre&gt;

The &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;SubjectOrAttribute&lt;/span&gt; can be a Perl regular expression. %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Click to expand example extattr_table.txt&amp;hellip;&quot;}%
&lt;pre class=&quot;file&quot;&gt;
cmsprio cms.other.prio
cms\/Role=production cms.prod
.* other
&lt;/pre&gt;
%ENDTWISTY%

#BinPath
---++++ Batch system client tools in non-standard locations

%NOTE% For non-HTCondor batch systems only 

If your batch system binaries aren&amp;rsquo;t in the standard location or are not in your PATH, you will need to configure =/etc/blah.config= to point to the directory where you keep said binaries. If your SGE binaries live in =/opt/sge/bin=, then you would want to change the =sge_binpath= configuration variable to read:

&lt;pre class=&quot;file&quot;&gt;
sge_binpath=&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;/opt/sge/bin&lt;/span&gt;
&lt;/pre&gt;

#SubmitAttr
---++++ Adding attributes to each job

%NOTE% This method adds attributes to *all* jobs that are submitted to your batch system. It is recommended to instead use [[Documentation/Release3.JobRouterRecipes][job routes]] wherever possible: you can use job routes to specify [[Documentation/Release3.JobRouterRecipes#2_6_Setting_a_Default][defaults]] for requested memory, requested number of cores, batch system queue, and walltime.

Additional attributes can be inserted into the job submit script by editing =/usr/libexec/blahp/&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;&amp;lt;batch system&amp;gt;&lt;/span&gt;_local_submit_attributes.sh=.  This file is sourced during submit time and anything printed to stdout is appended to the job submit script.  For example, the following will set a default walltime for PBS: \

&lt;pre class=&quot;file&quot;&gt;#!/bin/sh

# Set walltime according to request; the batch system
# may reject this, of course!
if [ -n &quot;$Walltime&quot; ]; then
  echo &quot;#PBS -l walltime=$Walltime&quot;
else
  echo &quot;#PBS -l walltime=24:00:00&quot;
fi
&lt;/pre&gt;

The environment variable =$Walltime= is set if the the attribute =remote_cerequirements= is set in the HTCondor-G job.  That attribute should follow the form:

&lt;pre class=&quot;file&quot;&gt;remote_cerequirements = foo == X &amp;&amp; bar == Y &amp;&amp; ...&lt;/pre&gt;

to set =foo= to value X and =bar= to Y in the environment of =&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;&amp;lt;batch system&amp;gt;&lt;/span&gt;_local_submit_attributes.sh=.  So, to set the Walltime to 1 hour with the above =&lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;&amp;lt;batch system&amp;gt;&lt;/span&gt;_local_submit_attributes.sh=, the job would need:

&lt;pre class=&quot;file&quot;&gt;remote_cerequirements = Walltime == 3600&lt;/pre&gt;

#StartingServices
---++ Using HTCondor CE

When you believe that configuration is complete, you need to enable (for next reboot) and start (for now) the CE services. The services are:

%TABLE{sort=&quot;off&quot;}%
| *Software* | *Service Name* |
| !FetchCRL | =fetch-crl-boot= (or =fetch-crl3-boot= for EL5)%BR%=fetch-crl-cron= (or =fetch-crl3-cron= for EL5)  |
| Gratia | =gratia-probes-cron= |
| Your batch system | =condor=, =pbs_server=, etc. |
| HTCondor CE | =condor-ce= |

To enable and start services, do the following for each service name in the table above:

&lt;pre class=&quot;root screen&quot;&gt;
%UCL_PROMPT_ROOT% chkconfig &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;SERVICE-NAME&lt;/span&gt; on
%UCL_PROMPT_ROOT% service &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;SERVICE-NAME&lt;/span&gt; start
&lt;/pre&gt;

If you need to disable and stop services, do the following for each service name in the table above:

&lt;pre class=&quot;root screen&quot;&gt;
%UCL_PROMPT_ROOT% chkconfig &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;SERVICE-NAME&lt;/span&gt; off
%UCL_PROMPT_ROOT% service &lt;span style=&quot;background-color: #FFCCFF;&quot;&gt;SERVICE-NAME&lt;/span&gt; stop
&lt;/pre&gt;

---++ Validation
   1. Perform automated verification by running [[Documentation/Release3.InstallRSV][RSV]].
   1. Manually verify your HTCondor&amp;nbsp;CE. To do this, read over the [[Documentation/Release3.TroubleshootingHTCondorCE][HTCondor CE troubleshooting guide]] and use the [[Documentation/Release3.TroubleshootingHTCondorCE#condor_ce_run][condor_ce_run]], [[Documentation/Release3.TroubleshootingHTCondorCE#condor_ce_trace][condor_ce_trace]], and [[Documentation/Release3.TroubleshootingHTCondorCE#condor_submit][condor_submit]] commands against your CE from a remote host.

---++ Troubleshooting
For information on how to troublesshot your HTCondor CE, please refer to [[Documentation/Release3.TroubleshootingHTCondorCE][this document]].

---++ Registering the CE

To be part of the OSG Production Grid, your CE must be registered in the [[https://oim.grid.iu.edu/ OSG Information Management System]] (OIM). To register your resource:

   1. [[Documentation.CertificateUserGet][Obtain, install, and verify your user certificate]] (which you may have done already)
   1. [[Operations.OIMRegistrationInstructions][Register your site and CE in OIM]]

---++ How to get Help?
To get assistance please use the [[Documentation.HelpProcedure][this page]].

#Reference
---++ Reference

   * HTCondor CE overview and architecture (coming soon)
   * [[Documentation/Release3.JobRouterRecipes][Configuring HTCondor CE job routes]]
   * [[Documentation/Release3.TroubleshootingHTCondorCE][Troubleshooting HTCondor CE]]

---+++ Users

%STARTSECTION{&quot;Users&quot;}%
The following users are needed by HTCondor CE at all sites:

| *User* | *Comment* |
| =condor= | The HTCondor CE will be run as root, but perform most of its operations as the =condor= user. |
| =gratia= | Runs the Gratia probes to collect accounting data |
%ENDSECTION{&quot;Users&quot;}%

---+++ Certificates
| *Certificate* | *User that owns certificate* | *Path to certificate* |
| Host certificate | =root= | =/etc/grid-security/hostcert.pem= &lt;br&gt; =/etc/grid-security/hostkey.pem= |

Find instructions to request a host certificate [[Documentation/Release3.GetHostServiceCertificates][here]].

---+++ Networking

%STARTSECTION{&quot;Firewalls&quot;}%
%INCLUDE{&quot;Documentation/Release3/FirewallInformation&quot; section=&quot;FirewallTable&quot; lines=&quot;htcondorce,htcondorce_shared&quot;}% 

Allow inbound and outbound network connection to all internal site servers, such as GUMS and the batch system head-node only ephemeral outgoing ports are necessary.&lt;/br&gt;

%ENDSECTION{&quot;Firewalls&quot;}%</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Sandbox/InstallHTCondorCE?t=1487267481;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Sandbox/InstallHTCondorCE' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Sandbox/InstallHTCondorCE?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Sandbox/InstallHTCondorCE?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r18&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/InstallHTCondorCE?rev1=18;rev2=17">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/InstallHTCondorCE?rev=17">r17</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/InstallHTCondorCE?rev1=17;rev2=16">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/InstallHTCondorCE?rev=16">r16</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/InstallHTCondorCE?rev1=16;rev2=15">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/InstallHTCondorCE?rev=15">r15</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Sandbox/InstallHTCondorCE?rev1=15;rev2=14">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Sandbox/InstallHTCondorCE?rev=14">r14</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Sandbox/InstallHTCondorCE?template=backlinksweb' rel='nofollow' title='Search the Sandbox Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Sandbox/InstallHTCondorCE' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Sandbox/InstallHTCondorCE?template=oopsmore&amp;param1=18&amp;param2=18' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r18 - 15 Jan 2015 - 15:18:34 - <a href="/bin/view/Main/BrianLin" class="twikiLink">BrianLin</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top"><br/>Register</a>
<p />
<p />
<!-- Google CSE Search Box Ends
<h5><a name="Common_links"></a> Common links </h5> <ul>
<li> <a href="/bin/view/Main/WebHome" class="twikiLink">OSG TWiki home</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome" class="twikiLink">RPM Install guides - OSG 3.0</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Pacman Install guides OSG 1.2</a>
</li> <li> <a href="/bin/view/Documentation/WebHome" class="twikiLink">Technical Documentation</a>
</li> <li> <a href="/bin/view/Documentation/SiteAdminResources" class="twikiLink">Contact Info</a> 
</li> <li> <strong><a href="/bin/view/Main/ICantFindItForm" class="twikiLink">I can't find it!</a></strong>  -->
</li></ul> 
<div class="container">
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="Home">About the OSG</a></div>
        <div id="item"><a  style="" href="/bin/view/Documentation/UsingTheGrid" class="twikiLink" title="Instructions for Using OSG">New Users</a></div>
        <div id="item"><a href="http://myosg.grid.iu.edu/map?map_attrs_shownr=on&amp;all_sites=on&amp;active=on&amp;active_value=1&amp;disable_value=1&amp;gridtype=on&amp;gridtype_1=on" target="_top">OSG Sites</a></div>
        <div id="item"><a  style="" href="http://myosg.grid.iu.edu/vosummary?all_vos=on&amp;active=on&amp;active_value=1&amp;datasource=summary" target="_top" title="List of Virtual Organizations">OSG VOs</a></div>
        <div id="item"><a href="http://display.grid.iu.edu/" target="_top">OSG Usage Graphs</a></div>
        <div id="item"><a  style="" href="https://indico.fnal.gov/categoryDisplay.py?categId=86" target="_top" title="OSG Event Calendar">Events</a></div>
       <div id="item"><a href="/bin/view/Management/OSGOrganizationInformation" class="twikiLink">OSG Organization</a></div>
<p />
    </div>
<p />
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head">OSG at Work</div>
        <div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Official Documentation Home">Technical Documentation</a></div>
        <div id="item"><a href="/bin/view/Security/WebHome" class="twikiLink">Security</a></div>
        <div id="item"><a href="/bin/view/SoftwareTeam/WebHome" class="twikiLink">Software Team</a></div>
        <div id="item"><a href="/bin/view/Education/WebHome" class="twikiLink">Education</a></div>
        <div id="item"><a href="/bin/view/Management/WebHome" class="twikiLink">Management</a></div>
        <div id="item"><a  style="" href="/bin/view/Management/ScientificPublications" class="twikiLink" title="Scientific Publications and Citing OSG">Scientific Publications</a></div>
        <div id="item"><a href="/bin/view/Management/OSGResearchHighlights" class="twikiLink">Research Highlights</a></div>
    </div>
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Sandbox/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Sandbox/InstallHTCondorCE"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Sandbox/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Sandbox" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Sandbox"></a>  <a href="/bin/view/Sandbox/WebHome" class="twikiCurrentWebHomeLink twikiLink">Sandbox</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/InstallHTCondorCE?t=1487267481;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Sandbox/InstallHTCondorCE" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Sandbox/InstallHTCondorCE?pdftitle=InstallHTCondorCE" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>