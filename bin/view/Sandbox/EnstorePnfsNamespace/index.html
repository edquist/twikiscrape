<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> EnstorePnfsNamespace &lt; Sandbox &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Sandbox/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Sandbox/EnstorePnfsNamespace?_T=16 Feb 2017" type="application/x-wiki" title="edit EnstorePnfsNamespace" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><meta name="robots" content="noindex,nofollow"> 
<base href="https://twiki.opensciencegrid.org/bin/view/Sandbox/EnstorePnfsNamespace"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> PNFS is a virtual file system package that implements the Enstore namespace. Refer to section 1.2 PNFS Namespace for introductory information on PNFS. 
<p />
<h1><a name="UNIX_Commands_Available_in_PNFS"></a> UNIX Commands Available in PNFS Space </h1>
<p />
Data files do not actually reside in the /pnfs namespace. Errors occur on attempts to read or write the content of the files, or to manipulate the content. Therefore, UNIX commands such as cat, more, less, grep, head, tail, wc, od, file, cp, and so on, fail if you run them on files listed under /pnfs. 
<p />
However, virtually any non-I/O UNIX command can be used in the /pnfs namespace. For help with these commands, consult a UNIX manual or the man pages. Read and write access is governed by standard UNIX file permissions. Commands that you may find useful include: 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> ls </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> pwd </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2"> mv </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol3 twikiLastCol"> mvdir<sup> <a href="/bin/view/Sandbox/EnstorePnfsNamespace#FootnoteMvdir" class="twikiCurrentTopicLink twikiAnchorLink">1</a></sup> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> find </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> rm </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2"> rmdir </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol3 twikiLastCol"> cd </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> chmod </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> ln<sup> <a href="/bin/view/Sandbox/EnstorePnfsNamespace#FootnoteLn" class="twikiCurrentTopicLink twikiAnchorLink">2</a></sup> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLast"> stat<sup> <a href="/bin/view/Sandbox/EnstorePnfsNamespace#FootnoteStat" class="twikiCurrentTopicLink twikiAnchorLink">3</a></sup> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol3 twikiLastCol twikiLast"> chown </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p /> <ol>
<li> <a name="FootnoteMvdir"></a>Files and directories must not be moved across PNFS database areas. Doing so will destroy Enstore metadata. 
</li> <li> <a name="FootnoteLn"></a>Hard links must be used to ensure that all the metadata information is linked. Symbolic links do not work properly. 
</li> <li> <a name="FootnoteStat"></a> <code>stat</code> is not available in all operating systems.
</li></ol> 
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" />     <strong><font color="#ff0000">WARNING!</font></strong> </dt><dd> The number of files in a single PNFS directory should not exceed 2000.
</dd></dl> 
<p />
<h1><a name="PNFS_Tags"></a> PNFS Tags </h1>
Before files can be written to tape, Enstore needs to know where and how to write them. Pnfs uses tag files (usually just called tags) in the /pnfs namespace to specify this type of configuration information, and encp transfers this information to Enstore. Tags are associated with directories in the /pnfs namespace, not with any specific file, and thus apply to all files within a given directory (with the exception noted below). When a new directory in the /pnfs namespace is created, it inherits references to the tags of its parent directory. It is a feature of PNFS that a change to a parent directory will also affect its existing subdirectorys&#8217; tag references. 
<p />
Manually setting a directory&#8217;s tags will destroy references to its parent directory&#8217;s tags. This may be what you want to do, but be aware.
<p />
A file gets the tag references of its directory as they exist when the file is written to Enstore, and these are what encp uses to access it. Subsequent changes to a directory&#8217;s tag references do not affect pre-existing files, therefore it&#8217;s possible to have files in a directory to which the current directory tags do not apply. 
<p />
Allowable characters within tags are: alphanumeric characters, underscore ( _ ), dash ( - ), and slash ( / ). 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Tag_Listing"></a> Tag Listing </span></h2>
The tags include: 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> file_family </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> This tag determines the file family associated with all files in this directory. See section 2.2.1 File Family for information on file families. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> file_family_width </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> This tag determines the file family width associated with all files in this directory. See section 2.2.2 File Family Width for information on file family width. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> file_family_wrapper </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> This tag determines the file family wrapper associated with all files in this directory. See section 2.2.3 File Family Wrapper for information on file family wrappers. The default is cpio_odc. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> library </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> This tag determines the virtual library (and thus the library manager) associated with all files in this directory. See section 8.3 Library Manager for information about the library. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> storage_group </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> This tag determines the storage group associated with all files in this directory, and shows up as your experiment&#8217;s top level directory under /pnfs. Typically, one storage group is associated with an entire experiment. A storage group is assigned to each experiment by the Enstore administrators. Users never change this tag. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Viewing_Tags_On_Site"></a> Viewing Tags On-Site </span></h2>
<p />
On-site users can view the values of the tags for a given directory:
<p /> <ol>
<li> Setup encp, with qualifier. See <a href="/bin/view/Sandbox/EnstoreCopyingFilesWithEncp#SetupEncp" class="twikiAnchorLink">Setup encp</a>. 
</li> <li> cd to the /pnfs subdirectory of interest, or enter the directory as an argument to <code>--tags</code>
</li> <li> Type <code>enstore pnfs --tags</code> and press Enter.
</li></ol> 
<p />
The following is sample output. 
<p />
<pre>
   .(tag)(file&#95;family) &#61; dcache
   .(tag)(file&#95;family&#95;width) &#61; 1
   .(tag)(file&#95;family&#95;wrapper) &#61; cpio&#95;odc
   .(tag)(library) &#61; eagle
   .(tag)(storage&#95;group) &#61; test
   -rw-rw-r-- 11 xyz sys 6 Jul 26 10:22 .(tag)(file&#95;family)
   -rw-rw-r-- 11 xyz sys 1 May 5 2000 .(tag)(file&#95;family&#95;width)
   -rw-rw-r-- 11 xyz sys 8 May 5 2000 .(tag)(file&#95;family&#95;wrapper)
   -rw-rw-r-- 11 xyz sys 5 May 5 2000 .(tag)(library)
   -rw-r--r-- 11 xyz sys 4 Jul 26 10:20 .(tag)(storage&#95;group)
</pre>
<p />
The output first lists the tags and their values, then the tags again in long format to show the owners and protection modes. 
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#0000ff">NOTE</font></strong> </dt><dd> Off-site users cannot mount pnfs, and therefore cannot see tags. 
</dd></dl> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Sandbox<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a> &gt; <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> &gt; <a href="/bin/view/Sandbox/ForrestChristianSandbox" class="twikiLink">ForrestChristianSandbox</a> &gt; <a href="/bin/view/Sandbox/EnstoreIntro" class="twikiLink">EnstoreIntro</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>EnstorePnfsNamespace</span> <br />    
Topic revision: r3 - 04 Dec 2006 - 23:30:20 - <span class="twikiNewLink">ForrestChristian<a href="/bin/edit/Sandbox/ForrestChristian?topicparent=Sandbox.EnstorePnfsNamespace" rel="nofollow" title="ForrestChristian (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />