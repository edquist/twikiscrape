<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> UserSchool15Wed21GlideinDiff &lt; Education &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/UserSchool15Wed21GlideinDiff?_T=16 Feb 2017" type="application/x-wiki" title="edit UserSchool15Wed21GlideinDiff" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/UserSchool15Wed21GlideinDiff"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Wednesday_Exercise_2_1_Hardware"></a> Wednesday Exercise 2.1: Hardware Differences in the OSG </h1>
<p />
The goal of this exercise is to compare hardware differences between our local cluster (CHTC here at UW–Madison) and an OSG glidein pool. Specifically, we will look at how easy it is to get access to resources in terms of the amount of memory that is requested. This will not be a very careful study, but should give you some idea of one way in which the pools are different.
<p />
In the first two parts of the exercise, you will submit a bunch of jobs that differ only in how much memory each one requests; we call this a <em>parameter sweep</em>, in that we are testing many possible values of a parameter. We will request memory from 1&ndash;8 GB, in increments of 1 GB. One set of jobs will be submitted locally, and the other, identical set of jobs will be submitted to OSG. You will check the queue periodically to see how many jobs have completed and how many are still waiting to run.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Part_1_Checking_on_the_Availabil"></a> Part 1: Checking on the Availability of Memory, Locally </span></h2>
<p />
In this first part, you will create the submit files for both the local and OSG jobs, then submit the local set.
<p />
<h3><a name="Create_the_Submit_Files"></a> Create the Submit Files </h3>
<p />
To create our parameter sweep, we will create 8 submit files, each differing only in the value of our parameter, <code>request_memory</code>.
<p /> <ol>
<li> If not already, log on to <code>osg-ss-submit</code>
</li> <li> Create and change into a new subdirectory (e.g., <code>tuesday-2.1</code>) for this exercise &ndash; doing things this way will make Part 2 much easier
</li> <li> Create a submit file that is named <code>sleep-1gb.sub</code> and that executes the command <code>/bin/sleep 10</code>       <p>If you do not remember all of the submit statements to write this file, or just to go faster, find a similar submit file from yesterday, copy and rename it here, and make sure the argument to <code>sleep</code> is <code>10</code> (although the exact value does not matter for the test).</p>
</li> <li> Request exactly 1 gigabyte (GB) of memory:       <pre class="file">request_memory = 1GB</pre>
</li> <li> Set the submit file to run 5 instances of this job:       <pre class="file">queue 5</pre>
</li> <li> Save the submit file and exit your editor
</li> <li> Make seven copies of <code>sleep-1gb.sub</code>: <code>sleep-2gb.sub</code>, <code>sleep-3gb.sub</code>, &hellip;, <code>sleep-8gb.sub</code>
</li> <li> Edit each copy so that the <code>request_memory</code> setting matches the filename: <code>2GB</code>, <code>3GB</code>, &hellip;, <code>8GB</code>
</li></ol> 
<p />
<strong>Note:</strong> It is also possible to set up this parameter sweep using DAGMan, VARS, and a single submit file. If you would like the extra challenge, do this version instead of or in addition to the one above!
<p />
<h3><a name="Submitting_locally"></a> Submitting locally </h3>
<p />
We want to watch how long it takes our different <code>request_memory</code> jobs to run, so we would like to submit all 8 submit files as close to each other as possible.
<p /> <ol>
<li> Submit all 8 sets of jobs quickly:       <pre class="screen">$> <strong>for i in 1 2 3 4 5 6 7 8; do condor_submit sleep-${i}gb.sub; done</strong></pre>
</li></ol> 
<p />
<h3><a name="Monitoring_the_local_jobs"></a> Monitoring the local jobs </h3>
<p />
Every few minutes, run <code>condor_q</code> and see how your sleep jobs are doing. Consider making a little table like the one below to track progress.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Education/UserSchool15Wed21GlideinDiff?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Memory</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Education/UserSchool15Wed21GlideinDiff?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Cluster</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Education/UserSchool15Wed21GlideinDiff?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Done #1</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Education/UserSchool15Wed21GlideinDiff?cover=print;sortcol=3;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Done #2</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol4 twikiLastCol"> <a rel="nofollow" href="/bin/view/Education/UserSchool15Wed21GlideinDiff?cover=print;sortcol=4;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Done #3</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> 1 GB </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> 11701 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2"> 0 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol3"> 4 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> 2 GB </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> 11702 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2"> 0 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol3"> 3 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> 3 GB </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> 11703 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2"> 1 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol3"> 4 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> 4 GB </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> 11704 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2"> 0 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol3"> 5 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> 5 GB </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> 11705 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2"> 1 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol3"> 4 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> 6 GB </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> 11706 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2"> 0 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol3"> 4 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> 7 GB </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> 11707 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2"> 0 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol3"> 4 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> 8 GB </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> 11708 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLast"> 0 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol3 twikiLast"> 3 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol4 twikiLastCol twikiLast"> &nbsp; </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
In the meantime, between checking on your local jobs, start Part 2 &ndash; taking a break every few minutes to record progress on your local jobs.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Submitting_Jobs_to_the_OSG"></a> Submitting Jobs to the OSG </span></h2>
<p />
For this exercise, you will need to <code>ssh</code> into <code>osg-ss-glidein-submit.chtc.wisc.edu</code> with the same username and password that you have used with <code>osg-ss-submit.chtc.wisc.edu</code>. This new machine has been configured to skip over the local cluster and send jobs out to the OSG. If you have trouble getting <code>ssh</code> access, ask the instructors right away!
<p /> <ol>
<li> Create a new directory on <code>osg-ss-glidein-submit.chtc.wisc.edu</code> to hold your DAG and submit files
</li> <li> Log into <code>osg-ss-submit.chtc.wisc.edu</code> and copy over the files you created in the first section of this exercise onto the new submit machine. You can do this with the <code>scp</code> command, like so:<pre class=screen>
[user@client ~]$ scp <span style="background-color: #D1CAF2;">&lt;list of files to copy&gt;</span> osg-ss-glidein-submit.chtc.wisc.edu:<span style="background-color: #D1CAF2;">&lt;new directory&gt;</span>
</pre>For example, if you wanted to copy files <code>foo</code>, <code>bar</code>, <code>baz</code> to the folder <code>wed-6.1</code> to your home directory on <code>osg-glidein-submit.chtc.wisc.edu</code>, it would look something like this:<pre class=screen>
[user@client ~]$ scp foo bar baz osg-ss-glidein-submit.chtc.wisc.edu:wed-6.1
</pre>
</li> <li> For each submit file, you will need to add the following line above your <code>queue</code> statment for your jobs to match in the OSG:<pre class="file">
+WantGlidein=True
</pre>
</li> <li> Submit your DAG!
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Let_s_Play_the_Waiting_Game"></a> Let's Play the Waiting Game </span></h2>
<p />
Not really (that game stinks), move onto the next exercise and we will revisit the results later.</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/OSGUserSchool2015" class="twikiLink">OSGUserSchool2015</a> &gt; <a href="/bin/view/Education/UserSchool15Materials" class="twikiLink">UserSchool15Materials</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>UserSchool15Wed21GlideinDiff</span> <br />    
Topic revision: r4 - 22 Jul 2015 - 21:55:31 - <a href="/bin/view/Main/TimCartwright" class="twikiLink">TimCartwright</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />