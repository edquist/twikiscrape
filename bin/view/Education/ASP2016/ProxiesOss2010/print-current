<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> ProxiesOss2010 &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/ProxiesOss2010?_T=16 Feb 2017" type="application/x-wiki" title="edit ProxiesOss2010" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/ProxiesOss2010"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Dealing_with_Proxies"></a> Dealing with Proxies </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="About_This_Document"></a> About This Document </span></h2>
This document contains the initial exercises related to proxy management.  After completing these exercises, you should understand: <ul>
<li> The parts of your certificate: <ul>
<li> Certificate file
</li> <li> Key file
</li> <li> Certificate Authority
</li> <li> Distinguished Name and Common Name
</li></ul> 
</li> <li> Proxy management <ul>
<li> Grid and VOMS proxies
</li> <li> Creating and destroying proxies
</li></ul> 
</li> <li> Testing your proxy against a remote Globus GT2 endpoint
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Exploring_your_Certificate"></a> Exploring your Certificate </span></h2>
<p />
Your x509 certificate is your "passport for the grid", so it's worth exploring different aspects of it a bit.  To do this, we will utilize a command line tool, <code>openssl</code>, which typically comes with the operating system.
<p />
<h3><a name="Certificate_Files"></a> Certificate Files </h3>
<p />
Your certificate is kept in <code>$HOME/.globus</code>.  It consists of two files, the "certificate file", <code>$HOME/.globus/usercert.pem</code>, and the "key file", <code>$HOME/.globus/userkey.pem</code>.  While the certificate file is publicly known, the key file is a secret.  You should take utmost care of it to prevent other people from seeing it.  It is encrypted with your password in order to add an extra layer of security - anyone else who would like to use your key must know the password.
<p />
You can see the certificate files by doing the following command:
<pre class="screen">
[bbockelm@vdt-itb ~]$ <font color="#0000ff">ls -lh ~/.globus/*</font>
-rw-r--r-- 1 bbockelm bbockelm 1.5K Jul 10 19:11 /home/bbockelm/.globus/usercert.pem
-rw------- 1 bbockelm bbockelm 1.8K Jul 10 19:12 /home/bbockelm/.globus/userkey.pem
</pre>
<p />
Notice that the userkey.pem permissions help prevent it from being able to be read by other users on the system.  Verify that the permissions on your certificate are similar to the ones above.
<p />
If you look inside the certificate file, it will look something like this:
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdEducation/ASP2016ProxiesOss20101show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show certificate public file...</span></a> </span> <span id="twistyIdEducation/ASP2016ProxiesOss20101hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide certificate file</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdEducation/ASP2016ProxiesOss20101toggle" class="twistyContent twikiMakeHidden twistyInited">
<pre class="file">
-----BEGIN CERTIFICATE-----
MIIEKDCCAxCgAwIBAgIDAK83MA0GCSqGSIb3DQEBBQUAMGkxEzARBgoJkiaJk/Is
ZAEZFgNvcmcxGDAWBgoJkiaJk/IsZAEZFghET0VHcmlkczEgMB4GA1UECxMXQ2Vy
dGlmaWNhdGUgQXV0aG9yaXRpZXMxFjAUBgNVBAMTDURPRUdyaWRzIENBIDEwHhcN
MTAwNTI0MTgxODQ5WhcNMTEwNTI0MTgxODQ5WjBhMRMwEQYKCZImiZPyLGQBGRYD
b3JnMRgwFgYKCZImiZPyLGQBGRYIZG9lZ3JpZHMxDzANBgNVBAsTBlBlb3BsZTEf
MB0GA1UEAxMWQnJpYW4gQm9ja2VsbWFuIDUwNDMwNzCCASIwDQYJKoZIhvcNAQEB
BQADggEPADCCAQoCggEBALCI0pEwVExYb4AnKj8bltiKw+d2sf7jgmpEd3EPMxpA
/n2DGsE7aShHCD/XeAg17d4nxAvptfgA3P/LW6CWzK2agnArkn1/E1iAmBuNrzeQ
7SPQc0vqgjIGEZK2W5o1NuIeuTwYD3kz1VFdGqliLAq9PUXQpLavuxn49Z69sB6T
vzt5OqDnXK69RSUgE+BObWRXe9mzbWh4hlS7DvA8ZcEo3j1eogOxqZQiqIUBHA+C
opH16jqK2VjLY2sejSEctd7DfusQ5wq//SDikjgn/Lj7WoHt83ecyQgxpyQVZ8BB
OeBycf8mkqaHx+Zd2R5W/wQphRciCRQjmlv4CTXTmiUCAwEAAaOB4DCB3TARBglg
hkgBhvhCAQEEBAMCBaAwDgYDVR0PAQH/BAQDAgXgMDYGA1UdIAQvMC0wDQYLKoZI
hvdMAwcBAwEwDAYKKoZIhvdMBQICATAOBgwqhkiG90wFAgMCAQEwPgYDVR0fBDcw
NTAzoDGgL4YtaHR0cDovL2NybC5kb2Vncmlkcy5vcmcvMWMzZjJjYTgvMWMzZjJj
YTguY3JsMB8GA1UdEQQYMBaBFGJib2NrZWxtQGNzZS51bmwuZWR1MB8GA1UdIwQY
MBaAFMoZHRKObqQ4XULUMQ4I29mNFw1dMA0GCSqGSIb3DQEBBQUAA4IBAQCVBIP7
wK9vQbFaoPjGFd3xKXkwlGvW4nEx4agwDhFkAm7K9WUFTHy/maipjRccx80j4W6X
IzHCA6g1+8Xd2W7PcngL+7k2/N82qKQuP76wvhcNpmjFIcuj1wnFVNwzXkaiBy36
S8gXX6awSyouU1H+WpRUT+jwA10Po9XH/Tjh/8POLqz7qNmYHP+9Y8jvvKZPUQdo
CRocOqg0iUi09CsAd2QlZjru/XOzqYOspqykX/ZOEN1hrHbTyjWgsV3zBjyRBR1M
GUyZQBtyFCeM4L28fXvDqZ4NzxXEP6kQve8CIbYk3a/NDcgkJhMJOZqBTKItYcUS
50fwGufjc1jT8fAp
-----END CERTIFICATE-----
</pre>
</div></div> <!--/twistyPlugin-->
<p />
Similarly, if you look inside the key file, it will look like this:
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdEducation/ASP2016ProxiesOss20102show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show certificate key file...</span></a> </span> <span id="twistyIdEducation/ASP2016ProxiesOss20102hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide certificate file</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdEducation/ASP2016ProxiesOss20102toggle" class="twistyContent twikiMakeHidden twistyInited">
<pre class="file">
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,65EB7163C14AC455

b3JnMRgwFgYKCZImiZPyLGQBGRYIZG9lZ3JpZHMxDzANBgNVBAsTBlBlb3BsZTEf
MB0GA1UEAxMWQnJpYW4gQm9ja2VsbWFuIDUwNDMwNzCCASIwDQYJKoZIhvcNAQEB
BQADggEPADCCAQoCggEBALCI0pEwVExYb4AnKj8bltiKw+d2sf7jgmpEd3EPMxpA
/n2DGsE7aShHCD/XeAg17d4nxAvptfgA3P/LW6CWzK2agnArkn1/E1iAmBuNrzeQ
7SPQc0vqgjIGEZK2W5o1NuIeuTwYD3kz1VFdGqliLAq9PUXQpLavuxn49Z69sB6T
vzt5OqDnXK69RSUgE+BObWRXe9mzbWh4hlS7DvA8ZcEo3j1eogOxqZQiqIUBHA+C
opH16jqK2VjLY2sejSEctd7DfusQ5wq//SDikjgn/Lj7WoHt83ecyQgxpyQVZ8BB
OeBycf8mkqaHx+Zd2R5W/wQphRciCRQjmlv4CTXTmiUCAwEAAaOB4DCB3TARBglg
hkgBhvhCAQEEBAMCBaAwDgYDVR0PAQH/BAQDAgXgMDYGA1UdIAQvMC0wDQYLKoZI
hvdMAwcBAwEwDAYKKoZIhvdMBQICATAOBgwqhkiG90wFAgMCAQEwPgYDVR0fBDcw
NTAzoDGgL4YtaHR0cDovL2NybC5kb2Vncmlkcy5vcmcvMWMzZjJjYTgvMWMzZjJj
/n2DGsE7aShHCD/XeAg17d4nxAvptfgA3P/LW6CWzK2agnArkn1/E1iAmBuNrzeQ
7SPQc0vqgjIGEZK2W5o1NuIeuTwYD3kz1VFdGqliLAq9PUXQpLavuxn49Z69sB6T
vzt5OqDnXK69RSUgE+BObWRXe9mzbWh4hlS7DvA8ZcEo3j1eogOxqZQiqIUBHA+C
YTguY3JsMB8GA1UdEQQYMBaBFGJib2NrZWxtQGNzZS51bmwuZWR1MB8GA1UdIwQY
MBaAFMoZHRKObqQ4XULUMQ4I29mNFw1dMA0GCSqGSIb3DQEBBQUAA4IBAQCVBIP7
wK9vQbFaoPjGFd3xKXkwlGvW4nEx4agwDhFkAm7K9WUFTHy/maipjRccx80j4W6X
IzHCA6g1+8Xd2W7PcngL+7k2/N82qKQuP76wvhcNpmjFIcuj1wnFVNwzXkaiBy36
S8gXX6awSyouU1H+WpRUT+jwA10Po9XH/Tjh/8POLqz7qNmYHP+9Y8jvvKZPUQdo
CRocOqg0iUi09CsAd2QlZjru/XOzqYOspqykX/ZOEN1hrHbTyjWgsV3zBjyRBR1M
GUyZQBtyFCeM4L28fXvDqZ4NzxXEP6kQve8CIbYk3a/NDcgkJhMJOZqBTKItYcUS
50fwGufjc1jT8fAp
-----END RSA PRIVATE KEY-----
</pre>
</div></div> <!--/twistyPlugin-->
<p />
As you can see, both files are not saved in a human-readable format; however, you can determine their contents by looking at the header and footer lines (and no, I did not just post my key online - it's illustrative fake garbage data).
<p />
<h3><a name="The_Certificate_Authority"></a> The Certificate Authority </h3>
Just like a passport, it's important to know who issued and signed your certificate.  The certificate authority will verify your identity, sign your certificate request, and sites will trust the identity of the holder of the certificate.  If you got your certificate during this summer school, you got it from the DOEGrids CA.
<p />
In order to view your certificate's issuer, you can use <code>openssl</code>:
<p />
<pre class="screen">
[bbockelm@vdt-itb ~]$ <font color="#0000ff">openssl x509 -in ~/.globus/usercert.pem -noout -issuer</font>
issuer= /DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1
</pre>
<p />
In this case, the full name of the DOEGrids CA is <code>/DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1</code>.
<p />
<h3><a name="Dumping_the_contents_of_the_cert"></a> Dumping the contents of the certificate </h3>
<p />
Your certificate contains all sorts of data, including: <ul>
<li> Serial number
</li> <li> CA signature
</li> <li> Validity (start and expiration dates)
</li> <li> Your name
</li> <li> Encryption algorithm information
</li> <li> Email
</li> <li> Permitted usage (as a client, a server, or both?)
</li></ul> 
<p />
Again, we can view the certificate information with <code>openssl</code>. 
<p />
<pre class="screen">
[bbockelm@vdt-itb ~]$ <font color="#0000ff">openssl x509 -in ~/.globus/usercert.pem -noout -text</font>
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdEducation/ASP2016ProxiesOss20103show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show openssl output...</span></a> </span> <span id="twistyIdEducation/ASP2016ProxiesOss20103hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide openssl output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdEducation/ASP2016ProxiesOss20103toggle" class="twistyContent twikiMakeHidden twistyInited">
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 44855 (0xaf37)
        Signature Algorithm: sha1WithRSAEncryption
        Issuer: DC=org, DC=DOEGrids, OU=Certificate Authorities, CN=DOEGrids CA 1
        Validity
            Not Before: May 24 18:18:49 2010 GMT
            Not After : May 24 18:18:49 2011 GMT
        Subject: DC=org, DC=doegrids, OU=People, CN=Brian Bockelman 504307
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (2048 bit)
                Modulus (2048 bit):
                    00:b0:88:d2:91:30:54:4c:58:6f:80:27:2a:3f:1b:
                    96:d8:8a:c3:e7:76:b1:fe:e3:82:6a:44:77:71:0f:
                    33:1a:40:fe:7d:83:1a:c1:3b:69:28:47:08:3f:d7:
                    78:08:35:ed:de:27:c4:0b:e9:b5:f8:00:dc:ff:cb:
                    5b:a0:96:cc:ad:9a:82:70:2b:92:7d:7f:13:58:80:
                    98:1b:8d:af:37:90:ed:23:d0:73:4b:ea:82:32:06:
                    11:92:b6:5b:9a:35:36:e2:1e:b9:3c:18:0f:79:33:
                    d5:51:5d:1a:a9:62:2c:0a:bd:3d:45:d0:a4:b6:af:
                    bb:19:f8:f5:9e:bd:b0:1e:93:bf:3b:79:3a:a0:e7:
                    5c:ae:bd:45:25:20:13:e0:4e:6d:64:57:7b:d9:b3:
                    6d:68:78:86:54:bb:0e:f0:3c:65:c1:28:de:3d:5e:
                    a2:03:b1:a9:94:22:a8:85:01:1c:0f:82:a2:91:f5:
                    ea:3a:8a:d9:58:cb:63:6b:1e:8d:21:1c:b5:de:c3:
                    7e:eb:10:e7:0a:bf:fd:20:e2:92:38:27:fc:b8:fb:
                    5a:81:ed:f3:77:9c:c9:08:31:a7:24:15:67:c0:41:
                    39:e0:72:71:ff:26:92:a6:87:c7:e6:5d:d9:1e:56:
                    ff:04:29:85:17:22:09:14:23:9a:5b:f8:09:35:d3:
                    9a:25
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            Netscape Cert Type: 
                SSL Client, S/MIME
            X509v3 Key Usage: critical
                Digital Signature, Non Repudiation, Key Encipherment
            X509v3 Certificate Policies: 
                Policy: 1.2.840.113612.3.7.1.3.1
                Policy: 1.2.840.113612.5.2.2.1
                Policy: 1.2.840.113612.5.2.3.2.1.1

            X509v3 CRL Distribution Points: 
                URI:http://crl.doegrids.org/1c3f2ca8/1c3f2ca8.crl

            X509v3 Subject Alternative Name: 
                email:bbockelm@cse.unl.edu
            X509v3 Authority Key Identifier: 
                keyid:CA:19:1D:12:8E:6E:A4:38:5D:42:D4:31:0E:08:DB:D9:8D:17:0D:5D

    Signature Algorithm: sha1WithRSAEncryption
        95:04:83:fb:c0:af:6f:41:b1:5a:a0:f8:c6:15:dd:f1:29:79:
        30:94:6b:d6:e2:71:31:e1:a8:30:0e:11:64:02:6e:ca:f5:65:
        05:4c:7c:bf:99:a8:a9:8d:17:1c:c7:cd:23:e1:6e:97:23:31:
        c2:03:a8:35:fb:c5:dd:d9:6e:cf:72:78:0b:fb:b9:36:fc:df:
        36:a8:a4:2e:3f:be:b0:be:17:0d:a6:68:c5:21:cb:a3:d7:09:
        c5:54:dc:33:5e:46:a2:07:2d:fa:4b:c8:17:5f:a6:b0:4b:2a:
        2e:53:51:fe:5a:94:54:4f:e8:f0:03:5d:0f:a3:d5:c7:fd:38:
        e1:ff:c3:ce:2e:ac:fb:a8:d9:98:1c:ff:bd:63:c8:ef:bc:a6:
        4f:51:07:68:09:1a:1c:3a:a8:34:89:48:b4:f4:2b:00:77:64:
        25:66:3a:ee:fd:73:b3:a9:83:ac:a6:ac:a4:5f:f6:4e:10:dd:
        61:ac:76:d3:ca:35:a0:b1:5d:f3:06:3c:91:05:1d:4c:19:4c:
        99:40:1b:72:14:27:8c:e0:bd:bc:7d:7b:c3:a9:9e:0d:cf:15:
        c4:3f:a9:10:bd:ef:02:21:b6:24:dd:af:cd:0d:c8:24:26:13:
        09:39:9a:81:4c:a2:2d:61:c5:12:e7:47:f0:1a:e7:e3:73:58:
        d3:f1:f0:29
</div></div> <!--/twistyPlugin-->
</pre>
<p />
<h3><a name="Distinguished_and_Common_Names"></a> Distinguished and Common Names </h3>
<p />
When working on the grid, you'll often see two acronyms: <ul>
<li> CN (Common Name): This is the part of your certificate's "subject line" which contains your name and possible an ID number.  This starts with the prefix /CN=
</li> <li> DN (Distinguished Name): This is the full subject line of your certificate.  It has your CN, plus some information about your organization, your unit, or the domain name of your CA.
</li></ul> 
<p />
The contents of the DN and CN depend on what CA you use; the DN is often used to identify you on the grid, so you should be able to answer the question "What's your DN?" just as readily as you might answer "What's your name?"
<p />
To view your DN, use the <code>openssl</code> tool again:
<p />
<pre class="screen">
[bbockelm@vdt-itb ~]$ <font color="#0000ff">openssl x509 -in ~/.globus/usercert.pem -noout -subject</font>
subject= /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307
</pre>
<p />
So, my full DN is: <pre>/DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307</pre>
<p />
<h3><a name="Wrap_up"></a> Wrap-up </h3>
<p />
In this section, you should have: <ul>
<li> Viewed and verified your certificate files are on disk.
</li> <li> Printed the CA who issued your certificate to the screen.
</li> <li> Dumped the entire contents of your certificate to the screen.
</li> <li> Learned that your DN is basically the equivalent of your name on a passport, and printed it out to the screen.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Proxies"></a> Proxies </span></h2>
<p />
Because your certificate is your identity, you don't want to share it with people - or to have it go outside of your control.  On the other hand, if you run a job at the remote site, you want it to have similar permissions as you.  If you are allowed to download a file from Nebraska with your certificate, then you want your job to be able to download the same file - without sending your proxy away to the remote site!
<p />
To allow this, a "proxy certificate" was invented.  This is a very short lived certificate (typically with a lifetime of 12 hours) signed by your personal certificate.  The key to this certificate is kept unencrypted and transferred with your job.  Grid sites accept your proxy as having the same rights as your personal certificate (sometimes with a few limitations); they view the trade-off between functionality and security as an acceptable risk.
<p />
In this section, we will cover two kinds of proxies: <ul>
<li> A <strong>grid proxy</strong>, a plain proxy certificate produced with your user certificate.
</li> <li> A <strong>VOMS proxy</strong>, a proxy certificate with additional attributes for your "group" and "role" within your VO.  These attributes are cross-signed by your VO's management server (the VOMS server).
</li></ul> 
<p />
The VOMS proxies are more useful when you have multiple roles within your VO, or if you're a member of multiple VOs.
<p />
<h3><a name="Creating_VOMS_and_Grid_Proxies"></a> Creating VOMS and Grid Proxies </h3>
<p />
We recommend using VOMS-style proxies whenever possible.  These proxies are required at some sites, and are generally more flexible.
<p />
To create a VOMS proxy, use the <code>voms-proxy-init</code> command line utility:
<pre class="screen">
[bbockelm@vdt-itb testjob_simple]$ <font color="#0000ff">voms-proxy-init --voms osgedu:/osgedu</font>
Enter GRID pass phrase:
Your identity: /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307
Creating temporary proxy ........................................................................................ Done
Contacting  voms.grid.iu.edu:15003 [/DC=org/DC=doegrids/OU=Services/CN=http/voms.grid.iu.edu] "osgedu" Done
Creating proxy .................................. Done
Your proxy is valid until Wed Jul 14 09:52:47 2010
</pre>
<p />
The password the executable prompts you for is the password you used to save your certificate to disk.  The option we pass to <code>voms-proxy-init</code> is <code>--voms osgedu:/osgedu</code>.  You will always need to specify the <code>--voms</code> option to create a VOMS proxy; the first half is the requested VO, while the second half is your group within the VO.  So, we've just asked for a VOMS proxy from the <code>osgedu</code> and in the <code>/osgedu</code> group.
<p />
To create a grid proxy, use the <code>grid-proxy-init</code> command line utilty:
<pre class="screen">
[bbockelm@vdt-itb testjob_simple]$ <font color="#0000ff">grid-proxy-init</font>
Your identity: /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307
Enter GRID pass phrase for this identity:
Creating proxy .................................................. Done
Your proxy is valid until: Wed Jul 14 09:53:05 2010
</pre>
<p />
Again, we recommend using the VOMS proxy when plausible.  Note that the VOMS proxy contacts an external host (<code>voms.grid.iu.edu</code> in this case) while the grid proxy does not.
<p />
<h3><a name="Destroying_your_proxy"></a> Destroying your proxy </h3>
Sometimes it's useful to destroy your proxy - maybe you don't want anyone else to possibly steal it.  Doing this is simple, and requires no command line options; use <code>voms-proxy-destroy</code>:
<pre class="screen">
[bbockelm@vdt-itb testjob_simple]$ <font color="#0000ff">voms-proxy-destroy </font>
[bbockelm@vdt-itb testjob_simple]$ 
</pre>
Typically, there is no output.
<p />
<h3><a name="Checking_your_proxy_validity"></a> Checking your proxy validity </h3>
<p />
Create a VOMS proxy again with <code>voms-proxy-init</code> (remember: use the <code>osgedu</code> VO and the <code>/osgedu</code> group).  Now, examine the proxy's validity and extended attribute information using <code>voms-proxy-info</code>:
<p />
<pre class="screen">
[bbockelm@vdt-itb testjob_simple]$ <font color="#0000ff">voms-proxy-info -all</font>
WARNING: Unable to verify signature! Server certificate possibly not installed.
Error: Cannot verify AC signature!
subject   : /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307/CN=proxy
issuer    : /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307
<font color="#ff0000">identity  : /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307</font>
type      : proxy
strength  : 1024 bits
<font color="#ff0000">path      : /tmp/x509up_u21000</font>
<font color="#ff0000">timeleft  : 11:58:27</font>
=== VO osgedu extension information ===
<font color="#ff0000">VO        : osgedu</font>
subject   : /DC=org/DC=doegrids/OU=People/CN=Brian Bockelman 504307
issuer    : /DC=org/DC=doegrids/OU=Services/CN=http/voms.grid.iu.edu
<font color="#ff0000">attribute : /osgedu/Role=NULL/Capability=NULL</font>
timeleft  : 11:58:27
uri       : voms.grid.iu.edu:15003
</pre>
<p />
The warning is safe to ignore.  The important pieces of the output are highlighted in <font color="#ff0000">red</font>.
<p />
Sometimes, you destroy your proxy (or, more likely, let it expire) and you forget about this.  This often leads to lots of confusing errors.  The command <code>grid-proxy-info</code> takes a <code>-debug</code> flag which will give you helpful hints as to why you don't have a valid proxy:
<p />
<pre class="screen">
[bbockelm@vdt-itb ~]$ <font color="#0000ff">voms-proxy-destroy</font> # <font color="#ff0000">Pretend you did this hours ago and you forgot about it</font>
[bbockelm@vdt-itb ~]$ <font color="#0000ff">grid-proxy-info -debug</font>
<span class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdEducation/ASP2016ProxiesOss20104show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><span class="twikiLinkLabel twikiUnvisited">More...</span></a> </span> <span id="twistyIdEducation/ASP2016ProxiesOss20104hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><span class="twikiLinkLabel twikiUnvisited">Close</span></a> </span>  </span><!--/twistyPlugin twikiMakeVisibleInline--> <span class="twistyPlugin"><span id="twistyIdEducation/ASP2016ProxiesOss20104toggle" class="twistyContent twikiMakeHidden twistyInited">


ERROR: Couldn't find a valid proxy.

grid_proxy_info.c:354:globus_gsi_system_config.c:globus_gsi_sysconfig_get_proxy_filename_unix:6015:
Could not find a valid proxy certificate file location
globus_gsi_system_config.c:globus_i_gsi_sysconfig_create_key_string:477:
Error with key filename
globus_gsi_system_config.c:globus_i_gsi_sysconfig_check_keyfile_unix:4668:
<font color="#ff0000">File does not exist: /tmp/x509up_u21000 is not a valid file</font>


</span></span> <!--/twistyPlugin-->
</pre>
<p />
<h3><a name="Wrap_up_AN1"></a> Wrap-up </h3>
In this section, you should have: <ul>
<li> Created a VOMS proxy
</li> <li> Created a grid proxy
</li> <li> Destroyed your proxy
</li> <li> Learn how to examine your VOMS proxy's contents and lifetime.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Testing_your_proxy_with_Globus"></a> Testing your proxy with Globus </span></h2>
<p />
PKI is notoriously complex.  In order to have everything working between a client and server, you must have: <ul>
<li> The correct time on both servers.
</li> <li> Relevant CA certificates installed.
</li> <li> Up-to-date certificate revocation lists (CRLs).
</li> <li> Valid, unexpired proxy.
</li></ul> 
Additionally, the client certificate must be authorized to use the server!  If any of these things are missing (server or client side), you will get (sometimes strange) errors when you try and use the grid.
<p />
To test your proxy out, the Globus client provides a simple tool, <code>globusrun</code>.
<p />
<pre class="screen">
[bbockelm@vdt-itb testjob_simple]$ <font color="#0000ff">globusrun -a -r osg-edu.cs.wisc.edu</font>

GRAM Authentication test successful
</pre>
The "test successful" message basically means that your client has all the PKI issues taken care of.  However, if you get an error message, they are often very obtuse:
<pre class="screen">
[bbockelm@vdt-itb testjob_simple]$ <font color="#0000ff">globusrun -a -r gate01.aglt2.org</font>

GRAM Authentication test failure: authentication with the remote server failed
</pre>
In this case, it is equivalent to a "permission denied": host <code>gate01.aglt2.org</code> has denied our proxy from using their site.</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education/ASP2016<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/ASP2016/GridWorkshops" class="twikiLink">GridWorkshops</a> &gt; <a href="/bin/view/Education/ASP2016/OSGSummerSchool2010" class="twikiLink">OSGSummerSchool2010</a> &gt; <a href="/bin/view/Education/ASP2016/MaterialsOSS2010" class="twikiLink">MaterialsOSS2010</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>ProxiesOss2010</span> <br />    
Topic revision: r8 - 19 Jul 2010 - 20:34:11 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />