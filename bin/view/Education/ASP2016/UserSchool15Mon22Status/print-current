<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> UserSchool15Mon22Status &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/UserSchool15Mon22Status?_T=16 Feb 2017" type="application/x-wiki" title="edit UserSchool15Mon22Status" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/UserSchool15Mon22Status"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>
<p />
<h1><a name="Monday_Exercise_2_2_Explore_cond"></a> Monday Exercise 2.2: Explore condor_status </h1>
<p />
The goal of this exercise is try out some of the most common options to the <code>condor_status</code> command, so that you can view slots effectively.
<p />
The main part of this exercise should take just a few minutes, but if you have more time later, come back and work on the extension ideas at the end to become a <code>condor_status</code> expert!
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Selecting_Slots"></a> Selecting Slots </span></h2>
<p />
The <code>condor_status</code> program has many options for selecting which slots are listed.
<p />
One convenient option is to list only those slots that are available now:
<p />
<pre class="screen">
$> <strong>condor_status -avail</strong>
</pre>
<p />
Of course, the individual execute machines only report their slots to the collector at certain time intervals, so this list will not reflect the up-to-the-second reality of all slots. But this limitation is true of all <code>condor_status</code> output, not just with the <code>-avail</code> option.
<p />
Similar to <code>condor_q</code>, you can limit the slots that are listed in two easy ways. To list just the slots on a specific machine:
<p />
<pre class="screen">$> <strong>condor_status <em>hostname</em></strong></pre>
<p />
For example, if you want to see the slots on <code>e242.chtc.wisc.edu</code> (in the CHTC pool):
<p />
<pre class="screen">$> <strong>condor_status e242.chtc.wisc.edu</strong></pre>
<p />
To list a specific slot on a machine:
<p />
<pre class="screen">$> <strong>condor_status <em>slot</em>@<em>hostname</em></strong></pre>
<p />
For example, to see the “first” slot on the machine above:
<p />
<pre class="screen">$> <strong>condor_status slot1@e242.chtc.wisc.edu</strong></pre>
<p />
<strong>Note:</strong> You can name more than one hostname, slot, or combination thereof on the command line, in which case slots for <strong>all</strong> of the named hostnames and/or slots are listed.
<p />
Let’s get some practice using <code>condor_status</code> selections!
<p /> <ol>
<li> List all slots in the pool — how many are there total?
</li> <li> Practice using all forms of <code>condor_status</code> that you have learned: <ul>
<li> List the available slots
</li> <li> List the slots on a specific machine (e.g., <code>e242.chtc.wisc.edu</code>)
</li> <li> List a specific slot from that machine
</li> <li> Try listing the slots from a few (but not all) machines at once
</li> <li> Try using a mix of hostnames and slot IDs at once
</li></ul> 
</li></ol> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Viewing_a_Slot_ClassAd"></a> Viewing a Slot ClassAd </span></h2>
<p />
Just as with <code>condor_q</code>, you can use <code>condor_status</code> to view the complete ClassAd for a given slot (often confusingly called the “machine” ad):
<p />
<pre class="screen">$> <strong>condor_status -long <em>slot</em>@<em>hostname</em></strong></pre>
<p />
Because slot ClassAds may have 150&ndash;200 attributes (or more!), it probably makes the most sense to show the ClassAd for a single slot at a time, as shown above.
<p />
Here are some examples of common, interesting attributes taken directly from <code>condor_status</code> output:
<p />
<pre class="file">
OpSys = "LINUX"
DetectedCpus = 8
OpSysAndVer = "SL5"
MyType = "Machine"
LoadAvg = 0.0
TotalDisk = 802308716
OSIssue = "Scientific Linux release 5.8 (Boron)"
TotalMemory = 16050
Machine = "glow-c001.cs.wisc.edu"
CondorVersion = "$CondorVersion: 8.0.0 May 29 2013 BuildID: 133173 $"
Memory = 16050
</pre>
<p />
As you may be able to tell, there is a mix of attributes about the machine as a whole (hence the name “machine ad”) and about the slot in particular.
<p />
Go ahead and examine a machine ClassAd now. I suggest looking at one of the slots on, say, <code>c010.chtc.wisc.edu</code> because of its relatively simple configuration.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Viewing_Slots_by_ClassAd_Express"></a> Viewing Slots by ClassAd Expression </span></h2>
<p />
Often, it is helpful to view slots that meet some particular criteria. For example, if you know that your job needs a lot of memory to run, you may want to see how many high-memory slots there are and whether they are busy. You can filter the list of slots like this using the <code>-constraint</code> option and a ClassAd expression.
<p />
For example, suppose we want to list all slots that are running Scientific Linux 6 (operating system) and have at least 16 GB memory available.  Note that memory is reported in units of Megabytes. The command is:
<p />
<pre class="screen">$> <strong>condor_status -constraint 'OpSysAndVer == "SL6" && Memory >= 16000'</strong></pre>
<p />
<strong>Note:</strong> Be very careful with using quote characters appropriately in these commands. In the example above, the single quotes (<code>'</code>) are for the shell, so that the entire expression is passed to <code>condor_status</code> untouched, and the double quotes (<code>"</code>) surround a string value within the expression itself.
<p />
Currently on CHTC, there are only a few slots that meet these criteria.
<p />
If you are interested in learning more about writing ClassAd expressions, look at section 4.1 and especially 4.1.4 of the HTCondor Manual. This is definitely advanced material, so if you do not want to read it, that is fine. But if you do, take some time to practice writing expressions for the <code>condor_status -constraint</code> command.
<p />
<strong>Note:</strong> The <code>condor_q</code> command accepts the <code>-constraint</code> option as well! As you might expect, the option allows you to limit the jobs that are listed based on a ClassAd expression.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Formatting_Output_Optional"></a> Formatting Output (Optional) </span></h2>
<p />
The <code>condor_status</code> command accepts the same <code>-format</code> option that <code>condor_q</code> accepts, and it has the same meaning in both commands. Of course, the attributes available in machine ads may differ from those available in job ads. Use the HTCondor Manual or look at individual slot ClassAds to get a better idea of what attributes are available.
<p />
For example, I was curious about the Windows slot listed in the <code>condor_status</code> summary output. Here is a command that shows the full hostnames and major version information for those slots:
<p />
<pre class="screen">$> <strong>condor_status -format '%30s  ' Machine -format '%s\n' OpSysAndVer -constraint 'OpSys == "WINDOWS"'</strong></pre>
<p />
If you like, spend a few minutes now or later experimenting with <code>condor_status</code> formatting.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="References"></a> References </span></h2>
<p />
As suggested above, if you want to learn more about <code>condor_q</code>, you can do some reading:
<p /> <ul>
<li> Read the <code>condor_status</code> man page or HTCondor Manual section (same text) to learn about more options
</li> <li> Read about ClassAd attributes in Appendix A of the HTCondor Manual
</li> <li> Read about ClassAd expressions in section 4.1.4 of the HTCondor Manual
</li></ul> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education/ASP2016<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/ASP2016/OSGUserSchool2015" class="twikiLink">OSGUserSchool2015</a> &gt; <a href="/bin/view/Education/ASP2016/UserSchool15Materials" class="twikiLink">UserSchool15Materials</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>UserSchool15Mon22Status</span> <br />    
Topic revision: r2 - 27 Jul 2015 - 16:59:51 - <a href="/bin/view/Main/GregThain" class="twikiLink">GregThain</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />