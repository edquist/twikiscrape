<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> MidwestWSIntroTutorial &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/MidwestWSIntroTutorial?_T=16 Feb 2017" type="application/x-wiki" title="edit MidwestWSIntroTutorial" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/MidwestWSIntroTutorial"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!-- deprecated -->
<p />
<h1><a name="Tutorial_An_Introduction_to_the"></a>  Tutorial: An Introduction to the Grid </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Connecting_to_the_Linux_training"> Connecting to the Linux training hosts </a>
</li> <li> <a href="?cover=print#Conventions"> Conventions</a>
</li> <li> <a href="?cover=print#Logging_in_to_the_Grid"> "Logging in" to the Grid</a>
</li> <li> <a href="?cover=print#Running_jobs_with_Globus_Command"> Running jobs with Globus Commands</a>
</li> <li> <a href="?cover=print#Running_under_a_remote_shell"> Running under a remote shell</a>
</li> <li> <a href="?cover=print#Immediate_fork_and_Batch_schedul"> Immediate (fork) and Batch (scheduled) Job managers</a>
</li> <li> <a href="?cover=print#Running_a_simple_application_rem"> Running a simple application remotely, through "staging"</a> <ul>
<li> <a href="?cover=print#Exercise"> Exercise: </a>
</li></ul> 
</li></ul> 
</div>
<p />
These exercises explore some simple Grid operations to start developing a few very basic techniques for distributed computing.
<p />
We assume you're using the default "bash" shell set up on your logins on the laptops and lab servers. We recommend you don't change your shell.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Connecting_to_the_Linux_training"></a> Connecting to the Linux training hosts </span></h2>
<p />
<p />
You will be doing almost all the lab exercises this week on a set of Linux computers ("hosts") named <code>workshop1</code>, <code>workshop2</code>, <code>workshop3</code> and <code>workshop4</code> (its "fully qualified host name" looks like "workshop1.lac.uic.edu").  From these machines, we will run Grid jobs and explore various Grid sites.
<p />
To access this machine from your computer, we will use "secure shell".
<p />
On a Windows machine, we will use the PuTTY program. Open PuTTY and enter the hostname of the computer that you will use.
<p />
On a Mac, we will use the Terminal and ssh command-line tool. Open Terminal and type <code>ssh</code> followed by your training user name, an "@" symbol and the name of the computer you wish to connect to. For example:
<p />
<pre class="screen">
mac$ <userinput>ssh train99@workshop1.lac.uic.edu</userinput>
The authenticity of host 'workshop1.lac.uic.edu (131.193.181.56)' can't be established.
RSA key fingerprint is 36:74:78:a8:ed:6b:38:96:63:20:01:df:46:9b:59:3b.
Are you sure you want to continue connecting (yes/no)? <userinput>yes</userinput>
Warning: Permanently added 'workshop1.lac.uic.edu,131.193.181.56' (RSA) to the list of known hosts.
train99@workshop1.lac.uic.edu's password: <userinput>PASSWORD</userinput>  <em># not echoed !!!</em>
workshop1$    <em># Now you're talking to a shell on the workshop1 server</em>
</pre>
<p />
After the first time you do this, you won't get the "Are you sure." prompt. Some of you will never see this, as your computers were used for testing this material, and the "yes" reply was already supplied by a tester.  So it will look like:
<p />
<pre class="screen">
mac$ <userinput>ssh train99@workshop1.lac.uic.edu</userinput>
Password: <userinput>PASSWORD</userinput> 
workshop1$
</pre>
<p />
You should be able to reach all four lab hosts - workshop1 ... workshop4 - in this manner.
<p />
For the rest of this exercise, we will use simpler prompts: <code>$laptop</code> for commands typed directly to the shell of your laptop Terminal window, and <code>%LOGINHOSTSHORT$</code> for the workshop1 lab server.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Conventions"></a> Conventions </span></h2>
<p />
Note the conventions for command-line dialogs that will be used throughout these exercises:
<p />
What you type <tt><userinput>looks like this</userinput></tt>. The system's responses <code>look like this</code>.
<p />
Our comments to you (which you should <strong>not</strong> enter) look like:  <code><em># some comment here</em></code>
<p />
<pre class="screen">
laptop$ <userinput>pwd</userinput>    <em># You type "pwd" but NOT this comment!</em>
/home/train99   <em># the system's response</em>
laptop$          <em># the system's command prompt</em>
</pre>
<p />
In these exercises, we'll use the prompt <code>laptop$</code> for responses from the shell on the lab laptops, and <code>workshop$</code> (or <code>workshop2$</code>, <code>workshop3$</code>, etc.) for responses from remote shells. 
<p />
on      The actual shell prompts you'll see may be different from those we show here.
<p />
To start, practice cutting text from your this page in your web browser to run a command or set of commands: cut the <code>pwd</code> command from the box above and paste it into your terminal window to execute it. This is a good way to avoid making typos while entering commands from the examples.
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span style="text-align:center; font-weight:bold; font-size:1.2em;">ADD A COMMENT</span>
<span id="twid_1show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_1hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_1toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ASP2016/MidwestWSIntroTutorial" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                            <strong>*</strong>    -->
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Logging_in_to_the_Grid"></a> "Logging in" to the Grid </span></h2>
<p />
on    
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Running_jobs_with_Globus_Command"></a> Running jobs with Globus Commands </span></h2>
<p />
<p />
<form name="EDITTHIS" action="/bin/edit/Education/ASP2016/RunningJobsWithGlobusCommands" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487215507" name="t"></form>
<p />
Now, if everything is set correctly, you should be able to run "Grid jobs" on the hosts in the lab Grid. And of course, one's first Grid job must always be this:
<p />
<pre class="screen">
workshop1$ <userinput>globus-job-run workshop2.lac.uic.edu/jobmanager-fork /bin/echo Hello World</userinput>
 Hello World
</pre>
<p />
You've just submitted a "job" (the Linux command "echo") from workshop1.lac.uic.edu (the "submit host") to the GRAM gatekeeper on workshop2.lac.uic.edu! Trivial, perhaps, but a building block to more powerful capabilities. 
<p />
If this doesn't work, check that the "gatekeeper" - the Grid component that accepts and executes remote jobs - can correctly authenticate you:
<p />
<pre class="screen">
workshop1$ <userinput>globusrun -a -r workshop2.lac.uic.edu/jobmanager-fork</userinput>
GRAM Authentication test successful
</pre>
<p />
This is a handy diagnostic test to know for any job.
<p />
If you type <code><b>grid-proxy-destroy</b></code> and then do the authentication test, you will see a long chain of errors.  Do another <code><b>grid-proxy-init</b></code>, exactly as before, and you should be able to correctly authenticate again.
<p />
Now, back to "globus-job-run". This utility runs commands on remote sites, but it expects them to be "fully qualified" path names (i.e., they must start with a "/"). Lets say we want to run the Linux command <code>hostname</code> on the remote site to verify that we're talking to the resource we think we are.
<p /> <ol>
<li> Run it locally to make sure you are invoking it correctly. 
</li> <li> Use the command <code>which</code> to discover the location of the version of <code>hostname</code> that you are using. It will return a fully-qualified path name.
</li></ol> 
<p />
<pre class="screen">
workshop1$ <userinput>hostname</userinput>
workshop1.lac.uic.edu
workshop1$ <userinput>which hostname</userinput>
/bin/hostname
</pre>
<p />
This tells you that to run <code>hostname</code>  via globus-job-run, use <code>/bin/hostname</code>.  
<p />
Use <code>which</code> to discover the location of the following commands on the system: <ul>
<li> <code>id</code>
</li> <li> <code>env</code>
</li> <li> <code>ps</code>
</li> <li> <code>uptime</code>  
</li></ul> 
<p />
Now run <code>hostname</code> remotely, on workshop2.lac.uic.edu, to verify that you really are reaching a remote system.
<p />
Next, see what else can you learn about the remote system with this approach.   <ol>
<li> Discover what user ID your job ran under using <code>id</code>.  
</li> <li> Discover what environment variables are set using <code>env</code>.
</li> <li> Discover the load on the remote Grid server using <code>uptime</code>
</li> <li> Discover the default working directory in which your remote job will run using <code>pwd</code>.  <ol>
<li> Do an <code>ls</code> of this working directory.  
</li> <li> Use <code>df</code> to discover how much storage space exists in this working directory.
</li></ol> 
</li> <li> Use <code>df</code> to discover how much storage space exists in the remote <code>/tmp</code> directory.   <ul>
<li> Can you create a file on the remote system?  
</li> <li> Can you remove it?
</li></ul> 
</li></ol> 
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span style="text-align:center; font-weight:bold; font-size:1.2em;">ADD A COMMENT</span>
<span id="twid_2show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_2hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_2toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ASP2016/RunningJobsWithGlobusCommands" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                            <strong>*</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Running_under_a_remote_shell"></a> Running under a remote shell </span></h2>
<p />
<p />
<form name="EDITTHIS" action="/bin/edit/Education/ASP2016/RunningUnderARemoteShell" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487215507" name="t"></form>
<p />
Fully qualified pathnames are necessary when running commands under globus-job-run, because by default it does not start a UNIX "shell" on the remote system and its the shell that implements mechanisms like searching for commands in your <code>$PATH</code> variable, and many other features, like input/output redirection ( e.g., <code>&gt;foo</code>), pipes (e.g., <code>cmd1|cmd2</code>) and <code>$VAR</code> substitution. But we can tell globus-job-run to run a shell for you on the remote Grid site, and pass the command string to that remote shell:
<p />
Try for example:
<p />
<pre class="screen">
workshop1$ <userinput>globus-job-run workshop2.lac.uic.edu/jobmanager-fork /bin/sh -c "grep train /etc/group | wc -l"</userinput>
</pre>
<p />
Experiment for a few minutes with this to try a few shell commands and pipelines on workshop2.lac.uic.edu. How similar are these machines?
<p />
Common Linux system commands are typically, but not always, found in the same directory on all Linux systems, and this week we'll be using Grid systems with exclusively Linux-based hosts. In real work, organizations establish conventions for such things, which will be touched on when we discuss production Grids.
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span style="text-align:center; font-weight:bold; font-size:1.2em;">ADD A COMMENT</span>
<span id="twid_3show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_3hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_3toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Main/MichaelWilde" class="twikiLink">MichaelWilde</a> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> 05 Jun 2007 - 18:43 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ASP2016/RunningUnderARemoteShell" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                            <strong>*</strong>    -->
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Immediate_fork_and_Batch_schedul"></a> Immediate (fork) and Batch (scheduled) Job managers </span></h2>
<p />
<p />
Notice that we follow the system name that you want to run the command on with the qualifier <code>/jobmanager-fork</code>. GRAM, the Globus protocol for running remote jobs, supports the concept of a "job manager" as an adapter to local job management environments.  Each "Grid site" - or collection of resources - can support one or more such job managers. The "fork" job manager runs an immediate job through the UNIX fork() interface. Another job manager we have installed on the gridlab hosts, <code>jobmanager-condor</code> acts as an interface to the Condor batch scheduling system.
<p />
Which do you think will be faster?  Lets find out: use the command <code>time</code> to test which jobmanager is faster.
<p />
To time a command, just enter <code>time <em>commandname</em></code>:
<p />
<pre class="screen">
workshop1$ <userinput>time sleep 3</userinput>
</pre>
<p />
Use this to time a few trivial Grid jobs to compare <code>jobmanager-fork</code> and <code>jobmanager-condor</code>.
<p />
The "fork" job manager is very fast - it has rather low "scheduling latency".  It runs trivial commands very quickly.  But it also has no compute power - its usually just a single CPU on a cluster-controlling computer called the <em>gatekeeper</em> or <em>headnode</em>.  A batch job manager, on the other hand, has a higher scheduling overhead.  But it gives you access to all computers in a cluster, and the opportunity to do real parallel computing.
<p />
It turns out that each of our workshop machines is just an ordinary single-processing machine. We've just "tricked" Condor onto thinking that it had a real "cluster" there with a set of CPUs. (We configured each of the hosts with 16 such virtual CPUS).
<p />
While our four gridlab hosts use the Condor scheduler, and thus <code>jobmanager-condor</code>, other systems use other schedulers. For example, systems using <em>PBS</em> (Portable Batch System) require that you use <code>jobmanager-pbs</code>.  You'll get a chance to try this later in this lab.
<p />
Now try running a few jobs through condor:
<p />
<pre class="screen">
workshop1$ <userinput>globus-job-run workshop2.lac.uic.edu:/jobmanager-condor /bin/hostname</userinput>
</pre>
<p />
Next try starting five such jobs on workshop3 at once: put an "&amp;" at the end of the line, and either use cut-and-past, or shell command history, or a simple shell script to run five of these commands at once.  
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span style="text-align:center; font-weight:bold; font-size:1.2em;">ADD A COMMENT</span>
<span id="twid_4show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_4hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_4toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=2;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ASP2016/MidwestWSIntroTutorial" enctype="multipart/form-data" name="tableappend1" id="tableappend1">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="1"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                            <strong>*</strong>    -->
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Running_a_simple_application_rem"></a> Running a simple application remotely, through "staging" </span></h2>
<p />
<p />
<form name="EDITTHIS" action="/bin/edit/Education/ASP2016/RunningSimpleApplicationsRemotelyThroughStaging" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487215507" name="t"></form>
<p />
Now we'll create a simple application - in this case a shell script - and send the application itself to remote Grid sites. We'll call this application <code>genr</code>  - a simple script to generate fixed-width pseudo-random numbers.
<p />
<pre class="programlisting">
#! /bin/sh
NLINES=$1
NDIGITS=$2
awk "BEGIN {
  for (i = 0 ; i < $NLINES; i++ ) {
    print int(rand() * 10^$NDIGITS )
  }
}"
</pre>
<p />
<ol></li>
   <li>Using copy/paste, copy the script above into a new file named <code>genr</code>. </li>
   <li>Save the file in your home directory on workshop1.lac.uic.edu.</li>
   <li>Make the <code>genr</code> script executable: 
<pre class="screen">
workshop1$ <userinput>chmod +x genr</userinput>
</pre></li>
   <li>Test the script locally.
<pre class="screen">
workshop1$ <userinput>./genr nlines ndigits </userinput>
</pre> 
        <p>Your genr script should behave like this:
<pre class="screen">
workshop1$ <userinput>./genr 5 8</userinput> # 5 lines of 8 digits
23778751
29106573
84581385
15220829
58553734
$ 
</pre></p></li>
   <li>Test <code>genr</code> under <code>globus-job-run</code> to make sure it runs locally through the Globus GRAM interface:
<pre class="screen">
workshop1$ <userinput>globus-job-run workshop1.lac.uic.edu/jobmanager-fork /home/train35/genr 5 4 </userinput>
2377
2910
8458
1522
5855
$
</pre></li>
   <li>Execute <code>genr</code> on workshop2.lac.uic.edu from workshop1.lac.uic.edu:
<pre class="screen">
workshop1$ <userinput>globus-job-run workshop2.lac.uic.edu/jobmanager-fork       /home/train35/genr 5 4</userinput>
</pre>
    <p>What happens? Why?</p></li>
   <li>Add the <code>-s</code> or <code>stage</code> option to the request. This will automatically copy this mini-application to the remote Grid site (gridlab3) so that it can be executed there:
<pre class="screen">
workshop1$ <userinput>globus-job-run workshop1.lac.uic.edu/jobmanager-fork       -s /home/train35/genr 5 4</userinput>
</pre></li>
</ol>
<p />
<h3><a name="Exercise"></a> Exercise: </h3>
Can you run the same application on <em>tg-login.sdsc.teragrid.org</em>?  Did it really stage, or did the application already exist out there?  How can you be sure?
<p />
<p />
<!-- <strong>*</strong>  Comments plugin to create comments table for section   <strong>*</strong>    -->
<p />
<span style="text-align:center; font-weight:bold; font-size:1.2em;">ADD A COMMENT</span>
<span id="twid_5show" class="twistyMakeVisible">
       <a href="#" class="twistyTrigger"><em><strong>Show...</strong></em></a>
     </span>
     <span id="twid_5hide" class="twistyHidden">
       <a href="#" class="twistyTrigger"><em><strong>Hide</strong></em></a>
     </span>
     <div id="twid_5toggle" class="twistyMakeHidden">
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table5" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=0;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">COMMENT</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1 twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=1;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">NAME</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a rel="nofollow" href="/bin/view/Education/ASP2016/MidwestWSIntroTutorial?cover=print;sortcol=2;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">DATE</font></a> </th>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Education/ASP2016/RunningSimpleApplicationsRemotelyThroughStaging" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
</div>
<!-- <strong>*</strong>  End Comment                                            <strong>*</strong>    -->
<p />
<p />
<p />
<p />
<p />
<p />
<!--                                                                             <ul>
 <li>
 <ul>
<li> Set LOGINHOST = workshop1.lac.uic.edu
</li> <li> Set LOGINHOSTSHORT = workshop1
</li> <li> Set LOGINIP = 131.193.181.56
</li> <li> Set GRIDHOST = tg-login.sdsc.teragrid.org
</li> <li> Set OTHERHOST = workshop2.lac.uic.edu
</li> <li> Set OTHERHOSTSHORT = workshop2
</li> <li> Set CERTSUBJECT = /O=Grid/OU=OSG/CN=Training User 99
</li> <li> Set LOGINNAME = train99
</li> <li> Set HOMEDIR = /home/train99
</li></ul> 
</li></ul> 
--> 
<p />
<p />
<hr />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Backlinks"></a>  Backlinks </span></h2>
<p />
<hr/>
Twiki topics in <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> web containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table6" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">0</span></div><!--/patternSearchResultCount--><p />
<p />
<p />
Twiki topics in all others webs containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table7" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<p />
<a href="/twiki/bin/oops/Education/ASP2016/MidwestWSIntroTutorial?template=backlinksweb" target="_top">All references to this document in the <strong>Education/ASP2016</strong> web only</a>  <br />      <a href="/twiki/bin/oops/Education/ASP2016/MidwestWSIntroTutorial?template=backlinksallwebs" target="_top">All references to this document in <strong>all</strong> webs</a>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Child_Topics"></a>  Child Topics </span></h2>
<p />
<strong><em>Immediate children of this topic include the following:</em></strong>
<ul></ul>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Updates"></a>  Major Updates </span></h2></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education/ASP2016<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/ASP2016/GridWorkshops" class="twikiLink">GridWorkshops</a> &gt; <a href="/bin/view/Education/ASP2016/MidwestGridWorkshop" class="twikiLink">MidwestGridWorkshop</a> &gt; <a href="/bin/view/Education/ASP2016/MidwestSyllabus" class="twikiLink">MidwestSyllabus</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>MidwestWSIntroTutorial</span> <br />    
Topic revision: r12 - 29 May 2007 - 22:14:56 - <span class="twikiNewLink">ForrestChristian<a href="/bin/edit/Education/ASP2016/ForrestChristian?topicparent=Education/ASP2016.MidwestWSIntroTutorial" rel="nofollow" title="ForrestChristian (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />