<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> IntroVirtualDataLanguage &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/IntroVirtualDataLanguage?_T=16 Feb 2017" type="application/x-wiki" title="edit IntroVirtualDataLanguage" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/IntroVirtualDataLanguage"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!-- deprecated -->
<p />
<h1><a name="Introduction_to_Virtual_Data_Lan"></a> Introduction to Virtual Data Language </h1>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/ASP2016/IntroVirtualDataLanguage" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487215602" name="t"></form>
<p />
In this exercise, you will use the VDL tools to generate a very simple 'Hello World' message. You need some setup files for VDS (vdsrc and wfrc), and then one exercise file.
<p />
Set up VDS by copying in a vdsrc and a wfrc from the example provided:
<pre class="screen">
$ <span class="in">cp /opt/vdltut/vdsrc ~/.vdsrc</span>
$ <span class="in">cp /opt/vdltut/wfrc ~/.wfrc</span>
</pre>
<p />
Now edit <code>~/.vdsrc</code> so that the <code>dir.storage</code> and <code>dir.exec</code> refer to your user number instead of <code>USERXX</code>.
<p />
VDS should now be configured. You can try it by running a helloworld workflow, as follows.
<p />
Copy the file into a working directory:
<p />
<pre class="screen">
$ <span class="in">cd ~</span>
$ <span class="in">mkdir VDLINTRO</span>
$ <span class="in">cd VDLINTRO</span>
$ <span class="in">cp /opt/vdltut/VDLINTRO/helloworld.vdl .</span>
$ <span class="in">ls</span>
<span class="out">helloworld.vdl</span>
</pre>
<p />
<code>helloworld.vdl</code> is a <span class="firstterm">VDL (Virtual Data Language)</span> file which defines one <em>transformation</em> (like a function definition), and one <em>derivation</em> (like a function call). 
<p />
The transformation defined here takes a message and outputs it to a file.
<p />
The derivation defined here calls this transformation, with a specific message (hello world!) and a specific output file.
<p />
The first step in running helloworld is to compile the VDL file into an <span class="firstterm">abstract DAG (DAX)</span>. Use the vdlc command for this:
<p />
<pre class="screen">
$ <span class="in">vdlc helloworld.vdl </span>
<span class="out">20060531T145705.890: [app] using label "helloworld"
20060531T145705.891: [app] using output file "helloworld.dax"</span>
</pre>
<p />
An abstract DAG has been generated and output in XML format into <code>helloworld.dax</code>. Open <code>helloworld.dax</code> in a file viewer:
<p />
<pre class="screen">
$ <span class="in">cat helloworld.dax</span>
</pre>
<p />
Inside the DAX, you should see three sections. <ol>
<li> <em>list of all referenced files</em> &endash; this shows the input and output files used by this workflow. In this case, there is only one file, the output file <code>greeting.txt</code>.
</li> <li> <em>definition of all jobs</em> &endash; each job in the workflow. In this exercise, there is only one. The derivation specified in the VDL file has been converted into a single <code><job></code> element in the DAX.
</li> <li> <em>list of control-flow dependencies</em> &endash; this section specifies a partial order in which jobs are to executed. As there is only one job in this DAX, there is nothing here. In later exercises, you will see more information here.
</li></ol> 
<p />
Now that you have your abstract DAG, you can run it through the planner to generate a plan for the workflow, using the <code>vds-plan</code> command.
<p />
<pre class="screen">
$ <span class="in">vds-plan --pegasus -g QuarkCode --option pools=local --option output=local --option force helloworld.dax --base ./dags</span>
[...many lines of output...]
<span class="out">
2006.06.10 20:14:57.108 PDT: [INFO] Generating submit files for the concrete workflow (completed)
2006.06.10 20:14:57.108 PDT: [INFO] Generating submit files for the cleanup workflow
2006.06.10 20:14:57.114 PDT: [INFO] Generating submit files for the cleanup workflow (completed)
2006.06.10 20:14:57.115 PDT: [INFO] Time taken to execute is 1.05 seconds

I have concretized your abstract workflow. The workflow has been entered
into the workflow database with a state of "planned". The next step is 
to start or execute your workflow. The invocation required is

vds-run  /home/trainXX/VDLINTRO/dags/QuarkCode/helloworld/run0007</span>
</pre>
<p />
The workflow has been planned. You can start it running by typing the command shown in the above output (note that the numbers will probably be different for you).
<p />
You can start it running using the <code>vds-run</code> command:
<p />
<pre class="screen">
$ <span class="in">vds-run  /home/trainXX/VDLINTRO/dags/QuarkCode/helloworld/run0007</span>
<span class="out">
Checking all your submit files for log file names.
This might take a while... 
Done.
-----------------------------------------------------------------------
File for submitting this DAG to Condor           : helloworld-0.dag.condor.sub
Log of DAGMan debugging messages                 : helloworld-0.dag.dagman.out
Log of Condor library debug messages             : helloworld-0.dag.lib.out
Log of the life of condor_dagman itself          : helloworld-0.dag.dagman.log

Condor Log file for all jobs of this DAG         : /tmp/helloworld-037504.log
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 212.
-----------------------------------------------------------------------</span>
</pre>
<p />
<p />
You can monitor which jobs are running using the condor_q command and by watching the jobstate log.
<p />
<pre class="screen">
$ <span class="in">cd /home/trainXX/VDLINTRO/dags/QuarkCode/helloworld/run0007</span>
$ <span class="in">tail -f jobstate.log</span>
[...log information appears over time...]
<span class="out">1150052758 INTERNAL *** DAGMAN_FINISHED ***
1150052762 INTERNAL *** TAILSTATD_FINISHED 0 ***</span>
</pre>
<p />
You will know when your job is completed when the TAILSTATD_FINISHED message appears. If something has gone wrong, you might see an error message instead.
<p />
When you job has completed, you can examine the results as follows. You will need to substitute your user number in twice, and the run number that you used above. Replace 2 below with your user number and 0005 with the run number.
<p />
<pre class="screen">
$ <span class="in">cat /scratch/train<replaceable>02</replaceable>/QuarkCode/train<replaceable>2</replaceable>/helloworld/run<replaceable>0005</replaceable>/greeting.txt</span>
<span class="out">Hello World</span>
</pre>
<p />
and now you can see the greeting.
<p />
<pre class="screen">
$ <span class="in">cat greeting.txt</span>
<span class="out">Hello World</span>
</pre>
<p />
Congratulations! You've run your first VDL workflow.
<p />
<p />
<p />
<p />
<p />
<hr />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Backlinks"></a>  Backlinks </span></h2>
<p />
<hr/>
Twiki topics in <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> web containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Last Updated by </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="/bin/view/Education/ASP2016/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education.ASP2016</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Education/ASP2016/UsingVirtualDataSystems" class="twikiLink">UsingVirtualDataSystems</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a href="/bin/view/Main/UnknownUser" class="twikiLink">UnknownUser - 06 Apr 2007 - 14:46</a> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<p />
<p />
Twiki topics in all others webs containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<p />
<a href="/twiki/bin/oops/Education/ASP2016/IntroVirtualDataLanguage?template=backlinksweb" target="_top">All references to this document in the <strong>Education/ASP2016</strong> web only</a>  <br />      <a href="/twiki/bin/oops/Education/ASP2016/IntroVirtualDataLanguage?template=backlinksallwebs" target="_top">All references to this document in <strong>all</strong> webs</a>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Child_Topics"></a>  Child Topics </span></h2>
<p />
<strong><em>Immediate children of this topic include the following:</em></strong>
<ul></ul>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Updates"></a>  Major Updates </span></h2>
<p />
-- <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> - 27 Feb 2007</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education/ASP2016<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><span class="twikiNewLink">SecurityTeamWorkingArea<a href="/bin/edit/Security/SecurityTeamWorkingArea?topicparent=Education/ASP2016.IntroVirtualDataLanguage" rel="nofollow" title="SecurityTeamWorkingArea (this topic does not yet exist; you can create it)">?</a></span> &gt; <a href="/bin/view/Education/ASP2016/WorkshopTutorialModules" class="twikiLink">WorkshopTutorialModules</a> &gt; <a href="/bin/view/Education/ASP2016/UsingVirtualDataSystems" class="twikiLink">UsingVirtualDataSystems</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>IntroVirtualDataLanguage</span> <br />    
Topic revision: r3 - 06 Apr 2007 - 14:46:26 - <span class="twikiNewLink">ForrestChristian<a href="/bin/edit/Education/ASP2016/ForrestChristian?topicparent=Education/ASP2016.IntroVirtualDataLanguage" rel="nofollow" title="ForrestChristian (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />