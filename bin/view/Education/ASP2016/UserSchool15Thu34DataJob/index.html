<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> UserSchool15Thu34DataJob &lt; Education/ASP2016 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/ASP2016/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/ASP2016/UserSchool15Thu34DataJob?_T=16 Feb 2017" type="application/x-wiki" title="edit UserSchool15Thu34DataJob" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/ASP2016/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/ASP2016/UserSchool15Thu34DataJob"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>
<p />
<h1><a name="Using_HTCondor_to_get_job_output"></a> Using HTCondor to get job output </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Using_HTCondor_to_get_job_output">  Using HTCondor to get job output</a> <ul>
<li> <a href="?cover=print#Goals"> Goals</a>
</li> <li> <a href="?cover=print#Transferring_output_using_HTCond"> Transferring output  using HTCondor</a>
</li> <li> <a href="?cover=print#Further_information"> Further information</a>
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Goals"></a> Goals </span></h2>
<p /> <ul>
<li> After running jobs, ideally you'd like to get the results back; this tutorial will cover how to do this using HTCondor.
</li> <li> In this tutorial we will learn how to specify output files to HTCondor and have HTCondor transfer files for each job.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Transferring_output_using_HTCond"></a> Transferring output  using HTCondor </span></h2>
You've seen HTCondor's file transfer mechanisms being used to transfer input data in the previous exercises, we'll now look at using the HTCondor file transfer mechanism to get output back from your jobs.  By default, if you set <code>should_transfer_files</code> to  <code>YES</code> in your HTCondor submit file, HTCondor will transfer all the files in the job sandbox back to the submit node.  However, you may not want to transfer all the files back, or to rename files as they get transferred back.  This exercise will go through how to specify files that HTCondor should transfer back.  
<p />
Before, we start, there's a little background that needs to be covered.  As the lecture mentioned, jobs running on OSG have a variable called <code>OSG_WN_TMP</code> defined in the environment.  This variable points to the location of a scratch directory that your jobs can use as a working area.  This area is usually on a storage system with higher I/O performance although it's typical local to just the compute node and frequently gets wiped after jobs finish.  Typically, it's advantageous to have your job use this space to store temporary files, intermediate results, and to generate final outputs before copying the outputs back to the submit node.
<p />
Finally, let's move on to the exercise: <ol>
<li> First log in to the OSG Connect submit node (<code>login.osgconnect.net</code>)
</li> <li> Create a directory for this tutorial : <pre class="screen">
$> mkdir output_tutorial
$> cd output_tutorial
</pre>
</li> <li> Create a file called <code>job.sh</code> with the following: <pre class="file">
#!/bin/bash
mkdir -p $OSG_WN_TMP/$1/output_directory1
mkdir -p $OSG_WN_TMP/$1/output_directory2
echo "output1" >  $OSG_WN_TMP/$1/output_directory1/output_file1
echo "dummy" >  $OSG_WN_TMP/$1/output_directory1/intermediate_output
echo "output2" >  $OSG_WN_TMP/$1/output_directory2/output_file2
echo "dummy" >  $OSG_WN_TMP/$1/output_directory2/intermediate_output_test
sleep 60
cp -a $OSG_WN_TMP/$1/ .
</pre>    4. Make the file executable: <pre class="screen">
$> chmod 755 job.sh
</pre>
</li> <li> Create a submit file (<code>output.submit</code>) with the following: <pre class="file">
output        = job.out.$(Process)
error         = job.error.$(Process)
log           = job.log.$(Process)

universe = vanilla
executable = job.sh
transfer_output_files = $(Cluster)/output_directory1/output_file1, $(Cluster)/output_directory2/output_file2
arguments = $(Cluster)
queue 1
</pre>
</li> <li> Submit the job: <pre class="screen">
$> condor_submit output.submit
</pre>
</li> <li> When the job is done, you should see <code>output_file1</code> and <code>output_files2</code> in your submit directory containing the strings <code>output1</code> or <code>output2</code>
</li> <li>  One thing to note is that when you specify files use transfer_output_file, HTCondor will only transfer the files that you specify instead of transferring all the files in the job sandbox by default. Also the files are copied directly to the submit directory and the directory structure from the job sandbox is not preserved. 
</li></ol> 
<p />
As an exercise, try modifying the submit file to also transfer the intermediate outputs (<code>intermediate_output</code> and <code>intermediate_output_test</code>) as well.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Further_information"></a> Further information </span></h2> <ul>
<li> <a href="http://research.cs.wisc.edu/htcondor/manual/v8.2/2_5Submitting_Job.html#SECTION00354200000000000000" target="_top">Specifying files to transfer</a>
</li></ul> 
<p />
<p />
-- <span class="twikiNewLink">BalamuruganDesinghu<a href="/bin/edit/Main/BalamuruganDesinghu?topicparent=Education/ASP2016.UserSchool15Thu34DataJob" rel="nofollow" title="BalamuruganDesinghu (this topic does not yet exist; you can create it)">?</a></span> - 24 Jul 2015</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education/ASP2016<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/ASP2016/OSGUserSchool2015" class="twikiLink">OSGUserSchool2015</a> &gt; <a href="/bin/view/Education/ASP2016/UserSchool15Materials" class="twikiLink">UserSchool15Materials</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>UserSchool15Thu34DataJob</span> <br />    
Topic revision: r7 - 29 Jul 2015 - 01:29:06 - <a href="/bin/view/Main/SuchandraThapa" class="twikiLink">SuchandraThapa</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />