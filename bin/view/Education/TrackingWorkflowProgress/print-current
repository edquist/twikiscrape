<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TrackingWorkflowProgress &lt; Education &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/TrackingWorkflowProgress?_T=16 Feb 2017" type="application/x-wiki" title="edit TrackingWorkflowProgress" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/TrackingWorkflowProgress"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!-- deprecated -->
<p />
<h1><a name="Tracking_the_Progress_of_the_Wor"></a>  Tracking the Progress of the Workflow and Debugging the Workflows </h1>
<p />
<form name="EDITTHIS" action="/bin/edit/Education/TrackingWorkflowProgress" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:.5em;"><input type="hidden" value="1487216794" name="t"></form>
<p />
In this exercise we are going to list ways to track your workflow, and give some debugging hints when something goes wrong.
<p />
We will change into the directory, that was mentioned by the <code>vds-run</code> command.
<p />
<pre class="screen">
$ <span class="in">cd /nfs/home/@USER@/tutorial/master/PEGASUS/dags/ivdgl1/QuarkCode/run000X</span>
</pre>
<p />
In this directory you will see a whole lot of files. That should not scare you. Unless things go wrong, you need to look at just a very few number of files to track the progress of the workflow.
<p />
At the first go you should be concerned with only one file: <code>jobstate.log</code>. This is the output file of the monitoring daemon that is parsing all the condor log files to determine the status of the jobs. It logs the events seen by Condor into a more readable form for us.
      <pre class="screen">
$ <span class="in">more jobstate.log</span>
<span class="out">1149911774 INTERNAL *** TAILSTATD_STARTED ***
1149911773 INTERNAL *** DAGMAN_STARTED ***
1149911773 QuarkCode_0_pegasus_concat UN_READY - - -
1149911773 Plot_ID000008 UN_READY - - -
1149911773 Lifetime_ID000005 UN_READY - - -
1149911773 WireDelay_ID000002 UN_READY - - -
1149911773 rc_tx_WireDelay_ID000002_0 UN_READY - - -
[..]</span>
 </pre>
<p />
<p />
In the starting of the jobstate.log, when the workflow has just started running you will see a lot of entries with status <code>UN_READY</code>. That designates that DAGMan has just parsed in the .dag file and has not started working on any job as yet. Initially all the jobs in the workflow are listed as <code>UN_READY</code>.
<p />
After sometime you will see entries in <code>jobstate.log</code> that show a job is being executed, etc.
<p />
<pre class="programlisting">
1149911774 QuarkCode_0_isi_skynet_cdir SUBMIT 264.0 isi_skynet -
1149911789 QuarkCode_0_isi_skynet_cdir EXECUTE 264.0 isi_skynet -
1149911789 QuarkCode_0_isi_skynet_cdir GLOBUS_SUBMIT 264.0 isi_skynet -
1149911789 QuarkCode_0_isi_skynet_cdir GRID_SUBMIT 264.0 isi_skynet -
1149911794 QuarkCode_0_isi_skynet_cdir JOB_TERMINATED 264.0 isi_skynet -
1149911794 QuarkCode_0_isi_skynet_cdir POST_SCRIPT_STARTED - isi_skynet -
1149911799 QuarkCode_0_isi_skynet_cdir POST_SCRIPT_TERMINATED 264.0 isi_skynet -
1149911799 QuarkCode_0_isi_skynet_cdir POST_SCRIPT_SUCCESS - isi_skynet -
</pre>
<p />
The above shows the create dir job being submitted and then executed on the grid. In addition it lists that job is being run on the grid site <code>isi_skynet</code>. The various states of the job while it goes through submission to execution to postprocessing are in UPPERCASE.
<p />
To see which job of yours is being executed, you can also use <code>condor_q</code>. By default, <em>condor_q</em> list all the jobs on the submit host. However, we are just interested in our own respective jobs. So we will use some classad magic to narrow the results.
<p />
Run command <tt>condor_q -const '(Owner <code>= "@USUER@")'</tt> replacing =@USER@</code> with your the username.
<p />
<pre class="screen">
$ condor_q -const '(Owner == "vdsuser-4")'</span>
<span class="out">252.0   vdsuser-4       6/9  17:04   0+00:11:21 R  0   9.8  condor_dagman -f -
260.0   vdsuser-4       6/9  17:15   0+00:00:00 I  0   9.8  kickstart -n Quark</span>
</pre>
<p />
The above indicates that currently we have two jobs running.
<p />
<p />
Keep a lookout on the <em>condor_q</em> to track whether a workflow is running or not. If you do not see any of your job in the condor_q for sometime (say 30 seconds), we know the workflow has finished. We need to wait, as there might be delay in <span class="twikiNewLink">CondorDAGMAN<a href="/bin/edit/Education/CondorDAGMAN?topicparent=Education.TrackingWorkflowProgress" rel="nofollow" title="CondorDAGMAN (this topic does not yet exist; you can create it)">?</a></span> releasing the next job into the queue after a job has finished successfully.
<p />
If condor_q is empty, then either your workflow has: <ul>
<li> successfully completed
</li> <li> stopped midway due to non recoverable error
</li></ul> 
<p />
<h4><a name="Successfully_Completed"></a> Successfully Completed </h4>
Let us again look at the <code>jobstate.log</code>. This time we need to look at the last few lines.
<p />
<pre class="screen">
$ <span class="in">tail jobstate.log </span>
<span class="out">1149894263 new_rc_tx_Plot_ID000008_0 POST_SCRIPT_TERMINATED 248.0 local -
1149894263 new_rc_tx_Plot_ID000008_0 POST_SCRIPT_SUCCESS - local -
1149894268 new_rc_register_Plot_ID000008 SUBMIT 249.0 local -
1149894273 new_rc_register_Plot_ID000008 EXECUTE 249.0 local -
1149894273 new_rc_register_Plot_ID000008 JOB_TERMINATED 249.0 local -
1149894273 INTERNAL *** DAGMAN_FINISHED ***
1149894274 INTERNAL *** TAILSTATD_FINISHED 0 ***</span>
</pre>
<p />
Looking at the last two lines we see that DAGMAN finshed, and tailstatd finished successfully with a status 0. This means workflow ran successfully. Congratulations you ran your workflow on the grid successfully.
<p />
The output plot generated by the workflow is <code>.png file</code> that resides in the directory <code>/nfs/storage01/trainXX/vdsuser-Y_plot.png</code> where <code>XX</code> is the 2 digit version of Y.  (e.g, if user is <code>vdsuser-4</code> then the path will be <code>/nfs/storage01/train04/vdsuser-4_plot.png</code>
<p />
To view the plot, you can copy <code>vdsuser-Y_plot.png</code> to your skynet webspace, and view it in your web browser:</p>
<p />
<pre class="screen">
$ <span class="in">cp /nfs/storage01/train04/vdsuser-4_plot.png ~/public_html/newplot.png</span>
</pre>
<p />
Point your web browser to: <code>http://skynet-login.isi.edu/~@USER@/newplot.png</code> where <code>@USER@</code> is your userid.
<p />
<p />
<h4><a name="Unsuccessfully_Completed_Workflo"></a> Unsuccessfully Completed (Workflow execution stopped midway) </h4>
Let us again look at the jobstate.log. Again we need to look at the last few lines.
<p />
<pre class="screen">
$ <span class="in">tail jobstate.log</span>
<span class="out">1149912756 Frequency_ID000006 SUBMIT 277.0 isi_skynet -
1149912766 Frequency_ID000006 GLOBUS_SUBMIT 277.0 isi_skynet -
1149912766 Frequency_ID000006 GRID_SUBMIT 277.0 isi_skynet -
1149912861 Frequency_ID000006 EXECUTE 277.0 isi_skynet -
1149912901 Frequency_ID000006 JOB_TERMINATED 277.0 isi_skynet -
1149912901 Frequency_ID000006 POST_SCRIPT_STARTED - isi_skynet -
1149912906 Frequency_ID000006 POST_SCRIPT_TERMINATED 277.0 isi_skynet -
1149912906 Frequency_ID000006 POST_SCRIPT_FAILURE 1 isi_skynet -
1149912906 INTERNAL *** DAGMAN_FINISHED ***
1149912911 INTERNAL *** TAILSTATD_FINISHED 1 ***</span>
</pre>
<p />
Looking at the last two lines we see that DAGMAN finshed, and tailstatd finished unsuccessfully with a status 1.
<p />
We can easily determine which job failed. It is <code>Frequency_ID000006</code> in this case.
<p />
To determine the reason for failure we need to look at it's kickstart output file which is <code>$JOBNAME.out</code> (i.e., <a href="http://skynet-login.isi.edu/~vdsuser-4/Frequency_ID000006.out" target="_top">Frequency_ID000006.out</a>)
<p />
Looking at it's output we see it failed because of a perl library not installed on isi_skynet!.
<p />
We correct that and submit the workflow again.
<p />
<p />
<p />
<p />
<p />
<hr />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Backlinks"></a>  Backlinks </span></h2>
<p />
<hr/>
Twiki topics in <a href="/bin/view/Education/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education</a> web containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Last Updated by </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="/bin/view/Education/WebHome" class="twikiCurrentWebHomeLink twikiLink">Education</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Education/UsingVirtualDataSystems" class="twikiLink">UsingVirtualDataSystems</a> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <a href="/bin/view/Main/UnknownUser" class="twikiLink">UnknownUser - 06 Apr 2007 - 14:46</a> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<p />
<p />
Twiki topics in all others webs containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<p />
<a href="/twiki/bin/oops/Education/TrackingWorkflowProgress?template=backlinksweb" target="_top">All references to this document in the <strong>Education</strong> web only</a>  <br />      <a href="/twiki/bin/oops/Education/TrackingWorkflowProgress?template=backlinksallwebs" target="_top">All references to this document in <strong>all</strong> webs</a>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Child_Topics"></a>  Child Topics </span></h2>
<p />
<strong><em>Immediate children of this topic include the following:</em></strong>
<ul></ul>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Updates"></a>  Major Updates </span></h2>
<p />
-- <a href="/bin/view/Main/ForrestChristian" class="twikiLink">ForrestChristian</a> - 27 Feb 2007</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/Education/WorkshopTutorialModules" class="twikiLink">WorkshopTutorialModules</a> &gt; <a href="/bin/view/Education/UsingVirtualDataSystems" class="twikiLink">UsingVirtualDataSystems</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TrackingWorkflowProgress</span> <br />    
Topic revision: r2 - 06 Apr 2007 - 14:46:26 - <span class="twikiNewLink">ForrestChristian<a href="/bin/edit/Education/ForrestChristian?topicparent=Education.TrackingWorkflowProgress" rel="nofollow" title="ForrestChristian (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />