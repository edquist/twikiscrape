<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> OSGSS2011TueDHTCEx1 &lt; Education &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/OSGSS2011TueDHTCEx1?_T=16 Feb 2017" type="application/x-wiki" title="edit OSGSS2011TueDHTCEx1" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/OSGSS2011TueDHTCEx1"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="DHTC_Exercises_Remote_submission"></a> DHTC Exercises - Remote submission </h1>
<p />
This exercise will show you how to submit to a remote resource.
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#DHTC_Exercises_Remote_submission"> DHTC Exercises - Remote submission</a> <ul>
<li> <a href="?cover=print#Environment"> Environment</a>
</li> <li> <a href="?cover=print#Exercise_1_Condor_C"> Exercise 1 - Condor-C</a>
</li> <li> <a href="?cover=print#Exercise_2_Condor_G"> Exercise 2 - Condor-G</a>
</li> <li> <a href="?cover=print#Exercise_3_True_Condor_G"> Exercise 3 - True Condor-G</a>
</li> <li> <a href="?cover=print#Exercise_4_True_Condor_G_2"> Exercise 4 - True Condor-G #2</a>
</li></ul> 
</li></ul> 
</div>
<p />
Work in groups of (possibly) 4 people.<br>
Each member of the group takes one exercise and does the actual steps.<br>
All members of the group monitor the progress of all 4 exercises in parallel.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Environment"></a> Environment </span></h2>
<p />
We will use the usual Condor submit host:<br>
<code>vdt-itb.cs.wisc.edu</code>
<p />
There will be no shared file system between the submit and the execute hosts, so you will have to transfer all the needed files with you.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Exercise_1_Condor_C"></a> Exercise 1 - Condor-C </span></h2>
<p />
For this first exercise, we will submit jobs to a UCSD Condor pool, using Condor-C.
<p />
Condor-C allows a user to submit to a remote Condor submit node, without logging into it first.<br>
More details about Condor-C can be found in the <a href="http://www.cs.wisc.edu/condor/manual/v7.6/5_3Grid_Universe.html#SECTION00631000000000000000" target="_top">Condor manual</a>.
<p />
To submit to the remote Condor pool, use this submit file:
<pre style="margin-left:4em" class="screen">
# this tells it to use Condor-C to submit to the UCSD Condor pool
Universe   = grid
grid_resource = condor devg-2.t2.ucsd.edu devg-2.t2.ucsd.edu

# this tells the remote condor to use the vanilla Universe
+remote_jobuniverse = 5
+remote_requirements = True
+remote_ShouldTransferFiles = "YES"
+remote_WhenToTransferOutput = "ON_EXIT"

# this is standard Condor part
Executable = &lt;your executable here&gt;
Arguments  = &lt;your arguments here&gt;
transfer_input_files = &lt;list any additional files you need here&gt;
Log        = simple.log
Output     = simple.out.$(Cluster).$(Process)
Error      = simple.error.$(Cluster).$(Process)

Queue &lt;as many as you need&gt;
</pre>
<p />
You can try any of the programs you used yesterday.
<p />
Or you may just run a simple test script to see where you land:
<pre style="margin-left:4em" class="screen">
#!/bin/bash
date
uname -a
id
# then sleep a bit to allow monitoring
sleep 300
</pre>
<p />
Run at least 20 jobs.
<p />
Since this is your first exercise, I allow you to cheat a bit, and log into the remote UCSD Condor pool (<code>osgedu@devg-2.t2.ucsd.edu</code>)
to monitor it locally there (please do not submit there).<br>
In real life, you may not have this privilege.
<p />
<pre style="margin-left:4em" class="screen">
ssh osgedu@devg-2.t2.ucsd.edu
$ condor_q
$ condor_status
</pre>
<p />
What do you see?<br>
Was it any different than running locally?
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Exercise_2_Condor_G"></a> Exercise 2 - Condor-G </span></h2>
<p />
For this second exercise, we will submit jobs to a local Grid Gatekeeper, using Condor-G.
<p />
Condor-G allows a user to submit to a remote Grid gatekeeper, without logging into it first.<br>
More details about Condor-G can be found in the <a href="http://www.cs.wisc.edu/condor/manual/v7.6/5_3Grid_Universe.html#SECTION00632200000000000000" target="_top">Condor manual</a>.
<p />
To submit to the remote Condor pool, use this submit file:
<pre style="margin-left:4em" class="screen">
# this tells it to use Condor-G to submit to the School Grid Gatekeeper
Universe   = grid
grid_resource = gt2 osg-edu.cs.wisc.edu/jobmanager-condor

# this is standard Condor part
Executable = &lt;your executable here&gt;
Arguments  = &lt;your arguments here&gt;
transfer_input_files = &lt;list any additional files you need here&gt;
Log        = simple.log
Output     = simple.out.$(Cluster).$(Process)
Error      = simple.error.$(Cluster).$(Process)

# This is required for Condor-G
transfer_output_files = &lt;list your files here&gt;

Queue &lt;as many as you need&gt;
</pre>
<p />
Please notice the <code>transfer_output_files</code> line. Yes, <strong>you need to explicitly list all the files you want back</strong>! <br>
Unlike regular Condor, Condor-G does not auto-discover files to be transfered back.<br>
For more details, see the <a href="http://www.cs.wisc.edu/condor/manual/v7.6/condor_submit.html#73558" target="_top">Condor Manual</a>.
<p />
You will also need a Grid proxy for this; we will go into details as of why later.<br>
For now, before submitting the jobs, just run:
<pre style="margin-left:4em" class="screen">
% voms-proxy-init -voms osgedu:/osgedu/2011OSGSummerSchool
Enter GRID pass phrase:
Your identity: /DC=org/DC=doegrids/OU=People/CN=Alain Roy 424511
Creating temporary proxy ........................................... Done
Contacting  voms.grid.iu.edu:15003 [/DC=org/DC=doegrids/OU=Services/CN=http/voms.grid.iu.edu] "osgedu" Done
Creating proxy ............................ Done
Your proxy is valid until Mon Jun 20 21:00:33 2011
</pre>
<p />
Run the same jobs as before.
<p />
Again, since this is your first experince with Condor-G, we will cheat a bit.
You can log into <code>osg-edu.cs.wisc.edu</code> and monitor what is going on there (it is still a Condor pool).
<p />
What do you see?<br>
Was it any different than running locally?
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Exercise_3_True_Condor_G"></a> Exercise 3 - True Condor-G </span></h2>
<p />
For this third exercise, we will submit jobs to a Nebraska Grid pool, using Condor-G.
<p />
The only change to Exercise 2 is that you need to change a line in the submit file:
<pre style="margin-left:4em" class="screen">
grid_resource = gt2 red.unl.edu/jobmanager-condor
</pre>
<p />
Submit the same (kind of) jobs as before.
<p />
Please notice that you cannot log into this Grid gatekeeper, so you will have to observe the status of the jobs only from the local queue.
<p />
How was the experience?
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Exercise_4_True_Condor_G_2"></a> Exercise 4 - True Condor-G #2 </span></h2>
<p />
This is very similar to Exercise 3, just with a different Grid site.
<p />
The only change to Exercise 2 is that you need to change a line in the submit file:
<pre style="margin-left:4em" class="screen">
grid_resource = gt2 itbv-ce-pbs.uchicago.edu/jobmanager-pbs
</pre>
<p />
Submit the same (kind of) jobs as before.
<p />
Please notice that you cannot log into this Grid gatekeeper, so you will have to observe the status of the jobs only from the local queue.
<p />
How was the experience?</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/GridWorkshops" class="twikiLink">GridWorkshops</a> &gt; <a href="/bin/view/Education/OSGSummerSchool2011" class="twikiLink">OSGSummerSchool2011</a> &gt; <a href="/bin/view/Education/OSGSS2011Materials" class="twikiLink">OSGSS2011Materials</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>OSGSS2011TueDHTCEx1</span> <br />    
Topic revision: r4 - 27 Jun 2011 - 19:12:28 - <a href="/bin/view/Main/IgorSfiligoi" class="twikiLink">IgorSfiligoi</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />