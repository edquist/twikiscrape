<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> UserSchool16Thurs12rsync &lt; Education &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Education/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Education/UserSchool16Thurs12rsync?_T=16 Feb 2017" type="application/x-wiki" title="edit UserSchool16Thurs12rsync" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Education/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Education/UserSchool16Thurs12rsync"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Documentation/Tools/exercises.css ');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>
<p />
<h1><a name="Thursday_Exercise_1_2_Getting_da"></a> Thursday Exercise 1.2: Getting data onto and out of your laptop </h1>
<p />
<p />
<p /> <ul>
<li> The material so far has covered ways to do computation on various resources. This section covers how to get data and results to and from the servers where you are submitting jobs.   
</li> <li> Although there are a variety of ways to do this, we'll cover three methods (<code>scp</code>, <code>rsync</code>, and Globus) that should cover most of the situations that'll you'll encounter. 
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Compressing_files"></a> Compressing files </span></h2>
<p />
<p />
Sometimes when you have a lot of input files it makes more sense to compress them before sending them with a job. For this exercise, we want to compress our blast input files and send them to the remote worker node. 
<p />
For this part of the exercise, you will need to:
<p /> <ol>
<li> Compress the input files using the <code>tar</code> command
</li> <li> Modify <code>transfer_input_files</code> in the file <code>blast_run.submit</code> to transfer your compressed file
</li> <li> Create a wrapper script which will decompress the input files, then run blast
</li></ol> 
<p />
<strong>HINT</strong>: Here's a pattern for the <code>tar</code> command:
<pre class="screen">
$> tar -cvzf [compressed filename] [list of files]
</pre>
<p />
Replace <code>-c</code> with <code>-x</code> to decompress.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Transferring_files_on_steroids"></a> Transferring files (on steroids) </span></h2>
<p />
You've now transferred files and directories using <code>scp</code>.  However there are a few drawbacks to using <code>scp</code>.  First, you need to specify each directory and/or file that you want to transfer.  This can get tedious if you have a lot of files or directories to transfer.  Second, scp will copy every file even if it's present resulting in more time and bandwidth being used than necessary.  <code>rsync</code> is a program that avoids this by checking on the files between the source and destination and then only copying the directories and files that have changed.    We'll use rsync to sync a directory as follows:
<p /> <ol>
<li> Log in to the CHTC submit node (<code>learn.chtc.wisc.edu</code>).  
</li> <li> Remove the <code>scp_transfer</code> directory.    
</li></ol> 
<pre class="screen">
$>  <strong>rm -fr scp_transfer</strong>
</pre> <ol>
<li> Now, we'll use <code>rsync</code> to transfer the directory from the OSG Connect login node. <pre class="screen">
$>  <strong>rsync -r -t -v -e ssh username@login.osgconnect.net:~/scp_transfer/ .</strong>
</pre>
</li> <li> Now try running the rsync again.  You'll notice that it doesn't copy any files this time. <pre class="screen">
$>  <strong>rsync -r -t -v -e ssh username@login.osgconnect.net:~/scp_transfer/ .</strong>
</pre>
</li></ol> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Globus_optional"></a> Globus (optional) </span></h2>
The final transfer method uses a cloud-based service called Globus (<a href="http://www.globus.org" target="_top">http://www.globus.org</a>).  Globus allows users to schedule "third-party" data transfers between storage endpoints using a web interface.  After launching a transfer request, Globus manages the transfers and verifies the copied files, re-transferring any files that have been copied incorrectly.  Using <a href="https://www.globus.org/globus-connect-personal" target="_top">Globus Connect Personal</a>, you can set your desktop or laptop hard drive as a storage endpoint, allowing you to transfer data to and from your computer.  Quite a few university campuses and OSG resources have storage endpoints, as do most national-scale HPC centers, making Globus a convenient way of getting data between places.
<p />
This part of the exercise go through setting up a Globus Connect personal endpoint on your laptop and transferring some files from OSG Connect to your laptop.
<p /> <ol>
<li> First go to the <span class="twikiNewLink">https://www.globus.org/globus-connect-personal<a href="/bin/edit/Education/GlobusDownload?topicparent=Education.UserSchool16Thurs12rsync" rel="nofollow" title="https://www.globus.org/globus-connect-personal (this topic does not yet exist; you can create it)">?</a></span> page
</li> <li> Click on the appropriate download link and install the application
</li> <li> The download link will have instructions on setting up your endpoint
</li> <li> Once installed and running, go to globus connect application icon (in your system tray or on toolbar at the top of the screen) and select 'Web: Transfer Files'
</li> <li> Globus Connect will open a web page like this: <img src="/twiki/pub/Education/UserSchool16Thurs12rsync/Screen_Shot_2015-07-23_at_2.11.59_PM.png" alt="Screen_Shot_2015-07-23_at_2.11.59_PM.png" width='1049' height='794' />    
</li> <li> Select a file from the osgconnect#stash side and copy it to your using the arrow button.  <img src="/twiki/pub/Education/UserSchool16Thurs12rsync/Screen_Shot_2015-07-23_at_2.58.33_PM.png" alt="Screen_Shot_2015-07-23_at_2.58.33_PM.png" width='1049' height='794' />    
</li> <li> Click on the Activity link near the top of the page to track your transfer
</li></ol> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Education<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Education/OSGUserSchool2016" class="twikiLink">OSGUserSchool2016</a> &gt; <a href="/bin/view/Education/UserSchool16Materials" class="twikiLink">UserSchool16Materials</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>UserSchool16Thurs12rsync</span> <br />    
Topic revision: r2 - 06 Jul 2016 - 19:12:24 - <a href="/bin/view/Main/BrianLin" class="twikiLink">BrianLin</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />