---+ A few tips and tricks

&lt;div style=&quot;margin-left: 1em; margin-right: 1em; border: 1px solid black; padding: 0.5em;&quot;&gt;
---+++ Objective of this exercise
This exercise will teach you a few nifty commands to help you use Condor more easily.
&lt;/div&gt;

---++ Tips for condor_q

You&#39;re been using =condor_q=, but it shows the jobs of everyone who submitted from the computer you are running the command on. If you want to see just your jobs, try this: 

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -sub %RED%YOUR-LOGIN-NAME%ENDCOLOR%
&lt;/pre&gt;

Curious where your jobs are running? Use the =-run= option to see where jobs are running. (Idle jobs are not shown.) 
&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -run

-- Submitter: osg-ss-submit.chtc.wisc.edu : &lt;128.104.100.55:9618?sock=4252_f786_2&gt; : osg-ss-submit.chtc.wisc.edu
 ID      OWNER            SUBMITTED     RUN_TIME HOST(S)         
  24.0   roy             6/21 14:55   0+00:00:59 slot1@e026.chtc.wisc.edu
&lt;/pre&gt;

=condor_q= can also show you your job !ClassAd. Recall back to the lecture and the discussion of !ClassAds. For instance, you can look at the !ClassAd for a single job:

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -l 23.0

-- Submitter: osg-ss-submit.chtc.wisc.edu : &lt;128.104.100.55:9618?sock=4252_f786_2&gt; : osg-ss-submit.chtc.wisc.edu
PeriodicRemove = false
CommittedSlotTime = 0
Out = &quot;simple.0.out&quot;
ImageSize_RAW = 595
NumCkpts_RAW = 0
EnteredCurrentStatus = 1340308383
CommittedSuspensionTime = 0
WhenToTransferOutput = &quot;ON_EXIT&quot;
NumSystemHolds = 0
StreamOut = false
NumRestarts = 0
ImageSize = 750
Cmd = &quot;/home/roy/condor/simple&quot;
... output trimmed ... 
&lt;/pre&gt;

There are some interesting parts you can check out. For instance, where is the job running? 

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -l 24.0 | grep RemoteHost
RemoteHost = &quot;slot1@e026.chtc.wisc.edu&quot;
&lt;/pre&gt;

How many times has this job run? (It might be more than one if there were recoverable errors.)

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -l 24.0 | grep JobRunCount
JobRunCount = 1
&lt;/pre&gt;

Where is the user log for this job? This is helpful when you assist someone else in debugging and they&#39;re not sure.

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -l 24.0 | grep UserLog
UserLog = &quot;/home/roy/condor/simple.0.log&quot;
&lt;/pre&gt;

What the job&#39;s requirements? Condor automatically fills some in for you, to make sure your job runs on a reasonable computer in our cluster, but you can override any of these. I&#39;ve broken the output into multiple lines to explain it to you.

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q -l 23.0 | grep Requirements
Requirements = ( IsOSGSchoolSlot =?= true ) # %RED% Run on a OSG User School computer  %ENDCOLOR%
    &amp;&amp; ( TARGET.Arch == &quot;X86_64&quot; ) # %RED% Run on a 64-bit computer %ENDCOLOR%
    &amp;&amp; ( TARGET.OpSys == &quot;LINUX&quot; )  # %RED% Make sure you run on Linux %ENDCOLOR%
    &amp;&amp; ( TARGET.Disk &gt;= RequestDisk ) # %RED% Make sure the default disk Condor is on has enough disk space. %ENDCOLOR%
    &amp;&amp; ( TARGET.Memory &gt;= RequestMemory ) # %RED% Make sure the computer has enough memory %ENDCOLOR%
    &amp;&amp; ( TARGET.HasFileTransfer )# %RED% Only run on a computer that can accept your files. %ENDCOLOR%
&lt;/pre&gt;
---++ Tips for condor_status

Curious about what jobs are being run right now? 

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_status -claimed

Name          OpSys       Arch   LoadAv RemoteUser           ClientMachine  

slot1@c003.ch LINUX       X86_64 0.000  anil79@hep.wisc.edu  login05.hep.wis
slot3@c003.ch LINUX       X86_64 1.000  icetopusr@skua.icecu skua.icecube.wi
slot4@c003.ch LINUX       X86_64 1.000  yli@hep.wisc.edu     login01.hep.wis
slot5@c003.ch LINUX       X86_64 1.000  yli@hep.wisc.edu     login01.hep.wis
slot6@c003.ch LINUX       X86_64 1.000  yli@hep.wisc.edu     login01.hep.wis
&lt;/pre&gt;

Remember to add a constraint to get just our the OSG User School computers:


&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_status -claimed -constraint &quot;IsOSGSchoolSlot =?= true&quot;

Name          OpSys       Arch   LoadAv RemoteUser           ClientMachine  

slot2@e026.ch LINUX       X86_64 0.000  roy@osg-ss-submit.ch osg-ss-submit.c
                     Machines         MIPS       KFLOPS   AvgLoadAvg

        X86_64/LINUX        1            0            0   0.000

               Total        1            0            0   0.000
&lt;/pre&gt;

Curious about who has submitted jobs? 

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_status -submitters

Name                 Machine      Running IdleJobs HeldJobs

DedicatedScheduler@c chtcsubmit         0        0        0
nickwu@chtcsubmit.an chtcsubmit         0        0        0
soaruser@chtcsubmit. chtcsubmit         0        0        0
group_cmsprod.osg_cm cmsgrid01.         0      225        1
osg_cmsuser1003@hep. cmsgrid01.         0       23        1
osg_cmsuser101@hep.w cmsgrid01.         0        4        1
...
    yli@hep.wisc.edu                79                 37                  0
 zliu57@hep.wisc.edu                 0                 12                  3

               Total              1456              48485               1071
&lt;/pre&gt;

Or perhaps you want to know all the machines from which you can submit jobs: (assuming you had permission, which you don&#39;t)

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_status -schedd

Name                 Machine    TotalRunningJobs TotalIdleJobs TotalHeldJobs 

amundsen.cs.wisc.edu amundsen.c                0             0              0
c145.chtc.wisc.edu   c145.chtc.                0             0              0
chtcsubmit.ansci.wis chtcsubmit                0             0              0
cmsgrid01.hep.wisc.e cmsgrid01.             1955          2654            133
cmsgrid02.hep.wisc.e cmsgrid02.              775          4885             50
...
submit.chtc.wisc.edu submit.cht                9             5            895
tg-condor.rcac.purdu tg-condor.              902          7364              4
vm-crane.chtc.wisc.e vm-crane.c                0             0              0
                      TotalRunningJobs      TotalIdleJobs      TotalHeldJobs

                    
               Total              9917              49509               2287
&lt;/pre&gt;

Just like we could look at the !ClassAd for a job, we can also look at them for computers. 

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_status -l slot1@e026.chtc.wisc.edu
Machine = &quot;e026.chtc.wisc.edu&quot;
AFS_SYSNAMES = &quot;&#39;amd64_linux26&#39;&quot;
HasRosettaData = true
EnteredCurrentState = 1340309012
TotalSlotDisk = 17769056
JavaVersion = &quot;1.6.0_31&quot;
OSG_major = 3
MonitorSelfAge = 78249
DetectedMemory = 24099
OpSysAndVer = &quot;ScientificLinux5&quot;
HasMPI = true
HibernationSupportedStates = &quot;S4&quot;
OpSysMajorVer = 5
Name = &quot;slot1@e026.chtc.wisc.edu&quot;

... output trimmed ...
&lt;/pre&gt;

Some features of interest:

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
%RED%# The computer&#39;s name %ENDCOLOR%
% condor_status -l slot1@e026.chtc.wisc.edu  | grep &quot;^Name&quot;
Name = &quot;slot1@e026.chtc.wisc.edu&quot;

%RED%# The computer&#39;s other name. %ENDCOLOR%
% condor_status -l slot1@e026.chtc.wisc.edu  | grep &quot;^Machine &quot;
Machine = &quot;e026.chtc.wisc.edu&quot;

%RED%# The state of the computer? %ENDCOLOR%
 condor_status -l slot1@e026.chtc.wisc.edu  | grep &quot;^State&quot;
State = &quot;Owner&quot;

%RED%# The version of Condor this computer is running. %ENDCOLOR%
% condor_status -l slot1@e026.chtc.wisc.edu  | grep &quot;CondorVersion&quot;
CondorVersion = &quot;$CondorVersion: 7.7.6 Apr 16 2012 BuildID: 34175 PRE-RELEASE-UWCS $&quot;

%RED%# When this computer will start jobs. %ENDCOLOR%
% condor_status -l slot1@e026.chtc.wisc.edu  | grep -E &quot;(^Start |Requirements)&quot;
Start = ( SuspendedByAdmin =!= true ) &amp;&amp; ( SlotID != 13 || TARGET.IsDataTransferJob =?= true ) &amp;&amp; ( Group =?= &quot;OSGSCHOOL&quot; )
Requirements = ( START ) &amp;&amp; ( IsValidCheckpointPlatform )

%RED%# How many CPUs this computer has %ENDCOLOR%
% condor_status -l slot1@e026.chtc.wisc.edu  | grep TotalCpus
TotalCpus = 13
&lt;/pre&gt;

What else can you find that&#39;s interesting in the !ClassAd?

---++ Removing jobs

If you submit a job that you realize has a problem, you can remove it with =condor_rm=. For example: 

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_q

-- Submitter: osg-ss-submit.chtc.wisc.edu : &lt;128.104.100.55:9618?sock=28867_10e4_2&gt; : osg-ss-submit.chtc.wisc.edu
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               
  29.0   roy             6/21 15:23   0+00:00:00 I  0   0.7  simple 60 10      

1 jobs; 0 completed, 0 removed, 2 idle, 0 running, 0 held, 0 suspended

% condor_rm 29.0
Job 29.0 marked for removal

% condor_q

-- Submitter: osg-ss-submit.chtc.wisc.edu : &lt;128.104.100.55:9618?sock=28867_10e4_2&gt; : osg-ss-submit.chtc.wisc.edu
 ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               

0 jobs; 0 completed, 0 removed, 1 idle, 0 running, 0 held, 0 suspended
&lt;/pre&gt;

A few tips:

   * You can remove all of your jobs with the -all option.
   * You can&#39;t remove other users jobs.
   * There are [[http://www.cs.wisc.edu/condor/manual/v7.8/condor_rm.html][fancy options to condor_rm]].  

---++ Historical information
You can see information about jobs that completed and are no longer in the queue with the =condor_history_ command. It&#39;s rare that you want to see *all* the jobs, so try looking at jobs for just you:

&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
condor_history %RED%USERNAME%ENDCOLOR%
&lt;/pre&gt;

For example:
&lt;pre style=&quot;margin-left:4em&quot; class=&quot;screen&quot;&gt;
% condor_history roy
 ID      OWNER            SUBMITTED     RUN_TIME ST   COMPLETED CMD            
  29.0   roy             6/21 15:23   0+00:00:00 X   ???        /home/roy/condo
  28.2   roy             6/21 15:23   0+00:00:00 X   ???        /home/roy/condo
  28.1   roy             6/21 15:23   0+00:00:00 X   ???        /home/roy/condo
  28.0   roy             6/21 15:23   0+00:00:00 X   ???        /home/roy/condo
  25.0   roy             6/21 15:00   0+00:00:00 C   6/21 15:04 /home/roy/condo
  25.0   roy             6/21 15:00   0+00:01:02 C   6/21 15:04 /home/roy/condo
...
&lt;/pre&gt;
