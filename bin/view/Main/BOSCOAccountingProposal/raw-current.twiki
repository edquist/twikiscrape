---+!! BOSCO Accounting Proposal

%TOC%

People looking at the accounting
   * Users of BOSCO
   * Administrators of the BOSCO submit host
   * Administrators of Clusters connected to BOSCO
   * Campus Infrastructure Managers



---++ Users of BOSCO

The users of BOSCO will want to see several different aspects of their usage
   * How many hours am I using?
   * Where am I using those hours?
   * Are my jobs successful?

These are the same metrics that we have used for GlideinWMS usage, therefore we use the GlideinWMS graphs for these aspects.  I believe we have well flushed out the these use cases and therefore will not spend much, or any, on this use case.


---++ Administrators of the BOSCO submit host

The administrators want to see:
   * How many hours did users of my submit host use?
   * How many hours did each user on my submit host use?
   * Where did my users run from my submit host?

All of these scenarios have been considered by the GlideinWMS usage.  And though we do not have great graphs showing this usage, we do collect enough information to account for this usage, and graphs can be improved.


---++ Administrators of Clusters connected to BOSCO

This use case is much less well defined.  The owners of the resources want to see:
   * Who is using my resource, and for how many hours?

We do not currently have a great way of showing this in the graphs.  But, given modifications to the graphs, we do collect the data to provide functionality.  


---++ Campus Infrastructure Managers

The Campus Infrastructure Managers are the managers that want to see the usage by BOSCO users to justify the expenditure of effort on maintaining the infrastructure.  They want to see:

   * Who is using all BOSCO resources on my campus?
   * Where are the BOSCO users running?
   * Are the BOSCO users using external campus resources (flocking to OSG?)?


---++ Accounting Data

---+++ Collecting Data
Collection of the accounting data is done by the a gratia probe on the BOSCO submit host.  It runs periodically, reading in the history files from Condor.  It then transforms and uploads the accounting data to the OSG graita collector at Fermilab where it is stored.  

---+++ Viewing Data
The usage can then be viewed on the gratia webpages such as [[http://gratiaweb.grid.iu.edu/gratia/xml][gratiaweb]] under the heading &quot;Glidein and Campus Grid Bar Graphs&quot;  Graphs include:

   * [[http://gratiaweb.grid.iu.edu/gratia/xml/glidein_hours_bar_smry][Usage by execution resource]]
   * [[http://gratiaweb.grid.iu.edu/gratia/xml/glidein_dn_hours_bar][Usage by user]]
 
And in the next release (1-2 weeks)

   * [[http://gratiaweb-itb.grid.iu.edu/gratia/xml/glidein_dn_efficiency_summary][CPU Efficiency as reported by Condor]] (not always reliable).
   * [[http://gratiaweb-itb.grid.iu.edu/gratia/xml/glidein_exitcode_user_bar][Exit codes by user and site]]
