---+ Running BLAST at Nebraska

The BLAST application we have put together is designed to run a large number of BLAST queries in parallel.  If you want just one or two queries performed, we recommend using the NCBI website:

http://www.ncbi.nlm.nih.gov/

---++ Starting the job

First, download and configure the software:
   1. Log into glidein with the username provided.
   &lt;pre class=&quot;screen&quot;&gt;
   ssh username@glidein.unl.edu&lt;/pre&gt;
   1. Download the newest version of the BLAST Workflow
   &lt;pre class=&quot;screen&quot;&gt;
   svn co svn://t2.unl.edu/brian/osg_blast&lt;/pre&gt;
   1. If you have not done so lately, re-initialize your proxy
   &lt;pre class=&quot;screen&quot;&gt;
   voms-proxy-init --voms hcc:/hcc&lt;/pre&gt;
   1. Change the directory to the BLAST directory.
   &lt;pre class=&quot;screen&quot;&gt;
   cd osg_blast&lt;/pre&gt;
   1. Edit the blast.cfg to reflect your setup.  For most people, the *only* line which needs to be changed is the =db= line.  Check with an HCC sysadmin for the list of installed DB, or to get one of your own installed. 

Next, chose *one* of the below steps to launch jobs:
   1. Submit a query, one at a time
   &lt;pre class=&quot;screen&quot;&gt;
   ./blast_mgr --single_submit 1 path/to/query.fasta &lt;/pre&gt;
   Substitute =path/to/query.fasta= with the location of your FASTA-formatted DB query
   1. Submit a job for each query in a directory.  Create a new directory, and place all your queries in it (there will be one Condor job per file in the directory):
   &lt;pre class=&quot;screen&quot;&gt;
   ./blast_mgr --directory_submit queries/ &lt;/pre&gt;
   Substitute =queries/= above for the location of the query directory you&#39;d like to process.

Here is an example submission command, processing all of the queries in the directory =queries/=
%TWISTY{
mode=&quot;div&quot;
showlink=&quot;Show example output&quot;
hidelink=&quot;Hide&quot;
showimgleft=&quot;%ICONURLPATH{toggleopen-small}%&quot;
hideimgleft=&quot;%ICONURLPATH{toggleclose-small}%&quot;
}%
&lt;pre class=&quot;screen&quot;&gt;
[bbockelm@glidein osg_blast]$ ./blast_mgr --directory_submit queries/
Submitting job(s)....
Logging submit event(s)....
4 job(s) submitted to cluster 25630.
&lt;/pre&gt;
%ENDTWISTY%

The query output will go into the directory you submitted the jobs from, and be named blast.out.$JOBID

---++ Monitoring the jobs
On glidein.unl.edu, type the command:
&lt;pre class=&quot;screen&quot;&gt;
condor_q username
&lt;/pre&gt;
Where =username= is your provided username.

The runtime of your jobs can vary widely depending on the size of the sequence database and the size of your queries.
