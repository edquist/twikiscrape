<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> BrittaDaudert &lt; Main &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Main/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Main/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Main/BrittaDaudert?_T=16 Feb 2017" type="application/x-wiki" title="edit BrittaDaudert" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Main/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Main/BrittaDaudert"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFEFA6;
	}
	.patternBookView {
		border-color:#FFEFA6;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <div class="twikiToc"> <ul>
<li> <a href="?cover=print#My_Links"> My Links</a>
</li> <li> <a href="?cover=print#My_Personal_Data"> My Personal Data</a>
</li> <li> <a href="?cover=print#My_Personal_Preferences"> My Personal Preferences</a>
</li> <li> <a href="?cover=print#Related_Topics"> Related Topics</a>
</li> <li> <a href="?cover=print#File_Transfer_Documentation"> File Transfer Documentation</a> <ul>
<li> <a href="?cover=print#About_this_Document"> About this Document</a>
</li> <li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#Requirements"> Requirements</a>
</li> <li> <a href="?cover=print#Software_Installation"> Software Installation</a>
</li> <li> <a href="?cover=print#File_Transfer_Instructions"> File Transfer Instructions</a> <ul>
<li> <a href="?cover=print#Instructions_for_the_LIGO_Data_G"> Instructions for the LIGO Data Grid</a> <ul>
<li> <a href="?cover=print#Generate_the_Input_File"> Generate the Input File</a>
</li> <li> <a href="?cover=print#Compute_MD5_Sums"> Compute MD5 Sums</a> <ul>
<li> <a href="?cover=print#Using_md5sum_sh"> Using md5sum.sh</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Instructions_for_the_Submission"> Instructions for the Submission Host</a> <ul>
<li> <a href="?cover=print#Adjust_the_Site_Catalog"> Adjust the Site Catalog</a>
</li> <li> <a href="?cover=print#Adjust_the_properties_file_optio"> Adjust the properties file (optional)</a>
</li> <li> <a href="?cover=print#Transfer_Input_Files"> Transfer Input Files</a>
</li> <li> <a href="?cover=print#Generate_the_DAX"> Generate the DAX</a>
</li> <li> <a href="?cover=print#Plan_the_work_flow_using_pegasus"> Plan the work flow using pegasus-plan</a>
</li> <li> <a href="?cover=print#Execute_the_work_flow_using_pega"> Execute the work flow using pegasus-run</a>
</li> <li> <a href="?cover=print#Monitor_the_work_flow_while_it_i"> Monitor the work flow while it is running</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#RLS_catalog_population"> RLS catalog population</a>
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="My_Links"></a> My Links </span></h2>
<p /> <ul>
<li> <a href="/bin/view/TWiki/ATasteOfTWiki" class="twikiLink">ATasteOfTWiki</a> - view a short introductory presentation on TWiki for beginners
</li> <li> <a href="/bin/view/TWiki/WelcomeGuest" class="twikiLink">WelcomeGuest</a> - starting points on TWiki
</li> <li> <a href="/bin/view/TWiki/TWikiUsersGuide" class="twikiLink">TWikiUsersGuide</a> - complete TWiki documentation, Quick Start to Reference
</li> <li> <a href="/bin/view/Sandbox/WebHome" class="twikiLink">Sandbox</a> - try out TWiki on your own
</li> <li> <a href="/bin/view/Sandbox/BrittaDaudertSandbox" class="twikiLink">BrittaDaudertSandbox</a> - just for me
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="My_Personal_Data"></a> My Personal Data </span></h2>
<p />
Note: if personal data is being stored using a secret database, then it is only visible to the user and to administrators.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> E-mail </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> &nbsp; </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="My_Personal_Preferences"></a> My Personal Preferences </span></h2>
<p />
Uncomment preferences variables to activate them (remove the #-sign). Help and details on preferences variables are available in <a href="/bin/view/TWiki/TWikiPreferences" class="twikiLink">TWikiPreferences</a>.
<p /> <ul>
<li> Show tool-tip topic info on mouse-over of <a href="/bin/view/TWiki/WikiWord" class="twikiLink">WikiWord</a> links, on or off: <ul>
<li> #Set LINKTOOLTIPINFO = off
</li></ul> 
</li> <li> Horizontal size of text edit box: <ul>
<li> #Set EDITBOXWIDTH = 70
</li></ul> 
</li> <li> Vertical size of text edit box: <ul>
<li> #Set EDITBOXHEIGHT = 22
</li></ul> 
</li> <li> Style of text edit box. <code>width: 99%</code> for full window width (default), <code>width: auto</code> to disable. <ul>
<li> #Set EDITBOXSTYLE = width: 99%
</li></ul> 
</li> <li> Write protect your home page: (set it to your <a href="/bin/view/TWiki/WikiName" class="twikiLink">WikiName</a>) <ul>
<li> #Set ALLOWTOPICCHANGE = <a href="/bin/view/Main/BrittaDaudert" class="twikiCurrentTopicLink twikiLink">BrittaDaudert</a>
</li></ul> 
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Related_Topics"></a> Related Topics </span></h2>
<p /> <ul>
<li> <a href="/bin/view/TWiki/ChangePassword" class="twikiLink">ChangePassword</a> for changing your password
</li> <li> <a href="/bin/view/TWiki/ChangeEmailAddress" class="twikiLink">ChangeEmailAddress</a> for changing your email address
</li> <li> <a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a> has a list of other TWiki users
</li> <li> <a href="/bin/view/TWiki/UserDocumentationCategory" class="twikiLink">UserDocumentationCategory</a> is a list of TWiki user documentation
</li> <li> <a href="/bin/view/TWiki/UserToolsCategory" class="twikiLink">UserToolsCategory</a> lists all TWiki user tools
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="File_Transfer_Documentation"></a> File Transfer Documentation </span></h2>
<p />
<!-- some useful variable definitions <ul>
<li> Local LINK_LIGO = <a href="http://www.ligo.caltech.edu/" target="_top">LIGO</a>
</li> <li> Local LINK_LIGO_DG = <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a>
</li> <li> Local LINK_RLS = <a href="http://www.globus.org/toolkit/data/rls/" target="_top">RLS</a>
</li> <li> Local LINK_PEGASUS = <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a>
</li> <li> Local LINK_MD5SUM = <a href="http://en.wikipedia.org/wiki/Md5sum" target="_top">md5sum</a>
</li> <li> Local LDF_GPS_START = 940000000
</li> <li> Local LDF_GPS_END = 940100000
</li> <li> Local LDF_GPS_OUT = <span class="twikiNewLink">BinaryInspiral<a href="/bin/edit/Main/BinaryInspiral?topicparent=Main.BrittaDaudert" rel="nofollow" title="BinaryInspiral (this topic does not yet exist; you can create it)">?</a></span>/var/gsiftp.loc
</li> <li> Local SCRIPT_MD5_OUT = gsiftp.ldas-grid.ligo.caltech.edu.md5
</li> <li> Local SUBMISSION_HOST = osg-job
</li> <li> Local SUBMISSION_HOST_FQDN = osg-job
</li> <li> Local SUBMISSION_USER = ligo
</li> <li> Local SUBMISSION_HOME = /home/ligo
</li> <li> Local LDG_HOST = ldas-grid
</li> <li> Local LDG_HOST_FQDN = ldas-grid.ligo.caltech.edu
</li> <li> Local LDG_USER = user
</li> <li> Local LDG_HOME = /home/user
</li></ul> 
-->
<p />
<h3><a name="About_this_Document"></a> About this Document </h3>
<p />
This document is written for <a href="http://www.ligo.caltech.edu/" target="_top">LIGO</a> users of the <a href="http://www.opensciencegrid.org" target="_top">Open Science Grid</a>. It contains instructions to transfer <em>gravitational wave files</em> from the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a> to the Open Science Grid. 
<p />
<h3><a name="Introduction"></a> Introduction </h3>
<p />
Data collected by the Gravitational Wave Observatories is partitioned into files of 16 MByte each. The files are hosted on the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a> and need to be transferred to the Open Science Grid for analysis. A <a href="/bin/view/Documentation/GlossaryS#DefsStorageElement" class="twikiAnchorLink">Storage Element</a> provided by the Open Science Grid will be the destination for the transferred files.
<p />
The integrity of the transferred data files is assured by comparing the <a href="http://en.wikipedia.org/wiki/Md5sum" target="_top">md5sum</a> of each file after the transfer completed with <em>its</em> md5sum on the LIGO Data Grid. The new  address of the file is stored into the <a href="http://www.globus.org/toolkit/data/rls/" target="_top">RLS</a> catalog at Caltech after each successful transfer. The purpose of the RLS catalog is to serve the storage location of gravitational wave files on the Open Science Grid to the <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> work flow once they are required.
<p />
<h3><a name="Requirements"></a> Requirements </h3>
<p />
Before you proceed make sure to meet following requirements:
<p /> <ul>
<li> possession of a <a href="/bin/view/ReleaseDocumentation/GetGridCertificates" class="twikiLink">Grid Certificate</a> and a valid <a href="/bin/view/Documentation/GlossaryV#DefsVOMSProxy" class="twikiAnchorLink">VOMS Proxy</a>      on a <em>submission host</em> of your choice
</li> <li> ability to login via <em>gsissh</em> to the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a>, such as <code>ldas-grid.ligo.caltech.edu</code> from the <em>submission host</em>
</li> <li> <code>svn</code> to checkout the required software
</li> <li> <code>python</code> to run the executables
</li> <li> a recent <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> installation
</li></ul> 
<p />
To check if you are authorized to login to the LIGO Data Grid, execute on your submission host:
<p />
<pre class="screen">
[ligo@osg-job ~]$ gsissh -p 22 ldas-grid.ligo.caltech.edu
Last login: Wed Aug 11 09:13:03 2010 from osg-job.ligo.caltech.edu
Welcome to LIGO Caltech
[user@ldas-grid ~]$
</pre>
<p />
<h3><a name="Software_Installation"></a> Software Installation </h3>
<p />
A recent version of <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> is required on the <em>submission host</em>. Please <a href="http://pegasus.isi.edu/wms/download.php" target="_top">download</a> the binary distribution for your platform from the Pegasus web page: 
<p />
<pre class="screen">
[ligo@osg-job ~]$ wget http://pegasus.isi.edu/wms/download/pegasus-binary-2.4.3-x86_64_rhel_5.tar.gz
[ligo@osg-job ~]$ tar -zxf pegasus-binary-2.4.3-x86_64_rhel_5.tar.gz
</pre>
<p />
The binary distribution provides <code>setup.sh</code> and <code>setup.csh</code> to setup the correct environment for your shell:
<p />
<pre class="screen">
[ligo@osg-job ~]$ unset CLASSPATH
[ligo@osg-job ~]$ export PEGASUS_HOME=/home/robert/pegasus-2.4.3
[ligo@osg-job ~]$ . $PEGASUS_HOME/setup.sh 
</pre>
<p />
Additional software is provided by a subversion repository at Caltech. Please follow the steps below to checkout the software on your <em>submission host</em> and the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a>.
<p />
<pre class="screen"">
[user@ldas-grid ~]$ svn co --username=anonymous --password="" svn://osg-vtb.ligo.caltech.edu/home/subversion/repos/BinaryInspiral/trunk BinaryInspiral
Checked out revision 3550.
</pre>
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdMainBrittaDaudert1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdMainBrittaDaudert1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdMainBrittaDaudert1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="screen"">
[user@ldas-grid ~]$ svn co --username=anonymous --password="" svn://osg-vtb.ligo.caltech.edu/home/subversion/repos/BinaryInspiral/trunk BinaryInspiral
A    BinaryInspiral/python-scripts
A    BinaryInspiral/python-scripts/file-transfer-dax-generator.py
A    BinaryInspiral/python-scripts/populate-rls.py
A    BinaryInspiral/bin
A    BinaryInspiral/bin/transfer.sh
A    BinaryInspiral/bin/md5sum.sh
A    BinaryInspiral/etc
A    BinaryInspiral/etc/pegasus.properties
A    BinaryInspiral/etc/site-local.xml
Checked out revision 3553.
</pre>
</div></div> <!--/twistyPlugin-->
<p />
<p />
<h3><a name="File_Transfer_Instructions"></a> File Transfer Instructions </h3>
<p />
This section requires that you completed the <a href="/bin/view/Main/BrittaDaudert#Software_Installation" class="twikiCurrentTopicLink twikiAnchorLink">software installation</a> on the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a> and your submission host. The transfer process consists of three consecutive parts:
<p /> <ol>
<li> Generation of the input file for the <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> work flow.
</li> <li> Transfer of the gravitational wave files from the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a> to the <a href="http://www.opensciencegrid.org" target="_top">Open Science Grid</a>.
</li> <li> Population of the <a href="http://www.globus.org/toolkit/data/rls/" target="_top">RLS</a> catalog with the new storage location for the files on the Open Science Grid.
</li></ol> 
<p />
<h4><a name="Instructions_for_the_LIGO_Data_G"></a> Instructions for the LIGO Data Grid </h4>
<p />
Every instruction listed in this section has to be carried out on the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a>.
<p />
<h5><a name="Generate_the_Input_File"></a> Generate the Input File </h5>
<p />
The <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> work flow requires several input files:
<p /> <ul>
<li> a list of the storage locations for required gravitational wave files on a <a href="/bin/view/Documentation/GlossaryG#DefsGridFTP" class="twikiAnchorLink">GridFTP</a> server
</li> <li> a list of <a href="http://en.wikipedia.org/wiki/Md5sum" target="_top">md5sum</a>s for each gravitational wave file
</li></ul> 
<p />
First, we will use the <code>ligo-data-find</code> command on the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a> to create a list of storage locations for gravitational wave files. The <code>ligo-data-find</code> command requires the name of the <em>observatory</em> where the data was taken and a <em>range of <a href="http://en.wikipedia.org/wiki/International_Atomic_Time" target="_top">GPS times</a></em>. For example:
<p />
<pre class="screen">
[user@ldas-grid BinaryInspiral]$ ligo_data_find --server 10.14.20.73:80 --observatory <font color="#ff0000">H</font> --type <font color="#ff0000">H1_LDAS_C02_L2</font> --gps-start-time 940000000 --gps-end-time 940000200 --url-type gsiftp --match archive
gsiftp://ldas-cit.ligo.caltech.edu:15000/archive/frames/S6/LDAShoftC02/LHO/H-H1_LDAS_C02_L2-9400/H-H1_LDAS_C02_L2-940000000-128.gwf
gsiftp://ldas-cit.ligo.caltech.edu:15000/archive/frames/S6/LDAShoftC02/LHO/H-H1_LDAS_C02_L2-9400/H-H1_LDAS_C02_L2-940000128-128.gwf
</pre>
<p />
The <code>--show-observatories</code> command line option will print a list of available observatories. A <em>realistic</em> analysis will require a larger GPS time range. We will first create a file for the <strong>H</strong> observatory:
<p />
<pre class="screen">
[user@ldas-grid BinaryInspiral]$ ligo_data_find --server 10.14.20.73:80 --observatory <font color="#ff0000">H</font> --type <font color="#ff0000">H1_LDAS_C02_L2</font> --gps-start-time 940000000 --gps-end-time 940100000 --url-type gsiftp --match archive > BinaryInspiral/var/gsiftp.loc
</pre>
<p />
In the next step we will <em>append</em> the results for the <strong>L</strong> and <strong>V</strong> observatories:
<p />
<pre class="screen">
[user@ldas-grid BinaryInspiral]$ ligo_data_find --server 10.14.20.73:80 --observatory <font color="#ff0000">L</font> --type <font color="#ff0000">L1_LDAS_C02_L2</font> --gps-start-time 940000000 --gps-end-time 940100000 --url-type gsiftp --match archive >> BinaryInspiral/var/gsiftp.loc

[user@ldas-grid BinaryInspiral]$ ligo_data_find --server 10.14.20.73:80 --observatory <font color="#ff0000">V</font> --type <font color="#ff0000">HrecOnline</font> --gps-start-time 940000000 --gps-end-time 940100000 --url-type gsiftp --match archive >> BinaryInspiral/var/gsiftp.loc
</pre>
<p />
%WARNING% The execution of the command may consume a considerable amount of time, because some of the files lay be located on a tape which will be provided by the tape robot before they can be read! 
<p />
The resulting file <code>BinaryInspiral/var/gsiftp.loc</code> should be roughly 20MByte in size depending on the GPS range specified:
<p />
<pre class="screen">
[user@ldas-grid BinaryInspiral]$ ls -alh BinaryInspiral/var/gsiftp.loc
-rw-rw-r-- 1 user user 20M Aug 11 10:55 BinaryInspiral/var/gsiftp.loc
</pre>
<p />
<h5><a name="Compute_MD5_Sums"></a> Compute MD5 Sums </h5>
<p />
In order to assure data integrity during the file transfers, we will compute the <a href="http://en.wikipedia.org/wiki/Md5sum" target="_top">md5sum</a> for each file listed in <code>BinaryInspiral/var/gsiftp.loc</code>.
<p />
<h6><a name="Using_md5sum_sh"></a> Using <code>md5sum.sh</code> </h6>
<p />
The script is located in <code>BinaryInspiral/bin/md5sum.sh</code>. 
<p />
<pre class="screen">
[user@ldas-grid BinaryInspiral/bin]$./md5sum.sh --help
Synopsis: Compute and verify MD5 sums for a list of files

Usage   : ./md5sum.sh [options]

Required arguments: 

        Either of the two flags
            -c                 compute md5ssum
            -v                 verify  md5sum
            -f <file>  the input file containing:
                               1) gsifftp locations if flag is -c
                               2)md5sums and gsiftp locations if flag is -v

         Flag -v also requires

            -d <directory>  directory, required with -v flag

         Other options
            -h                 display this message
            -e <file>  the error file containing a list of files that do not exist or are empty or corrupted,
                               defaults to <input_file_name>-timestamp.err
            -o <file>  the output file used to store the computed MD5 sums and the gsiftp locations,
                               defaults to <input_file_name>-time-stamp.md5

</pre>
<p />
For example, if we would like to compute the md5sums of the files listed in the input file <code>BinaryInspiral/var/gsiftp.loc</code> , generated previously and store the results in the file
<code>BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5</code>, we call md5sum.sh as follows:
<p />
<p />
<pre class="screen">
[user@ldas-grid BinaryInspiral]$ cd bin
[user@ldas-grid bin]$ /bin/bash md5sum.sh  -c -f /archive/home/rengel/BinaryInspiral/var/gsiftp.loc -o BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5
</pre>
<p />
The script will generate the output file in <code>BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5</code>. Each line of the file starts with a MD5 sum followed by the gsiftp location of the gravitational wave file:
<p />
<pre class="file">
779047bd6aa1c4ee88837575bfdeee4d gsiftp://ldas-cit.ligo.caltech.edu:15000/archive/frames/VSR2/HrecOnline/Virgo/V-HrecOnline-940/V-HrecOnline-940096000-4000.gwf
</pre>
<p />
<h4><a name="Instructions_for_the_Submission"></a> Instructions for the Submission Host </h4>
<p />
All instructions listed in this section have to be carried out on your OSG submission host.
<p />
<h5><a name="Adjust_the_Site_Catalog"></a> Adjust the Site Catalog </h5>
<p />
The site catalog is a XML file that defines properties of some OSG sites and is used by Pegasus. It is located in <code>BinaryInspiral/etc/site-local.xml</code>. 
<p />
The XML tag <code>site</code> with property <code>handle="local"</code> is used as a default definition for your <em>submission host</em>. Please change it according to the configuration of your submission host before you proceed. Also verify that <strong>ALL</strong> directories specified for the sites you intend to use <em>exist</em> and you have sufficient permissions to access them. Otherwise the work flow will fail.
<p />
You may also need to change/add individual site entries. The information in this sample catalog may be outdated as this kind of information is quite dynamic. 
You can find some of the information needed at MYOSG
<p />
<a href="https://myosg.grid.iu.edu/about" target="_top">Link to MYOSG</a>
<p />
Alternatively, you can use Pegasus to generate an up to date site catalog. Here we assume that Pegasus has been installed on your submission host. 
<p />
<pre class="screen">
pegasus-get-sites -Dpegasus.catalog.site.osgmm.collector.host=osg-itb.ligo.caltech.edu --vo ligo --sc ./sites-local.xml --source OSGMM --grid OSG
</pre>
<p />
<p />
<h5><a name="Adjust_the_properties_file_optio"></a> Adjust the properties file (optional) </h5>
<p />
The file pegasus.properties is the configuration file of the Pegasus work-flow planner. It is located in <code>BinaryInspiral/etc/pegasus.properties</code>.  There are many settings and options that can be used to fine tune the work-flow execution. The sample properties file in the svn repository is a very basic one. Please refer to the Pegasus documentation for more information on individual properties.
<p />
<a href="http://pegasus.isi.edu/wms/docs/properties.html" target="_top">Pegasus properties documentation</a>
<p />
<h5><a name="Transfer_Input_Files"></a> Transfer Input Files </h5>
<p />
Transfer the file <code>BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5</code>  containing the <a href="/bin/view/Documentation/GlossaryG#DefsGridFTP" class="twikiAnchorLink">GridFTP</a> locations and corresponding MD5 sums to your <em>submission host</em> using %HELP_GLOBUS_URL_COPY%:
<p />
<pre class="screen">
[ligo@osg-job BinaryInspiral]$ globus-url-copy gsiftp://ldas-grid.ligo.caltech.edu/home/user/BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5 file:///home/ligo/BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5
</pre>
<p />
<h5><a name="Generate_the_DAX"></a> Generate the DAX </h5>
<p />
The <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> work flow to be executed on the <a href="http://www.opensciencegrid.org" target="_top">Open Science Grid</a> is represented by a <b>D</b>irected <b>A</b>cyclic <b>G</b>raph or short <strong>DAX</strong>. In this section we will create a DAX requesting Pegasus to transfer the gravitational wave files from the <a href="https://www.lsc-group.phys.uwm.edu/lscdatagrid/" target="_top">LIGO Data Grid</a> to the <a href="http://www.opensciencegrid.org" target="_top">Open Science Grid</a>. Hereby we will use the <code>BinaryInspiral/python-scripts/file-transfer-dax-generator.py</code> Python script:
<p />
<pre class="screen">
[ligo@osg-job BinaryInspiral]$ python python-scripts/file-transfer-dax-generator.py --help
usage:  file-transfer-dax-generator.py [options]
	
options:
  -h, --help            show this help message and exit
  -m MODE, --transfer-mode=MODE
                        Transfer meachinism MODE can be srm-copy or guc
                        (default)
  -p PORT, --port=PORT  port number of SE, required if --transfer-mode=srm-
                        copy
  -z PRE, --pre=PRE     preamble, default: srm/v2/server?SFN= for all sites,
                        required if --transfer-mode=srm-copy
  -f FILE, --input-file=FILE
                        Path to input file FILE containg phys file locations
                        on LDG, required
  -d DAX, --dax=DAX     Name of dax file to be created, required
  -s SITE, --site=SITE  OSG site that the data is transferred to, required
  -o HOSTNAME, --host-name=HOSTNAME
                        Host name, i.e. gatekeeper of the OSG site
                        corresponding to the SE, required
  -b BASEDIR, --base-dir=BASEDIR
                        Base directory on OSG site or SE to which the data is
                        transferred to, required
  -e EXECDIR, --exec-dir=EXECDIR
                        Execution dir on OSG site, remote_initial dir for
                        md5sum check dag jobs, required
  -n NUMBER, --number-files=NUMBER
                        Number of files to be transferred within one dax job,
                        required
  -t TRANSFER-EXECUTABLE, --transfer-executable=TRANSFER-EXECUTABLE
                        Path to transfer executable transfer.sh, required
  -c MD5SUM-EXECUTABLE, --md5sum-executable=MD5SUM-EXECUTABLE
                        Path to transfer executable md5sum.sh, required
  -r ERRORS, --error-file=ERRORS
                        Error file name, error output file of md5sum check dag
                        job, defaults: &lt input_file_name&gt -times-tamp.error
  -u OUTPUT, --output-file=OUTPUT
                        Output file name, output file of md5sum compute dag
                        job, defaults to &lt input_file_name&gt -time-stamp.md5sum
  -v, --version         Display version information and exit


</pre> 
<p />
<p />
<p />
Every output file generated by <code>file-transfer-dax-generator.py</code> will be written to the current working directory. We will therefore change to <code>BinaryInspiral/var</code> before executing the Python script:
<pre class="screen">
[ligo@osg-job BinaryInspiral]$ cd var
</pre>
<p />
Here are two examples of how to use the script.
<p />
In example 1 we create a dax called Nebraska.dax that will describe a work-flow transferring the files listed in <code>/home/ligo/BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5</code> into the Nebraska site via the gsiftp server red-gridftp1.unl.edu. The transfer mechanism is globus-url-copy. The files are transfered into the base directory /mnt/hadoop/user/ligo, the md5sum checks are executed in the same directory. Each transfer job in the dax is set up to transfer 100 files (-n 100). 
<p />
<pre class="screen">
[ligo@osg-job var]$ python ../python-scripts/file-transfer-dax-generator.py 
-f  /home/ligo/BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5 -d Nebraska.dax -s Nebraska \ 
-b /mnt/hadoop/user/ligo -e /mnt/hadoop/user/ligo -n 100 -t /home/ligo/BinaryInspiral/bin/transfer.sh \
-c /home/ligo/BinaryInspiral/bin/md5sum.sh -o red-gridftp1.unl.edu
</pre>
<p />
In example 2 we transfer the data via srm-copy into the Nebraska SE red-srm1.unl.edu:8443
<p />
<pre class="screen">
[ligo@osg-job var]$ python ../python file-transfer-dax-generator.py -f /home/ligo/BinaryInspiral/var/gsiftp.ldas-grid.ligo.caltech.edu.md5 -d Nebraska.dax -s Nebraska \
-b /mnt/hadoop/user/ligo -e /mnt/hadoop/user/ligo -n 100 -t  /home/ligo/BinaryInspiral/bin/transfer.sh \
-c  /home/ligo/BinaryInspiral/bin/md5sum.sh -o red-srm1.unl.edu -p 8443 -m srm-copy
</pre>
<p />
<p />
No further output will be written to the terminal. The script generates several files in the current working directory.
<p /> <ul>
<li> <code>Nebraska.dax</code> the <strong>DAX</strong> describing the Pegasus work flow
</li> <li> <code>rc</code> a list of input files and their locations
</li> <li> <code>gsiftp-%d.in</code> a list of gravitational waves files and their MD5 sums
</li></ul> 
<p />
<h5><a name="Plan_the_work_flow_using_pegasus"></a> Plan the work flow using <code>pegasus-plan</code> </h5>
<p />
Here we assume that <a href="http://pegasus.isi.edu/" target="_top">Pegasus</a> has been installed on your submission host. We will use <code>pegasus-plan</code> to plan the work flow, which requires several input files and parameters:
<p /> <ul>
<li> <code>BinaryInspiral/etc/pegasus.properties</code> Pegasus properties file
</li> <li> <code>BinaryInspiral/etc/site-local.xml</code> a definition of <a href="/bin/view/Documentation/GlossaryS#DefsStorageElement" class="twikiAnchorLink">Storage Element</a>s on the Open Science Grid
</li> <li> <code>Nebraska.dax</code> the <strong>DAX</strong> describing the work flow generated in the previous step
</li> <li> <code>--dir</code> the directory is generated by the planner and contains the work flow
</li> <li> <code>--relative-dir</code> a sub directory to <code>=-dir</code>
</li></ul> 
<p />
<pre class="screen"><code>
[ligo@osg-job var]$ pegasus-plan \</BR>
-Dpegasus.properties=../etc/pegasus.properties \</BR>
-Dpegasus.catalog.site.file=../etc/site-local.xml \</BR>
--dax Nebraska.dax \</BR>
--dir workflow \</BR>
--relative-dir submit \</BR>
-s Nebraska \</BR>
--nocleanup \</BR>
-f \</BR>
-o local</code>
...
<font color="#ff0000">pegasus-run -Dpegasus.user.properties=/home/ligo/BinaryInspiral/var/workflow/submit/pegasus.7395923381172294127.properties --nodatabase /home/ligo/BinaryInspiral/var/workflow/submit</font>
</pre>
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdMainBrittaDaudert2show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Full Output</span></a> </span> <span id="twistyIdMainBrittaDaudert2hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdMainBrittaDaudert2toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="screen">
[ligo@osg-job var]$ pegasus-plan -Dpegasus.properties=../etc/pegasus.properties -Dpegasus.catalog.site.file=/home/robert/BinaryInspiral/etc/site-local.xml --dax Nebraska.dax --dir workflow --relative-dir submit -s Nebraska --nocleanup -f -o local
2010.08.25 17:27:36.628 PDT: [INFO] event.pegasus.planner planner.version 2.4.3  - STARTED 
2010.08.25 17:27:36.907 PDT: [ERROR]  **Parsing **   Line: 239
[org.xml.sax.SAXParseException: s4s-att-invalid-value: Invalid attribute value for 'maxOccurs' in element 'all'. Recorded reason: cvc-enumeration-valid: Value '2' is not facet-valid with respect to enumeration '(1)'. It must be a value from the enumeration.]
 
2010.08.25 17:27:36.911 PDT: [ERROR]  **Parsing **   Line: 123
[org.xml.sax.SAXParseException: An internal error occurred while formatting the following message:
 cos-all-limited.1.2: An 'all' model group must appear in a particle with {min occurs} = {max occurs} = 1, and that particle must be part of a pair which constitutes the {content type} of a complex type definition.]
 
2010.08.25 17:27:36.913 PDT: [ERROR]  **Parsing **   Line: 138
[org.xml.sax.SAXParseException: An internal error occurred while formatting the following message:
 cos-all-limited.1.2: An 'all' model group must appear in a particle with {min occurs} = {max occurs} = 1, and that particle must be part of a pair which constitutes the {content type} of a complex type definition.]
 
2010.08.25 17:27:36.991 PDT: [ERROR]  The tc text file /home/ligo/pegasus-2.4.3/var/tc.data was not found 
2010.08.25 17:27:36.991 PDT: [ERROR]  Considering it as Empty TC 
2010.08.25 17:27:37.004 PDT: [INFO] event.pegasus.parse.dax dax.id /home/ligo/BinaryInspiral/var/Nebraska.dax  - STARTED 
2010.08.25 17:27:37.042 PDT: [INFO] event.pegasus.parse.dax dax.id /home/ligo/BinaryInspiral/var/Nebraska.dax  - FINISHED 
2010.08.25 17:27:37.125 PDT: [INFO] event.pegasus.refinement dax.id Nebraska.dax_0  - STARTED 
2010.08.25 17:27:37.158 PDT: [INFO] event.pegasus.siteselection dax.id Nebraska.dax_0  - STARTED 
2010.08.25 17:27:37.199 PDT: [INFO] event.pegasus.siteselection dax.id Nebraska.dax_0  - FINISHED 
2010.08.25 17:27:37.223 PDT: [INFO]  Grafting transfer nodes in the workflow 
2010.08.25 17:27:37.223 PDT: [INFO] event.pegasus.generate.transfer-nodes dax.id Nebraska.dax_0  - STARTED 
2010.08.25 17:27:37.226 PDT: [ERROR]  Date Reuse Engine no longer tracks deleted leaf jobs. Returning empty list  
2010.08.25 17:27:37.294 PDT: [INFO] event.pegasus.generate.transfer-nodes dax.id Nebraska.dax_0  - FINISHED 
2010.08.25 17:27:37.322 PDT: [INFO] event.pegasus.generate.workdir-nodes dax.id Nebraska.dax_0  - STARTED 
2010.08.25 17:27:37.325 PDT: [INFO] event.pegasus.generate.workdir-nodes dax.id Nebraska.dax_0  - FINISHED 
2010.08.25 17:27:37.325 PDT: [INFO] event.pegasus.generate.cleanup-wf dax.id Nebraska.dax_0  - STARTED 
2010.08.25 17:27:37.327 PDT: [INFO] event.pegasus.generate.cleanup-wf dax.id Nebraska.dax_0  - FINISHED 
2010.08.25 17:27:37.327 PDT: [INFO] event.pegasus.refinement dax.id Nebraska.dax_0  - FINISHED 
2010.08.25 17:27:37.412 PDT: [INFO]  Generating codes for the concrete workflow 
2010.08.25 17:27:37.669 PDT: [ERROR]  Transfer of Executables in NoGridStart only works for staged computes jobs  
2010.08.25 17:27:37.709 PDT: [ERROR]  /bin/ln: creating symbolic link `/home/ligo/BinaryInspiral/var/workflow/submit/Nebraska.dax-0.log' to `/tmp/Nebraska.dax-03089918735782218610.log': File exists 
2010.08.25 17:27:37.784 PDT: [INFO]  Generating codes for the concrete workflow -DONE 
2010.08.25 17:27:37.784 PDT: [INFO]  Generating code for the cleanup workflow 
2010.08.25 17:27:37.844 PDT: [ERROR]  Transfer of Executables in NoGridStart only works for staged computes jobs  
2010.08.25 17:27:37.883 PDT: [ERROR]  /bin/ln: creating symbolic link `/home/ligo/BinaryInspiral/var/workflow/submit/cleanup/del_Nebraska.dax-0.log' to `/tmp/del_Nebraska.dax-01048068268554597615.log': File exists 
2010.08.25 17:27:37.898 PDT: [INFO]  Generating code for the cleanup workflow -DONE 
2010.08.25 17:27:37.916 PDT: [INFO]  


I have concretized your abstract workflow. The workflow has been entered 
into the workflow database with a state of "planned". The next step is 
to start or execute your workflow. The invocation required is


<font color="#ff0000">pegasus-run -Dpegasus.user.properties=/home/ligo/BinaryInspiral/var/workflow/submit/pegasus.7395923381172294127.properties --nodatabase /home/ligo/BinaryInspiral/var/workflow/submit</font>

 
2010.08.25 17:27:37.916 PDT: [INFO]  Time taken to execute is 1.283 seconds 
2010.08.25 17:27:37.916 PDT: [INFO] event.pegasus.planner planner.version 2.4.3  - FINISHED 

</pre>
</div></div> <!--/twistyPlugin-->
<p />
Carefully check the output of <code>pegasus-plan</code> for the <code>pegasus-run</code> statement that we will execute next to <em>run</em> the workflow and <em>hope for the best</em>.
<p />
<h5><a name="Execute_the_work_flow_using_pega"></a> Execute the work flow using <code>pegasus-run</code> </h5>
<p />
The output of <code>pegasus-plan</code> contains the <code>pegasus-run</code> statements that we will execute to <em>run</em> the work flow:
<p />
<pre class="screen">
[ligo@osg-job var]$ pegasus-run -Dpegasus.user.properties=/home/ligo/BinaryInspiral/var/workflow/submit/pegasus.7395923381172294127.properties --nodatabase /home/ligo/BinaryInspiral/var/workflow/submit

-----------------------------------------------------------------------
File for submitting this DAG to Condor           : Nebraska.dax-0.dag.condor.sub
Log of DAGMan debugging messages                 : Nebraska.dax-0.dag.dagman.out
Log of Condor library output                     : Nebraska.dax-0.dag.lib.out
Log of Condor library error messages             : Nebraska.dax-0.dag.lib.err
Log of the life of condor_dagman itself          : Nebraska.dax-0.dag.dagman.log

-no_submit given, not submitting DAG to Condor.  You can do this with:
"condor_submit Nebraska.dax-0.dag.condor.sub"
-----------------------------------------------------------------------
Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 176033.

I have started your workflow, committed it to DAGMan, and updated its
state in the work database. A separate daemon was started to collect
information about the progress of the workflow. The job state will soon
be visible. Your workflow runs in base directory. 

cd /home/ligo/BinaryInspiral/var/workflow/submit

*** To monitor the workflow you can run ***

pegasus-status -w Nebraska.dax-0 -t 20100825T172736-0700 
or
pegasus-status /home/ligo/BinaryInspiral/var/workflow/submit

*** To remove your workflow run ***

pegasus-remove -d 176033.0
or
pegasus-remove /home/ligo/BinaryInspiral/var/workflow/submit

</pre>
<p />
<h5><a name="Monitor_the_work_flow_while_it_i"></a> Monitor the work flow while it is running </h5>
<p />
You can monitor the proper execution of your work flow using <code>pegasus-status</code>:
<p />
<pre class="screen">
[ligo@osg-job var]$ pegasus-status /home/ligo/BinaryInspiral/var/workflow/submit

-- Submitter: osg-job : <131.215.114.47:18561> : osg-job
 ID      OWNER/NODENAME   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
176033.0   ligo          8/25 17:43   0+00:02:47 R  0   7.3  condor_dagman -f -
176034.0    |-create_dir_  8/25 17:44   0+00:02:10 C  0   0.0  dirmanager --creat
</pre>
<p />
You can also follow the log file written to <code>BinaryInspiral/var/workflow/submit/Nebraska.dax-0.dag.dagman.out</code>:
<p />
<pre class="screen">
[ligo@osg-job var]$ tail -f workflow/submit/Nebraska.dax-0.dag.dagman.out
08/25 19:19:35     2       0        2       0       0         39        0
08/25 19:19:40 Currently monitoring 1 Condor log file(s)
08/25 19:19:40 Event: ULOG_JOB_TERMINATED for Condor Node untar_Nebraska.dax_0_local (176052.0)
08/25 19:19:40 Node untar_Nebraska.dax_0_local job proc (176052.0) completed successfully.
08/25 19:19:40 Node untar_Nebraska.dax_0_local job completed
08/25 19:19:40 Number of idle job procs: 0
08/25 19:19:40 Of 43 nodes total:
08/25 19:19:40  Done     Pre   Queued    Post   Ready   Un-Ready   Failed
08/25 19:19:40   ===     ===      ===     ===     ===        ===      ===
08/25 19:19:40     3       0        1       0       0         39        0
</pre>
<p />
<h3><a name="RLS_catalog_population"></a> RLS catalog population </h3>
<p />
<p />
<pre class="screen">
[ligo@osg-job BinaryInspiral]$ python python-scripts/populate-rls.py --help
Wed Sep  8 09:45:29 2010
usage:  populate-rls.py [options]
   

options:
  -h, --help            show this help message and exit
  -v, --version        display version information and exit
  -d, --delete         delete entries from RLS catalog (rather than populating)
  -f  FILE, --input-file= FILE
                        use input file FILE
  -r SE, --resource=SE
                        use storage element SE
  -p PORT, --port=PORT  use port number PORT
  -m DIR, --mount-point=DIR
                        use base dir DIR
  -P POOL, --pool-name=POOL
                        RLS catalogue pool attribute
  -z PRE, --pre=PRE     preamble, default: srm/v2/server?SFN=
  -s RLS, --rls-catalog=RLS
                        RLS catalog to be populated: rlsn://devrandom.isi.edu
  -r REPLICA, --replica=REPLICA
                        Choose replica type to be queried: LRC or RLS, default
                        LRC
</pre>
<p />
The input file used in the population script is tha same as the file transfer input file. The host name is the name of the SE that the files are stored in. The rest should be clear.
<p />
<pre class="screen">
[ligo@osg-job BinaryInspiral]$ python python-scripts/populate-rls.py  \
--input-file  BinaryInspiral/var/gsiftp.loc --host-name red-srm1.unl.edu --port 8443 \
--base-dir /mnt/hadoop/user/ligo --pool-name Nebraska
</pre>
<p />
This script will run through the files in the input file, determine if the files are already registered in the RLS catalog, if so, it will do nothing, if not, it will register the file in the catalog. Entries in the catalog look like this:
<p />
<pre class="screen">
V-HrecOnline-932264000-4000.gwf srm://red-srm1.unl.edu:8443/srm/v2/server?SFN= \ 
/mnt/hadoop/user/ligo/frames/VSR2/HrecOnline/Virgo/V-HrecOnline-932/V-HrecOnline-932264000-4000.gwf \ 
pool="Nebraska"
</pre>
<p />
If you made a mistake while populating the RLS catalog, for example a wrong mount-point option was given, you can delete the entries from the catalog by running the same script with added --delete option and re-populate afterwards.
<p />
<pre class="screen">
V-HrecOnline-932264000-4000.gwf srm://red-srm1.unl.edu:8443/srm/v2/server?SFN= \ 
/mnt/hadoop/user/ligo/frames/VSR2/HrecOnline/Virgo/V-HrecOnline-932/V-HrecOnline-932264000-4000.gwf \ 
pool="Nebraska" --delete
</pre></div><!-- /patternTopic-->
<p />
<div class="twikinetRounded twikinetRoundedForm"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="twikiForm">
<table class='twikiFormTable' border='0' cellspacing='0' cellpadding='0'><tr><th class='twikiFormTableHRow twikiFirstCol' colspan='2'>
<a href="/bin/view/Main/UserForm" class="twikiLink">UserForm</a>
</th></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> FirstName </td><td>
Britta
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> LastName </td><td>
Daudert
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> OrganisationName </td><td>
LIGO-CalTech
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> OrganisationURL </td><td>
<a href="http://www.ligo.caltech.edu/" target="_top">http://www.ligo.caltech.edu/</a>
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Profession </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Country </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> State </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Address </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Location </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Telephone </td><td>
626-395-8514
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> VoIP </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> InstantMessaging (IM) </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Email </td><td>
<a href="mailto&#58;bdaudert&#64;ligo&#46;caltech&#46;edu">bdaudert&#64;ligo.caltech.edu</a>
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> HomePage </td><td>
<p />
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Comment </td><td>
<p />
</td></tr>
</table></div><!--/twikiForm--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded-->
</div><!-- /patternContent-->
<hr />
This topic: Main<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>BrittaDaudert</span> <br />    
Topic revision: r12 - 18 Nov 2010 - 23:28:17 - <a href="/bin/view/Main/BrittaDaudert" class="twikiCurrentTopicLink twikiLink">BrittaDaudert</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />