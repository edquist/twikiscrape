<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> JohnWeigandNotes &lt; Main &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Main/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Main/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Main/JohnWeigandNotes?_T=16 Feb 2017" type="application/x-wiki" title="edit JohnWeigandNotes" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Main/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Main/JohnWeigandNotes"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFEFA6;
	}
	.patternBookView {
		border-color:#FFEFA6;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="John_Weigand_Notes"></a> John Weigand Notes </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Grid_versus_VOMS_Proxies"> Grid versus VOMS Proxies</a> <ul>
<li> <a href="?cover=print#Users_in_multiple_VOs"> Users in multiple VOs</a>
</li> <li> <a href="?cover=print#VOMS_proxy_forces_the_use_of_GUM"> VOMS proxy forces the use of GUMS</a>
</li> <li> <a href="?cover=print#GUMS_hostGroups_groups_attribute"> GUMS hostGroups 'groups' attribute obsolete with VOMS proxy</a>
</li> <li> <a href="?cover=print#Authentication_Verification_of_t"> Authentication / Verification of trusted VOMS servers</a>
</li> <li> <a href="?cover=print#Fermigrid_SAZ_trust_agreement"> Fermigrid / SAZ trust agreement</a>
</li> <li> <a href="?cover=print#Comments">Comments</a> <ul>
<li> <a href="?cover=print#DZero_use_from_Parag_Mhashilkar"> DZero use from Parag Mhashilkar (<a href="mailto&#58;parag&#64;fnal&#46;gov">parag&#64;fnal.gov</a>)</a>
</li> <li> <a href="?cover=print#Fermigrid_perspective_Keith_Chad"> Fermigrid perspective (Keith Chadwick)</a>
</li> <li> <a href="?cover=print#DZero_followup_from_Parag_Mhashi"> DZero followup from Parag Mhashilkar (<a href="mailto&#58;parag&#64;fnal&#46;gov">parag&#64;fnal.gov</a>)</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Identifying_Supported_VOs_for_a"> Identifying Supported VOs for a site</a> <ul>
<li> <a href="?cover=print#User_to_VO_Mappings"> User to VO Mappings</a>
</li> <li> <a href="?cover=print#Comments_AN1">Comments</a>
</li></ul> 
</li></ul> 
</div>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Grid_versus_VOMS_Proxies"></a> Grid versus VOMS Proxies </span></h2>
<h3><a name="Users_in_multiple_VOs"></a> Users in multiple VOs </h3>
With grid proxies, a user who is in multiple VOs will only get mapped to one VO due to the sequential nature of the processing using either grid-mapfile or GUMS (when configured to accept grid proxies).  It becomes unpredictable as to what VO you will get mapped to at various sites.  It is totally dependent on  the order specified in the edg-mkgridmap and GUMS config files.  Across OSG, a user could be assigned to an account from VO-1 at one site and VO-2 at another.
<p />
<h3><a name="VOMS_proxy_forces_the_use_of_GUM"></a> VOMS proxy forces the use of GUMS </h3>
If GUMS is not used, we have to investigate the use of grid-mapfiles that include the fully qualified FQAN.  I have seeen them in docs, but do not know how to generate them.  If these are viable, then GUMS is not necessarily needed.  I believe this is how EGEE is plannign on doing it.
<p />
<h3><a name="GUMS_hostGroups_groups_attribute"></a> GUMS hostGroups 'groups' attribute obsolete with VOMS proxy </h3>
With only VOMS proxies, there is no longer any concern with the processing order in GUMS since all proxies explicitely identify the user's intent..  Currently, each GUMS server has the potential of changing the order.
<p />
<h3><a name="Authentication_Verification_of_t"></a> Authentication / Verification of trusted VOMS servers </h3>
It is not certain if the capability exists to verify that a proxy has been issued by a <code><b>TRUSTED</b></code> VO.  The grid proxies do not have any means of being authenticated/validated.  A voms proxy can be.  The capability exists in both pre-ws and ws GRAM. for this by maintaining an <i>/etc/grid-security//vomsdir</i> containing the hostcert of all <code><b>TRUSTED</b></code> VOMS servers.
<p />
<h3><a name="Fermigrid_SAZ_trust_agreement"></a> Fermigrid / SAZ trust agreement </h3>
See comments by Keith Chadwick in the next section regarding the Fermigrid requirements.
<p />
<h3><a name="Comments"></a> Comments </h3>
<h4><a name="DZero_use_from_Parag_Mhashilkar"></a> DZero use from Parag Mhashilkar (<a href="mailto&#58;parag&#64;fnal&#46;gov">parag&#64;fnal.gov</a>) </h4>
In email on 11/20/06:<br />    
Hi All,
<p />
Dzero has been submitting jobs to LCG sites (through Samgrid) using vanilla proxies. This has been the case for over a year and nothing has
changed as far as job submission goes. I am not an LCG expert. As per my understanding, voms-proxy is supported but not mandated, same as OSG. To mandate voms-proxy could be up to the site policy. 
<p />
I agree that, in long run, vanilla-proxy should be deprecated, but it would be important to
understand to what degree LCG mandates (if they do) the voms-proxy? 
Is voms-proxy mandated for job submission (which doesn't seem to be the case) or for some specific activity? Mandating voms-proxy for OSG could have significant impact on the Grids interoperability. Shifting to voms-proxy only scenario is a significant change to the software and mindset of the users. VO's should be given sufficient notice about this change.
<p />
<h4><a name="Fermigrid_perspective_Keith_Chad"></a> Fermigrid perspective (Keith Chadwick) </h4>
In mail on 11/20/06.<br />    
Parag,
<p />
Fermilab computer security has defined two "enclaves" of computing
at Fermilab: <ol>
<li> The general computing enclave (GCE) based on Kerberos strong authentication.
</li> <li> The open science enclave (OSE) which is based on grid proxy certificates.
</li></ol> 
<p />
A consequence of the recently granted authority to operate (ATO) to Fermilab by the DOE, is that within both enclaves, systems which
are in the enclave are required to meet the system baseline configurations.
<p />
One of the requirements of the OSE system baseline configuration is that all globus gatekeepers within the Fermilab OSE use the Fermilab
Site AuthoriZation (SAZ) service and respect the policy decisions that the SAZ service issues.
<p />
This can be accomplished by either configuring: <ol>
<li> Installing the SAZ client on the specific gatekeeper, or:
</li> <li> Only accepting jobs from the Fermilab Site Gatekeeper (which    is already running the SAZ client).
</li></ol> 
<p />
While we are in the commissioning phase of SAZ (it was only deployed to production on October 2, 2006), we have not been pushing SAZ installations on globus gatekeepers beyond fermigrid1.  This will probably change in the near future.
<p />
SAZ at Fermilab is configured to verify that there exists a "trust relationship" between the user or their sponsoring virtual organization and Fermilab.
<p />
If a user presents a grid proxy certificate generated by grid-proxy-init, then there is no VO specific information in the proxy.  As a consequence, SAZ is unable to unambiguously able to determine which virtual organization the user is sponsored by (is a member of), so the user is placed in the "NULL" VO for the purposes of SAZ.
<p />
As configured within SAZ at Fermilab, the "NULL" VO is neither enabled nor trusted.
<p />
As a consequence, any users grid credentials, that were generated with grid-proxy-init, and presented to SAZ will fail authorization unless the
user has a specific trust relationship with Fermilab.
<p />
On the other hand, as a consequence of specific prior trust relationships between Fermilab and specific experimental organizations (examples: cdf, cms, dzero, etc.), SAZ has been configured to successfully authorize users grid credentials which were generated using voms-proxy-init against the respective VOMS server of the corresponding virtual organization.
<p />
This was discussed by Vicky White and the FermiGrid Stakeholders (including D0 representatives) several months ago (my notes show a date of ~June 2005), and Vicky (in her role as Fermilab Computer Security Executive), granted a temporary exemption to allow the grid systems at Fermilab to operate without SAZ.
<p />
Since SAZ is now available, and is now able to enforce the trust relationships, I would submit to you that the time to test your infrastructure with voms-proxy-init generated certificates is sooner rather than later.
<p />
-Keith.
<p />
<h4><a name="DZero_followup_from_Parag_Mhashi"></a> DZero followup from Parag Mhashilkar (<a href="mailto&#58;parag&#64;fnal&#46;gov">parag&#64;fnal.gov</a>) </h4>
In email on 11/20/06:<br />    
There are no technical difficulties and using voms-proxy is already in the list of Dzero's to do things. I wasn't explicit info in my mail. My
mail was not intended from Dzero or Fermilab perspective. Dzero was used as an example for my observation with using OSG/LCG and in Grid inter-operation scheme. 
<p />
Again, I am <strong>not against this change</strong>, but in fact in its favor. Voms-proxy will definitely lead to better accountability in Grids. My
concerns were broader than the Dzero or Fermilab's scope. What I am saying is, this is a significant change and Grid-Interoperability should
also be consider while imposing it and if and when such a change happens VOs should be given info notice to change their operations. It would help to have some time line in such mails so that everyone can plan accordingly.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Identifying_Supported_VOs_for_a"></a> Identifying Supported VOs for a site </span></h2>
<h3><a name="User_to_VO_Mappings"></a> User to VO Mappings </h3>
Allowing grid proxies makes it very difficult to determine mechanically if a VO is supported or will ever get used.  You have to sort the DNs, as is done in the edg-mkgridmap and exclude those that will never get hit.  This is compounded by the problem in cases where a GUMS mapping is defined that allows for gird proxies in addition to the voms proxies.  It will hit on the first match found in hostGroups 'groups' attribute.
<p />
<h3><a name="Comments_AN1"></a> Comments </h3>
<code><b>Shaowen Wang (<a href="mailto&#58;shaowen&#45;wang&#64;uiowa&#46;edu">shaowen-wang&#64;uiowa.edu</a>) on 11/16/06:</b></code> <br />    
Hello,
<p />
GROW will not be able to attend today's ITB. Most of us are at SC|06. Here is a short summary about how application info is published through GLUE schema in WLCG/OSG.
<p />
Both WLCG and OSG publish software name information in <span class="twikiNewLink">GLUEHostApplicationRunningEnvironment<a href="/bin/edit/Main/GLUEHostApplicationRunningEnvironment?topicparent=Main.JohnWeigandNotes" rel="nofollow" title="GLUEHostApplicationRunningEnvironment (this topic does not yet exist; you can create it)">?</a></span>. Currently, some LCG sites publish
software version and path info through GLUELocation entities. OSG does not yet push installed software information to GLUELoation entities.
<p />
But if ATLAS or other VO applications wish to use installed software info within GLUELocation entities, it is straightforward to collect and
publish such info in OSG.
<p />
Cheers,
-Shaowen 
<p />
<code><b>Miron Livny (<a href="mailto&#58;miron&#64;cs&#46;wisc&#46;edu">miron&#64;cs.wisc.edu</a>) on 11/20/06:</b></code> <br />    
Does anyone out there believe that this is a way to build a sustained infrastructure that supports many VOs and scientific communities?
<p />
Using OSG infrastructure to publish VO specific information (what about the shoe size of the spoke person of the experiment as a calibration constant?) is unexcitable! . VOs MUST find a way to develop applications that can discover the information they need on their own.
<p />
Miron 
<p />
<code><b>Shaowen Wang (<a href="mailto&#58;shaowen&#45;wang&#64;uiowa&#46;edu">shaowen-wang&#64;uiowa.edu</a>) on 11/20/06:</b></code> <br />    
Hi Miron,
<p />
I don't have a YES|NO answer to your question. However, I have several questions, which might be naïve. 
<p />
Is it a reasonable understanding that other mechanisms than provided by OSG infrastructure to publish VO-specific information should exist (and they may not be unexcitable)? If so, could you help shed any light on what they are (or will be) and how they may interact with OSG infrastructure? Or there should be no mechanisms needed at all to publish VO-specific information?
<p />
Actually from my personal experience, it's quite a bit challenging to draw a clear boundary between VO-specific and VO-common information.
<p />
2 cents, and thanks,
-Shaowen
<p />
<code><b>Marco Mambelli (<a href="mailto&#58;marco&#64;hep&#46;uchicago&#46;edu">marco&#64;hep.uchicago.edu</a>) on 11/20/06:</b></code> <br />    
Miron,
I don't see publishing information about which software is installed on a CE as something unsustainable. I'm optimistic and hope that every VO will use some common sense and avoid to micromanage the software (grouping the software in few packages).
<p />
Advertising which software is installed on a CE helps scheduling decisions and I don't think each VO should develop, install and manage an atlernative information sistem if OSG is providing one.
<p />
About the solutions listed by Shaowen:
<span class="twikiNewLink">GLUEHostApplicationRunningEnvironment<a href="/bin/edit/Main/GLUEHostApplicationRunningEnvironment?topicparent=Main.JohnWeigandNotes" rel="nofollow" title="GLUEHostApplicationRunningEnvironment (this topic does not yet exist; you can create it)">?</a></span> has been recognized as something confusing and not scalable (you cannot define an environment that is good for everyone).  GLUELocation the concept has evolved to better represent the information abaut application package
<p />
Regards,
Marco 
<p />
<p />
<p />
<p />
-- <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> - 20 Nov 2006</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Main<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Main/TWikiUsers" class="twikiLink">TWikiUsers</a> &gt; <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>JohnWeigandNotes</span> <br />    
Topic revision: r5 - 06 Dec 2016 - 18:12:49 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />