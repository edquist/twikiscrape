-- Main.DerekWeitzel - 27 May 2010


---+!! Running Autodock at Nebraska


---++ Starting the job

   1. Log into glidein with the username provided.
   &lt;pre class=&quot;screen&quot;&gt;
   ssh username@glidein.unl.edu&lt;/pre&gt;
   1. Download the newest version of the Autodock Workflow
   &lt;pre class=&quot;screen&quot;&gt;
   svn co svn://t2.unl.edu/brian/GridSubmission/Autodock/glidein Autodock&lt;/pre&gt;
   1. Run the Autodock workflow:
   &lt;pre class=&quot;screen&quot;&gt;
   cd Autodock
   python runAutodock.py -p PROTEIN_DIR -l LIGAND_DIR -e EMAIL&lt;/pre&gt;

   * =PROTEIN_DIR= is the uncompressed directory with the proteins inside.  For example 1QTN is a protein directory.
   * =LIGAND_DIR= is the uncompressed directory with the Ligands inside, *.pdbqt files
   * =EMAIL= is your email that you wish to receive notification when the job is done.

   %TWISTY{
mode=&quot;div&quot;
showlink=&quot;Example output&quot;
hidelink=&quot;Hide&quot;
showimgleft=&quot;%ICONURLPATH{toggleopen-small}%&quot;
hideimgleft=&quot;%ICONURLPATH{toggleclose-small}%&quot;
}%
&lt;pre class=&quot;screen&quot;&gt;
[dweitzel@glidein Autodock]$ python runAutodock.py -p 1QTN -l Ligands_02-01-2010 -e dweitzel@cse.unl.edu -i 5
About to execute:
srm-mkdir srm://red-srm1.unl.edu:8443/srm/v2/server?SFN=/mnt/hadoop/user/powers/Autodock/05.26.10-21.02.06/
srm-mkdir   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Connecting to serviceurl httpg://red-srm1.unl.edu:8443/srm/v2/server

SRM-DIR: Wed May 26 21:02:07 CDT 2010 Calling SrmMkdir
SRM-DIR: DirectoryPath(0)=srm://red-srm1.unl.edu:8443/srm/v2/server?SFN=/mnt/hadoop/user/powers/Autodock/05.26.10-21.02.06/
        status=SRM_SUCCESS
        explanation=null
About to execute:
lcg-cp -b -D srmv2 -v -t 14400 1QTN.tar.gz srm://red-srm1.unl.edu:8443/srm/v2/server?SFN=/mnt/hadoop/user/powers/Autodock/05.26.10-21.02.06/1QTN.tar.gz
Warning: -t,--timeout is deprecated! Use --timeout-* options instead
Using grid catalog type: UNKNOWN
Using grid catalog : (null)
VO name: hcc
Checksum type: None
Destination SE type: SRMv2
Destination SRM Request Token: put:112307
Source URL: file:/home/swanson/dweitzel/Autodock/1QTN.tar.gz
File size: 6409128
Source URL for copy: file:/home/swanson/dweitzel/Autodock/1QTN.tar.gz
Destination URL: gsiftp://red-gridftp1.unl.edu:2811//mnt/hadoop/user/powers/Autodock/05.26.10-21.02.06/1QTN.tar.gz
# streams: 1
      1048576 bytes   1295.43 KB/sec avg   1295.43 KB/sec inst
Transfer took 2010 ms
ProteinTar = 1QTN.tar.gz
About to execute:
lcg-cp -b -D srmv2 -v -t 14400 Ligands_02-01-2010.tar.gz srm://red-srm1.unl.edu:8443/srm/v2/server?SFN=/mnt/hadoop/user/powers/Autodock/05.26.10-21.02.06/Ligands_02-01-2010.tar.gz
Warning: -t,--timeout is deprecated! Use --timeout-* options instead
Using grid catalog type: UNKNOWN
Using grid catalog : (null)
VO name: hcc
Checksum type: None
Destination SE type: SRMv2
Destination SRM Request Token: put:112322
Source URL: file:/home/swanson/dweitzel/Autodock/Ligands_02-01-2010.tar.gz
File size: 2231919
Source URL for copy: file:/home/swanson/dweitzel/Autodock/Ligands_02-01-2010.tar.gz
Destination URL: gsiftp://red-gridftp4.unl.edu:2811//mnt/hadoop/user/powers/Autodock/05.26.10-21.02.06/Ligands_02-01-2010.tar.gz
# streams: 1
      1048576 bytes   1452.08 KB/sec avg   1452.08 KB/sec inst
Transfer took 1020 ms
LigandTar = Ligands_02-01-2010.tar.gz
runAutodock.py:188: DeprecationWarning: integer argument expected, got float
  for i in range(self.num_runs):
About to execute:
cd working_dir.05.26.10-21.02.06; condor_submit_dag dag.condor

-----------------------------------------------------------------------
File for submitting this DAG to Condor           : dag.condor.condor.sub
Log of DAGMan debugging messages                 : dag.condor.dagman.out
Log of Condor library output                     : dag.condor.lib.out
Log of Condor library error messages             : dag.condor.lib.err
Log of the life of condor_dagman itself          : dag.condor.dagman.log

Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 24865.
-----------------------------------------------------------------------
&lt;/pre&gt;

%ENDTWISTY%

---++ Monitoring the jobs
On glidein.unl.edu, type the command:
&lt;pre class=&quot;screen&quot;&gt;
condor_q username
&lt;/pre&gt;
Where =username= is your provided username.  You will receive an email the the job has completed.



---++ Changing Parameters
In the file =remoteRun.sh=, you can change the values passed into Autodock.

&lt;pre class=&quot;file&quot;&gt;
...
startNumber=$((perRun*runNumber+perRun))
files=`ls $workingDir/$ligandDir | head -n $startNumber | tail -n $perRun`

# Loop through each ligand in the arguments
for ligand in $files
do
    cp $workingDir/$ligandDir/$ligand ./
    time prepare_dpf4.py -l $ligand -r $protein -p ga_num_evals=2500000 -p ga_pop_size=300 -p ga_run=20 -p rmstol=2.0 &amp;
    
    # The timeout of the prepare
    pid=$!
...
&lt;/pre&gt;




