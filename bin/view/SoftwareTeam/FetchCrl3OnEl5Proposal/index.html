<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> FetchCrl3OnEl5Proposal &lt; SoftwareTeam &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/SoftwareTeam/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/SoftwareTeam/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/SoftwareTeam/FetchCrl3OnEl5Proposal?_T=16 Feb 2017" type="application/x-wiki" title="edit FetchCrl3OnEl5Proposal" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/SoftwareTeam/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/SoftwareTeam/FetchCrl3OnEl5Proposal"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Proposal_to_Migrate_to_Fetch_CRL"></a>  Proposal to Migrate to Fetch CRL 3 on Enterprise Linux 5 Systems </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Overview"> Overview</a>
</li> <li> <a href="?cover=print#End_user_upgrade_procedure"> End-user upgrade procedure</a>
</li> <li> <a href="?cover=print#Work_required_for_OSG_Software_t"> Work required for OSG Software team (and others?)</a> <ul>
<li> <a href="?cover=print#Package_Changes"> Package Changes</a>
</li> <li> <a href="?cover=print#Software_Changes"> Software Changes</a>
</li> <li> <a href="?cover=print#Documentation_Changes"> Documentation Changes</a>
</li></ul> 
</li> <li> <a href="?cover=print#Change_Plan_Social_Engineering"> Change Plan / Social Engineering</a>
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Overview"></a> Overview </span></h2>
<p />
On Enterprise Linux 5 (el5) systems, the standard version of Fetch CRL is the <code>fetch-crl-2.8.5</code> package. It is very old and has some defects that are unlikely to be fixed. Most notable is the issue that blank CRL files are generated occasionally, causing Fetch CRL to issue warnings and never update those CRLs (<a href="https://jira.opensciencegrid.org/browse/SOFTWARE-689" target="_top">SOFTWARE-689</a>). This issue affects only el5 systems, because el6 systems ship only version 3 of Fetch CRL. Further, el5 systems <strong>do</strong> have access to a standard Fetch CRL v3 package, named <code>fetch-crl3</code>.
<p />
Thus, we propose migrating from version 2 to version 3 of Fetch CRL on el5 systems.
<p />
Since there are configuration incompatibilities between version 2 and version 3 that require manual changes, the RPM is called <code>fetch-crl3</code> on el5, and can be installed side-by-side with version 2.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="End_user_upgrade_procedure"></a> End-user upgrade procedure </span></h2>
<p />
The upgrade instructions, which include a config migration table and an example
<code>fetch-crl3</code> config file, have moved to
<a href="/bin/view/Documentation/UpgradeFetchCrl2to3_draft" class="twikiLink">Documentation.UpgradeFetchCrl2to3_draft</a>.
<p />
The difficulty of the upgrade should be fairly minor; it depends on how many
configuration changes the sysadmin has made for fetch-crl 2. Furthermore,
because <code>fetch-crl</code> and <code>fetch-crl3</code> can be installed in parallel, the admin is
not required to run <code>fetch-crl3</code> to get up-to-date CRLs -- it is merely
recommended. Therefore, the upgrade can be done on the user's timeframe.
<p />
Here are lists of things we will need to examine or change in order to make the
transition from fetch-crl 2 to 3 as painless as possible for the end-user.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Work_required_for_OSG_Software_t"></a> Work required for OSG Software team (and others?) </span></h2>
<p />
<h3><a name="Package_Changes"></a> Package Changes </h3>
<p />
Packages in our SVN that have <code>fetch-crl</code> as an explicit dependency:
<p /> <ul>
<li> <code>cms-xrootd</code> (contrib)
</li> <li> <code>dcache-gratia-probe</code>
</li> <li> <code>glite-ce-cream</code> (in production since 3.1.7, but we may drop support?)
</li> <li> <code>osg-gridftp</code> (metapackage)
</li> <li> <code>osg-gridftp-hdfs</code> (metapackage)
</li> <li> <code>osg-gridftp-xrootd</code> (metapackage)
</li> <li> <code>osg-se-bestman</code> (metapackage)
</li> <li> <code>osg-se-bestman-xrootd</code> (metapackage)
</li> <li> <code>osg-se-hadoop</code> (and <code>-gridftp</code>, <code>-srm</code> subpackages)
</li> <li> <code>osg-wn-client</code> (metapackage)
</li> <li> <code>rsv-metrics</code> (but see note below)
</li> <li> <code>voms-admin-server</code>
</li></ul> 
<p />
<strong>Note on rsv-metrics:</strong> <code>rsv-metrics</code> says it requires <code>fetch-crl</code> but does not run it anywhere, so that dependency can be removed. Looks like it was for an old probe that is no longer used.
<p />
RPMs <em>outside</em> of our SVN that have <code>fetch-crl</code> as an explicit dependency:
<p /> <ul>
<li> <code>nordugrid-arc-ca-utils</code> (EPEL)
</li></ul> 
<p />
<strong>Note on nordugrid-arc-ca-utils:</strong> We do not use this package, but we should mention it in the announcement anyway. A (hopefully) minor problem with this package is that because we do not ship it, its dependency on <code>fetch-crl</code> will not be changed to <code>fetch-crl3</code>. Since <code>fetch-crl3</code> does not “provide” the <code>fetch-crl</code> dependency, the user will have to keep both <code>fetch-crl</code> and <code>fetch-crl3</code> installed as long as they use <code>nordugrid-arc-ca-utils</code> and one of the OSG packages mentioned above.
<p />
RPMs that have <code>/usr/sbin/fetch-crl</code> as a dependency: none.
<p />
<h3><a name="Software_Changes"></a> Software Changes </h3>
<p />
Some of our software specifically runs the <code>fetch-crl</code> executable. These programs must be changed, ideally so that they run <code>fetch-crl3</code> if it exists, or <code>fetch-crl</code> if it does not. See the <code>osg-test</code> code for an example of how to do this carefully. Software to update:
<p /> <ul>
<li> <code>osg-configure</code> (<code>osg_configure.modules.utilities.fetch_crl()</code>)
</li> <li> <code>osg-test</code> (<code>test_06_fetch_crl.py</code>, <font color="#ff0000">done</font>)
</li> <li> <code>osg-ca-manage</code> and <code>osg-ca-certs-status</code> in the <code>osg-ca-scripts</code> package (checks if fetch-crl is enabled and when it was last run)
</li></ul> 
<p />
<h3><a name="Documentation_Changes"></a> Documentation Changes </h3>
<p />
TWiki pages to update:
<p /> <ul>
<li> <a href="/bin/view/Documentation/Release3/InstallBestPractices" class="twikiLink">InstallBestPractices</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallCertAuth" class="twikiLink">InstallCertAuth</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallBestmanXrootdSE" class="twikiLink">InstallBestmanXrootdSE</a> (install transcript only)
</li> <li> <a href="/bin/view/Documentation/Release3/InstallGratiaService" class="twikiLink">InstallGratiaService</a> (install transcript only)
</li> <li> <a href="/bin/view/Documentation/Release3/InstallGridFtpXrootd" class="twikiLink">InstallGridFtpXrootd</a> (install transcript only)
</li> <li> <a href="/bin/view/Documentation/Release3/InstallGums" class="twikiLink">InstallGums</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallHadoopSE" class="twikiLink">InstallHadoopSE</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallOSGBestmanSE" class="twikiLink">InstallOSGBestmanSE</a> (install transcript only)
</li> <li> <a href="/bin/view/Documentation/Release3/InstallOSGClient" class="twikiLink">InstallOSGClient</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallRSV" class="twikiLink">InstallRSV</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallVoms" class="twikiLink">InstallVoms</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallWNClient" class="twikiLink">InstallWNClient</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallXrootd" class="twikiLink">InstallXrootd</a>
</li> <li> <a href="/bin/view/Documentation/Release3/OSGServices" class="twikiLink">Documentation.Release3.OSGServices</a>
</li> <li> <a href="/bin/view/Documentation/Release3/OsgCaManage" class="twikiLink">OsgCaManage</a>
</li> <li> <s>Documentation.Release3.RsvPigeonTools</s> (OSG 1.2 only, don't bother)
</li> <li> <a href="/bin/view/Documentation/Release3/SrmTester" class="twikiLink">SrmTester</a>
</li> <li> <a href="/bin/view/Documentation/Release3/UnderstandingComputeElement" class="twikiLink">UnderstandingComputeElement</a> (note: looks a lot like <a href="/bin/view/Documentation/Release3/OSGServices" class="twikiLink">Documentation.Release3.OSGServices</a>, is one of those two superfluous?)
</li></ul> 
<p />
Pages marked “install transcript only” have transcripts (“screen dumps”) of the output of a full installation procedure.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Change_Plan_Social_Engineering"></a> Change Plan / Social Engineering </span></h2>
<p /> <ol>
<li> Need the blessing of Security (<font color="#ff0000">done</font>), Technology, and Production
</li> <li> Need the upgrade instructions (<a href="/bin/view/Documentation/UpgradeFetchCrl2to3_draft" class="twikiLink">Documentation.UpgradeFetchCrl2to3_draft</a>) reviewed and tested
</li> <li> Send a pre-announcement of the change a few weeks in advance; include whether or not this is something to worry about, how much effort migration will take, etc.
</li> <li> Do the release; highlight this change in the release notes and announcement, and link to the upgrade instructions
</li></ol> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: SoftwareTeam<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/SoftwareTeam/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/SoftwareTeam/InternalDocs" class="twikiLink">InternalDocs</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>FetchCrl3OnEl5Proposal</span> <br />    
Topic revision: r7 - 25 Jan 2013 - 16:21:59 - <a href="/bin/view/Main/TimCartwright" class="twikiLink">TimCartwright</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />