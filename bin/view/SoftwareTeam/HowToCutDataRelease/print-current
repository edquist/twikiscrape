<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> HowToCutDataRelease &lt; SoftwareTeam &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/SoftwareTeam/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/SoftwareTeam/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/SoftwareTeam/HowToCutDataRelease?_T=16 Feb 2017" type="application/x-wiki" title="edit HowToCutDataRelease" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/SoftwareTeam/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/SoftwareTeam/HowToCutDataRelease"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#DDDDDD;
	}
	.patternBookView {
		border-color:#DDDDDD;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!-- <ul>
<li> Set VERSIONS = VERSIONS
</li> <li> Set REVISION = REVISION
</li> <li> Set TOOL_SRC = <a href="https://github.com/opensciencegrid/release-tools" target="_top">https://github.com/opensciencegrid/release-tools</a>
</li> <li> Set OSG_VERSION_SRC = <a href="https://vdt.cs.wisc.edu/svn/native/redhat/trunk/osg-version/" target="_top">https://vdt.cs.wisc.edu/svn/native/redhat/trunk/osg-version/</a>
</li></ul> 
-->
<p />
<div style="border: 1px solid black; margin: 1em 0; padding: 1em; background-color: #FFDDDD; font-weight: 600;">
If you are performing a software release, please follow the instructions <a href="/bin/view/SoftwareTeam/HowToCutRelease" class="twikiLink">here</a>
</div>
<p />
<h1><a name="How_to_Cut_a_Data_Release"></a> How to Cut a Data Release </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#How_to_Cut_a_Data_Release"> How to Cut a Data Release</a> <ul>
<li> <a href="?cover=print#Requirements"> Requirements</a>
</li> <li> <a href="?cover=print#Pick_the_Version_Number"> Pick the Version Number</a>
</li> <li> <a href="?cover=print#Day_0_Generate_Preliminary_Relea"> Day 0: Generate Preliminary Release List</a>
</li> <li> <a href="?cover=print#Day_1_Verify_Pre_Release"> Day 1: Verify Pre-Release</a>
</li> <li> <a href="?cover=print#Day_2_Pushing_the_Release"> Day 2: Pushing the Release</a> <ul>
<li> <a href="?cover=print#Step_1_Push_from_pre_release_to"> Step 1: Push from pre-release to release</a>
</li> <li> <a href="?cover=print#Step_2_Get_the_new_CA_certificat"> Step 2: Get the new CA certificates pushed to repo.grid.iu.edu</a>
</li> <li> <a href="?cover=print#Step_3_Verify_the_CA_certificate"> Step 3: Verify the CA certificates</a>
</li> <li> <a href="?cover=print#Step_4_Announce_the_release"> Step 4: Announce the release</a>
</li></ul> 
</li></ul> 
</li></ul> 
</div>
<p />
This document details the process for releasing new OSG Data Release version(s). This document does NOT discuss the policy for deciding what goes into a release, which can be found <a href="/bin/view/SoftwareTeam/ReleasePolicy" class="twikiLink">here</a>.
<p />
Due to the length of time that this process takes, it is recommended to do the release over three or more days to allow for errors to be corrected and tests to be run.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Requirements"></a> Requirements </span></h2>
<p /> <ul>
<li> User certificate registered with OSG's koji with build and release team privileges 
</li> <li> An account on UW CS machines (e.g. library, ingwe) to access UW's AFS
</li> <li> Convenience scripts from <a href="https://github.com/opensciencegrid/release-tools" target="_top">GitHub</a>
</li> <li> <code>osg-build</code> scripts in your <code>PATH</code> (installed via OSG yum repos or <a href="https://github.com/opensciencegrid/osg-build" target="_top">source</a>)
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pick_the_Version_Number"></a> Pick the Version Number </span></h2>
<p />
Enter the verions numbers for the OSG version and data revision to be released (e.g. <code>3.3.12</code> and <code>2</code>, respectively) and click submit:
<p />
<form action="https://www.opensciencegrid.org/bin/view/SoftwareTeam/HowToCutDataRelease">
Versions: <input type="text" name="versions" size="10" value=""/>
Revision: <input type="text" name="revision" size="10" value=""/>
<input type="submit"/>
</form>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Day_0_Generate_Preliminary_Relea"></a> Day 0: Generate Preliminary Release List </span></h2>
<p />
The release manager often needs a tentative list of packages to be released. This is done by finding the package differences between osg-testing and the current release. Run <code>0-generate-pkg-list</code> from a machine that has your koji-registered user certificate:
<p />
<pre class="screen">
[user@client ~]$ git clone https://github.com/opensciencegrid/release-tools.git
[user@client ~]$ cd release-tools
[user@client ~]$ 0-generate-pkg-list -d REVISION VERSIONS
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Day_1_Verify_Pre_Release"></a> Day 1: Verify Pre-Release </span></h2>
<p />
This section is to be performed 1-2 days before the release (as designated by the release manager) to perform last checks of the release.
<p />
Compare the list of packages already in pre-release to the final list for the release put together by the OSG Release Coordinator (who should have updated <code>release-list</code> in git). To do this, run the <code>1-verify-prerelease</code> script from git:
<p />
<pre class='screen'>
[user@client ~]$ 1-verify-prerelease VERSIONS
</pre>
<p />
If there are any discrepancies consult the release manager. You may have to tag packages with the <code>osg-koji</code> tool.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Day_2_Pushing_the_Release"></a> Day 2: Pushing the Release </span></h2>
<p />
<font color="#ff0000"> <strong>NOTE:</strong> </font> For the second phase of the release, try to complete it earlier in the day rather than later. The GOC would like to send out the release announcement prior to 3 p.m. Eastern time.
<p />
<h3><a name="Step_1_Push_from_pre_release_to"></a> Step 1: Push from pre-release to release </h3>
<p />
This script moves the packages into release, clones releases into new version-specific release repos, locks the repos and regenerates them. Afterwards, it produces &#42;release-note* files that should be used to update the TWiki release note pages. Clone it from the github repo and run the script:
<p />
<pre class="screen">
[user@client ~]$ 2-create-release -d REVISION VERSIONS
</pre>
<p /> <ol>
<li> *.txt files are also created and it should be verified that they've been moved to /p/vdt/public/html/release-info/ on UW's AFS.
</li> <li> For each release version, use the <code>*release-note*</code> files to update the relevant sections of the release note pages.
</li></ol> 
<p />
<h3><a name="Step_2_Get_the_new_CA_certificat"></a> Step 2: Get the new CA certificates pushed to repo.grid.iu.edu </h3>
<p />
If this release contains a new version of <code>osg-ca-certs</code> or <code>igtf-ca-certs</code>, submit a GOC ticket to have them propagate the CA certificates from the recently updated release repositories to <code>repo.grid.iu.edu</code> and assign this ticket to Scott Teige:
<p />
<pre class="file">
Subject: Please update the CA certificates on repo1 and repo2.
</pre>
<p />
<pre class="file">
Please run /opt/bin/install-latest-cache-files-new.sh on repo1/2
</pre>
<p />
<h3><a name="Step_3_Verify_the_CA_certificate"></a> Step 3: Verify the CA certificates </h3>
<p />
Once the GOC has run their script, run the following command to update the CA certificates in the tarball installations and verify that the version of  the CA certificates match the version that was promoted to release.
<pre class="screen">
[user@client ~]$ /p/vdt/workspace/tarball-client/current/amd64_rhel6/osgrun osg-update-certs
[user@client ~]$ /p/vdt/workspace/tarball-client/current/amd64_rhel7/osgrun osg-update-certs
</pre>
<p />
<h3><a name="Step_4_Announce_the_release"></a> Step 4: Announce the release </h3>
<p />
The following instructions are meant for the release manager (or interim release manager). If you are not the release manager, let the release manager know that they can announce the release.
<p /> <ol>
<li> The release manager writes the release announcement and send it out. Here is a sample, replace <span style="background-color: #FFCCFF;">highlighted text</span> with the appropriate values:   <pre class="file"><strong>Subject:</strong> Announcing OSG Software version <span style="background-color: #FFCCFF;">&lt;VERSION(S)&gt;</span></pre>    <pre class="file">We are pleased to announce OSG Software version <span style="background-color: #FFCCFF;">&lt;VERSION(S)&gt;</span>!

This is the new OSG Software distributed via RPMs for:

* Scientific Linux 5 and 6
* !CentOS 5 and 6
* Red Hat Enterprise Linux 5 and 6

This release affects the <span style="background-color: #FFCCFF;">&lt;SET-OF-METAPACKAGES (client, compute element, etc...)&gt;</span>. Changes include:

* Major change 1
* Major change 2
* Major change 3

Release notes and pointers to more documentation can be found at:

https://www.opensciencegrid.org/bin/view/Documentation/Release3/Release%SHORTVERSION%

Need help? Let us know:

https://www.opensciencegrid.org/bin/view/Documentation/Release3/HelpProcedure

We welcome feedback on this release!</pre>
</li> <li> The release manager emails the announcement to <code>vdt-discuss@opensciencegrid.org</code></li>
</li> <li> The release manager asks the GOC to distribute the announcement by <a href="https://ticket.grid.iu.edu/goc/other" target="_top">opening a ticket</a></li>
</li> <li> The release manager closes the tickets marked 'Ready for Release' in the release's JIRA filter using the 'bulk change' function. Uncheck the box that reads "Send mail for this update"</li>
</li> <li> The release manager updates the recent/scheduled release tables on the Software/Release <a href="/bin/view/SoftwareTeam/WebHome" class="twikiCurrentWebHomeLink twikiLink">homepage</a>
</li></ol> 
<p />
<!-- vim:ft=twiki
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: SoftwareTeam<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>HowToCutDataRelease</span> <br />    
Topic revision: r6 - 02 Feb 2017 - 16:31:50 - <a href="/bin/view/Main/BrianLin" class="twikiLink">BrianLin</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />