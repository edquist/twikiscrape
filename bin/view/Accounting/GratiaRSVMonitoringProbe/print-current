<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaRSVMonitoringProbe &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaRSVMonitoringProbe?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaRSVMonitoringProbe" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaRSVMonitoringProbe"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TABLEPLUGIN_table1--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable td {padding:2px;}
.twikiTable th {padding:2px;}
.twikiTable#table1 th {background-color:#99CCCC;}
.twikiTable#table1 th.twikiSortedCol {background-color:#99CCCC;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td {background-color:#FFFFCC;}
.twikiTable#table1 tr.twikiTableRowdataBg1 td {background-color:#FFFFFF;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#FFFFCC;}
.twikiTable#table1 tr.twikiTableRowdataBg1 td.twikiSortedCol {background-color:#FFFFFF;}
.twikiTable#table1 th.twikiTableCol0 {text-align:center;}
.twikiTable#table1 th.twikiTableCol1 {text-align:center;}
.twikiTable#table1 th.twikiTableCol2 {text-align:center;}
.twikiTable#table1 th.twikiTableCol3 {text-align:center;}
.twikiTable#table1 td.twikiTableCol0 {text-align:left;}
.twikiTable#table1 td.twikiTableCol1 {text-align:center;}
.twikiTable#table1 td.twikiTableCol2 {text-align:left;}
.twikiTable#table1 td.twikiTableCol3 {text-align:center;}
.twikiTable#table1 td {padding:2px;}
.twikiTable#table1 th {padding:2px;}
</style>
<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Gratia_RSV_Monitoring_Probe"></a>  Gratia RSV Monitoring Probe </h1>
<p />
This is a probe written for RSV that examines the Gratia probes on the system and ascertains whether they are reporting properly and can provide some diagnostics if problems are found.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Probe_Operation"></a> Probe Operation </span></h2>
<p />
Under normal circumstances this probe is packaged with the RSV system and is installed on a CE along with all the other RSV probes. It will be executed regularly and its results posted along with those of other probes. It may also be invoked manually and can give better diagnostics if run as root.
<p />
 
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="5" id="table1" cellpadding="2" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#99CCCC" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaRSVMonitoringProbe?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Test Description</font></a> </th>
			<th bgcolor="#99CCCC" align="center" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaRSVMonitoringProbe?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Probe</font></a> </th>
			<th bgcolor="#99CCCC" align="center" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Accounting/GratiaRSVMonitoringProbe?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Possible results</font></a> </th>
			<th bgcolor="#99CCCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaRSVMonitoringProbe?cover=print;sortcol=3;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Root required?</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check crontab entry. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> CRITICAL<br/>UNKNOWN (if non-root) </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> Y </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check <code>Enabled</code> attribute in <code>ProbeConfig</code>. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check for generic <code>MeterName</code> in <code>ProbeConfig</code>. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check permissions on <code>DataFolder</code> (should be <code>04177</code> for batch probes) </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> PBS, LSF, Condor, SGE </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check for missing or multiple `:' in <code>MeterName</code>. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> WARNING </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check for generic <code>SiteName</code> in <code>ProbeConfig</code>. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> WARNING </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Verify condor_config has <code>PER_JOB_HISTORY_DIR</code> set correctly. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> Condor </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> WARNING<br/>UNKNOWN (can't run condor_config_val) </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Can urCollector config module be loaded? </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> PBS, LSF </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Can urCollector configuration file be loaded? </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> PBS, LSF </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check LRMS type setting in <code>urCollector.conf</code> is recognized. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> PBS, LSF </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check LRMS type stetting matches probe type. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> PBS, LSF </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> CRITICAL </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check PBS log directory exists. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> PBS </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> CRITICAL<br/>WARNING (if no entries for current day) </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> Y </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check LSF log directory and <code>lsb.events</code> file exists. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> LSF </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> CRITICAL<br/>WARNING (if no lsb.events file) </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> Y </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check files waiting to be sent from <code>&lt;workdir&gt;/urCollector</code>. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> PBS, LSF </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> WARNING (if &gt; 2000 files) </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> Y </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check files waiting to be re-sent from <code>&lt;workdir&gt;/gratiafiles</code> after communication problem with collector. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> WARNING (if &gt; 1000 records <br/>including those archived in files; or if at least <br/>1 file is &gt;7d old) </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check files in top level <code>&lt;datadir&gt;</code>. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2"> WARNING (if &gt; 10000 files) </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol0 twikiFirstCol"> Check probe has contacted configured collector. </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> ALL </td>
			<td bgcolor="#FFFFCC" align="left" valign="top" class="twikiTableCol2"> CRITICAL (never seen, not seen for &gt;24h)<br/>UNKNOWN (can't contact collector)<br/>WARNING (not seen for &gt;1h) </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol3 twikiLastCol"> N </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Check collector's probe -&gt; site name translation matches local configuration. </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol1 twikiLast"> ALL </td>
			<td bgcolor="#FFFFFF" align="left" valign="top" class="twikiTableCol2 twikiLast"> WARNING </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol3 twikiLastCol twikiLast"> N </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h3><a name="Manual_invocation"></a> Manual invocation </h3>
<p />
To invoke manually:
<p />
<pre>$VDT_LOCATION/osg-rsv/bin/probes/worker-scripts/gratia-config-probe-helper -p &lt;probe&gt; -X</pre>
<p />
The <code>-X</code> option produces human-readable output instead of the default XML. Invoke as root for more diagnostics.
<p />
-- <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a> - 14 Dec 2009</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Accounting/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaRSVMonitoringProbe</span> <br />    
Topic revision: r6 - 14 Dec 2009 - 19:51:32 - <a href="/bin/view/Main/ChrisGreen" class="twikiLink">ChrisGreen</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />