<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaWebAddQuery &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaWebAddQuery?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaWebAddQuery" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaWebAddQuery"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--TABLEPLUGIN_twikiAttachmentsTable--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#twikiAttachmentsTable td {border-style:solid none;}
.twikiTable#twikiAttachmentsTable th {border-style:solid none;}
.twikiTable#twikiAttachmentsTable td {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable th {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable td {vertical-align:top;}
.twikiTable#twikiAttachmentsTable th {background-color:#eceef2;}
.twikiTable#twikiAttachmentsTable th.twikiSortedCol {background-color:#e0e3e9;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#f2f3f6;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol0 {text-align:center;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol1 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol2 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol3 {text-align:right;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol4 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol5 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol6 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol7 {text-align:center;}
</style></head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#D0D0D0" />&nbsp;<a href="/bin/view/Accounting/WebHome">Accounting Web</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaWebAddQuery" title='Topic revision: 10 (25 Feb 2015 - 08:13:28)'>GratiaWebAddQuery</a> <span class='patternRevInfo'>(25 Feb 2015, <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">---+ Guide to create a new Query in Gratia Web 
The Gratia Web queries are defined in !XML files. These files are located at in the =OSG-Measurements-Metrics= project in this path =./src/gratia/config=. If you are working in a machine with a working installation these files will be located in the =site-packages= folder of the python installation in the machine. For example in a SL5 machine with python 2.4 the path would be =/usr/lib/python2.4/site-packages/gratia/config=, or in a SL6 machine with python 2.6 it would be =/usr/lib/python2.6/site-packages/gratia/config=.

%NOTE% After modifying the XML files the server will require a restart to load the changes made to the queries.

The queries are organized in different groups. Each group has a correspondent XML file that defines the queries. These groups and the related XML files are:

   *  =GratiaStatusQueries --&amp;gt; gratia_status_queries.xml=
   *  =GratiaEventsQueries --&amp;gt; gratia_events_queries.xml=
   *  =GratiaDataQueries --&amp;gt; gratia_data_queries.xml=
   *  =GratiaPieQueries --&amp;gt; gratia_pie_queries.xml=
   *  =GratiaGlideinBarQueries --&amp;gt; gratia_glidein_bar_queries.xml=
   *  =GratiaBarQueries --&amp;gt; gratia_bar_queries.xml=
   *  =GratiaRTQueries --&amp;gt; gratia_realtime_queries.xml=
   *  =GratiaTransferQueries --&amp;gt; gratia_transfer_queries.xml=
   *  =GratiaCumulativeQueries --&amp;gt; gratia_cumulative_queries.xml=
   *  =GridScanQueries --&amp;gt; gridscan_queries.xml=
   *  =GIPQueries --&amp;gt; gip_queries.xml=
   *  =RSVQueries --&amp;gt; rsv_queries.xml=
   *  =RSVWLCGQueries --&amp;gt; rsv_wlcg.xml=
   *  =RSVSummaryQueries --&amp;gt; rsv_summary.xml=

This queries groups is defined in =text_queries.xml=, and can be examined on a running server on =http://ip:[port]/gratia/xml=.
&lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;graphtool-config&amp;gt;%ENDCOLOR%  
  ...
  %BLUE%&amp;lt;class %PURPLE%type=%ENDCOLOR%%GREEN%&quot;XmlGenerator&quot;%ENDCOLOR% %PURPLE%name=%ENDCOLOR%%GREEN%&quot;query_xml&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;timeout&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%900%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaStatusQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaEventsQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaDataQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaPieQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaGlideinBarQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaBarQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaRTQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaTransferQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GratiaCumulativeQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GridScanQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% GIPQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% RSVQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% RSVWLCGQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR% RSVSummaryQueries %BLUE%&amp;lt;queryobj&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;class&amp;gt;%ENDCOLOR%
  ...
%BLUE%&amp;lt;/graphtool-config&amp;gt;%ENDCOLOR%
&lt;/pre&gt;

---++ Modifying/adding queries to an existing group

%WARNING% Remember to escape reserved XML characters like =&#39;&amp;gt;&#39;= and =&#39;&amp;lt;&#39;= when modifying XML files.

Most of the queries defined in the different groups extend from queries that are defined in =generic_queries.xml=. To add a new query to a group you must go to the XML where the group is defined, and add a new =&amp;lt;query&amp;gt;= node to the =&amp;lt;class type=&quot;SqlQueries&quot; name=&quot;GROUP_NAME&quot;&amp;gt;= node.
&lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;graphtool-config&amp;gt;%ENDCOLOR%
  ...
  %BLUE%&amp;lt;class %PURPLE%type=%ENDCOLOR%%GREEN%&quot;SqlQueries&quot;%ENDCOLOR% %PURPLE%name=%ENDCOLOR%%GREEN%&quot;GROUP_NAME&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      ...
      %BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;NEW_QUERY_NAME&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      ...
      %BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
      ...
  %BLUE%&amp;lt;class&amp;gt;%ENDCOLOR%
  ...
%BLUE%&amp;lt;/graphtool-config&amp;gt;%ENDCOLOR%
&lt;/pre&gt;
%IMPORTANT% The query name will also be the path to access the query in the URL (=http://ip:[port]/gratia/xml/&lt;b&gt;&amp;lt;query_name&amp;gt;&lt;/b&gt;=). Do not use spaces or special characters in the query name. Do not use a query name that is already in use by other query.

Query can inherit all of its attributes from another query. To do this you must include the =base= attribute and reference %RED%GroupName%ENDCOLOR%.%BROWN%query_to_extend%ENDCOLOR%.
&lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;NEW_QUERY_NAME&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;%RED%GroupName%ENDCOLOR%.%BROWN%query_to_extend%ENDCOLOR%&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
...
...
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user_site_quality&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;%RED%GratiaSecureStorageQuery%ENDCOLOR%.%BROWN%user_summary%ENDCOLOR%&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
&lt;/pre&gt;
To define the inputs, the SQL, and other query metadata. The =query= node is composed of the following nodes:

---+++ Query =inputs= tag
This nodes defines all the input variables that will be included by default in the query. The =inputs= node is composed of =input= nodes. An input node can be defined using the following attributes. 
   * *name (REQUIRED):* The name of the input parameter. Must not contain spaces nor special characters. Must be unique per each query
   * *type (OPTIONAL):* The type of the input parameter. If not specified will default to string. The accepted values are:
      * *int*
      * *float*
      * *eval:* Will try to evaluate the expression using the python buiultin =eval()= function. Will try to evaluate with the following call =eval(str(%RED%INPUT_PARAMETER%ENDCOLOR%),{&#39;__builtins__&#39;:None,&#39;time&#39;:time},{})=.
      * *datetime:* Will try to parse the input parameter to a datetime python object. Will accept a timestamp in seconds, a date-time string with the following format =&#39;%Y-%m-%d %H:%M:%S&#39;= or and expression like =time.time()= or =time.time()-2*86400=.
      * *timestamp:* Will try to parse the input parameter to a datetime python object, like the =datetime= type, but will get the timestam of the datetime afterwards.
      * *bool/boolean:* Will accept either =bool= or =boolean= as type, do not use the string =&quot;bool/boolean&quot;=. The only accepted string values are =false= or =true=
   * *kind (OPTIONAL):* The only accepted value is =&quot;sql&quot;=. If it is not specified, the input parameters will be able to be used in any python callback function, but will not be included in the SQL query parameters for the query. If specified with =kind=&quot;sql&quot;= it will be available to usage in the SQL query as =:input_parameter_name=.
   * *partial (OPTIONAL):* Only for *datetime* parameters. Only works if there is a numeric parameter named =span=. Values accepted are:
      * *down:* If =span= is exactly =3600= will set the datetime object minutes and seconds to 0:0. If  =span= is bigger than =3600= will set the datetime object hours, minutes and seconds to 0:0:0.
      * *up:* If =span= is exactly =3600= will set the datetime object minutes and seconds to 59:59. If  =span= is bigger than =3600= will set the datetime object hours, minutes and seconds to 23:59:59.
---++++ Example:
%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Inputs Example&quot; hidelink=&quot;Hide Inputs example&quot;}%
&lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;site_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;span&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;int&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%3600%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-13*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;up&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Unknown %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% other %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    SELECT
    ....
 %BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
&lt;/pre&gt;
%ENDTWISTY%
---+++ Query =sql= tag
If you are creating a new query that does not inherit from other queries you must specify the SQL query here. You can leave slots that can be filled by child queries. To do this you must include a =slot= tag. This tag only requires a name attribute that must not included spaces nor special characters. There can be multiple slots with the same name. 
To fill this slots from a child query you can use a =filler= tag with the name of the slot that want to be filled. 
%WARNING% Non filled slots will be replaced with empty strings. This could lead to a syntax error on the SQL query when executed. 
The SQL query text can include references to the input parameters with  =:input_parameter_name=. The input parameter must specify the =kind=&quot;sql&quot;= attribute to be used.
---++++ Example:
%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent Query Example&quot; hidelink=&quot;Hide Parent Query example&quot;}%
&lt;pre class=&quot;file&quot;&gt;
 %BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;site_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      ...
      %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    SELECT
      %RED%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      truncate( unix_timestamp(StartTime) / %BROWN%:span%ENDCOLOR%, 0 ) * %BROWN%:span%ENDCOLOR% as time,
      %BROWN%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    FROM
      MasterTransferSummary R FORCE INDEX (index01)
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;JOIN&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    WHERE
      StartTime &amp;amp;gt;= %BROWN%:starttime%ENDCOLOR% AND
      StartTime &amp;amp;lt; %BROWN%:endtime%ENDCOLOR% AND 
      S.SiteName=%BROWN%:facility%ENDCOLOR% AND
      VO.VOName regexp %BROWN%:vo%ENDCOLOR% AND
      (NOT (VO.VOName regexp %BROWN%:exclude-vo%ENDCOLOR%)) AND
      CommonName regexp %BROWN%:user%ENDCOLOR%
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    GROUP BY
      %RED%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      time
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;results_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  ...
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
&lt;/pre&gt;
%ENDTWISTY%
%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child Query Example&quot; hidelink=&quot;Hide Child Query example&quot;}%
&lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;site_user_transfer_quality&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaStorageQuery.site_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  ...
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %RED%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% DN %RED%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BROWN%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      sum(CASE StatusCode WHEN 0 THEN 1 ELSE 0 END) as Successes,
      sum(CASE StatusCode WHEN 0 THEN 0 ELSE 1 END) as Failures
    %BROWN%&amp;lt;filler&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  ...
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
&lt;/pre&gt;
%ENDTWISTY%
---+++ Query =results= and =attribute=  tags
This tag defines how results must be transformed after they are retrieved from the database. This data transformation is required by =graphtool= to generate the plots. Moreover, this allows to transform the data that come from the database to format, join data with external data sources (like OIM), or do additional calculations. =graphtool= offers a group of result parsing functions that are useful depending in the desired kind of plot. 
The =attribute= tag defines additional METADATA to be include when executing the query and creating the plot. One of this extra parameters is =graph_type= that defines which kind of plots will be rendered. 
---++++ Plots Examples:
%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show !GratiaHorizontalBar Example&quot; hidelink=&quot;Hide !GratiaHorizontalBar example&quot;}%
&lt;img src=&quot;%ATTACHURLPATH%/GratiaHorizontalBar.png&quot; alt=&quot;GratiaHorizontalBar.png&quot; width=&#39;800&#39; height=&#39;500&#39; /&gt;    
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent XML&quot; hidelink=&quot;Hide Parent XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
  %BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;simple_master_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-13*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;up&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;includeFailed&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%true%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;includeSuccess&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%true%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;probe&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;role&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-role&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%NONE%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Unknown|unknown|other%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%NONE|Generic|Obsolete%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%NONE%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;resource-type&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%^Batch$%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
      SELECT
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      ,
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      FROM
                MasterSummaryData R
            JOIN
                Probe P on R.ProbeName = P.probename
            JOIN
                Site S on S.siteid = P.siteid
            JOIN
                VONameCorrection VC ON (VC.corrid=R.VOcorrid)
            JOIN
                VO on (VC.void = VO.void)
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;join&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      WHERE
                R.EndTime &amp;amp;gt;= :starttime AND
                R.EndTime &amp;amp;lt; :endtime AND
                S.SiteName regexp :facility AND
                VO.VOName regexp :vo AND
                VC.VOName regexp :role AND
                (NOT (VC.VOName regexp :exclude-role)) AND
                (R.ResourceType regexp :resource-type or R.ResourceType = &#39;&#39;) AND
                (:includeFailed=&#39;true&#39; OR ApplicationExitCode=0) AND
                (:includeSuccess =&#39;true&#39; OR ApplicationExitCode!=0) AND
                (NOT (S.SiteName regexp :exclude-facility)) AND
                (NOT (VO.VOName regexp :exclude-vo)) AND
                R.WallDuration &amp;amp;lt; 1100000000 AND
                R.ProbeName regexp :probe AND
                (NOT (R.CommonName regexp :exclude-user)) AND
                R.CommonName regexp :user
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      GROUP BY
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;having&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;simple_results_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivots&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%0%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%1%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaPie%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child XML&quot; hidelink=&quot;Hide Child XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
  %BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;job_avg&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaGenericQuery.simple_master_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;min_jobs&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%0%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;max_avg&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%10000%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;fixed-height&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%False%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%COALESCE(R.CommonName, VO.VOName)%BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%sum(Cores*WallDuration)/sum(Njobs)/60%BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;having&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%HAVING sum(Njobs) &amp;gt; :min_jobs and sum(Cores*WallDuration)/sum(Njobs)/60 &amp;lt; :max_avg%BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%User Name%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%displayName%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Average Job Runtimes%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Avg Runtime%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Mins%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaHorizontalBar%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
%ENDTWISTY%

%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show !GratiaStackedBar Example&quot; hidelink=&quot;Hide !GratiaStackedBar example&quot;}%
&lt;img src=&quot;%ATTACHURLPATH%/GratiaStackedBar.png&quot; alt=&quot;GratiaStackedBar.png&quot; width=&#39;800&#39; height=&#39;500&#39; /&gt;  
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent XML&quot; hidelink=&quot;Hide Parent XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;master_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;span&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;int&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-13*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;up&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;includeFailed&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% true %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;includeSuccess&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% true %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;probe&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;role&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-role&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Unknown|unknown|other %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE|Generic|Obsolete %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;resource-type&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% ^Batch$ %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    SELECT
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      truncate( unix_timestamp(EndTime) / :span, 0 ) * :span as time,
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    FROM
      MasterSummaryData R
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;join&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 
    WHERE
      R.EndTime &amp;amp;gt;= :starttime AND
      R.EndTime &amp;amp;lt; :endtime AND
      S.SiteName regexp :facility AND
      VO.VOName regexp :vo AND
      VC.VOName regexp :role AND
      (NOT (VC.VOName regexp :exclude-role)) AND
      (R.ResourceType regexp :resource-type or R.ResourceType = &#39;&#39;) AND
      R.CommonName regexp :user AND
      (:includeFailed=&#39;true&#39; OR ApplicationExitCode=0) AND
      (:includeSuccess =&#39;true&#39; OR ApplicationExitCode!=0) AND
      (NOT (S.SiteName regexp :exclude-facility)) AND
      (NOT (R.CommonName regexp :exclude-user)) AND
      (NOT (VO.VOName regexp :exclude-vo)) AND
      R.WallDuration &amp;amp;lt; 1100000000 AND
      R.ProbeName regexp :probe
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    GROUP BY 
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      time
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;having&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;results_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivots&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 0 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 1 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 2 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaStackedBar%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child XML&quot; hidelink=&quot;Hide Child XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo_facility_hours_bar_smry&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaGenericQuery.master_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% S.SiteName %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% sum(Cores*WallDuration)/3600 %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% AND WallDuration &amp;gt; 0 %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Facility%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%$vo CPU Hours By Facility%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaStackedBar%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%oim_resource_filter%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%make_int%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
%ENDTWISTY%

%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show !GratiaStackedLine Example&quot; hidelink=&quot;Hide !GratiaStackedLine example&quot;}%
&lt;img src=&quot;%ATTACHURLPATH%/GratiaStackedLine.png&quot; alt=&quot;GratiaStackedLine.png&quot; width=&#39;800&#39; height=&#39;500&#39; /&gt;    
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent XML&quot; hidelink=&quot;Hide Parent XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;ts_hourly&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-2*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;span&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%3600%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;host&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%.*%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;excludefacility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%ITB%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;excludehost&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%NONE%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;excludevo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%NONE%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    SELECT
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      unix_timestamp(Timestamp),
      sum(MyColumn)
    FROM
      ( SELECT
          MSS.SiteName,
          VO.VOName,
          MSS.CEName,
          Cluster.Name,
          Timestamp,
          (CASE CNC.type WHEN 1 THEN SUM(%BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%) WHEN 2 THEN MAX(%BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%) WHEN 3 THEN SUM(%BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%) END) AS MyColumn
        FROM
          MasterServiceSummaryHourly MSS
          JOIN VONameCorrection VNC on VNC.corrid=MSS.VOcorrid
          JOIN VO on VO.void=VNC.void
          JOIN ClusterNameCorrection CNC on CNC.corrid=MSS.Clustercorrid
          JOIN Cluster on Cluster.clusterid=CNC.clusterid
        WHERE
          Timestamp &amp;gt;= :starttime
          AND Timestamp &amp;amp;lt; :endtime
          AND (MSS.SiteName regexp :facility)
          AND NOT (MSS.SiteName regexp :excludefacility)
          AND (MSS.HostName regexp :host)
          AND NOT (MSS.HostName regexp :excludehost)
          AND (VO.VOName regexp :vo)
          AND NOT (VO.VOName regexp :excludevo)
          %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
        GROUP BY
          VO.VOName,
          Cluster.Name,
          MSS.CEName,
          Timestamp
      ) as foo
    GROUP BY
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      Timestamp
    %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;having&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;gratia.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;results_parser_fillin&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivots&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 0 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 1 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 2 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% make_int %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% GratiaStackedLine %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%VO.VOName%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Time%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child XML&quot; hidelink=&quot;Hide Child XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;status_queue&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaStatusGeneric.ts_hourly&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%RunningJobs%BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%CEName%BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Queue%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Count of Running Jobs by Queue%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Running Jobs%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
%ENDTWISTY%

%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show !GratiaCumulative Example&quot; hidelink=&quot;Hide !GratiaCumulative example&quot;}%
&lt;img src=&quot;%ATTACHURLPATH%/GratiaCumulative.png&quot; alt=&quot;GratiaCumulative.png&quot; width=&#39;800&#39; height=&#39;500&#39; /&gt;    
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent XML&quot; hidelink=&quot;Hide Parent XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;jobs_summary_query&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;span&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;int&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-13*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;up&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Unknown|unknown|other %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE|Generic|Obsolete %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;probe&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;resource-type&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% ^Batch$ %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
   SELECT
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      truncate( unix_timestamp(EndTime) / :span, 0 ) * :span as time,
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    FROM
      MasterSummaryData R
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
    %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;JOIN&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    WHERE
      (R.ResourceType regexp :resource-type or R.ResourceType = &#39;&#39;) AND
      EndTime &amp;amp;gt;= :starttime AND
      EndTime &amp;amp;lt; :endtime AND
      S.SiteName regexp :facility AND
      VO.VOName regexp :vo AND
      R.CommonName regexp :user AND
      (NOT (S.SiteName regexp :exclude-facility)) AND
      (NOT (R.CommonName regexp :exclude-user)) AND
      (NOT (VO.VOName regexp :exclude-vo)) AND
      R.ProbeName regexp :probe AND
      WallDuration &amp;amp;lt; 1100000000
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    GROUP BY
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      time
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;results_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivots&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 0 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 1 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 2 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%make_int%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaStackedBar%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Time%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child XML&quot; hidelink=&quot;Hide Child XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility_count_cumulative_smry&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaGenericQuery.jobs_summary_query&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% S.SiteName %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% sum(Njobs) %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% AND Njobs &amp;gt; 0 %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;cumulative_pivot_group_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%oim_resource_filter%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%make_int%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Facility %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Cumulative Number of Jobs By Facility %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Job Count %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% GratiaCumulative %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
%ENDTWISTY%

%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show !GratiaPie Example&quot; hidelink=&quot;Hide !GratiaPie example&quot;}%
&lt;img src=&quot;%ATTACHURLPATH%/GratiaPie.png&quot; alt=&quot;GratiaPie.png&quot; width=&#39;800&#39; height=&#39;500&#39; /&gt;    
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent XML&quot; hidelink=&quot;Hide Parent XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;simple_master_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-13*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;up&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;includeFailed&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% true %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;includeSuccess&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% true %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;probe&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;role&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-role&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Unknown|unknown|other %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE|Generic|Obsolete %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-user&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;resource-type&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% ^Batch$ %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
        SELECT
            %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
            %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
        FROM
            MasterSummaryData R
        JOIN
            Probe P on R.ProbeName = P.probename
        JOIN
            Site S on S.siteid = P.siteid
        JOIN
            VONameCorrection VC ON (VC.corrid=R.VOcorrid)
        JOIN
            VO on (VC.void = VO.void)
        %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;join&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
        WHERE
            R.EndTime &amp;amp;gt;= :starttime AND
            R.EndTime &amp;amp;lt; :endtime AND
            S.SiteName regexp :facility AND
            VO.VOName regexp :vo AND
            VC.VOName regexp :role AND
            (NOT (VC.VOName regexp :exclude-role)) AND
            (R.ResourceType regexp :resource-type or R.ResourceType = &#39;&#39;) AND
            (:includeFailed=&#39;true&#39; OR ApplicationExitCode=0) AND
            (:includeSuccess =&#39;true&#39; OR ApplicationExitCode!=0) AND
            (NOT (S.SiteName regexp :exclude-facility)) AND
            (NOT (VO.VOName regexp :exclude-vo)) AND
            R.WallDuration &amp;amp;lt; 1100000000 AND
            R.ProbeName regexp :probe AND
            (NOT (R.CommonName regexp :exclude-user)) AND
            R.CommonName regexp :user
            %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
        GROUP BY 
            %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;having&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;simple_results_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
            %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivots&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 0 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
            %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 1 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaPie%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child XML&quot; hidelink=&quot;Hide Child XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;osg_vo_count&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaGenericQuery.simple_master_summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-14*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
     %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% VO.VOName %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% sum(R.Njobs) %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% VO %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Jobs %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Job Count by VO %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
%ENDTWISTY%

%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show !QualityMap Example&quot; hidelink=&quot;Hide !QualityMap example&quot;}%
&lt;img src=&quot;%ATTACHURLPATH%/QualityMap.png&quot; alt=&quot;QualityMap.png&quot; width=&#39;800&#39; height=&#39;620&#39; /&gt;   
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Parent XML&quot; hidelink=&quot;Hide Parent XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;span&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;int&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;starttime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;down&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()-13*86400%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;endtime&quot;%ENDCOLOR% %PURPLE%partial=%ENDCOLOR%%GREEN%&quot;up&quot;%ENDCOLOR% %PURPLE%type=%ENDCOLOR%%GREEN%&quot;datetime&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%time.time()%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;protocol&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% .* %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-vo&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% other %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;exclude-facility&quot;%ENDCOLOR% %PURPLE%kind=%ENDCOLOR%%GREEN%&quot;sql&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% NONE|Generic|Obsolete %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
   SELECT
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      truncate( unix_timestamp(StartTime) / :span, 0 ) * :span as time,
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    FROM
      MasterTransferSummary R FORCE INDEX (index01)
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
    %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;JOIN&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    WHERE
      StartTime &amp;amp;gt;= :starttime AND
      StartTime &amp;amp;lt; :endtime AND
      SiteName regexp :facility AND
      R.Protocol regexp :protocol AND
      VO.VOName regexp :vo AND
      (NOT (S.SiteName regexp :exclude-facility)) AND
      (NOT (VO.VOName regexp :exclude-vo))
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;where&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    GROUP BY
      %BLUE%&amp;lt;slot %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%,
      time
  %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results %PURPLE%module=%ENDCOLOR%%GREEN%&quot;graphtool.database.query_handler&quot;%ENDCOLOR% %PURPLE%function=%ENDCOLOR%%GREEN%&quot;results_parser&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivots&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 0 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 1 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 2 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
      %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%make_int%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%GratiaStackedBar%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;grouping_name&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%Time%BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
  %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
   * %TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Child XML&quot; hidelink=&quot;Hide Child XML&quot;}%
     &lt;pre class=&quot;file&quot;&gt;
%BLUE%&amp;lt;query %PURPLE%name=%ENDCOLOR%%GREEN%&quot;user_quality&quot;%ENDCOLOR% %PURPLE%base=%ENDCOLOR%%GREEN%&quot;GratiaStorageQuery.summary&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;group&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% CommonName %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;filler %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%
            sum(CASE R.Status WHEN 0 THEN 1.0 ELSE 0.0 END) as Successes,
            sum(CASE R.Status WHEN 0 THEN 0.0 ELSE 1.0 END) as Failures
        %BLUE%&amp;lt;filler&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;sql&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
            %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;pivot_transform&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR%displayName%BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
            %BLUE%&amp;lt;input %PURPLE%name=%ENDCOLOR%%GREEN%&quot;results&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% 2, 3 %BLUE%&amp;lt;input&amp;gt;%ENDCOLOR%
        %BLUE%&amp;lt;inputs&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;results&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;graph_type&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% QualityMap %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;fixed-height&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% False %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;title&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Transfer Quality by User %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_names&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Successful Transfers, Failed Transfers %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
    %BLUE%&amp;lt;attribute %PURPLE%name=%ENDCOLOR%%GREEN%&quot;column_units&quot;%ENDCOLOR%&amp;gt;%ENDCOLOR% Files, Files %BLUE%&amp;lt;attribute&amp;gt;%ENDCOLOR%
%BLUE%&amp;lt;query&amp;gt;%ENDCOLOR%
     &lt;/pre&gt;
     %ENDTWISTY%
%ENDTWISTY%

---+++ XML Formattig for the Twiki
To format XML files to be displayed on the Twiki without syntax checking, and line by line. The following python code could be used.
%TWISTY{%TWISTY_OPTS_OUTPUT% showlink=&quot;Show Code&quot; hidelink=&quot;Hide Code&quot;}%
&lt;pre class=&quot;file&quot;&gt;
import re

  # GROUPS                    1  2    3          4                      5    6
pattern_open  = re.compile(r&amp;quot;(&amp;lt;)(\s*)([\w\d_-]+)(\s+[\w\d_-]+=\&amp;quot;.*?\&amp;quot;)*(\s*)(\/&amp;gt;|&amp;gt;)&amp;quot;)
  # GROUPS                    1   2              3
pattern_close = re.compile(r&amp;quot;(&amp;lt;/)(\s*[\w\d_-]+\s*)(&amp;gt;)&amp;quot;)

open_tag      = &amp;quot;&amp;#37;BLUE&amp;#37;&amp;amp;lt;&amp;quot;
close_tag     = &amp;quot;&amp;amp;gt;&amp;#37;ENDCOLOR&amp;#37;&amp;quot;
att_def_open  = &amp;quot;&amp;#37;PURPLE&amp;#37;&amp;quot;
att_text_open = &amp;quot;&amp;#37;GREEN&amp;#37;&amp;quot;
close_color   = &amp;quot;&amp;#37;ENDCOLOR&amp;#37;&amp;quot;

def format_xml_for_twiki(text,first_call=True):
  if first_call:
    text = text.replace(&amp;quot;&amp;amp;&amp;quot;,&amp;quot;&amp;amp;amp;&amp;quot;)
  # Search for the next open tag
  match_open  = pattern_open.search(text)
  if match_open is not None:
    pre_match = text[:match_open.start()]
    pos_match = text[match_open.end():]
    open = open_tag+match_open.group(3)
    close = (&amp;quot;/&amp;quot; if match_open.group(3) == &amp;quot;/&amp;gt;&amp;quot; else &amp;quot;&amp;quot;)+close_tag
    attributes = &amp;quot;&amp;quot;
    attributes_txt =&amp;quot;&amp;quot;
    if match_open.group(4) is not None:
      attributes = text[match_open.end(3):match_open.end(4)].strip()
      for attribute_i in attributes.split():
        parts = attribute_i.split(&amp;quot;=&amp;quot;)
        attributes_txt += &amp;quot; &amp;quot;+att_def_open+parts[0]+&amp;quot;=&amp;quot;+close_color+att_text_open+parts[1]+close_color
    new_text = pre_match+open+attributes_txt+close+pos_match
    # Recursive call to keep searching for more tags
    return format_xml_for_twiki(new_text,False)
  # Search for the next close tag
  match_close = pattern_close.search(text)
  if match_close is not None:
    pre_match = text[:match_close.start()]
    pos_match = text[match_close.end():]
    new_text = pre_match+open_tag+match_close.group(2).strip()+close_tag+pos_match
    # Recursive call to keep searching for more tags
    return format_xml_for_twiki(new_text,False)
  return text.replace(&amp;quot;&amp;lt;&amp;quot;, &amp;quot;&amp;amp;lt;&amp;quot;).replace(&amp;quot;&amp;gt;&amp;quot;, &amp;quot;&amp;amp;gt;&amp;quot;).replace(&amp;quot;\t&amp;quot;,&amp;quot;  &amp;quot;)

if __name__ == &amp;quot;__main__&amp;quot;:
  with open(&#39;./in.xml&#39;,&#39;r&#39;) as f:
    lines = f.readlines()
  if lines is not None:
    with open(&amp;quot;./out.txt&amp;quot;, &#39;w+&#39;) as f:
      for line in lines:
        f.write(format_xml_for_twiki(line))
  else:
    print &amp;quot;No lines read from ./in.xml&amp;quot;
&lt;/pre&gt;
%ENDTWISTY%

-- Main.JuanFelipeMosqueraMorales - 25 Feb 2015
</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div><div class="twikinetRounded twikinetRoundedAttachments"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="twikiAttachments">
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="topicattachmentslistshow" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span> <span id="topicattachmentslisthide" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="topicattachmentslisttoggle" class="twistyRememberSetting twistyContent twikiMakeHidden twistyInited">
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table summary="Topic attachments" cellspacing="0" id="twikiAttachmentsTable" cellpadding="0" class="twikiTable" rules="rows" border="1"><caption>Topic attachments</caption>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">I</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attachment</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Action</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=3;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=4;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Date</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol5"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=5;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Who</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol6 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?raw=on;sortcol=6;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaCumulative.png">GratiaCumulative.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaCumulative.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 137.1&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:05</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaCumulative Example </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaHorizontalBar.png">GratiaHorizontalBar.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaHorizontalBar.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 19.1&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:06</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaHorizontalBar Example </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaPie.png">GratiaPie.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaPie.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 98.8&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:07</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaPie Example </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaStackedBar.png">GratiaStackedBar.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaStackedBar.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 60.7&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:08</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaStackedBar Example </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaStackedLine.png">GratiaStackedLine.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaStackedLine.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 138.3&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:09</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaStackedLine Example </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1 twikiLast"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/QualityMap.png">QualityMap.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2 twikiLast"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=QualityMap.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3 twikiLast"> 44.9&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4 twikiLast"> <span class="twikiNoBreak">25 Feb 2015 - 08:04</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5 twikiLast"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol twikiLast"> QualityMap Example </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
</div></div> <!--/twistyPlugin--></div><!--//twikiAttachments--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaWebAddQuery?t=1487218257;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Accounting/GratiaWebAddQuery' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Accounting/GratiaWebAddQuery?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Accounting/GratiaWebAddQuery?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r10&nbsp;<a rel="nofollow" href="/bin/rdiff/Accounting/GratiaWebAddQuery?rev1=10;rev2=9">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?rev=9">r9</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Accounting/GratiaWebAddQuery?rev1=9;rev2=8">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?rev=8">r8</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Accounting/GratiaWebAddQuery?rev1=8;rev2=7">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?rev=7">r7</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/Accounting/GratiaWebAddQuery?rev1=7;rev2=6">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?rev=6">r6</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Accounting/GratiaWebAddQuery?template=backlinksweb' rel='nofollow' title='Search the Accounting Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaWebAddQuery' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Accounting/GratiaWebAddQuery?template=oopsmore&amp;param1=10&amp;param2=10' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r10 - 25 Feb 2015 - 08:13:28 - <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top"><br/>Register</a>
<p />
<p />
<!-- Google CSE Search Box Ends
<h5><a name="Common_links"></a> Common links </h5> <ul>
<li> <a href="/bin/view/Main/WebHome" class="twikiLink">OSG TWiki home</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome" class="twikiLink">RPM Install guides - OSG 3.0</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Pacman Install guides OSG 1.2</a>
</li> <li> <a href="/bin/view/Documentation/WebHome" class="twikiLink">Technical Documentation</a>
</li> <li> <a href="/bin/view/Documentation/SiteAdminResources" class="twikiLink">Contact Info</a> 
</li> <li> <strong><a href="/bin/view/Main/ICantFindItForm" class="twikiLink">I can't find it!</a></strong>  -->
</li></ul> 
<div class="container">
<div class="box rounded bordered" id="menu">
    <div class="box rounded-top high-contrast" id="head"><a href="/bin/view/Accounting/WebHome" class="twikiCurrentWebHomeLink twikiLink">Accounting</a></div>
    <div id="item"><a href="/bin/view/Accounting/WebHome#Goals" class="twikiCurrentWebHomeLink twikiAnchorLink">Goals</a></div>
    <div id="item"><a href="/bin/view/Accounting/MeetingMinutes" class="twikiLink">Meetings</a></div>
    <div id="item"><a href="http://gratia-osg-prod.opensciencegrid.org/" target="_top">Production Reports</a></div>
    <div id="item"><a href="/bin/view/Accounting/WebHome#Contact_information_and_mailing" class="twikiCurrentWebHomeLink twikiAnchorLink">Contacts</a></div>
</div>
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="Home">About the OSG</a></div>
        <div id="item"><a  style="" href="/bin/view/Documentation/UsingTheGrid" class="twikiLink" title="Instructions for Using OSG">New Users</a></div>
        <div id="item"><a href="http://myosg.grid.iu.edu/map?map_attrs_shownr=on&amp;all_sites=on&amp;active=on&amp;active_value=1&amp;disable_value=1&amp;gridtype=on&amp;gridtype_1=on" target="_top">OSG Sites</a></div>
        <div id="item"><a  style="" href="http://myosg.grid.iu.edu/vosummary?all_vos=on&amp;active=on&amp;active_value=1&amp;datasource=summary" target="_top" title="List of Virtual Organizations">OSG VOs</a></div>
        <div id="item"><a href="http://display.grid.iu.edu/" target="_top">OSG Usage Graphs</a></div>
        <div id="item"><a  style="" href="https://indico.fnal.gov/categoryDisplay.py?categId=86" target="_top" title="OSG Event Calendar">Events</a></div>
       <div id="item"><a href="/bin/view/Management/OSGOrganizationInformation" class="twikiLink">OSG Organization</a></div>
<p />
    </div>
<p />
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head">OSG at Work</div>
        <div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Official Documentation Home">Technical Documentation</a></div>
        <div id="item"><a href="/bin/view/Security/WebHome" class="twikiLink">Security</a></div>
        <div id="item"><a href="/bin/view/SoftwareTeam/WebHome" class="twikiLink">Software Team</a></div>
        <div id="item"><a href="/bin/view/Education/WebHome" class="twikiLink">Education</a></div>
        <div id="item"><a href="/bin/view/Management/WebHome" class="twikiLink">Management</a></div>
        <div id="item"><a  style="" href="/bin/view/Management/ScientificPublications" class="twikiLink" title="Scientific Publications and Citing OSG">Scientific Publications</a></div>
        <div id="item"><a href="/bin/view/Management/OSGResearchHighlights" class="twikiLink">Research Highlights</a></div>
    </div>
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Accounting/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Accounting/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Accounting/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Accounting/GratiaWebAddQuery"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Accounting/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Accounting" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Accounting"></a>  <a href="/bin/view/Accounting/WebHome" class="twikiCurrentWebHomeLink twikiLink">Accounting</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaWebAddQuery?t=1487218257;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Accounting/GratiaWebAddQuery" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Accounting/GratiaWebAddQuery?pdftitle=GratiaWebAddQuery" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>