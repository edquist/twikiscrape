<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaWebAddQuery &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaWebAddQuery?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaWebAddQuery" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaWebAddQuery"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--TABLEPLUGIN_twikiAttachmentsTable--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#twikiAttachmentsTable td {border-style:solid none;}
.twikiTable#twikiAttachmentsTable th {border-style:solid none;}
.twikiTable#twikiAttachmentsTable td {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable th {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable td {vertical-align:top;}
.twikiTable#twikiAttachmentsTable th {background-color:#eceef2;}
.twikiTable#twikiAttachmentsTable th.twikiSortedCol {background-color:#e0e3e9;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#f2f3f6;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol0 {text-align:center;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol1 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol2 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol3 {text-align:right;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol4 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol5 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol6 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol7 {text-align:center;}
</style></head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Guide_to_create_a_new_Query_in_G"></a> Guide to create a new Query in Gratia Web </h1>
The Gratia Web queries are defined in XML files. These files are located at in the <code>OSG-Measurements-Metrics</code> project in this path <code>./src/gratia/config</code>. If you are working in a machine with a working installation these files will be located in the <code>site-packages</code> folder of the python installation in the machine. For example in a SL5 machine with python 2.4 the path would be <code>/usr/lib/python2.4/site-packages/gratia/config</code>, or in a SL6 machine with python 2.6 it would be <code>/usr/lib/python2.6/site-packages/gratia/config</code>.
<p />
on     After modifying the XML files the server will require a restart to load the changes made to the queries.
<p />
The queries are organized in different groups. Each group has a correspondent XML file that defines the queries. These groups and the related XML files are:
<p /> <ul>
<li>  <code>GratiaStatusQueries --&gt; gratia_status_queries.xml</code>
</li> <li>  <code>GratiaEventsQueries --&gt; gratia_events_queries.xml</code>
</li> <li>  <code>GratiaDataQueries --&gt; gratia_data_queries.xml</code>
</li> <li>  <code>GratiaPieQueries --&gt; gratia_pie_queries.xml</code>
</li> <li>  <code>GratiaGlideinBarQueries --&gt; gratia_glidein_bar_queries.xml</code>
</li> <li>  <code>GratiaBarQueries --&gt; gratia_bar_queries.xml</code>
</li> <li>  <code>GratiaRTQueries --&gt; gratia_realtime_queries.xml</code>
</li> <li>  <code>GratiaTransferQueries --&gt; gratia_transfer_queries.xml</code>
</li> <li>  <code>GratiaCumulativeQueries --&gt; gratia_cumulative_queries.xml</code>
</li> <li>  <code>GridScanQueries --&gt; gridscan_queries.xml</code>
</li> <li>  <code>GIPQueries --&gt; gip_queries.xml</code>
</li> <li>  <code>RSVQueries --&gt; rsv_queries.xml</code>
</li> <li>  <code>RSVWLCGQueries --&gt; rsv_wlcg.xml</code>
</li> <li>  <code>RSVSummaryQueries --&gt; rsv_summary.xml</code>
</li></ul> 
<p />
This queries groups is defined in <code>text_queries.xml</code>, and can be examined on a running server on <code>http://ip:[port]/gratia/xml</code>.
<pre class="file">
<font color="#0000ff">&lt;graphtool-config&gt;</font>  
  ...
  <font color="#0000ff">&lt;class <font color="#800080">type=</font><font color="#008000">"XmlGenerator"</font> <font color="#800080">name=</font><font color="#008000">"query_xml"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"timeout"</font>&gt;</font>900<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaStatusQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaEventsQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaDataQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaPieQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaGlideinBarQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaBarQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaRTQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaTransferQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GratiaCumulativeQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GridScanQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> GIPQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> RSVQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> RSVWLCGQueries <font color="#0000ff">&lt;queryobj&gt;</font>
    <font color="#0000ff">&lt;queryobj&gt;</font> RSVSummaryQueries <font color="#0000ff">&lt;queryobj&gt;</font>
  <font color="#0000ff">&lt;class&gt;</font>
  ...
<font color="#0000ff">&lt;/graphtool-config&gt;</font>
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Modifying_adding_queries_to_an_e"></a> Modifying/adding queries to an existing group </span></h2>
<p />
on     Remember to escape reserved XML characters like <code>'&gt;'</code> and <code>'&lt;'</code> when modifying XML files.
<p />
Most of the queries defined in the different groups extend from queries that are defined in <code>generic_queries.xml</code>. To add a new query to a group you must go to the XML where the group is defined, and add a new <code>&lt;query&gt;</code> node to the <code>&lt;class type="SqlQueries" name="GROUP_NAME"&gt;</code> node.
<pre class="file">
<font color="#0000ff">&lt;graphtool-config&gt;</font>
  ...
  <font color="#0000ff">&lt;class <font color="#800080">type=</font><font color="#008000">"SqlQueries"</font> <font color="#800080">name=</font><font color="#008000">"GROUP_NAME"</font>&gt;</font>
      ...
      <font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"NEW_QUERY_NAME"</font>&gt;</font>
      ...
      <font color="#0000ff">&lt;query&gt;</font>
      ...
  <font color="#0000ff">&lt;class&gt;</font>
  ...
<font color="#0000ff">&lt;/graphtool-config&gt;</font>
</pre>
on     The query name will also be the path to access the query in the URL (<code>http://ip:[port]/gratia/xml/<b>&lt;query_name&gt;</b></code>). Do not use spaces or special characters in the query name. Do not use a query name that is already in use by other query.
<p />
Query can inherit all of its attributes from another query. To do this you must include the <code>base</code> attribute and reference <font color="#ff0000">GroupName</font>.<font color="#996633">query_to_extend</font>.
<pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"NEW_QUERY_NAME"</font> <font color="#800080">base=</font><font color="#008000">"<font color="#ff0000">GroupName</font>.<font color="#996633">query_to_extend</font>"</font>&gt;</font>
...
...
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"user_site_quality"</font> <font color="#800080">base=</font><font color="#008000">"<font color="#ff0000">GratiaSecureStorageQuery</font>.<font color="#996633">user_summary</font>"</font>&gt;</font>
</pre>
To define the inputs, the SQL, and other query metadata. The <code>query</code> node is composed of the following nodes:
<p />
<h3><a name="Query_inputs_tag"></a> Query <code>inputs</code> tag </h3>
This nodes defines all the input variables that will be included by default in the query. The <code>inputs</code> node is composed of <code>input</code> nodes. An input node can be defined using the following attributes.  <ul>
<li> <strong>name (REQUIRED):</strong> The name of the input parameter. Must not contain spaces nor special characters. Must be unique per each query
</li> <li> <strong>type (OPTIONAL):</strong> The type of the input parameter. If not specified will default to string. The accepted values are: <ul>
<li> <strong>int</strong>
</li> <li> <strong>float</strong>
</li> <li> <strong>eval:</strong> Will try to evaluate the expression using the python buiultin <code>eval()</code> function. Will try to evaluate with the following call <code>eval(str(<font color="#ff0000">INPUT_PARAMETER</font>),{'__builtins__':None,'time':time},{})</code>.
</li> <li> <strong>datetime:</strong> Will try to parse the input parameter to a datetime python object. Will accept a timestamp in seconds, a date-time string with the following format <code>'%Y-%m-%d %H:%M:%S'</code> or and expression like <code>time.time()</code> or <code>time.time()-2*86400</code>.
</li> <li> <strong>timestamp:</strong> Will try to parse the input parameter to a datetime python object, like the <code>datetime</code> type, but will get the timestam of the datetime afterwards.
</li> <li> <strong>bool/boolean:</strong> Will accept either <code>bool</code> or <code>boolean</code> as type, do not use the string <code>"bool/boolean"</code>. The only accepted string values are <code>false</code> or <code>true</code>
</li></ul> 
</li> <li> <strong>kind (OPTIONAL):</strong> The only accepted value is <code>"sql"</code>. If it is not specified, the input parameters will be able to be used in any python callback function, but will not be included in the SQL query parameters for the query. If specified with <code>kind="sql"</code> it will be available to usage in the SQL query as <code>:input_parameter_name</code>.
</li> <li> <strong>partial (OPTIONAL):</strong> Only for <strong>datetime</strong> parameters. Only works if there is a numeric parameter named <code>span</code>. Values accepted are: <ul>
<li> <strong>down:</strong> If <code>span</code> is exactly <code>3600</code> will set the datetime object minutes and seconds to 0:0. If  <code>span</code> is bigger than <code>3600</code> will set the datetime object hours, minutes and seconds to 0:0:0.
</li> <li> <strong>up:</strong> If <code>span</code> is exactly <code>3600</code> will set the datetime object minutes and seconds to 59:59. If  <code>span</code> is bigger than <code>3600</code> will set the datetime object hours, minutes and seconds to 23:59:59.
</li></ul> 
</li></ul> 
<h4><a name="Example"></a> Example: </h4>
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Inputs Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Inputs example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"site_summary"</font>&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"span"</font> <font color="#800080">type=</font><font color="#008000">"int"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>3600<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-13*86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">partial=</font><font color="#008000">"up"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> Unknown <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> other <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
    SELECT
    ....
 <font color="#0000ff">&lt;query&gt;</font>
</pre>
</div></div> <!--/twistyPlugin-->
<h3><a name="Query_sql_tag"></a> Query <code>sql</code> tag </h3>
If you are creating a new query that does not inherit from other queries you must specify the SQL query here. You can leave slots that can be filled by child queries. To do this you must include a <code>slot</code> tag. This tag only requires a name attribute that must not included spaces nor special characters. There can be multiple slots with the same name. 
To fill this slots from a child query you can use a <code>filler</code> tag with the name of the slot that want to be filled. 
on     Non filled slots will be replaced with empty strings. This could lead to a syntax error on the SQL query when executed. 
The SQL query text can include references to the input parameters with  <code>:input_parameter_name</code>. The input parameter must specify the <code>kind="sql"</code> attribute to be used.
<h4><a name="Example_AN1"></a> Example: </h4>
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery2show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent Query Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery2hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent Query example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery2toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="file">
 <font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"site_summary"</font>&gt;</font>
      ...
      <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    SELECT
      <font color="#ff0000">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      truncate( unix_timestamp(StartTime) / <font color="#996633">:span</font>, 0 ) * <font color="#996633">:span</font> as time,
      <font color="#996633">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
    FROM
      MasterTransferSummary R FORCE INDEX (index01)
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"JOIN"</font>&gt;</font>
    WHERE
      StartTime &amp;gt;= <font color="#996633">:starttime</font> AND
      StartTime &amp;lt; <font color="#996633">:endtime</font> AND 
      S.SiteName=<font color="#996633">:facility</font> AND
      VO.VOName regexp <font color="#996633">:vo</font> AND
      (NOT (VO.VOName regexp <font color="#996633">:exclude-vo</font>)) AND
      CommonName regexp <font color="#996633">:user</font>
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
    GROUP BY
      <font color="#ff0000">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      time
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"results_parser"</font>&gt;</font>
  ...
<font color="#0000ff">&lt;query&gt;</font>
</pre>
</div></div> <!--/twistyPlugin-->
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery3show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child Query Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery3hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child Query example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery3toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"site_user_transfer_quality"</font> <font color="#800080">base=</font><font color="#008000">"GratiaStorageQuery.site_summary"</font>&gt;</font>
  ...
  <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#ff0000">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font> DN <font color="#ff0000">&lt;filler&gt;</font>
    <font color="#996633">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
      sum(CASE StatusCode WHEN 0 THEN 1 ELSE 0 END) as Successes,
      sum(CASE StatusCode WHEN 0 THEN 0 ELSE 1 END) as Failures
    <font color="#996633">&lt;filler&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  ...
<font color="#0000ff">&lt;query&gt;</font>
</pre>
</div></div> <!--/twistyPlugin-->
<h3><a name="Query_results_and_attribute_tags"></a> Query <code>results</code> and <code>attribute</code>  tags </h3>
This tag defines how results must be transformed after they are retrieved from the database. This data transformation is required by <code>graphtool</code> to generate the plots. Moreover, this allows to transform the data that come from the database to format, join data with external data sources (like OIM), or do additional calculations. <code>graphtool</code> offers a group of result parsing functions that are useful depending in the desired kind of plot. 
The <code>attribute</code> tag defines additional METADATA to be include when executing the query and creating the plot. One of this extra parameters is <code>graph_type</code> that defines which kind of plots will be rendered. 
<h4><a name="Plots_Examples"></a> Plots Examples: </h4>
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery4show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show GratiaHorizontalBar Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery4hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide GratiaHorizontalBar example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery4toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<img src="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaHorizontalBar.png" alt="GratiaHorizontalBar.png" width='800' height='500' />     <ul>
<li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery5show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery5hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery5toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
  <font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"simple_master_summary"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-13*86400<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">partial=</font><font color="#008000">"up"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"includeFailed"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>true<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"includeSuccess"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>true<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"probe"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"role"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-role"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>NONE<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>Unknown|unknown|other<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>NONE|Generic|Obsolete<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>NONE<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"resource-type"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>^Batch$<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
      SELECT
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>
      ,
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
      FROM
                MasterSummaryData R
            JOIN
                Probe P on R.ProbeName = P.probename
            JOIN
                Site S on S.siteid = P.siteid
            JOIN
                VONameCorrection VC ON (VC.corrid=R.VOcorrid)
            JOIN
                VO on (VC.void = VO.void)
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"join"</font>&gt;</font>
      WHERE
                R.EndTime &amp;gt;= :starttime AND
                R.EndTime &amp;lt; :endtime AND
                S.SiteName regexp :facility AND
                VO.VOName regexp :vo AND
                VC.VOName regexp :role AND
                (NOT (VC.VOName regexp :exclude-role)) AND
                (R.ResourceType regexp :resource-type or R.ResourceType = '') AND
                (:includeFailed='true' OR ApplicationExitCode=0) AND
                (:includeSuccess ='true' OR ApplicationExitCode!=0) AND
                (NOT (S.SiteName regexp :exclude-facility)) AND
                (NOT (VO.VOName regexp :exclude-vo)) AND
                R.WallDuration &amp;lt; 1100000000 AND
                R.ProbeName regexp :probe AND
                (NOT (R.CommonName regexp :exclude-user)) AND
                R.CommonName regexp :user
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
      GROUP BY
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"having"</font>&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"simple_results_parser"</font>&gt;</font>
      <font color="#0000ff">&lt;inputs&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivots"</font>&gt;</font>0<font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font>1<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;results&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaPie<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
  <font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li> <li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery6show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery6hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery6toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
  <font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"job_avg"</font> <font color="#800080">base=</font><font color="#008000">"GratiaGenericQuery.simple_master_summary"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"min_jobs"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>0<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"max_avg"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>10000<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"fixed-height"</font>&gt;</font>False<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
      <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>COALESCE(R.CommonName, VO.VOName)<font color="#0000ff">&lt;filler&gt;</font>
      <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>sum(Cores*WallDuration)/sum(Njobs)/60<font color="#0000ff">&lt;filler&gt;</font>
      <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"having"</font>&gt;</font>HAVING sum(Njobs) &gt; :min_jobs and sum(Cores*WallDuration)/sum(Njobs)/60 &lt; :max_avg<font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>User Name<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;results&gt;</font>
      <font color="#0000ff">&lt;inputs&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivot_transform"</font>&gt;</font>displayName<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;results&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>Average Job Runtimes<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>Avg Runtime<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>Mins<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaHorizontalBar<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li></ul> 
</div></div> <!--/twistyPlugin-->
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery7show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show GratiaStackedBar Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery7hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide GratiaStackedBar example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery7toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<img src="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaStackedBar.png" alt="GratiaStackedBar.png" width='800' height='500' />   <ul>
<li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery8show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery8hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery8toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"master_summary"</font>&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"span"</font> <font color="#800080">type=</font><font color="#008000">"int"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-13*86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">partial=</font><font color="#008000">"up"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"includeFailed"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> true <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"includeSuccess"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> true <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"probe"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"role"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-role"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> Unknown|unknown|other <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE|Generic|Obsolete <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"resource-type"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> ^Batch$ <font color="#0000ff">&lt;input&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    SELECT
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      truncate( unix_timestamp(EndTime) / :span, 0 ) * :span as time,
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
    FROM
      MasterSummaryData R
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"join"</font>&gt;</font> 
    WHERE
      R.EndTime &amp;gt;= :starttime AND
      R.EndTime &amp;lt; :endtime AND
      S.SiteName regexp :facility AND
      VO.VOName regexp :vo AND
      VC.VOName regexp :role AND
      (NOT (VC.VOName regexp :exclude-role)) AND
      (R.ResourceType regexp :resource-type or R.ResourceType = '') AND
      R.CommonName regexp :user AND
      (:includeFailed='true' OR ApplicationExitCode=0) AND
      (:includeSuccess ='true' OR ApplicationExitCode!=0) AND
      (NOT (S.SiteName regexp :exclude-facility)) AND
      (NOT (R.CommonName regexp :exclude-user)) AND
      (NOT (VO.VOName regexp :exclude-vo)) AND
      R.WallDuration &amp;lt; 1100000000 AND
      R.ProbeName regexp :probe
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
    GROUP BY 
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      time
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"having"</font>&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"results_parser"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivots"</font>&gt;</font> 0 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping"</font>&gt;</font> 1 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font> 2 <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaStackedBar<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li> <li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery9show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery9hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery9toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"vo_facility_hours_bar_smry"</font> <font color="#800080">base=</font><font color="#008000">"GratiaGenericQuery.master_summary"</font>&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font> S.SiteName <font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font> sum(Cores*WallDuration)/3600 <font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font> AND WallDuration &gt; 0 <font color="#0000ff">&lt;filler&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>Facility<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>$vo CPU Hours By Facility<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaStackedBar<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivot_transform"</font>&gt;</font>oim_resource_filter<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping_transform"</font>&gt;</font>make_int<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li></ul> 
</div></div> <!--/twistyPlugin-->
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery10show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show GratiaStackedLine Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery10hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide GratiaStackedLine example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery10toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<img src="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaStackedLine.png" alt="GratiaStackedLine.png" width='800' height='500' />     <ul>
<li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery11show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery11hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery11toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"ts_hourly"</font>&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-2*86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"span"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>3600<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"host"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>.*<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"excludefacility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>ITB<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"excludehost"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>NONE<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"excludevo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>NONE<font color="#0000ff">&lt;input&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    SELECT
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      unix_timestamp(Timestamp),
      sum(MyColumn)
    FROM
      ( SELECT
          MSS.SiteName,
          VO.VOName,
          MSS.CEName,
          Cluster.Name,
          Timestamp,
          (CASE CNC.type WHEN 1 THEN SUM(<font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>) WHEN 2 THEN MAX(<font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>) WHEN 3 THEN SUM(<font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>) END) AS MyColumn
        FROM
          MasterServiceSummaryHourly MSS
          JOIN VONameCorrection VNC on VNC.corrid=MSS.VOcorrid
          JOIN VO on VO.void=VNC.void
          JOIN ClusterNameCorrection CNC on CNC.corrid=MSS.Clustercorrid
          JOIN Cluster on Cluster.clusterid=CNC.clusterid
        WHERE
          Timestamp &gt;= :starttime
          AND Timestamp &amp;lt; :endtime
          AND (MSS.SiteName regexp :facility)
          AND NOT (MSS.SiteName regexp :excludefacility)
          AND (MSS.HostName regexp :host)
          AND NOT (MSS.HostName regexp :excludehost)
          AND (VO.VOName regexp :vo)
          AND NOT (VO.VOName regexp :excludevo)
          <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
        GROUP BY
          VO.VOName,
          Cluster.Name,
          MSS.CEName,
          Timestamp
      ) as foo
    GROUP BY
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      Timestamp
    <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"having"</font>&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"gratia.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"results_parser_fillin"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivots"</font>&gt;</font> 0 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping"</font>&gt;</font> 1 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font> 2 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping_transform"</font>&gt;</font> make_int <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font> GratiaStackedLine <font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>VO.VOName<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"grouping_name"</font>&gt;</font>Time<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li> <li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery12show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery12hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery12toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"status_queue"</font> <font color="#800080">base=</font><font color="#008000">"GratiaStatusGeneric.ts_hourly"</font>&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>RunningJobs<font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>CEName<font color="#0000ff">&lt;filler&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>Queue<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>Count of Running Jobs by Queue<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>Running Jobs<font color="#0000ff">&lt;attribute&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li></ul> 
</div></div> <!--/twistyPlugin-->
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery13show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show GratiaCumulative Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery13hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide GratiaCumulative example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery13toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<img src="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaCumulative.png" alt="GratiaCumulative.png" width='800' height='500' />     <ul>
<li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery14show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery14hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery14toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"jobs_summary_query"</font>&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"span"</font> <font color="#800080">type=</font><font color="#008000">"int"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-13*86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">partial=</font><font color="#008000">"up"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> Unknown|unknown|other <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE|Generic|Obsolete <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"probe"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"resource-type"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> ^Batch$ <font color="#0000ff">&lt;input&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
   SELECT
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      truncate( unix_timestamp(EndTime) / :span, 0 ) * :span as time,
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
    FROM
      MasterSummaryData R
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
    <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"JOIN"</font>&gt;</font>
    WHERE
      (R.ResourceType regexp :resource-type or R.ResourceType = '') AND
      EndTime &amp;gt;= :starttime AND
      EndTime &amp;lt; :endtime AND
      S.SiteName regexp :facility AND
      VO.VOName regexp :vo AND
      R.CommonName regexp :user AND
      (NOT (S.SiteName regexp :exclude-facility)) AND
      (NOT (R.CommonName regexp :exclude-user)) AND
      (NOT (VO.VOName regexp :exclude-vo)) AND
      R.ProbeName regexp :probe AND
      WallDuration &amp;lt; 1100000000
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
    GROUP BY
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      time
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"results_parser"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivots"</font>&gt;</font> 0 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping"</font>&gt;</font> 1 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font> 2 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping_transform"</font>&gt;</font>make_int<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaStackedBar<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"grouping_name"</font>&gt;</font>Time<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li> <li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery15show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery15hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery15toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"facility_count_cumulative_smry"</font> <font color="#800080">base=</font><font color="#008000">"GratiaGenericQuery.jobs_summary_query"</font>&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font> S.SiteName <font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font> sum(Njobs) <font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font> AND Njobs &gt; 0 <font color="#0000ff">&lt;filler&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"cumulative_pivot_group_parser"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivot_transform"</font>&gt;</font>oim_resource_filter<font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping_transform"</font>&gt;</font>make_int<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font> Facility <font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font> Cumulative Number of Jobs By Facility <font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font> Job Count <font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font> GratiaCumulative <font color="#0000ff">&lt;attribute&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li></ul> 
</div></div> <!--/twistyPlugin-->
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery16show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show GratiaPie Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery16hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide GratiaPie example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery16toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<img src="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaPie.png" alt="GratiaPie.png" width='800' height='500' />     <ul>
<li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery17show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery17hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery17toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"simple_master_summary"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-13*86400<font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">partial=</font><font color="#008000">"up"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"includeFailed"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> true <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"includeSuccess"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> true <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"probe"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"role"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-role"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> Unknown|unknown|other <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE|Generic|Obsolete <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-user"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"resource-type"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> ^Batch$ <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
        SELECT
            <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
            <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
        FROM
            MasterSummaryData R
        JOIN
            Probe P on R.ProbeName = P.probename
        JOIN
            Site S on S.siteid = P.siteid
        JOIN
            VONameCorrection VC ON (VC.corrid=R.VOcorrid)
        JOIN
            VO on (VC.void = VO.void)
        <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"join"</font>&gt;</font>
        WHERE
            R.EndTime &amp;gt;= :starttime AND
            R.EndTime &amp;lt; :endtime AND
            S.SiteName regexp :facility AND
            VO.VOName regexp :vo AND
            VC.VOName regexp :role AND
            (NOT (VC.VOName regexp :exclude-role)) AND
            (R.ResourceType regexp :resource-type or R.ResourceType = '') AND
            (:includeFailed='true' OR ApplicationExitCode=0) AND
            (:includeSuccess ='true' OR ApplicationExitCode!=0) AND
            (NOT (S.SiteName regexp :exclude-facility)) AND
            (NOT (VO.VOName regexp :exclude-vo)) AND
            R.WallDuration &amp;lt; 1100000000 AND
            R.ProbeName regexp :probe AND
            (NOT (R.CommonName regexp :exclude-user)) AND
            R.CommonName regexp :user
            <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
        GROUP BY 
            <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>
        <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"having"</font>&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"simple_results_parser"</font>&gt;</font>
        <font color="#0000ff">&lt;inputs&gt;</font>
            <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivots"</font>&gt;</font> 0 <font color="#0000ff">&lt;input&gt;</font>
            <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font> 1 <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;results&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaPie<font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li> <li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery18show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery18hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery18toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"osg_vo_count"</font> <font color="#800080">base=</font><font color="#008000">"GratiaGenericQuery.simple_master_summary"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
        <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-14*86400<font color="#0000ff">&lt;input&gt;</font>
     <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font> VO.VOName <font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font> sum(R.Njobs) <font color="#0000ff">&lt;filler&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font> VO <font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font> Jobs <font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font> Job Count by VO <font color="#0000ff">&lt;attribute&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li></ul> 
</div></div> <!--/twistyPlugin-->
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery19show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show QualityMap Example</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery19hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide QualityMap example</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery19toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<img src="/twiki/pub/Accounting/GratiaWebAddQuery/QualityMap.png" alt="QualityMap.png" width='800' height='620' />    <ul>
<li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery20show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Parent XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery20hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Parent XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery20toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"summary"</font>&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"span"</font> <font color="#800080">type=</font><font color="#008000">"int"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"starttime"</font> <font color="#800080">partial=</font><font color="#008000">"down"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()-13*86400<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"endtime"</font> <font color="#800080">partial=</font><font color="#008000">"up"</font> <font color="#800080">type=</font><font color="#008000">"datetime"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font>time.time()<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"protocol"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> .* <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-vo"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> other <font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"exclude-facility"</font> <font color="#800080">kind=</font><font color="#008000">"sql"</font>&gt;</font> NONE|Generic|Obsolete <font color="#0000ff">&lt;input&gt;</font>
  <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;sql&gt;</font>
   SELECT
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      truncate( unix_timestamp(StartTime) / :span, 0 ) * :span as time,
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
    FROM
      MasterTransferSummary R FORCE INDEX (index01)
    JOIN
      Probe P on R.ProbeName = P.probename
    JOIN
      Site S on S.siteid = P.siteid
    JOIN
      VONameCorrection VC ON (VC.corrid=R.VOcorrid)
    JOIN
      VO on (VC.void = VO.void)
    <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"JOIN"</font>&gt;</font>
    WHERE
      StartTime &amp;gt;= :starttime AND
      StartTime &amp;lt; :endtime AND
      SiteName regexp :facility AND
      R.Protocol regexp :protocol AND
      VO.VOName regexp :vo AND
      (NOT (S.SiteName regexp :exclude-facility)) AND
      (NOT (VO.VOName regexp :exclude-vo))
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"where"</font>&gt;</font>
    GROUP BY
      <font color="#0000ff">&lt;slot <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font>,
      time
  <font color="#0000ff">&lt;sql&gt;</font>
  <font color="#0000ff">&lt;results <font color="#800080">module=</font><font color="#008000">"graphtool.database.query_handler"</font> <font color="#800080">function=</font><font color="#008000">"results_parser"</font>&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivots"</font>&gt;</font> 0 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping"</font>&gt;</font> 1 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font> 2 <font color="#0000ff">&lt;input&gt;</font>
      <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"grouping_transform"</font>&gt;</font>make_int<font color="#0000ff">&lt;input&gt;</font>
    <font color="#0000ff">&lt;inputs&gt;</font>
  <font color="#0000ff">&lt;results&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font>GratiaStackedBar<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"pivot_name"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"grouping_name"</font>&gt;</font>Time<font color="#0000ff">&lt;attribute&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font>
  <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li> <li> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery21show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Child XML</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery21hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Child XML</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery21toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">     <pre class="file">
<font color="#0000ff">&lt;query <font color="#800080">name=</font><font color="#008000">"user_quality"</font> <font color="#800080">base=</font><font color="#008000">"GratiaStorageQuery.summary"</font>&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
        <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"group"</font>&gt;</font> CommonName <font color="#0000ff">&lt;filler&gt;</font>
        <font color="#0000ff">&lt;filler <font color="#800080">name=</font><font color="#008000">"column"</font>&gt;</font>
            sum(CASE R.Status WHEN 0 THEN 1.0 ELSE 0.0 END) as Successes,
            sum(CASE R.Status WHEN 0 THEN 0.0 ELSE 1.0 END) as Failures
        <font color="#0000ff">&lt;filler&gt;</font>
    <font color="#0000ff">&lt;sql&gt;</font>
    <font color="#0000ff">&lt;results&gt;</font>
        <font color="#0000ff">&lt;inputs&gt;</font>
            <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"pivot_transform"</font>&gt;</font>displayName<font color="#0000ff">&lt;input&gt;</font>
            <font color="#0000ff">&lt;input <font color="#800080">name=</font><font color="#008000">"results"</font>&gt;</font> 2, 3 <font color="#0000ff">&lt;input&gt;</font>
        <font color="#0000ff">&lt;inputs&gt;</font>
    <font color="#0000ff">&lt;results&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"graph_type"</font>&gt;</font> QualityMap <font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"fixed-height"</font>&gt;</font> False <font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"title"</font>&gt;</font> Transfer Quality by User <font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_names"</font>&gt;</font> Successful Transfers, Failed Transfers <font color="#0000ff">&lt;attribute&gt;</font>
    <font color="#0000ff">&lt;attribute <font color="#800080">name=</font><font color="#008000">"column_units"</font>&gt;</font> Files, Files <font color="#0000ff">&lt;attribute&gt;</font>
<font color="#0000ff">&lt;query&gt;</font>
     </pre>     </div></div> <!--/twistyPlugin-->
</li></ul> 
</div></div> <!--/twistyPlugin-->
<p />
<h3><a name="XML_Formattig_for_the_Twiki"></a> XML Formattig for the Twiki </h3>
To format XML files to be displayed on the Twiki without syntax checking, and line by line. The following python code could be used.
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdAccountingGratiaWebAddQuery22show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Code</span></a> </span> <span id="twistyIdAccountingGratiaWebAddQuery22hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Code</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdAccountingGratiaWebAddQuery22toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="file">
import re

  # GROUPS                    1  2    3          4                      5    6
pattern_open  = re.compile(r&quot;(&lt;)(\s*)([\w\d_-]+)(\s+[\w\d_-]+=\&quot;.*?\&quot;)*(\s*)(\/&gt;|&gt;)&quot;)
  # GROUPS                    1   2              3
pattern_close = re.compile(r&quot;(&lt;/)(\s*[\w\d_-]+\s*)(&gt;)&quot;)

open_tag      = &quot;&#37;BLUE&#37;&amp;lt;&quot;
close_tag     = &quot;&amp;gt;&#37;ENDCOLOR&#37;&quot;
att_def_open  = &quot;&#37;PURPLE&#37;&quot;
att_text_open = &quot;&#37;GREEN&#37;&quot;
close_color   = &quot;&#37;ENDCOLOR&#37;&quot;

def format_xml_for_twiki(text,first_call=True):
  if first_call:
    text = text.replace(&quot;&amp;&quot;,&quot;&amp;amp;&quot;)
  # Search for the next open tag
  match_open  = pattern_open.search(text)
  if match_open is not None:
    pre_match = text[:match_open.start()]
    pos_match = text[match_open.end():]
    open = open_tag+match_open.group(3)
    close = (&quot;/&quot; if match_open.group(3) == &quot;/&gt;&quot; else &quot;&quot;)+close_tag
    attributes = &quot;&quot;
    attributes_txt =&quot;&quot;
    if match_open.group(4) is not None:
      attributes = text[match_open.end(3):match_open.end(4)].strip()
      for attribute_i in attributes.split():
        parts = attribute_i.split(&quot;=&quot;)
        attributes_txt += &quot; &quot;+att_def_open+parts[0]+&quot;=&quot;+close_color+att_text_open+parts[1]+close_color
    new_text = pre_match+open+attributes_txt+close+pos_match
    # Recursive call to keep searching for more tags
    return format_xml_for_twiki(new_text,False)
  # Search for the next close tag
  match_close = pattern_close.search(text)
  if match_close is not None:
    pre_match = text[:match_close.start()]
    pos_match = text[match_close.end():]
    new_text = pre_match+open_tag+match_close.group(2).strip()+close_tag+pos_match
    # Recursive call to keep searching for more tags
    return format_xml_for_twiki(new_text,False)
  return text.replace(&quot;&lt;&quot;, &quot;&amp;lt;&quot;).replace(&quot;&gt;&quot;, &quot;&amp;gt;&quot;).replace(&quot;\t&quot;,&quot;  &quot;)

if __name__ == &quot;__main__&quot;:
  with open('./in.xml','r') as f:
    lines = f.readlines()
  if lines is not None:
    with open(&quot;./out.txt&quot;, 'w+') as f:
      for line in lines:
        f.write(format_xml_for_twiki(line))
  else:
    print &quot;No lines read from ./in.xml&quot;
</pre>
</div></div> <!--/twistyPlugin-->
<p />
-- <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> - 25 Feb 2015</div><!-- /patternTopic-->
<p />
<p />
<div class="twikinetRounded twikinetRoundedAttachments"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="twikiAttachments">
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="topicattachmentslistshow" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span> <span id="topicattachmentslisthide" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="topicattachmentslisttoggle" class="twistyRememberSetting twistyContent twikiMakeHidden twistyInited">
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table summary="Topic attachments" cellspacing="0" id="twikiAttachmentsTable" cellpadding="0" class="twikiTable" rules="rows" border="1"><caption>Topic attachments</caption>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">I</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attachment</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Action</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=3;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=4;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Date</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol5"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=5;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Who</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol6 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaWebAddQuery?cover=print;sortcol=6;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaCumulative.png">GratiaCumulative.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaCumulative.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 137.1&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:05</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaCumulative Example </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaHorizontalBar.png">GratiaHorizontalBar.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaHorizontalBar.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 19.1&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:06</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaHorizontalBar Example </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaPie.png">GratiaPie.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaPie.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 98.8&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:07</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaPie Example </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaStackedBar.png">GratiaStackedBar.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaStackedBar.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 60.7&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:08</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaStackedBar Example </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/GratiaStackedLine.png">GratiaStackedLine.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=GratiaStackedLine.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 138.3&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">25 Feb 2015 - 08:09</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> GratiaStackedLine Example </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1 twikiLast"> <a href="/twiki/pub/Accounting/GratiaWebAddQuery/QualityMap.png">QualityMap.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2 twikiLast"> <a href="/bin/attach/Accounting/GratiaWebAddQuery?filename=QualityMap.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3 twikiLast"> 44.9&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4 twikiLast"> <span class="twikiNoBreak">25 Feb 2015 - 08:04</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5 twikiLast"> <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol twikiLast"> QualityMap Example </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
</div></div> <!--/twistyPlugin--></div><!--//twikiAttachments--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--></div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaWebAddQuery</span> <br />    
Topic revision: r10 - 25 Feb 2015 - 08:13:28 - <a href="/bin/view/Main/JuanFelipeMosqueraMorales" class="twikiLink">JuanFelipeMosqueraMorales</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />