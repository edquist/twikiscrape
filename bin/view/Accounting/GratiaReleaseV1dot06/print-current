<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaReleaseV1dot06 &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaReleaseV1dot06?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaReleaseV1dot06" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaReleaseV1dot06"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!--
These are general in nature and should be changed in the this template if the location changes:
<p />
These are specific to a release and require changing: <ul>
<li> Set RELEASE_DATE = 2010/07/14
</li> <li> Set CURRENT_RELEASE = v1.06.17
</li> <li> Set RELEASE_TAG = v1-06-17
</li> <li> Set NEXT_DEVEL_VERSION = v1.07
</li></ul> 
<p />
-->
<p />
<h1><a name="Gratia_Release_v1_06_17_2010_07"></a>  Gratia Release v1.06.17 (2010/07/14)<br /> </h1>
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Overview"> Overview</a> <ul>
<li> <a href="?cover=print#Main_Features">Main Features:</a>
</li> <li> <a href="?cover=print#Probe_Improvements"> Probe Improvements:</a> <ul>
<li> <a href="?cover=print#Details"> Details</a>
</li></ul> 
</li> <li> <a href="?cover=print#Collector_Improvements"> Collector Improvements:</a> <ul>
<li> <a href="?cover=print#Pending_explicit_request_from_St"> Pending explicit request from Stakeholders.</a>
</li> <li> <a href="?cover=print#Notices"> Notices</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Anticipated_downtime"> Anticipated downtime</a>
</li> <li> <a href="?cover=print#Upgrade_procedure"> Upgrade procedure</a>
</li></ul> 
</div>
<p />
<p />
<h1><a name="Overview"></a> Overview </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Main_Features"></a> Main Features: </span></h2> <ul>
<li> Maintenance release.
</li> <li> See previous patch release <a href="/bin/view/Accounting/GratiaReleaseV1dot06dot14" class="twikiLink">v1.06.14</a> for changes since v1.04.
</li></ul> 
<p /> <ul>
<li> Implement cutoff date.
</li> <li> Speed up housekeeping deletion (and remove use of temporary table).
</li> <li> Additional housekeeping logging.
</li> <li> Fix occasional problem with inter-service communication caused by premature garbage collection.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Probe_Improvements"></a> Probe Improvements: </span></h2>
<p /> <ul>
<li> Add summarization capability to the dCache probe.
</li> <li> Separate the JobUsageRecord support from the main library which is now GratiaCore.py
</li></ul> 
<p />
<h3><a name="Details"></a> Details </h3>
<p /> <ul>
<li> Tweak ProbeConfig extra items for dCache-transfer probe.
</li> <li> Reorganize GridFtpLogDir config item insertion.
</li> <li> Sleep and configurable DB name for dCache-transfer probe.
</li> <li> Core updates for HTTP timeout waiting for acknowledgement from collector.
</li> <li> Improve connection timeout mesage to avoid confusion.
</li> <li> Improvements to xrootd probe.
</li> <li> Fix for <code>staticmethod</code> (make it work in 2.3).
</li> <li> Fix mechanism intended to avoid corruption caused by reading in-progress log.
</li> <li> Robustness fix to GetNodeData function in Gratia.py.
</li> <li> Fix for exception in debug statements in Gratia.py.
</li> <li> Increase default BundleSize to 100 in ProbeConfigTemplate and Gratia.py.
</li> <li> Remove unecessary dependencies from dCache-storage probe.
</li> <li> EGEE-provided probe is now version-controlled instead of unpackaged and patched from source.
</li> <li> Unused GridftpTransfer.sh script removed prior to final packaging.
</li> <li> Condor probe security fixes from Wisconsin.
</li> <li> Add gratia-probe-services as a dependency to the xrootd-storage probe
</li> <li> Fix to cron scripts for WorkingFolder discovery in dCache-storage and gridftp-transfer cron scripts.
</li> <li> Remove erroneous ITB tag for services API package.
</li> <li> Better use of lock files in *_cron.sh.
</li> <li> Fixes and updates to dCache-storage probe, including addition of README file to package.
</li> <li> Added redesigned xrootd-transfer probe
</li> <li> Minor updates for the xrootd-storage probe found in testing.
</li> <li> Fix to condor probe for standalone (non-VDT) operation.
</li></ul> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Collector_Improvements"></a> Collector Improvements: </span></h2>
<p /> <ul>
<li> Add a publicly available summary of the replication 
</li></ul> 
<p /> <ul>
<li> In addition to the expiration date, when there is a limited retention of the records,
</li></ul> 
we also reject the records that are in the future.  For now, the rejection is set to
the same duration as the expiration.  For example if the service.lifetime.JobUsageRecord is
set to 3 months, we reject all JobUsageRecord that are either set more than 3 months in
the past or more than 3 months in the future.
<p /> <ul>
<li> Increase the default batch size for row deletion from 200 to 1000.
</li> <li> Change the default fault batch size for _Xml row deletion to 100000.
</li></ul> 
<p /> <ul>
<li> Introduce the 2 customizable parameters:
</li></ul> 
<p /> <ul>
 <li>
 <ul>
<li> service.lifetimeManagement.BatchSize and service.lifetimeManagement.XmlBatchSize
</li></ul> 
</li></ul> 
<p /> <ul>
<li> Add an index to quickly find empty ExtraXml
</li></ul> 
<p /> <ul>
<li> Rework the row deletion from RecordType_Xml.
</li></ul> 
<p /> <ol>
 <li>
 <ol>
<li type="a"> We no longer keep the row when the EndTime is greater than the ServerDate (and EndTime was greater than the cutoff date).
</li> <li type="a"> We no longer use a temporary table.
</li> <li type="a"> Improve the 'limited' delete query by using a dbid range to restrict the searches. <ol>
<li> We find the maximum plausible dbid by searching in RecordType_Meta for the dbid clause to or equal to the limit date
</li> <li> We find the minimum plausible dbid by searching in RecordType_Xml for the first dbid with ExtraXml==""
</li> <li>  the delete query where clause is: ExtraXml = "" and ServerDate &lt; :dateLimit and :mindbid &lt;= X.dbid and X.dbid &lt; :maxdbid
</li></ol> 
</li></ol> 
</li></ol> 
<p /> <ul>
<li> On gr8x0 the current (typical rate) are (for a Transfer record database): <ul>
<li> JobUsageRecord_Xml 10000 rows per second (so for a typical transaction time of 10s).
</li> <li> JobUsageRecord_Meta  120 rows per second (so for a typical transaction time of  9s).
</li> <li> The other deletion are more than 1000 rows per seconds such that the total time is completely dominated by _Meta.
</li></ul> 
</li></ul> 
<p /> <ul>
<li> Add index ComputeElement(UniqueID, Timestamp)
</li></ul> 
<p /> <ul>
<li> Fix lifetime of RMI proxy object used for inter-service communication.
</li></ul> 
<p />
<h3><a name="Pending_explicit_request_from_St"></a> Pending explicit request from Stakeholders. </h3> <ul>
<li> Improve response time of Status page.
</li> <li> Automatic table optimization (schedulable, abortable, triggerable) [Insert will be disabled during optimization]
</li> <li> Automatic sync of VONameCorrection table and info OIM.
</li></ul> 
<p />
<h3><a name="Notices"></a> Notices </h3>
<p /> <ul>
<li> Web Services <strong>must</strong> be improved to pass the cert info along to the Gratia Accounting Probes.
</li></ul> 
<p />
<h1><a name="Anticipated_downtime"></a> Anticipated downtime </h1>
It is expected that this release will require the Gratia services and reporting to be unavailable beginning at: <ul>
<li> Start: 2010/07/14  09:00 CDT (14:00 UTC)
</li> <li> Available: 2010/07/14 TBA
</li></ul> 
<p />
The changes affecting downtime for this release are: <ol>
<li> Installation and validation on each collector / reporter.
</li> <li> Upgrade of each schema to add an index to JobUsageRecord_Xml.
</li></ol> 
<p />
During this upgrade, the legacy redirectors dealing with probes sending to old addresses / ports will be decommissioned.
<p />
<h1><a name="Upgrade_procedure"></a> Upgrade procedure </h1>
<p />
[ Note: all times are CDT ]
<p />
<ol>
<li>Pre-load kernels on all VMs and dom0s.
<dl compact>
<dt><font color="#ff0000">08:40</font></dt>
<dd><tt>yum upgrade</tt> in progress.</dd>
<dt><font color="#ff6600">08:50</font></dt>
<dd>Check grub configurations.</dd>
<dt><font color="#008000">08:56</font></dt>
<dd>Complete.</dd>
</dl>
<li>Deactivate, disable, shut down and remove configs from /etc/xen/auto gr12x2 and gr13x2, the HA legacy redirector VMs.</li>
<dl compact>
<dt><font color="#ff0000">09:00</font></dt>
<dd>Remove <tt>gratia12:/etc/xen/auto/gr12x2</tt> and <tt>gratia13:/etc/xen/auto/gr13x2</tt>.</dd>
<dt><font color="#ff0000">09:12</font></dt>
<dd>Shutdown and remove LVS on gr12x2 and gr13x2.</dd>
<dt><font color="#008000">09:15</font></dt>
<dd>Shutdown gr12x2 and gr13x2.</dd>
</dl>
<li>Fail the reporting-DB IP over to the collector DB.</li>
<dl compact>
<dt><font color="#ff0000">09:17</font></dt>
<dd>Execute <tt>/usr/share/heartbeat/hb_takeover</tt> on gr10x5 and gr12x5.</dd>
<dt><font color="#ff6600">09:18</font></dt>
<dd>Verify IPs have switched and connections have gone on gr11x5 and gr13x5.</dd>
<dt><font color="#008000">09:21</font></dt>
<dd>Complete.</dd>
</dl>
<li>Stop slave on reporting DB. Check no open temporary tables. Stop reporting DB.</li>
<dl compact>
<dt><font color="#ff0000">09:22</font></dt>
<dd>Execute <tt>slave stop;</tt> on gr11x5 and gr13x5.</dd>
<dt><font color="#ff6600">09:22</font></dt>
<dd>Verify no temporary tables open with <tt>SHOW STATUS LIKE '%slave_open_temp_tables%';</tt>.</dd>
<dt><font color="#008000">09:24</font></dt>
<dd>Shut down DBs on gr11x5 and gr13x5.</dd>
</dl>
<li>Institute IPtables rules on collector IPs to ignore SYNs on port 80/443.</li>
<dl compact>
<dt><font color="#ff0000">09:30</font></dt>
<dd>Execute <tt>iptables -I INPUT 1 -p tcp --syn --destination-port 80 -j DROP; iptables -I INPUT 2 -p tcp --syn --destination-port 443 -j DROP</tt> on all collectors.</dd>
<dt><font color="#008000">09:32</font></dt>
<dd>Complete.</dd>
</dl>
<li>Wait 15 minutes or until there are no remaining connections to 80/443.</li>
<dl compact>
<dt><font color="#008000">09:35</font></dt>
<dd>Verified no established connections on collectors.</dd>
</dl>
<li>Fail the reporting services over to the collector VMs (collector services will restart, reporting services will stop).</li>
<dl compact>
<dt><font color="#ff0000">09:36</font></dt>
<dd>Execute <tt>/usr/share/heartbeat/hb_takeover</tt> on all collectors.</dd>
<dt><font color="#ff0000">09:40</font></dt>
<dd>Restart failed heartbeat on gr12x1, gr12x3. Shoot recalcitrant gr13x1 collector inna head.</dd>
<dt><font color="#ff6600">09:55</font></dt>
<dd>Verify correct transfer of operations.</dd>
<dt><font color="#008000">09:57</font></dt>
<dd>Complete.</dd>
</dl>
<li>Temporarily remove SYN-blocking.</li>
<dl compact>
<dt><font color="#008000">10:02</font></dt>
<dd>Execute <tt>iptables -D INPUT 2; iptables -D INPUT 1</tt> on collectors.</dd>
</dl>
<li>Verify reporting URLs work as expected.</li>
<dl compact>
<dt><font color="#008000">10:05</font></dt>
<dd>Complete.</dd>
</dl>
<li>Reboot reporting dom0, ensuring heartbeat does not cause trouble as it comes back.</li>
<dl compact>
<dt><font color="#ff0000">10:05</font></dt>
<dd>Execute reboot.</dd>
<dt><font color="#ff6600">10:25</font></dt>
<dd>Verify all reporting dom0, VMs have restarted. gr11x5 (Fermi reporting DB) doing disk check.<br/>
    Fermi collector heartbeats failed back to reporting VMs. Possibility of stuck probes, maybe. Will need to check after upgrade is complete.</dd>
</dl>
<dt><font color="#008000">11:05</font></dt>
<dd>gr11x5 returned.</dd>
<li>Re-institute SYN-blocking on collector IPs 80/443.</li>
<dl compact>
<dt><font color="#008000">10:40</font></dt>
<dd>Executed <tt>iptables -I INPUT 1 -p tcp --syn --destination-port 80 -j DROP; iptables -I INPUT 2 -p tcp --syn --destination-port 443 -j DROP</tt> on all collectors.</dd>
</dl>
<li>Fail reporting-DB IP back to reporting DB.</li>
<dl compact>
<dt><font color="#ff0000">10:45</font></dt>
<dd>Execute takeover on gr13x5 ONLY (OSG); gr11x5 is still checking disk.</dd>
<dt><font color="#ff6600">10:46</font></dt>
<dd>Verified gr13x5 took over operations properly.</dd>
<dt><font color="#ff0000">11:10</font></dt>
<dd>Execute takeover on gr11x5.</dd>
<dt><font color="#008000">11:14</font></dt>
<dd>Verified gr11x5 took over operations properly.</dd>
</dl>
<li>Stop slave on reporting DB. This will remain off until collector service is restored.</li>
<dl compact>
<dt><font color="#008000">10:50</font></dt>
<dd>Slave stopped and verified no temporary tables open on gr13x5.</dd>
<dt><font color="#008000">11:13</font></dt>
<dd>Slave stopped and verified no temporary tables open on gr11x5.</dd>
</dl>
<li>Upgrade reporting services <strong>without</strong> restarting.</li>
<dl compact>
<dt><font color="#ff0000">10:50</font></dt>
<dd>Execute <tt>gratia-ops/upgrade-osg-reporting v1.06.17</tt> (execution machine irrelevant).</dd>
<dt><font color="#008000">10:55</font></dt>
<dd>Upgrades complete on gr13xN (OSG).</dd>
<dt><font color="#ff0000">11:15</font></dt>
<dd>Fail reporting on gr11xN back to gr10xN (special step because heartbeat screwed up earlier).</dd>
<dt><font color="#ff6600">11:20</font></dt>
<dd>Complete.</dd>
<dt><font color="#ff0000">11:25</font></dt>
<dd>Execute <tt>gratia-ops/upgrade-fermi-reporting v1.06.17</tt> (execution machine irrelevant).</dd>
<dt><font color="#008000">11:29</font></dt>
<dd>Complete.</dd>
</dl>
<li>Wait 15 minutes or until there are no remaining connections to 80/443.</li>
<dl compact>
<dt><font color="#008000">11:00</font></dt>
<dd>Verified no established connections on collectors.</dd>
</dl>
<li>Fail reporting services back to the reporting VMs, ensuring new reporting services start correctly.</li>
<dl compact>
<dt><font color="#ff0000">11:05</font></dt>
<dd>Execute takeover on gr13xN (OSG).</dd>
<dt><font color="#008000">11:15</font></dt>
<dd>Takeover on gr13xN complete.</li>
<dt><font color="#ff0000">11:30</font></dt>
<dd>Execute takeover on gr11xN (Fermi).</dd>
<dt><font color="#008000">11:40</font></dt>
<dd>Takeover on gr11xN complete.</li>
</dl>
<li>Shut down collectors on collector VMs and upgrade <strong>without</strong> restarting.</li>
<dl compact>
<dt><font color="#ff0000">11:46</font></dt>
<dd>Execute <tt>gratia-ops/upgrade-fermi-collectors v1.06.17</tt> (execution machine irrelevant).</dd>
<dt><font color="#ff0000">11:54</font></dt>
<dd>Execute <tt>gratia-ops/upgrade-osg-collectors v1.06.17</tt> (execution machine irrelevant).</dd>
<dt><font color="#008000">11:58</font></dt>
<dd>Upgrade complete on OSG collectors.</dd>
<dt><font color="#008000">12:04</font></dt>
<dd>Upgrade complete on Fermi collectors.</dd>
</dl>
<li>Temporarily remove collectors from rcN.d until after reboot.</li>
<dl compact>
<dt><font color="#008000">11:58</font></dt>
<dd>Executed <code>chkconfig tomcat-gratia off</code> on gr12xN.</dd>
<dt><font color="#008000">12:04</font></dt>
<dd>Executed <code>chkconfig tomcat-gratia off</code> on gr10xN.</dd>
</dl>
<li>Manually stop mysqld on collector DBs (may take a while).</li>
<dl>
<dt><font color="#008000">12:01</font></dt>
<dd>Complete on gr12x5.</dd>
<dt><font color="#008000">12:06</font></dt>
<dd>Complete on gr10x5.</dd>
<li>Reboot collector dom0, ensuring heartbeat does not cause problems.</li>
<dl compact>
<dt><font color="#ff0000">12:02</font></dt>
<dd>Reboot initiated on gratia12 (OSG).</dd>
<dt><font color="#ff0000">12:06</font></dt>
<dd>Reboot initiated on gratia10 (OSG).</dd>
<dt><font color="#008000">12:12</font></dt>
<dd>Complete for gratia12 and VMs.</dd>
<dt><font color="#008000">12:14</font></dt>
<dd>Complete for gratia10 and VMs.</dd>
</dl>
<li>Ensure collectors are configured to come back in collector-only mode.</li>
<dl compact>
<dt><font color="#008000">12:20</font></dt>
<dd>Heartbeat and collector status verified as correct for all collectors and reporters. Heartbeat had to be chkconfigged on and restarted on gr12x1 and gr12x3.</dd>
</dl>
<li>Re-enable rcN.d scripts on collector VMs.</li>
<dl compact>
<dt><font color="#008000">12:25</font></dt>
<dd>Complete.</dd>
</dl>
<li>Start collectors.</li>
<dl compact>
<dt><font color="#ff0000">12:23</font></dt>
<dd>Start <tt>osg-daily</tt> collector first as a mine canary.</dd>
<dt><font color="#008000">12:23</font></dt>
<dd>Collector <tt>osg-daily</tt> ready for data.</dd>
<dt><font color="#ff0000">12:26</font></dt>
<dd>Start all other collectors on gr10xN and gr12xN.</dd>
<dt><font color="#008000">12:28</font></dt>
<dd>Collector <tt>fermi-itb</tt> ready for data.</dd>
<dt><font color="#008000">12:28</font></dt>
<dd>Collector <tt>fermi-qcd</tt> ready for data.</dd>
<dt><font color="#008000">12:38</font></dt>
<dd>Collector <tt>fermi-psacct</tt> ready for data.</dd>
<dt><font color="#008000">12:44</font></dt>
<dd>Collector <tt>osg-itb</tt> ready for data.</dd>
<dt><font color="#008000">13:36</font></dt>
<dd>Collector <tt>fermi-osg</tt> ready for data.</dd>
<dt><font color="#008000">15:12</font></dt>
<dd>Collector <tt>fermi-transfer</tt> ready for data.</dd>
<dt><font color="#008000">18:24</font></dt>
<dd>Collector <tt>osg-prod</tt> ready for data.</dd>
<dt><font color="#008000">21:51</font></dt>
<dd>Collector <tt>osg-transfer</tt> ready for data. Collector had to be restarted after index completion due to a probable timed-out connection.</dd>
</dl>
<li>When most collectors are responding to incoming data, fail reporting-DB IP over to collector DB and start DB replication.</li>
<dl compact>
<dt><font color="#008000">15:30</font></dt>
<dd>All Fermi schemata finished: Fermi reporting DB IP failed over and slave started.</dd>
<dt><font color="#008000">19:08</font></dt>
<dd>All OSG schemata finished except <tt>osg-transfer</tt>: OSG reporting DB IP failed over and slave started.</dd>
</dl>
<li>When seconds_behind_master -&gt; 0 fail reporting-DB IP back to reporting DB.</li>
<dl compact>
<dt><font color="#008000">19:27</font></dt>
<dd>gr11x5 DB has caught up; reporting IP failed back and backups rescheduled.</dd>
<dt><font color="#008000">10:13</font></dt>
<dd>gr13x5 DB has caught up; reporting IP failed back and backups rescheduled.</dd>
</dl>
</ol>
<p />
<p />
<p />
<p />
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_updates"></a>  Major updates </span></h2>
<!--Future editors should add their signatures beneath yours!--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Accounting/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaReleaseV1dot06</span> <br />    
Topic revision: r22 - 02 Nov 2010 - 15:47:32 - <span class="twikiNewLink">DanYocum<a href="/bin/edit/Accounting/DanYocum?topicparent=Accounting.GratiaReleaseV1dot06" rel="nofollow" title="DanYocum (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />