<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> Minutes2008Feb20 &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/Minutes2008Feb20?_T=16 Feb 2017" type="application/x-wiki" title="edit Minutes2008Feb20" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/Minutes2008Feb20"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Minutes2008Feb20"></a> Minutes2008Feb20 </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Introduction">Introduction</a>
</li> <li> <a href="?cover=print#Attending">Attending</a>
</li> <li> <a href="?cover=print#Apologies">Apologies</a>
</li> <li> <a href="?cover=print#Action_items_from_previous_meeti">Action items from previous meeting:</a>
</li> <li> <a href="?cover=print#DB_and_Schema_issues">DB and Schema issues</a>
</li> <li> <a href="?cover=print#OSG_Issues">OSG Issues</a>
</li> <li> <a href="?cover=print#Collector">Collector</a>
</li> <li> <a href="?cover=print#Report_development">Report development</a>
</li> <li> <a href="?cover=print#Probes">Probes</a>
</li> <li> <a href="?cover=print#Test_Bed">Test Bed</a>
</li> <li> <a href="?cover=print#Any_Other_Business">Any Other Business</a>
</li> <li> <a href="?cover=print#To_be_discussed_later">To be discussed later:</a>
</li> <li> <a href="?cover=print#DB_Engine_Discussion">DB Engine Discussion.</a>
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
<p />
Minutes of Gratia meeting <ul>
<li> Last meeting: <a href="/bin/view/Accounting/Minutes2008Feb13" class="twikiLink">Februrary 13</a>
</li> <li> Previous meetings: <a href="/bin/view/Accounting/MeetingMinutes" class="twikiLink">MeetingMinutes</a>
</li> <li> Coordinates: Wednesday at 1:30pm CST/CDT, 1-510-665-5437 and use the meeting ID: 2966. 
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Attending"></a> Attending </span></h2>
<p />
TBA.
<!--
<p /> <ul>
<li> <a href="/bin/view/Main/PenelopeConstanta" class="twikiLink">Penelope Constanta</a>.
</li> <li> <a href="/bin/view/Main/ChrisGreen" class="twikiLink">Chris Green</a>.
</li> <li> <span class="twikiNewLink">Jeff Mack<a href="/bin/edit/Main/JeffreyMack?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="Jeff Mack (this topic does not yet exist; you can create it)">?</a></span>.
</li> <li> <a href="/bin/view/Main/StevenTimm" class="twikiLink">Steve Timm</a>.
</li> <li> <a href="/bin/view/Main/JohnWeigand" class="twikiLink">John Weigand</a>.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Apologies"></a> Apologies </span></h2> <ul>
<li> <a href="/bin/view/Main/PhilippeCanal" class="twikiLink">Philippe Canal</a>.
</li> <li> <a href="mailto&#58;karunach&#64;nhn&#46;ou&#46;edu">Karthik Arunachalam</a>.
</li></ul> 
<p /> <ul>
<li> Diana Bonham.
</li> <li> <a href="/bin/view/Main/PhilippeCanal" class="twikiLink">Philippe Canal</a>.
</li> <li> <a href="/bin/view/Main/PenelopeConstanta" class="twikiLink">Penelope Constanta</a>.
</li> <li> <a href="/bin/view/Main/ChrisGreen" class="twikiLink">Chris Green</a>.
</li> <li> <span class="twikiNewLink">Jeff Mack<a href="/bin/edit/Main/JeffreyMack?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="Jeff Mack (this topic does not yet exist; you can create it)">?</a></span>.
</li> <li> <a href="/bin/view/Main/StevenTimm" class="twikiLink">Steve Timm</a>.
</li> <li> John Urish.
</li> <li> Margherita Vittone.
</li> <li> <a href="/bin/view/Main/JohnWeigand" class="twikiLink">John Weigand</a>.
</li> <li> <a href="mailto&#58;karunach&#64;nhn&#46;ou&#46;edu">Karthik Arunachalam</a>.
</li></ul> 
<p />
-->
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Action_items_from_previous_meeti"></a> Action items from previous meeting: </span></h2>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="DB_and_Schema_issues"></a> DB and Schema issues </span></h2>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="OSG_Issues"></a> OSG Issues </span></h2>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Collector"></a> Collector </span></h2>
<p />
Penelope:
For the integration of Margherita's code with the current gratia-administation pages to support login/logout and displaying menus according to role. Setup of gratia-vm02 and gratiax21 is complete. Both accept hhtps connections, connecting to gratiax21 requires confirmation that this the correct site as I used the same host certificate as on gratia-vm02....
<p />
John:
Have had email discussions involving Margherita and Penelope as
to test error conditions to set up on the gratiax34 VOMS server
and how/what to report.  VOMS is not to informative as to
any error condition.  My current suggestion is to generate
something like:
<p />
"System Error in attempting to contact VOMS server
($VOMS_SERVER_NAME).  Contact your Gratia administrator ($EMAIL_ADDRESS) 
for assistance."
<p />
... with EMAIL_ADDRESS coming from the monitor.to.address0 parameter
of the service-configuration.properties file.  Or we can create a new 
parameter.
<p />
<p />
VDT configure_gratia script
<hr />
I discovered that the VDT configure_gratia script (for reporting)
was never updated to include the creation os the cron service for
the static reports.  Modified the script to include this and tested
it on gratiax33.   I am not sure what to do with it, but I'm thinking
of creating a vdt directory in CVS, and including it there.
<p />
I tested again the static reports on gratiax33 and they appear to
have the same problem as on the v0.32 cutover.  I have not had
a chance to investigate if it is caused by my method of updating
with the latest build or another problem.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Report_development"></a> Report development </span></h2>
Jeff: Completed (with Philippe) updating Process Accounting Requirements document.
Finished set of process accounting reports for next Tuesday's briefing. There's at least one more that I will build if time permits.
Built report with technique for building x-axis with dates from date table rather than from <span class="twikiNewLink">EndTime<a href="/bin/edit/Accounting/EndTime?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="EndTime (this topic does not yet exist; you can create it)">?</a></span> date values in usage records. This eliminates problems with missing date values on x-axis.
<p />
Penelope:
Timestamp logging completed. Fixed minor problem with jsp code that called birt (it was called twice costing about 1.2sec). 
<p />
Birt training was canceled as Jeff and I are pasted the initial training that was available. This was exchanged for two days of birt developer's time (via phone or video conference) and one person training for Birt 2.2.2 when available. 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Probes"></a> Probes </span></h2>
<p />
John/Chris: GRAM Trash/Auditing is still required for the non delegating GT4 jobs.
<p />
Chris: Where should I store the name of the VO as coming from the FQAN.
Philippe: Store it in VOName in the form (Fermilab/MiniBoone) to re-use the existing stuff.
<p />
Chris: How should I record the DN (slash vs comma)
All: since slash is the most common, let use that, see if Condor probe can be changed to also use the slash
and then we will have to deal with the legacy entries.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Test_Bed"></a> Test Bed </span></h2>
<p />
Test environment for <span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span> Replication Testing
<hr />
1. Steve Timm made  gratiax22 and gratiax23 available with host/http 
certs for use in testing replication.
<p />
2. John Urish then installed a v0.32 Collector/Reporting on both from 
the VDT install scripts
    - on both nodes, the VDT_LOCATION (installation directory) is
       /usr/local/osg-collector.
    - <span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span> DB in a VDT environment is in
        $VDT_LOCATION /vdt-app-data/mysql5/var
    - urls:
<p />
<a href="http://gratiax22.fnal.gov:8880/gratia-administration/administration.html" target="_top">http://gratiax22.fnal.gov:8880/gratia-administration/administration.html</a>
        <a href="http://gratiax22.fnal.gov:8880/gratia-reporting/" target="_top">http://gratiax22.fnal.gov:8880/gratia-reporting/</a>
<p />
<a href="http://gratiax23.fnal.gov:8880/gratia-administration/administration.html" target="_top">http://gratiax23.fnal.gov:8880/gratia-administration/administration.html</a>
        <a href="http://gratiax23.fnal.gov:8880/gratia-reporting/" target="_top">http://gratiax23.fnal.gov:8880/gratia-reporting/</a>
<p />
3,  The intent is to replicate from x22 to x23.
   - gratiax22 is populated with approx 12K records from gratiax33
   - gratiax23 has no data.
<p />
4. Backup/recovery points.
   - The installation scripts take a simple file system back of the 
<span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span> database at
      points.  These can be used to start over.  The backups are in:
        VDT_LOCATION/vdt-app-data/mysql5   as (the file name says it all)
<p />
drwxr-xr-x  5 mysql mysql 4096 Feb 15 09:56 var
drwxr-xr-x  5 mysql mysql 4096 Feb 15 09:54 var.no-gratia-tables
drwxr-xr-x  5 mysql mysql 4096 Feb 15 09:56 var.w-empty-gratia-tables
<p />
     Additionally, on x22, a backup was taken after the 12K records were
     populated in the database.
<p />
drwxr-xr-x  5 mysql mysql 4096 Feb 15 11:15 var.backup
<p />
    This is to facilitate restarting tests from scratch with minimal 
effort.  For
    example, to recover x22 to the point go a populated DB, you would:
    a. stop Tomcat and <span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span> by:
          &gt; source /usr/local/osg-collector/setup.sh
          &gt; vdt-control --off  tomcat-55
          &gt; vdt-control --off  mysql5
          &gt; cd /usr/local/osg-collector/vdt-app-data/mysql5
          &gt; rm -rf  ./var/*
          &gt; scp -pr ./var.backup/*  ./var/.
          &gt; vdt-control --on  mysql5
          &gt; vdt-control --on  tomcat-55
<p />
5. Using the mysql client in a VDT installed collector.
    Due to the way in which VDT has setup this installation of gratia, 
there is
    small hurdle to overcome since they download 2 versions of <span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span>.
    This issue is with the socket the client uses.
<p />
    &gt; source /usr/local/osg-collector/setup.sh
    &gt; mysql --socket 
/usr/local/osg-collector/vdt-app-data/mysql5/var/mysql.sock 
--host=localhost --port=49152 -u root gratia
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Any_Other_Business"></a> Any Other Business </span></h2>
<p />
APEL-WLCG interface
<hr />
1. Updated the Normalization factors for AGLT23.
2. Modified the LCG.py script.
    - The search of atlas data for the 'Unknown' VO was taking 5 
minutes/ site.
    - the entire process taking over 3 hours sometimes due to conflicts 
with the mysqlhotcopy's (2 of them everyone out for 2 hours each night)
    - Changed to do a single (7 minute) query for all sites in the time 
period with unknown VOs and process only  those APEL-WLCG sites that have
data.  Only 1 in the last 2 months.  This reduced the elapsed time to 25 minutes.
    - implemented 2/19
3. While doing #2 above discovered a means of overriding the <span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span>
     optimizer which sometimes is not the most intelligent of processes.
     If you specify the select as "SELECT  STRAIGHT_JOIN....", <span class="twikiNewLink">MySql<a href="/bin/edit/Accounting/MySql?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="MySql (this topic does not yet exist; you can create it)">?</a></span> will
     use the order in which you construct the sql either explicitly or implicitly.
<p />
John:
VOMS parser effort estimate
<hr />
No progress.
I still need to talk to Igor and Tanya.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="To_be_discussed_later"></a> To be discussed later: </span></h2>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="DB_Engine_Discussion"></a> DB Engine Discussion. </span></h2>
<p />
The estimate of 3 to 14 FTE months to translate to Postgres is accepted as being correct (or at least of the ballpark).
<p />
Summary Of Advantages:
<pre>
           MyISam                                   InnoDB                                           Postgress
good
          not much to do                         Transactions                                   Transactions
                                                          referential integrity                          referential integrity
                                                         MySQL -&#62; skills in the Gratia team      well know backup/recovery procedure
                                                         VDT                                                a lot of expertise in the LSCS.
bad
          no transaction -&#62; data loss.       &#91;no clear backup strategy](striked)     conversion is non trivial
          no referential integrity.               (Debatable)                                      lack of skills in Gratia team
          locks-up.                                   VDT                                               VDT
</pre>
<p />
Igor:  Before we can make a final decision we need to be looking at the overall pictures (Gratia and Department), this picture can not be completely resolved until the OSG requirement and SLA agreement are finalized.
<p />
Philippe: I am not seeing which part of the agreement will might significantly affect the decision.  Our current code is ready to take advantage of <span class="twikiNewLink">InnoDb<a href="/bin/edit/Accounting/InnoDb?topicparent=Accounting.Minutes2008Feb20" rel="nofollow" title="InnoDb (this topic does not yet exist; you can create it)">?</a></span>.  I would like to take a decision sooner rather than later.
<p />
Igor: still I am think it is important to wait for the agreement.
<p />
Action Items: Write down Innodb backup strategy.  Calculate number for backup and recovery time.
<p />
Action Items: Diana works on schema review.</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Accounting/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/Accounting/MeetingMinutes" class="twikiLink">MeetingMinutes</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>Minutes2008Feb20</span> <br />    
Topic revision: r7 - 11 May 2009 - 13:42:57 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />