<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaAccessLoginSpecification &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/GratiaAccessLoginSpecification?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaAccessLoginSpecification" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/GratiaAccessLoginSpecification"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--EDITTABLEPLUGIN--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/EditTablePlugin/edittable.css");
</style>

<!--TABLEPLUGIN_table1--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#table1 th {background-color:#99CCCC;}
.twikiTable#table1 th.twikiSortedCol {background-color:#99CCCC;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td {background-color:#FFFFCC;}
.twikiTable#table1 tr.twikiTableRowdataBg1 td {background-color:#FFFFFF;}
.twikiTable#table1 tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#FFFFCC;}
.twikiTable#table1 tr.twikiTableRowdataBg1 td.twikiSortedCol {background-color:#FFFFFF;}
</style>
<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <!-- <ul>
<li> Set check =  <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> 
</li></ul> 
-->
<h1><a name="Gratia_Access_Login_Specificatio"></a>  Gratia Access/Login Specification </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Overview"> Overview</a>
</li> <li> <a href="?cover=print#gratia_administration"> gratia-administration</a> <ul>
<li> <a href="?cover=print#administration_access_requiremen"> administration access requirements</a>
</li> <li> <a href="?cover=print#administration_access_design"> administration access design</a>
</li> <li> <a href="?cover=print#administration_access_open_issue"> administration access open issues</a>
</li></ul> 
</li> <li> <a href="?cover=print#gratia_reporting"> gratia-reporting</a> <ul>
<li> <a href="?cover=print#reporting_view_requirements"> reporting view requirements</a>
</li> <li> <a href="?cover=print#reporting_view_design"> reporting view design</a>
</li> <li> <a href="?cover=print#reporting_view_open_issues"> reporting view open issues</a>
</li></ul> 
</li></ul> 
</div>
<p />
<p />
<h1><a name="Overview"></a> Overview </h1>
This document is intended to serve as both a requirements and design specification for limiting access and visibility into the two web service user interfaces of Gratia:  <ul>
<li> administration services
</li> <li> reporting services
</li></ul> 
<p />
<p />
<h1><a name="gratia_administration"></a> gratia-administration </h1>
The Gratia administration is accessible as http(s)://&lt;node.domain&gt;:&lt;port&gt;/gratia-administration.  It allows for viewing the status of the collector and for maintenance of several data tables.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="administration_access_requiremen"></a> administration access requirements </span></h2>
The Gratia administration web user interface login will allow access to all update service menu options, otherwise only the read-only menu options will be available. 
<p />
<p />
<a name="edittable1"></a>
<div class="editTable">
<form name="edittable1" action="https://twiki.opensciencegrid.org/bin/viewauth/Accounting/GratiaAccessLoginSpecification#edittable1" method="post">
<input type="hidden" name="ettablenr" value="1" />
<input type="hidden" name="etedit" value="on" />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="1" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaAccessLoginSpecification?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Menu option</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Accounting/GratiaAccessLoginSpecification?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">No login required</font></a> </th>
			<th bgcolor="#99CCCC" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Accounting/GratiaAccessLoginSpecification?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Login required</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol"> Maintenance <br />   * Site Table <br />   * VO Management <br />   * VOName correction </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1"> &nbsp; </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol0 twikiFirstCol"> Probes <br />   * active, inactive or all <br />   * CPU Info <br />   * Roles </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol1"> &nbsp; </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol"> Authentication <br />   * Certificates </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol1"> &nbsp; </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol0 twikiFirstCol"> Replication <br />   * Job Usage Replication <br />   * Metric Replicatino </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol1"> &nbsp; </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol"> System <br />   * System status: normal or detailed </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol0 twikiFirstCol"> System <br />   * Administration </td>
			<td bgcolor="#FFFFFF" valign="top" class="twikiTableCol1"> &nbsp; </td>
			<td bgcolor="#FFFFFF" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Documentation <br />   * Installation <br />   * Security <br />   * Replication <br />   * Gratia Service Settings </td>
			<td bgcolor="#FFFFCC" align="center" valign="top" class="twikiTableCol1 twikiLast"> <img src="/pub/TWiki/TWikiDocGraphics/choice-yes.gif" alt="DONE" title="DONE" width="16" height="16" border="0" /> </td>
			<td bgcolor="#FFFFCC" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> &nbsp; </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<input type="hidden" name="etrows" value="8" />
<input class="twikiButton editTableEditButton" type="submit" value="Edit table" /> </form>
</div><!-- /editTable -->
<p />
<p>
<p />
<p />
 List of requirements. <ol>
<li> For an instance of a Gratia collector, at least one Gratia administrator must be defined.
</li> <li> The Gratia administrators are identified and managed by the VO
</li> <li> A user grid certificate will be used to identify the administrator
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="administration_access_design"></a> administration access design </span></h2>
The identity of a Gratia administrator will be defined in the <em>TOMCAT_HOME/gratia/service-configuration.properties</em> file.   <ul>
<li> For Gratia instances servicing multiple VO's, multiple entries are allowed
</li> <li> The identity of the Gratia administrator(s) will be defined by specifying the FQAN (Fully Qualified Attribute Name) as defined by the VO.  Note that "Capability=" is normally a part of the FQAN, but this attribute has been deprecated and thus will not be used. The top level group in the FQAN or the FQAN is, by convention within OSG, defined as the VO name of the VOMS server.
</li> <li> In order to insure that the most current list of administrative identities is always used this file should be read each time the login service is invoked (explicitly or implicitly).  An alternative method of insuring currency is to read the timestamp on the file and read it only when it has changed.
</li></ul> 
<pre>
  service-configuration.properties file entries:
  service.admin.FQAN.0=/cms/uscms/Role=gratiaadmin
  service.admin.FQAN.1=/cms/uscms/gratiaadmin/Role=NULL
  service.admin.FQAN.atlas=/atlas/usatlas/Role=gratiaadmin
  service.admin.DN.john=/DC=org/DC=doegrids/OU=People/CN=John Weigand 458491

  service.voms.connections=voms-servers

Note: the above entries show various examples of how the 
identity of the Gratia administrators can be defined within a VO:
    service.admin.FQAN.x = valid FQANs that give administrative access, 
                                       where x are unique numbers and/or letters

  service.voms.connections = file located in tomcat/gratia containing 
                                          the voms URL(s) for each VO specified

or simply using a DN:
  service.admin.DN.x = valid DNs that give administrative access, 
                                 where x are unique numbers and/or lettters
                                 the value 'ALLOW ALL' will give access to all who have a valid certificate
</pre>
<p />
The Gratia login process will need the identity of the OSG VO VOMS servers in order to authenticate the identity of the user.           <ol>
<li> This will be in the form of an OS file located at <em>TOMCAT_HOME/gratia/</em> 
</li> <li> File name is defined by the key <em>service.voms.connections=voms-servers</em> in the <em>service-configuration.properties</em> file
</li> <li> File permissions of 644
</li> <li> The file will contain 2 tokens with whitespace as the delimiter. Contiguous whitespace is treated as a single delimiter.   <ul>
<li> The 1st token is the VO name which will be top level group of the FQAN defined by the <em>service.admin.FQAN.n</em> key in the <em>service-configuration.properties</em> file.
</li> <li> The 2nd token is the url of the VO's VOMS server.
</li></ul> 
</li> <li> Initially, this file will be manually maintained.  In the long term, this file should be distributed by the OSG GOC.
</li> <li> In order to insure that the most current list of VOMS servers is always used this file should be read each time the login service is invoked (explicitly or implicitly).  An alternative method of insuring currency is to read the timestamp on the file and read it only when it has changed.
</li></ol> 
<pre>
<b>./gratia/voms-servers file:</b>
  # comment line
  atlas  https://voms.cern.ch:8443/voms/atlas
  cms    https://voms.cern.ch:8443/voms/cms
  geant4 https://voms.cern.ch:8443/voms/geant4
</pre>
<p />
The user identity requesting login access will be retrieved from a grid certificate imported in their browser. The DN (subject) of the certificate and CA (issuer) of the certificate, in the following form, will be used:
<pre>
DN: /DC=org/DC=doegrids/OU=People/CN=John Weigand 458491
CA: /DC=org/DC=DOEGrids/OU=Certificate Authorities/CN=DOEGrids CA 1
</pre>
<p />
The procedure for logging in for the "happy-day" scenario is: <ol>
<li> When the administration page is initially accessed, the <em>Status: normal</em> page will be presented and at the left frame menu a list of  menu options.  The options displayed in gray color are those requiring login. The <em>logout</em> option is also displayed in gray color as it has no effect before login.
</li> <li> If the user desires administrative update options, the user will select the appropriate menu option.
</li> <li> The login process will read the imported user certificate from the browser to access the identity (DN/CA,subject/issuer) of the user.
</li> <li> Depending on the specified values in the <em>service-configuration.properties</em> file the following are the authorization steps: <ul>
<li> if there are defined <em>service.admin.DN.x</em> keys, then these keys are checked against the presented DN. If there is a match or if a key has the value  <em>ALLOW ALL</em> the user is given <em>admin</em> access and no other action is required.
</li> <li> if there are defined <em>service.admin.DN.x</em> keys and there is no match with the presented DN (and there is no key with the value  <em>ALLOW ALL</em>) then  <ul>
<li> A <em>pull-down/popup</em> menu will be displayed showing the list of possible VOs containing users who are authorized  for  <em>admin</em> access to this Gratia instance.
</li> <li> This list will be based on the set defined in the <em>service.admin.FQAN.n</em> parameters of the <em>service-configurataion.properties</em> file.
</li> <li> Using the <em>voms-server</em> file (defined by the <em>service.voms.connections</em> key), the login process will access the VO's VOMS server selected by the user and provide another <em>pull-down/popup</em> menu displaying the set of FQANs for that user in the VO selected. The <em>VOMSAdmin</em> method below can be used to retrieve that set:
</li> <li> listUsersWithRole (java.lang.String groupname, java.lang.String rolename)
</li> <li> The user will then select the FQAN from the list.
</li> <li> The login process will check the selected FQAN against the set of <em>service.admin.FQAN.n</em> values in the <em>service-configuration.properties</em> file.
</li></ul> 
</li></ul> 
</li> <li> If the user is <em>not</em> authorized,  <ul>
<li> the left frame menu will remain unchanged.
</li></ul> 
</li> <li> If the user is authorized,  <ul>
<li> the left frame menu will display all the menu options available in the normal link color including the <em>logout</em> option.
</li></ul> 
</li></ol> 
<p />
Additional login processing considerations: <ol>
<li> There is no need to query all the VOMS servers designated by the <em>service.admin.FQAN.n</em> list if the user is determined to be a Gratia administrator.  Once is enough.
</li> <li> In order to take into account the scenario where a user's Gratia administrative privileges have been revoked (similar to a CRL situation), a <em>refresh</em> parameter will be added to the <em>system-configuration.properties</em> file.  The login process will <em>implicitly</em> re-authorize the user as though the user had selected the <em>login</em> menu option.  This will be done  "behind-the-scenes" when the user performs any action including a refresh of a page.  This interval is the time between <em>login</em> authorization checks.
</li> <li> In order to take into account a user being logged in with  Gratia administrator privileges and leaving his browser unattended for an extended period, a <em>timeout</em> parameter will be added to the <em>system-configuration.properties</em> file. If a user has been inactive for the period specified, the login process will  return the user to the "read-only" state and menu options (replacing the <em>logout</em> option with the <em>login</em> option).  The user will have to <em>explicitly</em> login again.
</li></ol> 
<p />
<pre>
<b>service-configuration.properties file:</b>
# service.admin.refresh -&gt; (expressed in minutes). 
#     This is time interval at which a user' admin authorization is re-checked.
 service.admin.timeout-&gt; (expressed in minutes). 
#     This is time interval at which a user' admin authorization is reset and requires
#     an explicit login.  This is only done if the user is inactive for this period of time.
service.admin.refresh=30
service.admin.timeout=30
</pre>
<p />
Some special error handling conditions: 
(<b>Note: These are suggestions and subject to change based on feedback from the developer.)</b> <ol>
<li> All error conditions should be caught and a "friendly" message displayed providing sufficient information to understand/resolve the problem.  There should be no java stacktraces displayed to the screen.<br />    <br />    
</li> <li> If there is not at least one <em>service.admin.FQAN.n</em> entry (or the entry is corrupted) in the <em>service-configuration.properties</em> file, display a message similar to:<br />          <i>Access denied: There are no valid service.admin.FQAN parameters in the service-configuration.properties file.  Refer to your Gratia documentation to configure this parameter.</i><br />    <br />    
</li> <li> If there is no <em>voms-servers</em> file (or no matching entries for the <em>service.admin.FQAN.n</em> entries, diisplay a message similar to:<br />          <i>Access denied: The following VOs for your service.admin.FQAN parameters in the service-configuration.properties file could not be found in the <em>voms-server</em> file.  Check your configuration.</i><br />    <br />    
</li> <li> There can be <em>1 to n</em> VOs to search.  If the user is denied (FQAN not found for the user)  in the VO's specified, the process should generate a message similar to:<br />          <i>Access denied: You are not defined as a Gratia administrator in any of the following VOs: &lt;list the VO names of the VOMS servers queried&gt;</i><br />    <br />    
</li> <li> Since there are multiple VO VOMS servers to interrogate, one or more of them may not be accessible at that point in time.   <ul>
<li> If this condition exists and the accessible VO VOMS servers do not allow access, then display a message similar to:<br />             <i>Access denied: The following VO VOMS server were not accessible: &lt;list the VO names of the VOMS servers that were inaccessible&gt;</i>
</li> <li> If the user is authorized in one of the accessible VOMS servers, don't display any message.  Just allow access to all menu options.<br />    <br />    
</li></ul> 
</li></ol> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="administration_access_open_issue"></a> administration access open issues </span></h2>
<ol>
<li>Command line shutdown of update services using <em>wget</em> .<p>
Currently the <em>initd</em> tomcat service, does a <em>wget</em> to stop the <em>update services</em> prior to stopping <em>tomcat</em>.
<pre>
  wget -O - -q 'http://gratia.opensciencegrid.org:8881/gratia-administration/systemadministration.html?action=stopDatabaseUpdateThreads'
</pre>
This will not be allowed when the login access is implemented.  An alternative is required. 
<p />
<b>Possible resolution:</b> This needs to be investigated.  Can we use the <em>--certificate=file</em> option (and maybe others are needed) of the <em>wget</em> command to pass either the <em>http</em> or <em>host</em> certificate that is needed by the collector to access the VOMS servers.  We would have  some special processing in the login process to recognize this.
<p />
<b>Current implementation</b> allows stopping/starting the database updating threads by using a special URL, different than the one mentioned above. This needs to be investigated further and take into account the implemented authorization mechanisms.
<p />
</li>
<p>
</ol>
<p>
<p />
<p />
<h1><a name="gratia_reporting"></a> gratia-reporting </h1>
The Gratia reporting is accessible as http(s)://&lt;node.domain&gt;:&lt;port&gt;/gratia-reporting.  It allows for viewing the accounting data only.  There is no maintenance/update capability.  The general intent in this area is to to allow various levels of visibility to the data: <ul>
<li> public-like data viewable by anyone
</li> <li> VO level data viewable by members of a VO
</li> <li> Individual user data (DN level) for members of a VO
</li></ul> 
<p />
The detailed requirements for this capability have not been fully defined yet.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="reporting_view_requirements"></a> reporting view requirements </span></h2>
This section has not been defined yet.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="reporting_view_design"></a> reporting view design </span></h2>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="reporting_view_open_issues"></a> reporting view open issues </span></h2>
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_updates"></a>  Major updates </span></h2>
<!--Future editors should add their signatures beneath yours!-->
-- <a href="/bin/view/Main/JohnWeigand" class="twikiLink">JohnWeigand</a> - 25 Feb 2008<br />    </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaAccessLoginSpecification</span> <br />    
Topic revision: r13 - 06 Dec 2016 - 18:12:35 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />