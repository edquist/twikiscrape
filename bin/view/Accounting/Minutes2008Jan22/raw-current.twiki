---+!!&lt;nop&gt;%TOPIC%
%TOC%

---++Introduction

Minutes of Gratia meeting
   * Last meeting: [[Minutes2007Dec12][December 12]]
   * Previous meetings: MeetingMinutes
   * Coordinates: Wednesday at 1:30pm CST/CDT, 1-510-665-5437 and use the meeting ID: 2966. 

---++Attending

   * [[Main.PenelopeConstanta][Penelope Constanta]].
   * [[Main.ChrisGreen][Chris Green]].
   * [[Main.JeffreyMack][Jeff Mack]].
   * [[Main.JohnWeigand][John Weigand]].
   * Margherita Vittone.
   * Diana Bonham.

&lt;!--

   * [[Main.PenelopeConstanta][Penelope Constanta]].
   * [[Main.ChrisGreen][Chris Green]].
   * [[Main.JeffreyMack][Jeff Mack]].
   * [[Main.StevenTimm][Steve Timm]].
   * [[Main.JohnWeigand][John Weigand]].

---++Apologies
   * [[Main.PhilippeCanal][Philippe Canal]].
   * [[mailto:karunach@nhn.ou.edu][Karthik Arunachalam]].

   * Diana Bonham.
   * [[Main.PhilippeCanal][Philippe Canal]].
   * [[Main.PenelopeConstanta][Penelope Constanta]].
   * [[Main.ChrisGreen][Chris Green]].
   * [[Main.JeffreyMack][Jeff Mack]].
   * [[Main.StevenTimm][Steve Timm]].
   * John Urish.
   * Margherita Vittone.
   * [[Main.JohnWeigand][John Weigand]].
   * [[mailto:karunach@nhn.ou.edu][Karthik Arunachalam]].

--&gt;

---++Action items from previous meeting:

---++Trash/Trash/Integration Meeting Features Requests:

---+++Original Synopsis:

During the integration meeting yesterday there was a good discussion of 
particular features requested by BNL for the Gratia accounting system:

   1. Ability to distinguish resource ownership within a cluster.
   2. Ability to distinguish different resources within a site.
   3. Ability to distinguish different job submission methods (OSG
      interface, local, PANDA)

Time will be set aside to discuss these features at the next weekly OSG 
Accounting meeting on Wednesday 2008/01/23 at 1.30pm Central. Please 
&#39;phone (510) 665-5437, ID #2966 to join the discussion if you are 
interested in participating.

A quick synopsis of points coming out of the discussion at the 
integration meeting yesterday:

   1. If a site wishes to do this, it can assign the jobs to different
      queues. The queue used by a job is stored in Gratia but there is
      as yet no graphical report. We can discuss the relative priority
      of a graphical report, &quot;Usage by queue for site&quot; as a report request.
   2. The !ProbeConfig, &quot;SiteName&quot; attribute can be re-tasked to report
      the, &quot;Resource Name&quot; instead. Combined with the OIM effort which
      will allow logical grouping of site resources this should satisfy
      the request.
   3. The non-OSG probes (BNL local, PANDA) should set their &quot;Grid&quot;
      attribute to &quot;Local&quot; or &quot;PANDA&quot; respectively. How that information
      is presented in reports is a matter for discussion.

See some details in [[http://listserv.fnal.gov/scripts/wa.exe?A2=ind0801&amp;L=osg-accounting&amp;T=0&amp;X=02201341281B1CAEFB&amp;Y=pcanal%40fnal.gov&amp;P=3526][Xin&#39;s mail]]

Xin will look at condor_meter.pl and see how he can set the ProbeName to a different name when it is a STAR job.

---+++Discussion

---++Update On January Release (v0.32)

---+++Reports
---+++Probes
---+++Collectors

All ready to go for the January Release.

---++DB and Schema issues



---++Collector

---++Report development

---++Probes

Philippe: What is the status of the glexec probe?  Steve Timm is rumored to be complaining.

Chris: Accounting for cpu use of glexec job.   IMHO it is in Igor&#39;s plate.  However he has not
been given any constraint

---+++GRAM Auditing
John:

1. Finally completed updating all my notes on GRAM Trash/Auditing here:
    https://twiki.grid.iu.edu/twiki/bin/view/Accounting/GramAuditingNotes

2. Completed testing of configure_gram_auditing script for VDT.
    - there is still an open issue as to how to carry the database data
      forward on an upgrade.  The concern is that there is MySql data
      in the database for 2 feature (globus-ws rft and gram auditing), yet
      the nature of the scripts self-contained (i.e., separate scripts for
      configure_mysql, configure_rft, configure_gram_auditing.
      The issue was raised with Alain Roy, but have not been able to
      discuss it.  Should be able to do this soon.

3. Re-started dialog with Rachana (GRAM4) and Stuart (GRAM2) on
    Tuesday after getting the doc above done    Have not heard from Stu.
 
    My concerns are how to handle this for grid-mapfile authorizations and
    are based on the assumption that we will only support voms proxies in
    OSG.  If the later is not true, this won&#39;t work.

   For GRAM4, it looks like PRIMA (currently a PDP) will have to be
   changed, actually splitting its current functionality into 2 pieces:
     - the parsing of the proxy will occur in a PIP object.
     - and the callout to GUMS will occur in a PDP object
   For GRAM4 sites using grid-mapfile, the default Globus gridmap PDP
   will be &quot;front-ended&quot; by the same proxy parsing PIP allowing us to
   collect the same data regardless of PDP.

  In my research of the Globus doc, I could only find references to PIPs
  in the 4.1 doc.  Nothing in 4.0.n.   Rachana agreed that doc was
  incomplete and she will be updating it and then I can get a better feel
  for the changes needed.

---+++VO Services (Gabriele Garzoglio) authz framework validation

There is an initiative underway in the VO Services group to develop some
form of authz validation framework.  I mention this as it may have an impact
on the osg-user-vo-map.txt file critical to Gratia based on some of the
suggestions being proposed.

However, in the discussions we&#39;ve had another thing came to light 
related to the integrity of that data.  Some sites, mainly BNL sites, have used 
what they call &quot;recyclable&quot; accounts.  They will map all users to a set a single 
set of pool accounts and based on some &quot;inactivitly&#39; criteria they have, remove 
users from the assigned account making it available again.  The recycling is 
not the problem.  The problem is the assignment of multiple VOs to the same account
set.  This variation makes the osg-user-vo-map.txt file totally 
inaccurate and basically useless for any purposes. 

GRAM auditing will resolve this issue from an accounting perspective.  
However, as it is used in GIP, it will still be useless.

I bring this only to note that those sites doing this type of account 
assignment have significantly suspect accounting data... unless I&#39;m missing something.


---++Probe

Chris: In the PBS probe we still have a known issue where some record in some corner case might
be dropped.  This ought to be fixed sometimes.

---++Test Bed

---++WLCG Uploads.

US-T1-BNL APEL/EGEE Portal Tier1 and OSG view issues
---------------------------------------------------------------
Made the changes on Thursday 1/17.  Verified on Friday and all looks good.
Two new items came out of this:
- Pablo wants to do cleanup on the unreported sites.  Not sure what
   I should do here, but I think this is purely an ATLAS issue.
- RobG wants some US-ATLAS view but he is not sure he can get it.
             US ATLAS Facility view, which has:
             US-T1-BNL
              US-AGLT2
              US-MWT2
              US-NET2
              US-SWT2
              US-WT2
    Same point.  Not sure what to do or level of involvement I should have.

---++Fermilab Accounting.

Jeff:  A set of process accounting reports has been built and/or converted to Birt 2.2. All of these are using summary data only at this
point. There is a problem (being worked on) with runtime code for these due to the use of selected parameters from parameter groups
defined in the library. 

Discussions with a number of stakeholders have been held with a few still pending before completing draft requirements for process
accounting. Most of the interest so far has been with using process level data (which we don&#39;t store in our db) rather than thea
daily summary data

---++Any Other Business

---++To be discussed later:

---++Action Items:

Philippe: Nudge Igor about glexec probe.

Philippe: With grid-proxy we must rely on (flaky) osg-usr-vo-map.txt file.  So VO that insist on not running a VOMS server must insure that those file are up to date on all server otherwise their accounting is unreliable.
