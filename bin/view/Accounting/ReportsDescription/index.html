<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> ReportsDescription &lt; Accounting &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Accounting/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Accounting/ReportsDescription?_T=16 Feb 2017" type="application/x-wiki" title="edit ReportsDescription" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Accounting/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Accounting/ReportsDescription"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <div class="twikiToc"> <ul>
<li> <a href="?cover=print#Report_Installation_Guide"> Report Installation Guide</a>
</li> <li> <a href="?cover=print#Description_of_Accounting_Report">Description of Accounting Reports</a> <ul>
<li> <a href="?cover=print#Python_reports">Python reports</a> <ul>
<li> <a href="?cover=print#Report_from_the_job_level_Gratia">Report from the job level Gratia db</a>
</li> <li> <a href="?cover=print#New_users_on_OSG">New users on OSG</a>
</li> <li> <a href="?cover=print#Job_Success_Rate_by_Site">Job Success Rate by Site</a>
</li> <li> <a href="?cover=print#Job_Success_Rate_by_VO">Job Success Rate by VO</a>
</li> <li> <a href="?cover=print#Job_Success_Rate_by_Site_and_VO">Job Success Rate by Site and VO</a>
</li> <li> <a href="?cover=print#Data_transfer_report_summary_by">Data transfer report summary by site</a>
</li> <li> <a href="?cover=print#Gratia_Summary_for_VO_engage">Gratia Summary for VO: engage </a>
</li> <li> <a href="?cover=print#Gratia_Summary_for_VO_osg">Gratia Summary for VO: osg</a>
</li> <li> <a href="?cover=print#Report_of_jobs_longer_than_7_day">Report of jobs longer than 7 days</a>
</li> <li> <a href="?cover=print#Summary_on_how_sites_are_reporti">Summary on how sites are reporting to Gratia</a>
</li> <li> <a href="?cover=print#Report_by_user">Report by user</a>
</li> <li> <a href="?cover=print#OSG_Efficiency_by_VO">OSG Efficiency by VO</a>
</li> <li> <a href="?cover=print#OSG_Efficiency_by_VO_by_time_per">OSG Efficiency by VO by time period</a>
</li> <li> <a href="?cover=print#OSG_Efficiency_by_Site_and_VO">OSG Efficiency by Site and VO</a>
</li> <li> <a href="?cover=print#VO_discrepancy_report">VO discrepancy report </a>
</li> <li> <a href="?cover=print#Report_by_user_by_site">Report by user by site</a>
</li> <li> <a href="?cover=print#OSG_Installed_Probe_Versions">OSG Installed Probe Versions</a>
</li></ul> 
</li> <li> <a href="?cover=print#Perl_reports">Perl reports</a> <ul>
<li> <a href="?cover=print#OSG_site_metrics_report">OSG site metrics report</a>
</li> <li> <a href="?cover=print#OSG_metrics_for_VOs">OSG metrics for VOs</a>
</li></ul> 
</li></ul> 
</li></ul> 
</div>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Report_Installation_Guide"></a> Report Installation Guide </span></h2>
 * <a href="https://twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallGratiaReporting" target="_top">Download and configure mailed gratia reports</a>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Description_of_Accounting_Report"></a> Description of Accounting Reports </span></h2>
<h3><a name="Python_reports"></a> Python reports </h3>
This page will make an attempt to describe/explain the accounting reports that are part of the gratia account reporting mechanism. Gratia accounting collects data from various grid resources and populates them into a database. This data is then used to generate reports that are sent to end users, site admins, management and stakeholders. These reports form an important part of the gratia accounting mechanism in the sense it provides a quick summary of the big picture of Grid Accounting. These reports have a significant impact in terms of understanding the accountability of resources, how efficiently these resources are being utilized, by whom, when and much more. 
<p />
All the scripts that generate and email the report are contained in the gratia trunk/reporting/summary. The main scripts are the daily and range. Also involved are the  perl reports (all-sites-oim, all-vos-oim, failure-by-vo-site, osg-users).
<p />
Given below are the description of the reports in no particular order. To give you a good idea of how the report looks like, we have tried to include a complete sample report whenever possible. The frequency of when these reports are sent out (daily, weekly or monthly) vary. Note that each of these reports have the flexibility to be generated either for a specific date or for a range of dates. 
<p />
<ol>
<li>
<h4><a name="Report_from_the_job_level_Gratia"></a> Report from the job level Gratia db </h4>
<p />
This report provides the job level accounting information from the Gratia database. To start with, this report provides a big picture summary of the job based accounting information based on sites and then provides multiple sub reports that contain the OSG usage summary statistics for the jobs that finished for a given date or a date range. The OSG usage summary is based on different permutations and combinations of sites and VOs. 
<p />
Report invocation hierarchy: <br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; daily<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; range
<p />
<b>How one could receive this report:</b>
<p />
You could receive the <b>"Report from the job level Gratia db"</b> report by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. Note: This is a single report (consisting of multiple sub-reports as explained below) that that will be sent. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/ReportFromTheJobLevelGratiaDb>Click here</a> to view a complete sample report. 
<p />
Each of the sub reports that this report contains are explained in more detail below. 
<ul>
<li>
Report name: <b>RangeSumup</b>
<p />
Report category: Site and VO reports
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; daily -&gt; <span class="twikiNewLink">RangeSumup<a href="/bin/edit/AccountingReports/RangeSumup?topicparent=Accounting.ReportsDescription" rel="nofollow" title="RangeSumup (this topic does not yet exist; you can create it)">?</a></span><br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; range -&gt; <span class="twikiNewLink">RangeSumup<a href="/bin/edit/AccountingReports/RangeSumup?topicparent=Accounting.ReportsDescription" rel="nofollow" title="RangeSumup (this topic does not yet exist; you can create it)">?</a></span>
<p />
Purpose of the report:
        This report provides a big picture summary of how the different sites have (and not have) reported in regard to accounting data i.e. it provides information like how many sites reported, how many sites didn't report, how may sites had no activity, the non-reporting sites etc. It provides the name of the corresponding sites whereever appropriate. This report also provides a big picture summary of how the various VOs have reported with respect to activity.
<hr color=blue>
</li>
<p />
<li>
Report name: <b>DailySiteReport</b>
<p />
Report category: Site report
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; daily -&gt; <span class="twikiNewLink">DailySiteReport<a href="/bin/edit/AccountingReports/DailySiteReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailySiteReport (this topic does not yet exist; you can create it)">?</a></span><br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; range -&gt; <span class="twikiNewLink">DailySiteReport<a href="/bin/edit/AccountingReports/DailySiteReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailySiteReport (this topic does not yet exist; you can create it)">?</a></span>
<p />
Purpose of report:
        This report provides the summary of site based utilization of grid resources. This report contains the following information:
<p />
<pre>
----------------------------------------------------------------
 Site | # of Jobs | Wall Duration | Delta jobs | Delta duration
----------------------------------------------------------------
</pre>
<p />
The following is an explanation of the various columns. This is generally
applicable for any report that contains these fields
<p />
Wall Duration is expressed in hours and rounded to the nearest hour.
Wall Duration is the duration between the instant the job start running and
the instant the job ends its execution.
The number of jobs counted here includes only the jobs directly seen by batch
system and does not include the request sent directly to a pilot job.
The Wall Duration includes the total duration of the the pilot jobs.
Deltas are the differences with the previous day.
(nr) after a VO name indicates that the VO is not registered with OSG.
<p />
<hr color=blue>
</li>
<li>
<p />
Report name: <b>DailyVOReport</b>
<p />
Report category: VO report
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; daily -&gt; <span class="twikiNewLink">DailyVOReport<a href="/bin/edit/AccountingReports/DailyVOReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailyVOReport (this topic does not yet exist; you can create it)">?</a></span><br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; range -&gt; <span class="twikiNewLink">DailyVOReport<a href="/bin/edit/AccountingReports/DailyVOReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailyVOReport (this topic does not yet exist; you can create it)">?</a></span>
<p />
Purpose of report:
        This report provides the summary of VO based utilization of grid resources. This report contains the following information:
<p />
<pre>
--------------------------------------------------------------
 VO | # of Jobs | Wall Duration | Delta jobs | Delta duration
--------------------------------------------------------------
</pre>
<p />
<hr color=blue>
</li>
<p />
<li>
<p />
Report name: <b>DailySiteVOReport</b>
<p />
Report category: Site report
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; daily -&gt; <span class="twikiNewLink">DailySiteVOReport<a href="/bin/edit/AccountingReports/DailySiteVOReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailySiteVOReport (this topic does not yet exist; you can create it)">?</a></span><br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; range -&gt; <span class="twikiNewLink">DailySiteVOReport<a href="/bin/edit/AccountingReports/DailySiteVOReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailySiteVOReport (this topic does not yet exist; you can create it)">?</a></span>
<p />
Purpose of report:
        This report provides the summary of Site based utilization of grid
resources, grouped by VOs. This report contains the following information:
<p />
<pre>
----------------------------------------------------------------------
 Site | VO | # of Jobs | Wall Duration | Delta jobs | Delta duration
----------------------------------------------------------------------
</pre>
<p />
<hr color=blue>
</li>
<li>
<p />
Report name: <b>DailyVOSiteReport</b>
<p />
Report category: VO report
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; daily -&gt; <span class="twikiNewLink">DailyVOSiteReport<a href="/bin/edit/AccountingReports/DailyVOSiteReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailyVOSiteReport (this topic does not yet exist; you can create it)">?</a></span><br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; range -&gt; <span class="twikiNewLink">DailyVOSiteReport<a href="/bin/edit/AccountingReports/DailyVOSiteReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DailyVOSiteReport (this topic does not yet exist; you can create it)">?</a></span>
<p />
Purpose of report:
        This report provides the summary of VO based utilization of grid resources, grouped by Sites. This report contains the following information:
<p />
<pre>
---------------------------------------------------------------------
 VO | Site | # of Jobs | Wall Duration | Delta jobs | Delta duration
---------------------------------------------------------------------
</pre>
<p />
<hr color=blue>
</li>
</ul>
</li>
<li>
<h4><a name="New_users_on_OSG"></a> New users on OSG </h4>
<p />
This report contains information about the users whose very first job finished on a OSG site on a given date or a date range specified. Below is a sample header as contained in the report. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/newUsersOnOSG>Click here</a> to view a complete sample report. 
<p />
<pre>
The following users's CN very first's job on on the OSG site finished 
between 2010-05-02 - 2010-05-03 (midnight UTC - midnight UTC):
----------------------------------------------------------------------------------------------------
   | Site Name            | VO              | Probe Name                     | User                
----------------------------------------------------------------------------------------------------
</pre>
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; newUsers -&gt; <span class="twikiNewLink">AccountingReports<a href="/bin/edit/Accounting/AccountingReports?topicparent=Accounting.ReportsDescription" rel="nofollow" title="AccountingReports (this topic does not yet exist; you can create it)">?</a></span>. <span class="twikiNewLink">NewUsers<a href="/bin/edit/Accounting/NewUsers?topicparent=Accounting.ReportsDescription" rel="nofollow" title="NewUsers (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
</li>
<li>
<h4><a name="Job_Success_Rate_by_Site"></a> Job Success Rate by Site </h4>
This report provides a summary of the job success rate by site. Shown below is part of the report header. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/jobSuccessRateBySite>Click here</a> to view a complete sample report. 
<p />
<pre>
--------------------------------------------------------------------------------------------------------------------
 Site | Wall Succ Rate | Wall Success | Wall Failed | Success Rate |    Success |     Failed
--------------------------------------------------------------------------------------------------------------------
</pre>
<p />
Here are the description of the header information:
<p />
Wall Success: Wall clock hours of successfully completed jobs<br>
Wall Failed: Wall clock hours of unsuccessfully completed jobs<br>
Wall Success Rate: Wall Success / (Wall Success + Wall Failed)<br>
Success: number of successfully completed jobs<br>
Failed: Number of unsuccessfully completed jobs<br>
Success Rate: number of successfull jobs / total number of jobs<br>
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; dailyStatus -&gt; <span class="twikiNewLink">GenericDailyStatus<a href="/bin/edit/AccountingReports/GenericDailyStatus?topicparent=Accounting.ReportsDescription" rel="nofollow" title="GenericDailyStatus (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Job_Success_Rate_by_VO"></a> Job Success Rate by VO </h4>
<p />
This report provides a summary of the job success rate by VO. Shown below is part of the report header. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/jobSuccessRateByVO>Click here</a> to view a complete sample report. 
<p />
<pre>
--------------------------------------------------------------------------------------------------------------------------------
VO                     | Wall Succ Rate | Wall Success | Wall Failed | Success Rate |    Success |     Failed
--------------------------------------------------------------------------------------------------------------------------------
</pre>
<p />
Here are the description of the header information:
<p />
Wall Success: Wall clock hours of successfully completed jobs<br>
Wall Failed: Wall clock hours of unsuccessfully completed jobs<br>
Wall Success Rate: Wall Success / (Wall Success + Wall Failed)<br>
Success: number of successfully completed jobs<br>
Failed: Number of unsuccessfully completed jobs<br>
Success Rate: number of successfull jobs / total number of jobs<br>
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; dailyStatus -&gt; <span class="twikiNewLink">GenericDailyStatus<a href="/bin/edit/AccountingReports/GenericDailyStatus?topicparent=Accounting.ReportsDescription" rel="nofollow" title="GenericDailyStatus (this topic does not yet exist; you can create it)">?</a></span> (need to give --groupby=VO option from command line)
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Job_Success_Rate_by_Site_and_VO"></a> Job Success Rate by Site and VO </h4>
<p />
This report provides a summary of the job success rate by Site and VO. Shown below is part of the report header. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/jobSuccessRateBySiteAndVO>Click here</a> to view a complete sample report. 
<p />
<pre>
----------------------------------------------------------------------------------------------------------------------------------------------------------
     | Site                   | VO                     | Wall Succ Rate | Wall Success | Wall Failed | Success Rate |    Success |     Failed
----------------------------------------------------------------------------------------------------------------------------------------------------------
</pre>
<p />
Here are the description of the header information:
<p />
Wall Success: Wall clock hours of successfully completed jobs<br>
Wall Failed: Wall clock hours of unsuccessfully completed jobs<br>
Wall Success Rate: Wall Success / (Wall Success + Wall Failed)<br>
Success: number of successfully completed jobs<br>
Failed: Number of unsuccessfully completed jobs<br>
Success Rate: number of successfull jobs / total number of jobs<br>
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; dailyStatus -&gt; <span class="twikiNewLink">GenericDailyStatus<a href="/bin/edit/AccountingReports/GenericDailyStatus?topicparent=Accounting.ReportsDescription" rel="nofollow" title="GenericDailyStatus (this topic does not yet exist; you can create it)">?</a></span> (need to give --groupby=BOTH option from command line)
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Data_transfer_report_summary_by"></a> Data transfer report summary by site </h4>
This report provides the OSG Data transfer summary for a given date or date range  (midnight UTC - midnight UTC)
including all data that transferred in that time period. It also provides the deltas, which are the differences with the previous period. Below is part of the header for the report. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/dataTransferReportSummaryBySite>Click here</a> to view a complete sample report. 
<p />
<pre>
--------------------------------------------------------------------------------------------------------------------------
 Site     | Protocol                  |    Num transfer |  Delta transfer |     Number of MiB |         Delta MiB
--------------------------------------------------------------------------------------------------------------------------
</pre>
<p />
It also provides other information like storage resources with no activity, non reporting storage resources and more. 
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; transfer -&gt;  <span class="twikiNewLink">DataTransferSumup<a href="/bin/edit/AccountingReports/DataTransferSumup?topicparent=Accounting.ReportsDescription" rel="nofollow" title="DataTransferSumup (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Gratia_Summary_for_VO_engage"></a> Gratia Summary for VO: engage </h4>
This report provides the summary of the job exit status for the engage VO, (midnight to midnight central time) for a given date or a date range including all jobs that finished in that time period.
For Condor the value used is taken from 'ExitCode' and NOT from 'Exit Status'
<p />
The report provides the following information as shown in the header below. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/gratiaSummaryForEngageVO>Click here</a> to view a complete sample report. 
<pre>
------------------------------------------------------------------------------------------------------------------------------
 Site                   | Wall Succ Rate | Wall Success | Wall Failed | Success Rate |    Success |     Failed 
------------------------------------------------------------------------------------------------------------------------------
</pre>
<p />
This report also provides the 
OSG usage summary for  a given date or date range (midnight UTC - midnight UTC) for the engage VO, 
including all jobs that finished in that time period as shown in the header below:
<p />
<pre>
----------------------------------------------------------------------------------------------------------------------
 VO                     | User                                | # of Jobs | Wall Duration | Delta jobs | Delta duration
----------------------------------------------------------------------------------------------------------------------
</pre>
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; dailyForVO -&gt; <span class="twikiNewLink">GenericDailyStatus<a href="/bin/edit/AccountingReports/GenericDailyStatus?topicparent=Accounting.ReportsDescription" rel="nofollow" title="GenericDailyStatus (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Gratia_Summary_for_VO_osg"></a> Gratia Summary for VO: osg </h4>
This report provides the summary of the job exit status for the osg VO, (midnight to midnight central time) for a given date or a date range including all jobs that finished in that time period.
For Condor the value used is taken from 'ExitCode' and NOT from 'Exit Status'
<p />
The report provides the following information as shown in the header below. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/gratiaSummaryForOsgVO>Click here</a> to view a complete sample report. 
<pre>
------------------------------------------------------------------------------------------------------------------------------
 Site                   | Wall Succ Rate | Wall Success | Wall Failed | Success Rate |    Success |     Failed 
------------------------------------------------------------------------------------------------------------------------------
</pre>
<p />
This report also provides the 
OSG usage summary for  a given date or date range (midnight UTC - midnight UTC) for the osg VO, 
including all jobs that finished in that time period as shown in the header below:
<p />
<pre>
----------------------------------------------------------------------------------------------------------------------
 VO                     | User                                | # of Jobs | Wall Duration | Delta jobs | Delta duration
----------------------------------------------------------------------------------------------------------------------
</pre>
<p />
<p />
Report invocation hierarchy:<br>
        daily_mail_cron.sh -&gt; daily_mutt.sh -&gt; dailyForVO -&gt; <span class="twikiNewLink">GenericDailyStatus<a href="/bin/edit/AccountingReports/GenericDailyStatus?topicparent=Accounting.ReportsDescription" rel="nofollow" title="GenericDailyStatus (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Report_of_jobs_longer_than_7_day"></a> Report of jobs longer than 7 days </h4>
<p />
This report gives a summary of long running jobs that finished on a specified date or a in given date range.
<p />
Below is the sample header contained in the report. <a href=https://twiki.grid.iu.edu/bin/view/Accounting/jobsLongerThan7Days>Click here</a> to view a complete sample report. 
<p />
<hr />
     | Site               | VO             | # of Jobs | Avg Wall | % Cpu | Max <span class="twikiNewLink">EndTime<a href="/bin/edit/Accounting/EndTime?topicparent=Accounting.ReportsDescription" rel="nofollow" title="EndTime (this topic does not yet exist; you can create it)">?</a></span>
<hr />
<p />
Wall Duration is expressed in days to the nearest days.<br>
% Cpu is the percentage of the wall duration time where the cpu was used.<br>
Only jobs that last 7 days or longer are counted in this report.<br>
<p />
Report invocation hierarchy:<br>
	range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; longjobs -&gt; <span class="twikiNewLink">LongJobs<a href="/bin/edit/AccountingReports/LongJobs?topicparent=Accounting.ReportsDescription" rel="nofollow" title="LongJobs (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Summary_on_how_sites_are_reporti"></a> Summary on how sites are reporting to Gratia </h4>
<p />
This report indicates which sites Gratia has heard from or have known
activity.<br>
<p />
<a href=https://twiki.grid.iu.edu/bin/view/Accounting/summaryOnHowSitesAreReportingToGratia>Click here</a> to view a complete sample report. 
<p />
Report invocation hierarchy:<br>
	range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; reporting -&gt; <span class="twikiNewLink">NonReportingSites<a href="/bin/edit/AccountingReports/NonReportingSites?topicparent=Accounting.ReportsDescription" rel="nofollow" title="NonReportingSites (this topic does not yet exist; you can create it)">?</a></span> 
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list. 
<p />
</li>
<li>
<h4><a name="Report_by_user"></a> Report by user </h4>
<p />
This report provides the job summary information based on users under whose DN
the jobs ran. Below is the sample header for the report. <a
href=https://twiki.grid.iu.edu/bin/view/Accounting/summaryOnHowSitesAreReportingToGratia>Click
here</a> to view a complete sample report.
<p />
<hr />
     | VO                     | User                                | # of Jobs | Wall Duration | Delta jobs | Delta duration
<hr />
<p />
Wall Duration is expressed in hours and rounded to the nearest hour. Wall Duration is the duration between the instant the job started running and the instant the job ended its execution.  Deltas are the differences with the previous period.
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; usersreport -&gt;  <span class="twikiNewLink">RangeUserReport<a href="/bin/edit/AccountingReports/RangeUserReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="RangeUserReport (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
<li>
<h4><a name="OSG_Efficiency_by_VO"></a> OSG Efficiency by VO </h4>
<p />
This report provides a summary of the efficiency of the jobs that ran for a
particular VO grouped by the number of cores that these jobs ran on. The
efficiency is calculated in terms of the ratio of the Cpu to Wall duration.
<p />
Below is a sample header for the report. <a
href=https://twiki.grid.iu.edu/bin/view/Accounting/osgEfficiencyByVO>Click
here</a> to view a complete sample report. 
<p />
<hr />
  #   | VO |   Cores |     Njobs |     Delta |      Wall | #   Delta | <span class="twikiNewLink">CpuToWall<a href="/bin/edit/Accounting/CpuToWall?topicparent=Accounting.ReportsDescription" rel="nofollow" title="CpuToWall (this topic does not yet exist; you can create it)">?</a></span> |     Delta | %Effi | Delta
<hr />
<p />
Wall Duration (Wall) is expressed in hours and rounded to the nearest hour.
Wall Duration is the duration between the instant the job started running
and the instant the job ended its execution.
Deltas are the differences with the previous period.
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; voefficiency -&gt; <span class="twikiNewLink">EfficiencyRange<a href="/bin/edit/AccountingReports/EfficiencyRange?topicparent=Accounting.ReportsDescription" rel="nofollow" title="EfficiencyRange (this topic does not yet exist; you can create it)">?</a></span> 
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
<li>
<h4><a name="OSG_Efficiency_by_VO_by_time_per"></a> OSG Efficiency by VO by time period </h4>
<p />
This report provides the OSG Efficiency by VO by time period i.e. efficiency
of jobs that finished for a particular VO grouped by the number of cores on
which the jobs ran. 
<p />
Below is a sample header for the report. <a
href=https://twiki.grid.iu.edu/bin/view/Accounting/osgEfficiencyByVOByTimePeriod>Click
here</a> to view a complete sample report. 
<p />
<hr />
  #   | VO             |     Cores |    1 Days |    7 Days |   30 Days 
<hr />
<p />
Wall Duration is expressed in hours and rounded to the nearest hour. Wall
Duration is the duration between the instant the job started running
and the instant the job ended its execution.
Cpu Duration is the sum for each core that participated to the job 
of the amount of time the core participated actively to the job.
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; gradeefficiency -&gt; <span class="twikiNewLink">EfficiencyGraded<a href="/bin/edit/AccountingReports/EfficiencyGraded?topicparent=Accounting.ReportsDescription" rel="nofollow" title="EfficiencyGraded (this topic does not yet exist; you can create it)">?</a></span> 
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
<li>
<h4><a name="OSG_Efficiency_by_Site_and_VO"></a> OSG Efficiency by Site and VO </h4>
<p />
This report provides the efficiency of finished jobs based on the site, vo and
number of cores. 
<p />
Below is a sample header for the report.  <a href=https://twiki.grid.iu.edu/bin/view/Accounting/osgEfficiencyBySiteAndVO>Click
here</a> to view a complete sample report. 
<p />
<hr />
 Site                   | VO              |     Cores |     Njobs | #   Delta |      Wall |      Delta | <span class="twikiNewLink">CpuToWall<a href="/bin/edit/Accounting/CpuToWall?topicparent=Accounting.ReportsDescription" rel="nofollow" title="CpuToWall (this topic does not yet exist; you can create it)">?</a></span> | Delta | %Effi | Delta
<hr />
<p />
Wall Duration (Wall) is expressed in hours and rounded to the nearest hour.
Wall
Duration is the duration between the instant the job started running
and the instant the job ended its execution.
Deltas are the differences with the previous period.
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; efficiency -&gt; <span class="twikiNewLink">EfficiencyRange<a href="/bin/edit/AccountingReports/EfficiencyRange?topicparent=Accounting.ReportsDescription" rel="nofollow" title="EfficiencyRange (this topic does not yet exist; you can create it)">?</a></span> 
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
<li>
<h4><a name="VO_discrepancy_report"></a> VO discrepancy report </h4>
<p />
This report provides information about VO discrepancy that occurs between the
VOs registered in the OSG Information Management (OIM) system and the VOs that
are being reported to gratia. This report categorizes the discrepancies into
different types. You can view more details by <a
href=https://twiki.grid.iu.edu/bin/view/Accounting/osgEfficiencyBySiteAndVO>viewing
</a> the sample report.
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; compareVOs.py
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
<li>
<h4><a name="Report_by_user_by_site"></a> Report by user by site </h4>
<p />
This report provides information about the # of jobs that finished for a
particular user, the wall duration based on the VO and the Site the jobs ran
on. Below is a sample header of the report. <a
href=https://twiki.grid.iu.edu/bin/view/Accounting/reportByUserBySite>Click
here</a> to view a complete sample report. 
<p />
<hr />
     | User                                | VO             | Site | # of Jobs | Wall Duration | Delta jobs | Delta duration
<hr />
<p />
Wall Duration is expressed in hours and rounded to the nearest hour. Wall
Duration is the duration between the instant the job started running
and the instant the job ended its execution.
Deltas are the differences with the previous period.
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; usersitereport -&gt;  <span class="twikiNewLink">RangeSiteUserReport<a href="/bin/edit/AccountingReports/RangeSiteUserReport?topicparent=Accounting.ReportsDescription" rel="nofollow" title="RangeSiteUserReport (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
<li>
<h4><a name="OSG_Installed_Probe_Versions"></a> OSG Installed Probe Versions </h4>
<p />
This reports list the current version of the Gratia probe(s) installed and
reporting at each site. Only sites registered in OIM are listed.
Below is a sample header for the report. <a
href=https://twiki.grid.iu.edu/bin/view/Accounting/osgInstalledProbeVersions>Click
here</a> to view a complete sample report.
<p />
<hr />
 Site                 | Software         | Release      | Last Contact | Probe name
<hr />
<p />
Report invocation hierarchy:<br>
        range_mail_cron.sh -&gt; range_mutt.sh -&gt; range_mutt_nightly.sh -&gt; softwareVersions -&gt; <span class="twikiNewLink">SoftwareVersion<a href="/bin/edit/AccountingReports/SoftwareVersion?topicparent=Accounting.ReportsDescription" rel="nofollow" title="SoftwareVersion (this topic does not yet exist; you can create it)">?</a></span>
<p />
This report could be received by subscribing to the <font
color=blue>osg-accounting-info@fnal.gov</font> mailing list.
<p />
</li>
</li>
</ol>
<p />
<h3><a name="Perl_reports"></a> Perl reports </h3>
<ol>
<li>
<h4><a name="OSG_site_metrics_report"></a> OSG site metrics report </h4>
<p />
This report consists of  gratia site-oriented statistics for OSG usage
for a given time period. It also compares the statistics for the current time period with the previous time period. Data are only included for jobs that <strong>completed</strong> in the period in question. Here is an example of what the report contains:
<p />
<pre>
Summary of active reporting names:
____________________________________________________________________________________________
| Reporting Name |    Job   | # Sites | # Jobs  |   Wall    | Delta |  Delta  | Delta Wall |
|                | Success? |         |         | Time (h)  | Sites |  Jobs   |  Time (h)  |
|________________|__________|_________|_________|___________|_______|_________|____________|
|     usatlas    |    Yes   |   26    | 3037666 | 1283083.6 |  -16  | +848877 | -1590114.6 |
|     usatlas    |    No    |   26    |    7948 |   24817.8 |  -16  |    -813 |   -15668.7 |
============================================================================================

Site summary: 
________________________________________________________________________________________________
|      SiteName       |    Job   | # Users | # Jobs  |   Wall   | Delta |  Delta  | Delta Wall |
|                     | Success? |         |         | Time (h) | Users |  Jobs   |  Time (h)  |
|_____________________|__________|_________|_________|__________|_______|_________|____________|
| AGLT2               |    Yes   |    7    |  484034 | 150133.0 |  +7   |  +57892 |  -452513.2 |
| AGLT2               |    No    |    7    |     417 |    839.5 |  +7   |    +169 |     -289.8 |
| AGLT2_CE_2          |    Yes   |    3    |    3539 |     20.7 |  +3   |     -10 |       -6.4 |
| BELLARMINE-ATLAS-T3 |    Yes   |    1    |       2 |      0.1 |  +1   |     -40 |       -1.2 |
.....
.....


|                        CN                        |        Site         |    Job   |  # Jobs  |    Wall    |    Delta   |  Delta Wall  |
|                                                  |                     | Success? |          |  Time (h)  |    Jobs    |   Time (h)   |
|__________________________________________________|_____________________|__________|__________|____________|____________|______________|
| /CN=Nurcan Ozturk 18551                          | AGLT2               |    Yes   |   476392 |   147109.7 |     +58426 |    -455045.6 |
| /CN=Nurcan Ozturk 18551                          | AGLT2               |    No    |      413 |      839.5 |       +199 |       -289.8 |
| /CN=Nurcan Ozturk 18551                          | BNL_ATLAS_1         |    Yes   |  1274521 |   391389.0 |    +251847 |    -344023.2 |
| /CN=Nurcan Ozturk 18551                          | BNL_ATLAS_1         |    No    |     3540 |    16024.7 |      -1582 |      -3418.6 |
.....
.....

</pre>
<p />
Usually these reporting scripts are run in the server at Fermilab and mailed to the site admins who are responsible for a particular site. The emails of the recipients are pulled from the OIM interface. 
<p />
To get specific help on how to run this report, please look at the help function of the report by doing the following:
<p />
<pre>
perl all-sites-oim --help
</pre>
</li>
<p />
<li>
<h4><a name="OSG_metrics_for_VOs"></a> OSG metrics for VOs </h4>
<p />
These reports contains  the Gratia statistics for OSG usage for a particular VO
for a specific time period. Data are only included for jobs that <strong>completed</strong> in the period in question. Deltas for the report are calculated and provided with respect to the previous time period. The emails to which the reports must be sent is gathered from either a configuration file that could be customized or from OIM or both. 
<p />
Example of a typical report is provided below:
<pre>
------------------------------------------------------------------------
Comparing current data for week 2011-03-21 - 2011-03-27 (inclusive)
to previous week 2011-03-14 - 2011-03-20 (inclusive).

Days start and end at midnight UTC.

 Current week's total usage: 13 users utilized 43 sites;
                             24391 jobs total (16370 / 8021 = 67.1% success);
                             95808.8 wall clock hours total (82080.5 / 13728.3 = 85.7% success);
Previous week's total usage: 18 users utilized 44 sites;
                             37974 jobs total (27876 / 10098 = 73.4% success);
                             138220.6 wall clock hours total (127670.7 / 10549.9 = 92.4% success);

Active reporting name: Engage:engage

Site summary: 
_______________________________________________________________________________________________
|       SiteName       |    Job   | # Users | # Jobs |   Wall   | Delta |  Delta | Delta Wall |
|                      | Success? |         |        | Time (h) | Users |  Jobs  |  Time (h)  |
|______________________|__________|_________|________|__________|_______|________|____________|
| BNL_ATLAS_1          |    Yes   |    6    |   385  |   1378.5 |  +6   |    +29 |    +726.3  |
| BNL_ATLAS_1          |    No    |    6    |     0  |      0   |  +6   |    -36 |    -478.5  |
| CIT_CMS_T2           |    Yes   |    2    |    42  |     14.0 |  +2   |     +4 |     -17.0  |

|                        CN                        |         Site         |    Job   |  # Jobs  |    Wall    |    Delta   |  Delta Wall  |
|                                                  |                      | Success? |          |  Time (h)  |    Jobs    |   Time (h)   |
|__________________________________________________|______________________|__________|__________|____________|____________|______________|
| /CN=Vivek Bhattacharya 796436                    | BNL_ATLAS_1          |    Yes   |       18 |       26.7 |        -65 |       -507.0 |
| /CN=Vivek Bhattacharya 796436                    | Clemson-Palmetto     |    Yes   |       66 |       52.9 |        +12 |       -346.8 |
.....
.....

</pre>
<p />
More details on how to run this report or specific help information could be obtained by doing:
<p />
<pre>
perl all-vos-oim --help
</pre>
</li>
</ol>
<p />
<p />
<p />
-- <a href="/bin/view/Main/KarthikArun" class="twikiLink">KarthikArun</a> - 21 Apr 2010</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Accounting<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>ReportsDescription</span> <br />    
Topic revision: r18 - 08 Jan 2013 - 17:14:11 - <a href="/bin/view/Main/TanyaLevshina" class="twikiLink">TanyaLevshina</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />