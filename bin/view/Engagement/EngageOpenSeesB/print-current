<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> EngageOpenSeesB &lt; Engagement &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Engagement/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Engagement/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Engagement/EngageOpenSeesB?_T=16 Feb 2017" type="application/x-wiki" title="edit EngageOpenSeesB" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Engagement/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Engagement/EngageOpenSeesB"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Helping_the_Network_for_Earthqua"></a> Helping the Network for Earthquake Engineering Simulation (NEES) run OpenSees on the Open Science Grid </h1>
<p />
<b>
This page describes the proof-of-principle phase of integration of NEES with OSG.<br>
The <a href="/bin/view/Engagement/EngageOpenSeesProductionDemo" class="twikiLink">production-demo phase of integration is described at this link</a>.<br>
</b>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Helping_the_Network_for_Earthqua"> Helping the Network for Earthquake Engineering Simulation (NEES) run OpenSees on the Open Science Grid</a> <ul>
<li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#1_Direct_Job_Submission">1. Direct Job Submission</a> <ul>
<li> <a href="?cover=print#Responsibilities_Timeline_and_St"> Responsibilities, Timeline, and Status</a>
</li> <li> <a href="?cover=print#Ongoing_Work"> Ongoing Work</a>
</li></ul> 
</li> <li> <a href="?cover=print#2_Submitting_glideinWMS_jobs_to"> 2. Submitting glideinWMS jobs to OSG through NEEShub</a>
</li></ul> 
</li></ul> 
</div>
<p />
The <a href="http://nees.org/about" target="_top">NEES project</a> is experiencing limits on the
available computational resources within their current
TeraGrid environment. Thus NEES is exploring the
possibility of using OSG for some of their analyses
that can run in an <a href="http://www.cs.wisc.edu/condor/htc.html" target="_top">HTC</a> environment. OSG staff is
partnering with the NEES community to adapt their
software for execution on OSG.
<p />
The integration of the NEES software with the Open
Science Grid infrastructure will be approached in
phases. Each phase is a subproject in itself, with well
defined goals and time line. Each new phase will either
increase the functionality of the system, or its
reliability, or the number of users of the system. The
final goal of this process is to empower the NEES
community to run their computations on OSG
independently and with minimal support from OSG.
<p />
NEES is using a program called <a href="http://opensees.berkeley.edu/OpenSees/home/about.php" target="_top">OpenSees</a> that simulates
the response of buildings and other structures to
earthquakes. OpenSees can require a lot of computation
time so it is useful to run multiple simultaneous
instances of it.
<p />
Currently, the OSG User Support team is working with
NEES on two fronts: (1) <a href="/bin/view/Engagement/EngageOpenSeesB#1_Direct_Job_Submission" class="twikiCurrentTopicLink twikiAnchorLink">running OpenSees on OSG</a>
through direct job submission; (2) <a href="/bin/view/Engagement/EngageOpenSeesB#2_Submitting_glideinWMS_jobs_to" class="twikiCurrentTopicLink twikiAnchorLink">integrating the OSG glidein workload management system</a> with the NEES
HUBzero portal as a mechanism to run canned
applications on OSG.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="1_Direct_Job_Submission"></a> 1. Direct Job Submission </span></h2>
<p />
The goals of this phase are to run the OpenSees
application on the Open Science Grid with a set of
realistic inputs from one user, and to create scripts
and documentation to make the workflow
straightforward. The resulting prototype ought to be a
good basis for other uses of OpenSees.
<p />
The OpenSees requirements when using the chosen inputs
are as follows:
<p />
* Be able to run on the order of 60 simultaneous jobs
   at once. Could be more sometimes.
<p />
* There would typically be multiple batches of runs
   over the course of a month followed by a time with no
   runs.
<p />
* Ideally some runs could be fairly long, 36+ hours,
  though shorter ones, up to 1 day long, are still
  useful.
<p />
   OSG does not generally support 36+ hour runs. This
   is because ordinary glidein pilots don't run for
   more than 10 hours, many sites evict jobs after a
   certain amount of run time, and many sites preempt
   jobs if there are higher priority ones.
<p />
* Does not need special dynamically-linked libraries.
<p />
* Does not need to handle much input or output data. At
   least during the current testing the input tar file
   after compression is on the order of 4Mb, which
   includes both the OpenSees executable and input
   data. The output file can be at least up to 38Mb but
   was often smaller.
<p />
* Does not need much RAM. During one test an OpenSees
   job needed less than 200Mb although this could be
   checked.
<p />
There are some instructions for the
<a href="/bin/view/Engagement/Running_OpenSees_on_OSG_b" class="twikiLink">prototype integration with OSG</a>.
<p />
<h3><a name="Responsibilities_Timeline_and_St"></a> Responsibilities, Timeline, and Status </h3>
<p />
This activity started in Jan 2010 and finished in Feb 2010, with some tail on addressing long jobs in preparation for the next phase.
<p />
The OSG User Support team is responsible for writing
scripts and configuration files to enable the
integration of OpenSees with OSG, for testing the
infrastructure, for writing documentation, and for
solving problems due to the configuration of OSG. NEES
staff is responsible for explaining how to run
OpenSees, for providing test cases, for doing further
testing, and for giving feedback on the scripts and
documentation.
<p />
The initial phase of this project ran from about
mid-January to the beginning of March. The resulting
system satisfies all of the requirements except that
support for jobs that run for more than 10 hours is not
fully in place. This project is based on <a href="/bin/view/Main/OpenSeesAndCactusDocs" class="twikiLink">some work last year</a>
to remove the dependencies of OpenSees on MPI
libraries, which are not always installed at OSG sites.
<p />
Using the results of this project, OSG computers have
run analyses of the response of a structure called the
<em>Self-Centering Steel Plate Shear Wall (SC-SPSW)</em>
system. The analyses required about 300 jobs that ran
for an estimated 2400 hours.
<p />
<h3><a name="Ongoing_Work"></a> Ongoing Work </h3>
<p />
More recently, the OSG User Support group has been
working with the glideinWMS operational teams to
improve long job support. The changes to the OSG
infrastructure (glideinWMS frontend and glideinWMS
factory) to support jobs that are up to four days long
should already be in place. We are evaluating potential
solutions (specific sites and submit file expressions)
that use this infrastructure, and have found that some
are already usable.
<p />
In the future, requests for support should
preferentially be directed through the standard OSG
support channels (GOC tickets and VO Forum), although
directed email will still be answered at a best effort
level.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="2_Submitting_glideinWMS_jobs_to"></a> 2. Submitting glideinWMS jobs to OSG through NEEShub </span></h2>
<p />
<a href="http://nees.org/" target="_top">NEEShub</a> is a portal based on <a href="http://hubzero.org/" target="_top">HUBzero</a> which is designed
to improve and simplify the collaborative processes
among scientists. NEEShub already <a href="http://nees.org/resources/openseeslab" target="_top">has the ability</a> to
run OpenSees jobs on dedicated computers and on
TeraGrid. Our goal is to enable running NEES jobs,
including OpenSees jobs, on OSG.  The integration of
NEEShub with OSG is relevant because for some use cases
portal submission is considered easier to use than the
command-line-based job submission described in the
previous sections.
<p />
The proof-of-principle phase for the integration of
HUBzero with OSG through glideinWMS has been
successfully closed on Mar 23, 2011. A few test
OpenSees jobs have been successfully run on OSG
through nanoHUB. This was achieved by installing near
the portal a glideinWMS front end interfaced with the
OSG glidein Factory. The front end offers a condor
batch system interface for job submission, an interface
which is already supported by the portal. For this test
the condor submission occurred in a <a href="http://hubzero.org/resources/workspace" target="_top">HUBzero workspace</a>,
an environment equivalent to a linux shell. The jobs
were submitted under a community-based service
certificate of the front end using the nanoHUB VO.
<p />
Work is currently ongoing on a similar integration for
NEEShub. This work can lead to a future "production
demo" phase of integration of NEES with OSG.
<p />
The work on supporting long jobs for direct job
submission will also be applicable for NEEShub
submission. If there is a large demand for those kinds
of jobs, however, future work may include investigating
how to enable checkpointing for OpenSees.
<p />
Other future work may include providing a GUI interface
for OpenSees job submission through the portal. This
could be possibly generated semi-automatically with
<a href="https://nanohub.org/infrastructure/rappture/" target="_top">Rappture</a>, a technology often used for HUBzero programs.
<p />
Steven Clark and Michael McLennan at Purdue's <a href="http://www.rcac.purdue.edu/" target="_top">RCAC</a> have
worked on the proof-of-principle tests and on the
installation of a glideinWMS front end on NEEShub. OSG
User Support is available for consulting if problems
come up with the installation/configuration, and will
act as a liaison to the glideinWMS experts if
necessary.
<p />
7/20/11 update:  The <a href="http://nees.org/topics/NEESRunningOpenSeesonOSGComputers" target="_top">current NEEShub/OSG interface</a>
should be about ready for people to try.
<p />
     -- OSG User Support for NEES </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Engagement<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Engagement/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>EngageOpenSeesB</span> <br />    
Topic revision: r12 - 20 Jul 2011 - 21:28:58 - <span class="twikiNewLink">MarkoSlyz<a href="/bin/edit/Engagement/MarkoSlyz?topicparent=Engagement.EngageOpenSeesB" rel="nofollow" title="MarkoSlyz (this topic does not yet exist; you can create it)">?</a></span>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />