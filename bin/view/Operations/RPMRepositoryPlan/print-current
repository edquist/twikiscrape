<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> RPMRepositoryPlan &lt; Operations &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Operations/RPMRepositoryPlan?_T=16 Feb 2017" type="application/x-wiki" title="edit RPMRepositoryPlan" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Operations/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Operations/RPMRepositoryPlan"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Proposed_Plan_for_OSG_Software_R"></a> Proposed Plan for OSG Software Repository at GOC </h1>
<p />
One side-effect of the transition to RPMs is that we have the ability to unify software repositories, and make GOC the primary endpoint for OSG software. That is, instead of having separate VDT and OSG software caches, we will have a single software repository. This repository can be mirrored. The official, supported repository should be hosted at the GOC and the contents maintained primarily by the OSG Software Team.
<p /> <ol>
<li> The GOC will host the OSG Software development, testing, release, and contrib repositories at software.grid.iu.edu (and software-itb.grid.iu.edu for testing the repository creation process itself).  These require about 2 GB per repository (except contrib; size is currently minimal), and may grow to 3GB as time goes forward. <ol>
<li type="A"> The creation of these repositories will be done using the <code>mash</code> tool, which will copy software from the Koji-based build server (koji-hub.batlab.org) to the GOC. The OSG Software Team will provide the appropriate configuration files for <code>mash</code>, while Operations will script and automate its invocation.
</li> <li type="A"> <em>The total estimated disk space, allowing for a comfortable safety margin is 45 GB. Is this a problem?</em>
</li> <li type="A"> <em>Can we freeze software.grid and software-itb.grid and create a new service? Perhaps repo.grid? Not really an increase in effort since work on software.grid would be transferred to repo.grid.</em>
</li></ol> 
</li> <li> The development and testing repositories will be updated automatically (cronjob every 30 or 60 minutes), but the release repository is only updated manually by designated team members. <ol>
<li type="A"> The release repository will only be updated during designated release or maintenance windows.
</li> <li type="A"> <em>It is anticipated that after a release many site-admins will update immediately. This raises a concern for required bandwidth. If a total of 13.6 GB is to be transferred over 4 hours this implies a required bandwidth of 7.6 Mb/sec. No problem? Check my assumptions.</em>
</li> <li type="A"> <em>There will be multiple instances of the repository implemented in Bloomington using LVS. This will allow additional capacity to be added as needed and give additional fault tolerance.</em>
</li> <li type="A"> From BB: In addition, if we have sites that offer mirrors (there are at least 4 likely candidates), we can distribute the load further.  
</li></ol> 
</li> <li> The software repositories will be covered by the same <a href="/bin/view/Operations/SoftwareCacheServiceLevelAgreement" class="twikiLink">SLA as the webserver</a>. <ol>
<li type="A"> GOC will assist the Software team in updating the SLA as necessary.
</li></ol> 
</li> <li> GOC will host a rsync server so sites can create their own mirrors of the repository.  We believe this service should be at a "normal" level of priority, and considered a routine IT service. <ol>
<li type="A"> <em>What do we need to open to the public and what are the security implications of this? Are the access mechanisms already proposed sufficient for creation of a "mirror" site?</em>
</li> <li type="A"> From BB: This would only provide access to the software repositories.  The existing access mechanisms are not sufficient (rsync allows one to skip downloading files already moved).  This is a standard IT service for software distribution that sites expect.
</li></ol> 
</li> <li> OSG Software, Security, and Operations will come to an agreement about whether to phase-out the existing CA certificate repository, and the timeline. <ol>
<li type="A"> <em>Freezing software.grid is a non-destructive first step in this direction.</em>
</li></ol> 
</li> <li> The hosted repository will only contain precisely the contents of the repository at the OSG Software Koji server.  Specifically, if a team (such as Software, Operations <em>or Security</em>) wants to add RPMs to the repository, they will have to add it to Koji first, then promote it to the appropriate repository.  This is a limitation of <code>mash</code>.  OSG Software will help create the correct ACLs in Koji for each piece of software.  Pieces of software that will have special ACLs include: <ol>
<li type="A"> Security team will be the only ones allowed to promote CA certificates from development to testing, and from testing to release.
</li> <li type="A"> <em>Security team will update the Koji server directly, the release repository will only be updated during designated release or maintenance windows.</em>
</li> <li type="A"> Operations team will be the only ones allowed to promote vo-client (vomses file) and osg-voms (LSC files) from testing to release.
</li></ol> 
</li></ol> 
<p />
<h1><a name="Timeline"></a> Timeline </h1>
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Operations/RPMRepositoryPlan?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Date</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Operations/RPMRepositoryPlan?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Goal</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Operations/RPMRepositoryPlan?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Notes</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> 1-Sep-2011 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> repo.grid.iu.edu available </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> No guarantees as per the SLA yet, though it will be running </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> 28-Oct-2011 </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> repo.grid.iu.edu production ready </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> SLA takes effect, in advance of production release </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Footnote: repo-itb.grid.iu.edu will also exist, but it's for the GOC's benefit only. It will be their tool for testing how the run and maintain repo.grid.iu.edu. We should not use it or rely on it. </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Operations<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Operations/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>RPMRepositoryPlan</span> <br />    
Topic revision: r11 - 06 Dec 2016 - 18:12:57 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />