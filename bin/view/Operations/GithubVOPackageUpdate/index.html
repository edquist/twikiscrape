<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GithubVOPackageUpdate &lt; Operations &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Operations/GithubVOPackageUpdate?_T=16 Feb 2017" type="application/x-wiki" title="edit GithubVOPackageUpdate" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Operations/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Operations/GithubVOPackageUpdate"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Github_Based_VO_Package_Update_P"></a> Github Based VO Package Update Procedure </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Purpose"></a> Purpose </span></h2>
<p />
This document will explain the step-by-step procedures for creating and releasing the VO Package. 
<p />
The VO-Package files can be found here.
<a href="https://github.com/opensciencegrid/osg-vo-config" target="_top">https://github.com/opensciencegrid/osg-vo-config</a>
<p />
An explanation of the VO-Package contents can be found at <a href="https://twiki.grid.iu.edu/bin/view/Operations/SupportWorkArea/VOPackagePurposeUpdates" target="_top">https://twiki.grid.iu.edu/bin/view/Operations/SupportWorkArea/VOPackagePurposeUpdates</a>.
<p />
The change log for previous releases can be found at: <a href="https://twiki.grid.iu.edu/bin/view/Operations/VOPackageReleases" target="_top">https://twiki.grid.iu.edu/bin/view/Operations/VOPackageReleases</a>
<p />
A few things to know before outlining the update procedure. Every morning the <a href="mailto&#58;goc&#64;opensciencegrid&#46;org">goc&#64;opensciencegrid.org</a> inbox receives an automated email that outlines any new Registration tickets that were created in the last 24 hours. These tickets are automatically assigned to Rob Quick, Elizabeth Prout, and Kyle Gross for their review. If the request is for a new VO then the, requests are reviewed by the OSG council and are either approved or denied. This document assumes that all necessary parties have reviewed and approved the Registration Request(s), allowing the update to commence. 
<p />
<strong><em>Adding new VOs will take an addition to each of these files.</em></strong> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
<p />
   This process begins when a ticket comes into the NOC from a person(s) requesting to start a VO or Remove a VO. Prior to making any changes to the VO-Package it is important to document the changes that are to be made. A member of the GOC will check if a page for the VO Package Releases has been created. If it has not been created then a new page will be created. Once the page has been created the GOC staff member will make note of the ticket number any changes that need to be made.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Updates_and_Changes_to_the_vomse"></a> Updates and Changes to the vomses file </span></h2>
<p /> <ol>
<li> The VO wishing to join or be removed should provide us with their VOMS address but, if they don't provide this information, it can be obtained by visiting OIM's Virtual Organizations section, and selecting the VO you require and then capturing the line for the <pre>Membership Services (VOMS) URL</pre>
</li> <li> Go to the VOMS page of the VO. Next go to the Configuration Info Tab. Then Capture the entry for <pre>VOMSES string for this vo:</pre>
</li></ol> 
<p />
<h3><a name="Example"></a> Example </h3>
   <pre>&#34;snoplus.snolab.ca&#34; &#34;voms.gridpp.ac.uk&#34; &#34;15503&#34; &#34;/C&#61;UK/O&#61;eScience/OU&#61;Manchester/L&#61;HEP/CN&#61;voms.gridpp.ac.uk&#34; &#34;snoplus.snolab.ca&#34;</pre>
<p /> <ol>
<li> Update the the change log for the new version at <a href="https://twiki.grid.iu.edu/bin/view/Operations/VOPackageReleases" target="_top">https://twiki.grid.iu.edu/bin/view/Operations/VOPackageReleases</a>.
</li> <li> Go to the vomses file on github. <a href="https://github.com/opensciencegrid/osg-vo-config/blob/master/vomses" target="_top">https://github.com/opensciencegrid/osg-vo-config/blob/master/vomses</a>
</li> <li> Add or modify the line in question. 
</li> <li> Commit on github.
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Updates_and_Changes_to_the_edg_m"></a> Updates and Changes to the edg-mkgridmap.conf file </span></h2>
<p />
A breakdown of the edg-mkgridmap file:
<p />
<em>Please note that the #------------------- is necessary for this due to the script the software team uses as the file is parsed. So don't forget to include that as it appears in the rest of the file.</em>
<p />
<pre>
#-------------------
#USER-VO-MAP &#91;username] &#91;VO’s Short name] – &#91;Incremental Number] – &#91;VO Contact name and email] group  &#91;voms address and user name ]
</pre>
<p /> <ol>
<li> If information is not provided in the ticket. Visit the VOMS Address listed in OIM under the VO tab.
</li> <li> Select the Configuration Information Tab
</li> <li> Select and copy the infomation contained in the section listed below:      <em>“Example Mkgridmap configuration for this vo:”</em>  
</li> <li> Update the change log for the new version
</li> <li> Go to the edg-mkgridmap.conf file on github
</li> <li> Add or modify the line in question
</li> <li> 	Commit the change on <span class="twikiNewLink">GitHub<a href="/bin/edit/Operations/GitHub?topicparent=Operations.GithubVOPackageUpdate" rel="nofollow" title="GitHub (this topic does not yet exist; you can create it)">?</a></span>
</li></ol> 
<p />
<em>If you are removing an entry in this file please copy what is to be removed and place that in the Change Log etc...</em>
<p />
<p />
<h3><a name="Example_Step_3"></a> Example Step 3: </h3>
<em>Please note that on that page there is a period, “.” That will need to be removed once copied into the file.</em>
<p />
<pre>
Example Mkgridmap configuration for this vo:
group vomss://voms.fnal.gov:8443/voms/cdf .cdf 
</pre>
<p />
<h3><a name="Example_Step_6"></a> Example Step 6: </h3>
<pre>
   #USER-VO-MAP xenon.biggrid.nl XENON - 62 - Alfio Rizzo (ar3081&#64;columbia.edu)
group vomss://voms.grid.sara.nl:8443/voms/xenon.biggrid.nl xenon.biggrid.nl
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Updates_and_Changes_to_the_gums"></a> Updates and Changes to the gums.template </span></h2>
<p />
1. Notification of change required arrives at GOC.
<p />
2. Review change request and note information in Change Log.
<p /> <ol>
<li type="a"> <a href="https://twiki.grid.iu.edu/bin/view/Operations/VOPackageReleases" target="_top">https://twiki.grid.iu.edu/bin/view/Operations/VOPackageReleases</a>
</li></ol> 
<p />
3. Go to <a href="https://github.com/opensciencegrid/osg-vo-config/blob/master/gums.template" target="_top">https://github.com/opensciencegrid/osg-vo-config/blob/master/gums.template</a> Add or modify the line in question.
<p />
4. Commit the change on <span class="twikiNewLink">GitHub<a href="/bin/edit/Operations/GitHub?topicparent=Operations.GithubVOPackageUpdate" rel="nofollow" title="GitHub (this topic does not yet exist; you can create it)">?</a></span>.
<p />
<h3><a name="Example_gums_template_entry"></a> Example gums.template entry: </h3>
<pre>
&#60;!-- 62 XENON --&#62;
&#60;groupMapping name&#61;&#34;xenon.biggrid.nl&#34; accountingVo&#61;&#34;xenon.biggrid.nl&#34; accountingDesc&#61;&#34;XENON&#34;&#62;
    &#60;userGroup className&#61;&#34;gov.bnl.gums.VOMSGroup&#34;
    url&#61;&#34;https://voms.grid.sara.nl:8443/voms/xenon.biggrid.nl/services/VOMSAdmin&#34;
    persistenceFactory&#61;&#34;mysql&#34; name&#61;&#34;xenon.biggrid.nl&#34;
    voGroup&#61;&#34;/xenon.biggrid.nl&#34;
    sslCertfile&#61;&#34;/etc/grid-security/http/httpcert.pem&#34; sslKey&#61;&#34;/etc/grid-security/http/httpkey.pem&#34;
    matchFQAN&#61;&#34;vo&#34; acceptProxyWithoutFQAN&#61;&#34;true&#34;/&#62;
    &#60;accountMapping className&#61;&#34;gov.bnl.gums.GroupAccountMapper&#34;
    groupName&#61;&#34;xenon.biggrid.nl&#34;/&#62;
&#60;/groupMapping&#62; 
</pre>
<p />
More information on gums.config can be found here <a href="https://www.racf.bnl.gov/Facility/GUMS/1.1/guide_config_gums.html" target="_top">https://www.racf.bnl.gov/Facility/GUMS/1.1/guide_config_gums.html</a> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Rebuild_vomsdir_from_vomses_and"></a> Rebuild vomsdir from vomses and the Cross-check script. </span></h2>
<p />
It has not become a standard that we rebuild the vomsdir for every vo-package release. This process can be ran independent from the vo-package build. Its purpose is to help identify changes that may have been made but, it does not serve as the authoritative source of this information. 
<p />
<pre>./bin/osg-make-vomsdir --vomses vomses</pre>
<p />
<h6><a name="Note_Need_Details_on_How_to_dete"></a> Note: Need Details on How to determine which DN is the correct DN if a discrepancy is found. </h6>
<p />
The Cross-check script is used for checking the consistency between the vomses and vomsdir lsc files. If a mismatch is discovered, the correct DN must be determined and the incorrect DN updated accordingly. 
<p />
<pre>./bin/vomses-crosscheck</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Verification_Steps"></a> Verification Steps </span></h2>
<p />
<h3><a name="gums_generate_fqan_mapfile"></a> gums-generate-fqan-mapfile </h3>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Release_Steps"></a> Release Steps </span></h2>
<p /> <ul>
<li> Create a Jira ticket. The contents of this Jira ticket are essentially the same as what can be found on the release notes.
</li> <li> Assign the ticket to the software group.
</li> <li> Verify there are no other GOC tickets pertaining to changes in the VO-Package.
</li> <li> Verify all previous steps have been completed.
</li> <li> Go to <a href="https://github.com/opensciencegrid/osg-vo-config/releases" target="_top">https://github.com/opensciencegrid/osg-vo-config/releases</a>
</li> <li> Select "Draft a new release"
</li> <li> Enter the Tag version. The format should be "release-(version#)" example "release-56"
</li> <li> The target field after the Tag version can be left as the default. 
</li> <li> Enter a Release Title. This can be any title you wish. I followed the format "Month YY VO-Package Release" 
</li> <li> In the Description field below a brief overview of changes that were made can be entered.
</li> <li> Optionally, this can be saved as a draft and updated fully at a later date if need be.
</li> <li> Leave "This is a pre-release" Checkbox unchecked.
</li> <li> Click "Publish release"
</li></ul> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Operations<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GithubVOPackageUpdate</span> <br />    
Topic revision: r7 - 14 May 2015 - 18:27:46 - <a href="/bin/view/Main/ChrisPipes" class="twikiLink">ChrisPipes</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />