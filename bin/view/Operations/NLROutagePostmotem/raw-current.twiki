---+ NLR Issues January, 25th 2011

---+++ Timeline
All times UTC
   * 15:49 Indiana !GigaPOP connectivity to National Lambda Rail (NLR) interrupted due to configuration changes by NLR.
   * 16:11 GOC recieves first automated alert. &quot;Number of CEs found(57) is less than expected(63)&quot; from is1, is2
   * 16:30 (Approximate) GOC finds NLR links in all resources failing to report, no NLR links is reporting resources.
   * 16:40 (Approximate) GOC contacts GRNOC, are informed of the problem
   * 17:39 Formal communication from GRNOC engineers informing us of problem
   * 17:47 Issue declared resolved when GOC diagnostics determine correct behavior by is1, is2.
   * 18:02 Community notification sent.

---+++ Analysis

I think we did as well as possible, with two possible places to improve.
Time to solution is time to discover problem plus time to fix it. Now,
since it was not our problem, time to fix it cannot be improved by us.

Time to discover problem was 22 minutes. I read this as twice the &quot;fresh&quot;
time (10 minutes) of the BDII data. The alarms we got were 20 minutes apart,
long enough to insure that if resources were not reporting any data from
those resources would be &quot;stale&quot;. Since the time of a failure is random,
the time between a failure and our test to determine a failure is random.
So, on the average it is 10 minutes between failure and first test for
failure. In this event it was 2 minutes. The old data from resources that
could not report was still fresh so the test passed. 20 minutes later the
data was stale and the test failed. Bottom line on this is that 1/2 the time
the first test will fail to diagnose a problem and the alarm can come as late
as 30 minutes after the event.

---+++ Suggested Improvements
   1 Reduce the time between tests. The resources report at random times, the number of resources decays randomly. Increasing the sampling rate increases the probability we hit the test threshold as soon as it is crossed.
   2 Increase the test threshold. (The minimum required number of sites) This increases the probability the test threshold is crossed for a given test taken at a random time.

I suggest 10 minutes and 85 resources as starting values. This will increase
the probability of a false positive but, as I recall, the false positive rate
for this test is pretty small.

---+++ Rob&#39;s Analysis

My final analysis, based on reaction to reporting this problem to
OSG,  is that there is not issue and this is an acceptable time to
solution.  I agree with your improvement would allow even finer grain
monitoring,  but I also think that if there was no feedback this was
handled  improperly we shouldn&#39;t make changes.  

If something similar happens again, I think we revisit and possibly
implement your  suggestions.




-- Main.RobQ - 02 Feb 2011
