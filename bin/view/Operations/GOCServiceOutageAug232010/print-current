<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GOCServiceOutageAug232010 &lt; Operations &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Operations/GOCServiceOutageAug232010?_T=16 Feb 2017" type="application/x-wiki" title="edit GOCServiceOutageAug232010" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Operations/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Operations/GOCServiceOutageAug232010"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> -- <a href="/bin/view/Main/ScottTeige" class="twikiLink">ScottTeige</a> - 24 Aug 2010
<p />
<h1><a name="DRAFT"></a> DRAFT </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Outage_Report_Friday_20_August_t"></a> Outage Report, Friday 20 August through Monday 23 August </span></h2>
<p />
<h3><a name="Incident_Details"></a> Incident Details: </h3>
<p />
On June 30, replication of the OIM <span class="twikiNewLink">MySQL<a href="/bin/edit/Operations/MySQL?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="MySQL (this topic does not yet exist; you can create it)">?</a></span> database to sonofsam.uits.indiana.edu (<span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span>)
was halted in preparation for re-purposing of that machine. Originally, <span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span> was
intended to be used as a development machine for OIM related tasks.
<span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span> was not intended to be referenced by production services.
<p />
The halt of replication caused silent failure of the send of downtime records to consumers
of this data. On July 14 it was noticed that an availability calculation produced
an incorrect result. It was, erroneously, determined that the incorrect result
was due to differences in the OSG and WLCG algorithms. On July 21 another incorrect
result was observed and again, independently, diagnosed as an algorithm difference.
<p />
On August 19, as a followup, the results were again examined and the original
analyst attempted a manual query of the <span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span> database. At this time it was observed
that there were no updates since June 30. The scripts were examined and it was determined
that <span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span> was being referenced in one of them.
<p />
On August 20 replication of the the OIM <span class="twikiNewLink">MySQL<a href="/bin/edit/Operations/MySQL?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="MySQL (this topic does not yet exist; you can create it)">?</a></span> database to the RSV-SAM server machine
began. The effected script was modified to reference this database. This modification
caused the RSV-SAM uploader to fail for reasons that are under investigation.
<p />
<h3><a name="Immediate_Action"></a> Immediate Action: </h3>
<p />
At 4:35 EST August 23, it was reported that no RSV_SAM messages had been received
since August 20. By 10:30 EST the scripts had been reverted to their original versions
and the missing data re-sent.
<p />
<h3><a name="Current_Status"></a> Current Status: </h3>
<p />
At this time, OIM based reporting remains non-functional but it is possible to
manually send the data. This is being done once per day. The RSV-SAM version is
currently implemented and it has been verified current messages are being received.
<p />
<h3><a name="Root_Cause_Analysis"></a> Root Cause Analysis: </h3>
<p />
1) A change outside a Tuesday change window was implemented.
<p />
2) A production service referenced a non-production database.
<p />
<h3><a name="Future_Actions"></a> Future Actions: </h3>
<p />
Details of the permanent repair and a set of tests to be performed prior to implementation
are currently being investigated and will be reported here as they are developed.
<p />
Both the OIM and RSV-SAM problems are in a perl module included by other scripts
to perform these tasks. A version of this module that works for OIM but not RSV-SAM
exists and a version that works for RSV-SAM but not OIM also exists. Since the RSV-SAM
version works even with the stale database, it cannot actually depend on that database.
The path to a permanent repair of this problem involves locating the unnecessary and
erroneous database references in the RSV-SAM version and removing them.
<p />
Investigations as to how this data is consumed downstream of the GOC will be carried out.
These investigations may lead to a change in criticality of these services.
<p />
Monitoring of these services at the GOC will be implemented.
<p />
Update, 31/Aug: <ul>
<li> Connection requests to <span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span> are being logged to determine what external entities are accessing <span class="twikiNewLink">SoS<a href="/bin/edit/Operations/SoS?topicparent=Operations.GOCServiceOutageAug232010" rel="nofollow" title="SoS (this topic does not yet exist; you can create it)">?</a></span> <ul>
<li> 129.93.239.156 (osg-test4.unl.edu) Nebraska at Lincoln (accepted)
</li> <li> 134.68.22.136 (oim.grid.iu.edu) Indiana University (accepted)
</li> <li> 129.79.14.137 (dahmer.uits.indiana.edu) Indiana University (accepted)
</li> <li> iptables_dropped:  1 tcp packet from 128.142.166.159 (sam202.cern.ch) port 36867
</li> <li> iptables_dropped:  1 tcp packet from 128.142.166.159 (sam202.cern.ch) port 47507
</li></ul> 
</li> <li> James Casey confirms the data sent to SAM is used only for accounting reports. It is unknown (but unlikely) it is being used by any VOs.
</li> <li> A service monitor has been installed and tested.
</li> <li> Unsent data: <ul>
<li> 08-24 12:30 through 08-25 00:31
</li> <li> 08-25 06:31 through 08-26 14:30
</li> <li> 08-26 22:35 through 08-27 15:30
</li></ul> 
</li></ul> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Operations<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GOCServiceOutageAug232010</span> <br />    
Topic revision: r6 - 03 Sep 2010 - 11:12:23 - <a href="/bin/view/Main/ScottTeige" class="twikiLink">ScottTeige</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />