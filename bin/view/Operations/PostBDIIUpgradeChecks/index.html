<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> PostBDIIUpgradeChecks &lt; Operations &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Operations/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Operations/PostBDIIUpgradeChecks?_T=16 Feb 2017" type="application/x-wiki" title="edit PostBDIIUpgradeChecks" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Operations/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Operations/PostBDIIUpgradeChecks"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<p />
<font color="#ff0000"> This document is in Draft Status </font>
<p />
<h1><a name="Post_Upgrade_Functionality_Check"></a> Post Upgrade Functionality Checks </h1>
<p />
This document is to provide a list of checks that will test the functionality of the BDII services after an upgrade has been done. These can be done from the end user perspective and does not include admin level checks of the service which require access to the BDII hosts.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Checks_Immediately_after_service"></a> Checks Immediately after service is brough up </span></h2> <ul>
<li> Check Web Page Display (This is not a vital part of the BDII Service but allows a manual check of the incoming data.) <ul>
<li> These can be found at <a href="http://is1.grid.iu.edu" target="_top">http://is1.grid.iu.edu</a> and <a href="http://is2.grid.iu.edu" target="_top">http://is2.grid.iu.edu</a> (as a specific instance is being checked do not use <a href="http://is.grid.iu.edu" target="_top">http://is.grid.iu.edu</a> as you can not be sure which BDII host you will land on.)
</li></ul> 
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Checks_5_Minutes_after_the_servi"></a> Checks ~5 Minutes after the service is brought up </span></h2> <ul>
<li> From Status Page at <a href="http://is1.grid.iu.edu/cgi-bin/status.cgi" target="_top">http://is1.grid.iu.edu/cgi-bin/status.cgi</a> or <a href="http://is2.grid.iu.edu/cgi-bin/status.cgi" target="_top">http://is2.grid.iu.edu/cgi-bin/status.cgi</a> <ul>
<li> Check freshness of Raw Incoming Data most resources should be &lt; 5 Minutes
</li> <li> Check freshness of Data Feeds to OSG and WLCG these should also be &lt; 5 Minutes
</li></ul> 
</li> <li> Checks from Command Line of LDAP Server Functionality  <ul>
<li> Run ldapsearch -h is1.grid.iu.edu -p 2170 -x -b mds-vo-name=local,o=grid - this will return several thousand lines of GLUE Schema information
</li> <li> Run ldapsearch -h is1.grid.iu.edu -p 2180 -x -b o=grid - this will also return several thousand lines of GLUE Schema information
</li> <li> Possible Error Examples Below
</li></ul> 
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Ongoing_Monitoring_Checks"></a> Ongoing Monitoring Checks </span></h2> <ul>
<li> Several scripted checks run on these services including:  <ul>
<li> Check of BDII Freshness at CERN Top Level BDII and SAM BDII available at <a href="http://tinyurl.com/2u3xl8q" target="_top">http://tinyurl.com/2u3xl8q</a> only WLCG resources will be listed here as they are the only resources publishing to CERN BDIIs, these tests are run each hour on the 30 minute mark. So may be behind up to an hour after upgrade has completed.
</li></ul> 
</li> <li> Email alerts are sent to the GOC-ALERTS mailing list for the following conditions <ul>
<li> More than 10% of resources are not updating BDII information (either WLCG or OSG)
</li> <li> FNAL or BNL is not available from the CERN Top Level BDIIs
</li> <li> RSV Probes check timestamps of information in the BDII failure are reported via mail
</li></ul> 
</li> <li> The BDII Service also reports many system level metrics via Munin, these should be checked continuously for anomaly after an upgrade. 
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="LDAP_Errors"></a> LDAP Errors </span></h2>
<p />
<h3><a name="LDAP_Server_Not_Running"></a> LDAP Server Not Running </h3>
<p />
This error will happen in the LDAP Server is not responding.
<p />
<pre>ldap_bind: Can't contact LDAP server (-1)</pre>
<p />
<h3><a name="Data_not_found"></a> Data not found </h3>
<p />
This type of error will happen if no data is found matching your query, first check the ldapsearch syntax if it is correct data is missing. 
<pre># extended LDIF
#
# LDAPv3
# base <mds-vo-name=local,o=grid> with scope subtree
# filter: (objectclass=*)
# requesting: ALL
#

# local, grid
dn: Mds-Vo-name=local,o=grid
objectClass: GlueTop
objectClass: Mds
Mds-Vo-name: local

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1
</pre>
-- <a href="/bin/view/Main/RobQ" class="twikiLink">RobQ</a> - 11 Aug 2010
-- <a href="/bin/view/Main/RobQ" class="twikiLink">RobQ</a> - 11 Aug 2010</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Operations<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Operations/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>PostBDIIUpgradeChecks</span> <br />    
Topic revision: r2 - 27 Aug 2010 - 17:25:51 - <a href="/bin/view/Main/ElizabethChism" class="twikiLink">ElizabethChism</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />