<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> SearchPatternCookbook &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/SearchPatternCookbook?_T=16 Feb 2017" type="application/x-wiki" title="edit SearchPatternCookbook" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/SearchPatternCookbook"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Search_Pattern_Cookbook"></a>  Search Pattern Cookbook </h1>
<p />
The Search function in TWiki is very powerful. Especially searches using a <a href="/bin/view/TWiki/RegularExpression" class="twikiLink">RegularExpression</a> play an important part of tapping TWiki's full potential. Unfortunately <a href="/bin/view/TWiki/RegularExpression" class="twikiLink">RegularExpressions</a> can be incredibly obscure to the uninitiated. 
<p />
Most people not familiar (enough) with Regular Expressions mostly cut and paste (and maybe tweak) from existing examples. This page intends to collect lots of examples together.
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Pattern_1_Extract_values_from_a"> Pattern 1: Extract values from a table</a> <ul>
<li> <a href="?cover=print#Problem_definition"> Problem definition</a>
</li> <li> <a href="?cover=print#Solution"> Solution</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_2_List_generated_from_fo"> Pattern 2: List generated from form classification</a> <ul>
<li> <a href="?cover=print#Problem"> Problem</a>
</li> <li> <a href="?cover=print#Test_case"> Test case</a>
</li> <li> <a href="?cover=print#Solution_AN1"> Solution</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_3_Creating_lists_of_TWik"> Pattern 3: Creating lists of TWiki usernames</a> <ul>
<li> <a href="?cover=print#Problem_AN1"> Problem</a>
</li> <li> <a href="?cover=print#Solution_1_Appropriate_for_Sep_2"> Solution 1: Appropriate for Sep 2004 TWiki (Cairo)</a>
</li> <li> <a href="?cover=print#Solution_2_As_Solution_1_but_wit"> Solution 2: As Solution 1, but with possibility for multi-selecting usernames</a>
</li> <li> <a href="?cover=print#Solution_3_Appropriate_for_TWiki"> Solution 3: Appropriate for TWiki 4 (Dakar)</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_4_Extract_the_parent_of"> Pattern 4: Extract the parent of a given topic</a> <ul>
<li> <a href="?cover=print#Problem_AN2"> Problem</a>
</li> <li> <a href="?cover=print#Solution_AN2"> Solution</a>
</li> <li> <a href="?cover=print#Test_Case"> Test Case</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_5_Search_and_display_the"> Pattern 5: Search and display the home topics of public webs in a list</a> <ul>
<li> <a href="?cover=print#Problem_AN3"> Problem</a>
</li> <li> <a href="?cover=print#Solution_AN3"> Solution</a>
</li> <li> <a href="?cover=print#Test_case_AN1"> Test case</a>
</li> <li> <a href="?cover=print#Alternative_solution"> Alternative solution</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_6_Extract_a_value_from_a"> Pattern 6: Extract a value from a bullet list</a> <ul>
<li> <a href="?cover=print#Problem_AN4"> Problem</a>
</li> <li> <a href="?cover=print#Solution_AN4"> Solution</a>
</li> <li> <a href="?cover=print#Test_case_AN2"> Test case</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_7_Search_for_Form_and_Me"> Pattern 7: Search for Form and Meta data: explained</a> <ul>
<li> <a href="?cover=print#Problem_AN5"> Problem</a>
</li> <li> <a href="?cover=print#Solution_AN5"> Solution</a>
</li></ul> 
</li> <li> <a href="?cover=print#Pattern_8_Search_all_topics_that"> Pattern 8: Search all topics that have been moved</a> <ul>
<li> <a href="?cover=print#Problem_AN6"> Problem</a>
</li> <li> <a href="?cover=print#Solution_AN6"> Solution</a>
</li></ul> 
</li> <li> <a href="?cover=print#Contributors"> Contributors</a>
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_1_Extract_values_from_a"></a> Pattern 1: Extract values from a table </span></h2>
<p />
<h3><a name="Problem_definition"></a> Problem definition </h3>
Suppose there is a topic with a table defining entries in a TWikiForm. I.e. they define select menu items in a form template. They are then formatted like:
<p />
<pre>
&#124; &#42;Name&#42; &#124; &#42;Type&#42; &#124; &#42;Tooltip message&#42; &#124;
&#124; option1 &#124; option &#124; &#124;
&#124; option2 &#124; option &#124; &#124;
&#124; option3 &#124; option &#124; &#124;
</pre>
<p />
How to extract the 'name' values, i.e. 'option1', 'option2' and 'option3' and put them in a HTML form select input?
<p />
<h3><a name="Solution"></a> Solution </h3>
The following search pattern can be employed:
<p />
<pre>
&#60;form&#62;
&#60;select&#62;
&#37;SEARCH{ &#34;^\&#124;&#91;^\&#124;]&#42;\&#124; &#42;option &#42;\&#124;&#34; topic&#61;&#34;&#37;TOPIC&#37;&#34; regex&#61;&#34;on&#34; multiple&#61;&#34;on&#34; nosearch&#61;&#34;on&#34; nototal&#61;&#34;on&#34; format&#61;&#34;&#60;option&#62;$pattern(^\&#124; &#42;(.&#42;?) &#42;\&#124;.&#42;)&#60;/option&#62;&#34; }&#37;
&#60;/select&#62;
&#60;/form&#62;
</pre>
<p />
which is, in effect:
<form>
<select>
<option>option1</option>
<option>option2</option>
<option>option3</option>
</select>
</form>
<br />    
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_2_List_generated_from_fo"></a> Pattern 2: List generated from form classification </span></h2>
<p />
<h3><a name="Problem"></a> Problem </h3>
Imagine a TWiki form-based topic classification, i.e. every page has a form with several fields. How to: <ol>
<li> create a search to display all topics where one form field is set to a certain value
</li> <li> create a search to filter the list above based on the values of a second form field
</li></ol> 
<p />
<h3><a name="Test_case"></a> Test case </h3>
In practice: <br />    
Image a TWiki form with two fields: <ul>
<li> TopicClassification = One, Two or Three
</li> <li> TopicStatus = Test or Final
</li></ul> 
<p />
We will: <ol>
<li> List all topics where the TopicClassification field is set to 'Two'
</li> <li> Enable the user to filter this list based on the values of TopicStatus
</li></ol> 
<p />
<h3><a name="Solution_AN1"></a> Solution </h3>
<p />
<pre>
&#37;SEARCH{&#34;&#91;T]opicClassification.&#42;value\&#61;.&#42;Two;&#91;T]opicStatus.&#42;value\&#61;.&#42;&#37;URLPARAM{type}&#37;&#34;
regex&#61;&#34;on&#34; casesensitive&#61;&#34;on&#34; nosearch&#61;&#34;on&#34; 
format&#61;&#34;   &#42; $topic - &#60;font face&#61;\&#34;arial,helvetica\&#34; size&#61;\&#34;1\&#34;&#62; 
&#95;last modified by&#95; $wikiusername &#95;on&#95; $date &#60;/font&#62; &#37;BR&#37; &#38;nbsp;&#38;nbsp;&#38;nbsp; 
&#60;font face&#61;\&#34;arial,helvetica\&#34; size&#61;\&#34;1\&#34;&#62; $formfield(TopicStatus) &#60;/font&#62;&#34; 
sort&#61;&#34;topic&#34;}&#37;
</pre>
<p />
The filtering select dialogue is created as in Pattern 1:
<p />
<pre>
&#37;STARTSIDEBAR&#37;
&#42;Filter:&#42; &#37;BR&#37;
&#60;form name&#61;&#34;selectType&#34; action&#61;&#34;&#37;SCRIPTURLPATH{&#34;view&#34;}&#37;/&#37;WEB&#37;/&#34; &#62;
&#60;select name&#61;&#34;type&#34; size&#61;&#34;1&#34; onchange&#61;&#34;document.location&#61;this.value;&#34;&#62; 
&#37;SEARCH{ &#34;^\&#124;&#91;^\&#124;]&#42;\&#124; &#42;option &#42;\&#124;&#34; topic&#61;&#34;TopicClassification&#34; web&#61;&#34;&#37;WEB&#37;&#34; regex&#61;&#34;on&#34; 
multiple&#61;&#34;on&#34; nosearch&#61;&#34;on&#34; nototal&#61;&#34;on&#34; format&#61;&#34;&#60;option value&#61;&#37;INCLUDINGTOPIC&#37;?type&#61;$pattern(^\&#124; &#42;(.&#42;?) &#42;\&#124;.&#42;)&#62;$pattern(^\&#124; &#42;(.&#42;?) &#42;\&#124;.&#42;)&#60;/option&#62;&#34; }&#37; 
&#60;option value&#61;&#37;INCLUDINGTOPIC&#37;&#62;All pages&#60;/option&#62; &#60;/select&#62;
&#60;/form&#62;
&#37;STOPSIDEBAR&#37; 
</pre>
<p />
This will create similar functionality as <a href="http://twiki.org/cgi-bin/view/Plugins.TopicClassificationAddOn" title="'Plugins.TopicClassificationAddOn' on TWiki.org">TWiki:Plugins.TopicClassificationAddOn</a>
<br />    
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_3_Creating_lists_of_TWik"></a> Pattern 3: Creating lists of TWiki usernames </span></h2>
<p />
<h3><a name="Problem_AN1"></a> Problem </h3>
<p />
How to populate a list box with all usernames of registered TWiki users
<p />
<h3><a name="Solution_1_Appropriate_for_Sep_2"></a> Solution 1: Appropriate for Sep 2004 TWiki (Cairo) </h3>
<p />
<pre>
&#60;form name&#61;&#34;testing&#34; action&#61;&#34;&#37;SCRIPTURLPATH{&#34;view&#34;}&#37;/&#37;MAINWEB&#37;&#34; method&#61;&#34;get&#34;&#62;
&#60;select name&#61;&#34;topic&#34;&#62;
&#60;option&#62;Select user...&#60;/option&#62;
&#37;SEARCH{ &#34;Name:;Email:;Country:&#34; web&#61;&#34;&#37;MAINWEB&#37;&#34; type&#61;&#34;regex&#34; nosearch&#61;&#34;on&#34; nototal&#61;&#34;on&#34; format&#61;&#34;&#60;option&#62;$topic&#60;/option&#62;&#34; }&#37;
&#60;/select&#62;
&#60;input type&#61;&#34;submit&#34; value&#61;&#34;Go&#34; /&#62;
&#60;/form&#62;
</pre>
<p />
Which expands to this: (here limited to all Z* users because TWiki.org has so many)
<p />
<form name="testing" action="/bin/view/Main" method="get">
<select name="topic">
<option>Select user...</option>
<p />
</select>
<input type="submit" value="Go" />
</form>
<p />
This searches all topics in the Main web that contain "Name", "Email" and "Country" bullets. Alternatively, do a <a href="/bin/view/TWiki/FormattedSearch" class="twikiLink">FormattedSearch</a> with <code>multiple="on"</code> on the <a href="/bin/view/Main/TWikiUsers" class="twikiLink">Main.TWikiUsers</a> topic.
<p />
<h3><a name="Solution_2_As_Solution_1_but_wit"></a> Solution 2: As Solution 1, but with possibility for multi-selecting usernames </h3>
The example of Solution 1 produces the list box.  Add a MULTIPLE to the <em>select</em> statement, i.e.:
<pre>
&#60;select name&#61;&#34;topic&#34; size&#61;&#34;2&#34; MULTIPLE&#62;
</pre>
<p />
Please note that the Search pattern is unchanged compared to Solution 1. The change is in the HTML form element.
<p />
The abovementioned modification is, in effect:
<form name="testing" action="/bin/view/Main" method="get">
<select name="topic" size="2" MULTIPLE>
<option>Select user...</option>
<p />
</select>
<input type="submit" value="Go" />
</form>
<p />
<h3><a name="Solution_3_Appropriate_for_TWiki"></a> Solution 3: Appropriate for TWiki 4 (Dakar) </h3>
When the User information is stored in a <a href="/bin/view/TWiki/UserForm" class="twikiLink">UserForm</a> (as is default in Dakar) then this list can be generated as follows:
<p />
<pre>
&#60;form name&#61;&#34;testing&#34; action&#61;&#34;&#37;SCRIPTURLPATH{&#34;view&#34;}&#37;/&#37;MAINWEB&#37;&#34; method&#61;&#34;get&#34;&#62;
&#60;select name&#61;&#34;topic&#34;&#62;
&#60;option&#62;Select user...&#60;/option&#62;
&#37;SEARCH{&#34;&#37;META:FORM.&#42;&#91;U]serForm&#34; web&#61;&#34;&#37;MAINWEB&#37;&#34; regex&#61;&#34;on&#34; casesensitive&#61;&#34;on&#34; nosearch&#61;&#34;on&#34; format&#61;&#34;&#60;option&#62;$topic&#60;/option&#62;&#34; sort&#61;&#34;topic&#34; excludetopic&#61;&#34;Test&#42;, TWiki&#42;&#34;}&#37;
&#60;/select&#62;
&#60;input type&#61;&#34;submit&#34; value&#61;&#34;Go&#34; /&#62;
&#60;/form&#62;
</pre>
<p />
In the above example: <ul>
<li> <code><b>META:FORM.*[U]serForm</b></code> will search for all topics with a <a href="/bin/view/TWiki/UserForm" class="twikiLink">UserForm</a> attached - change this if you have a different form where userdata is stored. Please note that this search does not actually extract anything from the form - it just uses it to identify the appropriate pages
</li> <li> <code><b>excludetopic="Test*, TWiki*"</b></code> allows to skip all topics starting with Test and TWiki, such as TestUser or TWikiAdmin. Use this if you have any special users who you do not want appearing in this list
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_4_Extract_the_parent_of"></a> Pattern 4: Extract the parent of a given topic </span></h2>
<p />
<h3><a name="Problem_AN2"></a> Problem </h3>
<p />
How to get to the parent of the current topic to display on the page?
<p />
<h3><a name="Solution_AN2"></a> Solution </h3>
<p />
You might think that the following Search would do the trick:
<pre>
&#37;SEARCH{ &#34;^&#37;BASETOPIC&#37;$&#34; scope&#61;&#34;topic&#34; nosearch&#61;&#34;on&#34; type&#61;&#34;regex&#34; nototal&#61;&#34;on&#34; format&#61;&#34;&#91;&#91;$parent]&#91;parent&#95;link]]&#34; }&#37;
</pre>
<p />
However, the <code>[[$parent][parent_link]]</code> link fails if the topic has no parent set (<code>$parent</code> will be empty). You can use some <span class="twikiNewLink">SpreadSheetPlugin<a href="/bin/edit/Plugins/SpreadSheetPlugin?topicparent=TWiki.SearchPatternCookbook" rel="nofollow" title="SpreadSheetPlugin (this topic does not yet exist; you can create it)">?</a></span> magic to conditionally link to the parent or to <code>WebHome</code>: <code>[[$percntCALC{$IF($EXACT($parent,), %HOMETOPIC%, $parent)}$percnt][parent_link]]</code> 
<p />
So the total Search query to find a topic's parent topic is:
<pre>
&#37;SEARCH{ &#34;^&#37;BASETOPIC&#37;$&#34; scope&#61;&#34;topic&#34; nosearch&#61;&#34;on&#34; type&#61;&#34;regex&#34; nototal&#61;&#34;on&#34; format&#61;&#34;&#91;&#60;nop&#62;&#91;$percntCALC{$IF($EXACT($parent,), &#60;nop&#62;&#37;HOMETOPIC&#37;, $parent)}$percnt]&#91;parent&#95;link]]&#34; }&#37;
</pre>
<p />
<h3><a name="Test_Case"></a> Test Case </h3>
The parent topic of this topic is: <a href="/bin/view/TWiki/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_5_Search_and_display_the"></a> Pattern 5: Search and display the home topics of public webs in a list </span></h2>
<p />
<h3><a name="Problem_AN3"></a> Problem </h3>
<p />
How to find and display public webs in a drop down list box.
<p />
<h3><a name="Solution_AN3"></a> Solution </h3>
<p />
<em>Thanks to <a href="http://twiki.org/cgi-bin/view/Main.PeterThoeny" title="'Main.PeterThoeny' on TWiki.org">TWiki:Main.PeterThoeny</a> for these solutions.</em>
<p />
<pre>
&#60;form&#62;
&#60;select name&#61;&#34;topic&#34;&#62;
&#60;option value&#61;&#34;&#37;TOPIC&#37;&#34;&#62;Select...&#60;/option&#62;
&#37;SEARCH{ &#34;&#37;HOMETOPIC&#37;&#34; scope&#61;&#34;topic&#34; web&#61;&#34;all&#34; topic&#61;&#34;&#37;HOMETOPIC&#37;&#34; format&#61;&#34;&#60;option value&#61;\&#34;$web.$topic\&#34;&#62;$web&#60;/option&#62;&#34; separator&#61;&#34; &#34; }&#37;
&#60;/select&#62;
&#60;input type&#61;&#34;submit&#34;  value&#61;&#34;Go&#34; /&#62;
&#60;/form&#62;
</pre>
<p />
<h3><a name="Test_case_AN1"></a> Test case </h3>
<p />
Public webs of TWiki.
<p />
<form>
<select name="topic">
<option value="SearchPatternCookbook">Select...</option>
Search: <b> <a href="/bin/view/TWiki/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> </b><p />
<option value="Accounting.WebHome">Accounting</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Council.WebHome">Council</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Documentation.WebHome">Documentation</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Documentation/DocumentationTeam.WebHome">Documentation/DocumentationTeam</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Documentation/Release3.WebHome">Documentation/Release3</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Education.WebHome">Education</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Education/ASP2016.WebHome">Education/ASP2016</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Education/RDASummerSchool.WebHome">Education/RDASummerSchool</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Education/SummerGridWorkshop.WebHome">Education/SummerGridWorkshop</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Engagement.WebHome">Engagement</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="InformationServices.WebHome">InformationServices</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Interoperability.WebHome">Interoperability</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Main.WebHome">Main</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Management.WebHome">Management</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Networking.WebHome">Networking</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Operations.WebHome">Operations</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Operations/SupportWorkArea.WebHome">Operations/SupportWorkArea</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Production.WebHome">Production</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="ReleaseDocumentation.WebHome">ReleaseDocumentation</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Sandbox.WebHome">Sandbox</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Sandbox/SubWeb.WebHome">Sandbox/SubWeb</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Security.WebHome">Security</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="SoftwareTeam.WebHome">SoftwareTeam</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="Storage.WebHome">Storage</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<option value="TWiki.WebHome">TWiki</option> <div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">1</span></div><!--/patternSearchResultCount--><p />
<p />
</select>
<input type="submit"  value="Go" />
</form>
<p />
<img src="/twiki/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" />     For private webs, or any other webs you wish to exclude from the display, use "on" for the <code>Exclude web from a web="all" search</code> setting in the relevant web's WebPreferences topic.
<p />
<h3><a name="Alternative_solution"></a> Alternative solution </h3>
<p />
This result can also be accomplished with the %WEBLIST% variable.
<p />
<form>
<select name="topic">
<option value="SearchPatternCookbook">Select...</option>
<option value="Accounting.WebHome">Accounting</option> <option value="Council.WebHome">Council</option> <option value="Documentation.WebHome">Documentation</option> <option value="Documentation/DocumentationTeam.WebHome">Documentation/DocumentationTeam</option> <option value="Documentation/Release3.WebHome">Documentation/Release3</option> <option value="Education.WebHome">Education</option> <option value="Education/ASP2016.WebHome">Education/ASP2016</option> <option value="Education/RDASummerSchool.WebHome">Education/RDASummerSchool</option> <option value="Education/SummerGridWorkshop.WebHome">Education/SummerGridWorkshop</option> <option value="Engagement.WebHome">Engagement</option> <option value="InformationServices.WebHome">InformationServices</option> <option value="Interoperability.WebHome">Interoperability</option> <option value="Main.WebHome">Main</option> <option value="Management.WebHome">Management</option> <option value="Networking.WebHome">Networking</option> <option value="Operations.WebHome">Operations</option> <option value="Operations/SupportWorkArea.WebHome">Operations/SupportWorkArea</option> <option value="Production.WebHome">Production</option> <option value="ReleaseDocumentation.WebHome">ReleaseDocumentation</option> <option value="Sandbox.WebHome">Sandbox</option> <option value="Sandbox/SubWeb.WebHome">Sandbox/SubWeb</option> <option value="Security.WebHome">Security</option> <option value="SoftwareTeam.WebHome">SoftwareTeam</option> <option value="Storage.WebHome">Storage</option> <option value="TWiki.WebHome">TWiki</option>
</select>
<input type="submit" value="Go" />
</form>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_6_Extract_a_value_from_a"></a> Pattern 6: Extract a value from a bullet list </span></h2>
<p />
<h3><a name="Problem_AN4"></a> Problem </h3>
<p />
Display the user name in the user's topic title
<p />
<h3><a name="Solution_AN4"></a> Solution </h3>
<p />
Search for the <code>Name:</code> entry.
<p />
<pre>
&#37;SEARCH{&#34;   &#42; &#91;N]ame: &#34; topic&#61;&#34;&#37;TOPIC&#37;&#34; regex&#61;&#34;on&#34; casesensitive&#61;&#34;on&#34; nosummary&#61;&#34;on&#34; nosearch&#61;&#34;on&#34; noheader&#61;&#34;on&#34; nototal&#61;&#34;on&#34; format&#61;&#34;---+!! $pattern(.&#42;   \&#42; Name: (&#91;^\n]&#42;).&#42;)&#34;}&#37;
</pre>
<p />
<h3><a name="Test_case_AN2"></a> Test case </h3>
<p />
To create a test case, we will put a name entry here:
<p /> <ul>
<li> Name: John Doe
</li></ul> 
<p />
Search result:
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_7_Search_for_Form_and_Me"></a> Pattern 7: Search for Form and Meta data: explained </span></h2>
<h3><a name="Problem_AN5"></a> Problem </h3>
Below is an example of a search that searches form data. The questions are: <ul>
<li> why is this searching the metadata, shouldn't it just search the text?
</li> <li> what is the meaning of the <code>td..td</code> in the search expression? 
</li></ul> 
<p />
<pre>
%SEARCH{ "[S]tatus.*(td..td|value\=).*[W]aiting" casesensitive="on" regex="on" 
nosearch="on" nototal="on" format="| [[$topic]]&lt;br /> ($date - $rev - 
[[%SCRIPTURLPATH{rdiff}%/$web/$topic][Diffs]]) |"}%
</pre>
<p />
<h3><a name="Solution_AN5"></a> Solution </h3>
%SEARCH depends on grep, and grep searches the whole file, including the meta data.
<p />
An example meta data form field is:
<pre>
%META:FIELD{name="OperatingSystem" title="OperatingSystem" value="OsWin"}%
</pre>
So a search for a form field could look like:
<pre>
%SEARCH{ "[O]peratingSystem.*value\=.*[O]sWin" regex="on" ... }%
</pre> <ul>
<li> Using square brackets is a trick to avoid a hit on the topic doing the search.
</li> <li> The <code>.*</code> indicate that there can be any number of any character between <code>OperatingSystem</code> and <code>value</code> in the (whole) file
</li></ul> 
<p />
Now the original file format of the category table (the predecessor of the TWiki forms) looks like this:
<pre>
&#60;td valign&#61;&#34;top&#34; align&#61;&#34;right&#34;&#62; OperatingSystem:  &#60;/td&#62;&#60;td&#62;  OsWin &#60;/td&#62;
</pre>
The following search finds topics in the old and new format:
<pre>
%SEARCH{ "[O]peratingSystem.*(td..td|value\=).*[O]sWin" regex="on" ... }%
</pre>
<p />
The <code>td..td</code> matches <code>td&lt;&gt;td</code>; a simple search on <code>"[O]peratingSystem.*[O]sWin"</code> could find a hit in the topic text by coincidence.
<p />
A simple <code>%SEARCH{ "[O]peratingSystem.*value\=.*[O]sWin" ...}%</code> search is sufficient if you do not have topics in the old format.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Pattern_8_Search_all_topics_that"></a> Pattern 8: Search all topics that have been moved </span></h2>
<h3><a name="Problem_AN6"></a> Problem </h3>
How would I go about listing all moved topics ?
<p />
<h3><a name="Solution_AN6"></a> Solution </h3>
Search for the META:TOPICMOVED meta data. Type this: 
<p />
<code>Moved topics: %SEARCH{ "%META\:TOPICMOVED" regex="on" format="$topic, " nosearch="on" noheader="on" nosummary="on" }%</code>
<p />
to get this (limited to 10 results):
<p />
Moved topics: <a href="/bin/view/TWiki/NatSkinConfiguration" class="twikiLink">NatSkinConfiguration</a>, 
<a href="/bin/view/TWiki/SpellerPagesPlugin" class="twikiLink">SpellerPagesPlugin</a>, 
<div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">2</span></div><!--/patternSearchResultCount--><p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Contributors"></a> Contributors </span></h2>
<p />
<a href="http://twiki.org/cgi-bin/view/Main.AntonAylward" title="'Main.AntonAylward' on TWiki.org">TWiki:Main.AntonAylward</a>, <a href="http://twiki.org/cgi-bin/view/Main.ArthurClemens" title="'Main.ArthurClemens' on TWiki.org">TWiki:Main.ArthurClemens</a>, <a href="http://twiki.org/cgi-bin/view/Main.JosMaccabiani" title="'Main.JosMaccabiani' on TWiki.org">TWiki:Main.JosMaccabiani</a>, <a href="http://twiki.org/cgi-bin/view/Main.PeterThoeny" title="'Main.PeterThoeny' on TWiki.org">TWiki:Main.PeterThoeny</a>, <a href="http://twiki.org/cgi-bin/view/Main.SueLocke" title="'Main.SueLocke' on TWiki.org">TWiki:Main.SueLocke</a>
<p />
<strong><em>Related Topics:</em></strong> <a href="/bin/view/TWiki/UserDocumentationCategory" class="twikiLink">UserDocumentationCategory</a></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>SearchPatternCookbook</span> <br />    
Topic revision: r3 - 22 Sep 2005 - 16:24:01 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />