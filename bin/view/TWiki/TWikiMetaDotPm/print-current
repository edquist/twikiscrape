<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TWikiMetaDotPm &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/TWikiMetaDotPm?_T=16 Feb 2017" type="application/x-wiki" title="edit TWikiMetaDotPm" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/TWikiMetaDotPm"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Package_TWiki_Meta"></a> Package <code>TWiki::Meta</code> </h1>
<p />
Meta-data handling.
<p />
A meta-data object is a hash of different types of meta-data (keyed on
the type, such as 'FIELD' and 'TOPICINFO').
<p />
Each entry in the hash is an array, where each entry in the array
contains another hash of the key=value pairs, corresponding to a
single meta-datum.
<p />
If there may be multiple entries of the same top-level type (i.e. for FIELD
and FILEATTACHMENT) then the array hash multiple entries. These types
are referred to as "keyed" types. The array entries are keyed with the
attribute 'name' which must be in each entry in the array.
<p />
For unkeyed types, the array has only one entry.
<p />
The module knows nothing about how meta-data is stored. That is entirely the
responsibility of the Store module.
<p />
Meta-data objects are created by the Store engine when topics are read. They
are populated using the <code>put</code> method.
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Package_TWiki_Meta"> Package TWiki::Meta</a> <ul>
<li> <a href="?cover=print#ClassMethod_new_session_web_topi"> ClassMethod new <tt>($session,$web,$topic)</tt></a>
</li> <li> <a href="?cover=print#ClassMethod_web"> ClassMethod web <tt>()</tt></a>
</li> <li> <a href="?cover=print#ClassMethod_topic"> ClassMethod topic <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_put_type_args"> ObjectMethod put <tt>($type,\%args)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_putKeyed_type_args"> ObjectMethod putKeyed <tt>($type,\%args)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_putAll"> ObjectMethod putAll <tt></tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_type_key_hash"> ObjectMethod get <tt>($type,$key) -&gt; \%hash</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_find_type_values"> ObjectMethod find <tt>($type) -&gt; @values</tt></a>
</li> <li> <a href="?cover=print#StaticMethod_index_ByKey"> StaticMethod indexByKey <tt></tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_remove_type_key"> ObjectMethod remove <tt>($type,$key)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_copyFrom_otherMeta"> ObjectMethod copyFrom <tt>($otherMeta,$type,$nameFilter)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_count_type_integer"> ObjectMethod count <tt>($type) -&gt; $integer</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionInfo_fr"> ObjectMethod getRevisionInfo <tt>($fromrev) -&gt; ($date,$author,$rev,$comment)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_merge_otherMeta_for"> ObjectMethod merge <tt>($otherMeta,$formDef)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_stringify_types_str"> ObjectMethod stringify <tt>($types) -&gt; $string</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_for_EachSelectedVal"> ObjectMethod forEachSelectedValue <tt>($types,$keys,\&amp;fn,\%options)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getParent_parent"> ObjectMethod getParent <tt>() -&gt; $parent</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_FormName_formna"> ObjectMethod getFormName <tt>() -&gt; $formname</tt></a>
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ClassMethod_new_session_web_topi"></a> <a href="/bin/view/TWiki/ClassMethod" class="twikiLink">ClassMethod</a> <strong>new</strong> <tt>($session,$web,$topic)</tt> </span></h2>
<p />
Construct a new, empty Meta collection.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ClassMethod_web"></a> <a href="/bin/view/TWiki/ClassMethod" class="twikiLink">ClassMethod</a> <strong>web</strong> <tt>()</tt> </span></h2>
Get the web name
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ClassMethod_topic"></a> <a href="/bin/view/TWiki/ClassMethod" class="twikiLink">ClassMethod</a> <strong>topic</strong> <tt>()</tt> </span></h2>
Get the topic name
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_put_type_args"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>put</strong> <tt>($type,\%args)</tt> </span></h2>
<p />
Put a hash of key=value pairs into the given type set in this meta.
<p />
See the main comment for this package to understand how meta-data is
represented.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_putKeyed_type_args"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>putKeyed</strong> <tt>($type,\%args)</tt> </span></h2>
<p />
Put a hash of key=value pairs into the given type set in this meta. The
entries are keyed by 'name'.
<p />
See the main comment for this package to understand how meta-data is
represented.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_putAll"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>putAll</strong> <tt></tt> </span></h2>
Replaces all the items of a given key with a new array
This is the logical inverse of the find method
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_type_key_hash"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>get</strong> <tt>($type,$key) -&gt; \%hash</tt> </span></h2>
<p />
Find the value of a meta-datum in the map. If the type is 
keyed, the $key parameter is required to say <em>which</em>
entry you want. Otherwise it can be undef.
<p />
WARNING SMELL If key is undef but the type is keyed you get the FIRST entry
If you want all the keys of a given type use the 'find' method.
<p />
The result is a reference to the hash for the item.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_find_type_values"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>find</strong> <tt>($type) -&gt; @values</tt> </span></h2>
<p />
Get all meta data for a specific type
Returns the array stored for the type. This will be zero length
if there are no entries.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="StaticMethod_index_ByKey"></a> <a href="/bin/view/TWiki/StaticMethod" class="twikiLink">StaticMethod</a> <strong>indexByKey</strong> <tt></tt> </span></h2>
<p />
See tests/unit/MetaTests.pm for an example
<p />
The result is a hash the same as the array provided by find but keyed by the keyName.
NB. results are indeterminate if the key you choose is not unique in the find. 
<p />
<p />
<p />
Flattens a keyed hash structure, taking only the values.
Returns a hash.
<p />
See tests/unit/MetaTests.pm for an example
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_remove_type_key"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>remove</strong> <tt>($type,$key)</tt> </span></h2>
<p />
With no type, will remove all the contents of the object.
<p />
With a $type but no $key, will remove <em>all</em> items of that type (so for example if $type were FILEATTACHMENT it would remove all of them)
<p />
With a $type and a $key it will remove only the specific item.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_copyFrom_otherMeta"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>copyFrom</strong> <tt>($otherMeta,$type,$nameFilter)</tt> </span></h2>
<p />
Copy all entries of a type from another meta data set. This
will destroy the old values for that type, unless the
copied object doesn't contain entries for that type, in which
case it will retain the old values.
<p />
If $type is undef, will copy ALL TYPES.
<p />
If $nameFilter is defined (an RE), it will copy only data where
{name} matches $nameFilter.
<p />
SMELL: That spec absolutely <em>STINKS</em> !!
SMELL: this is a shallow copy
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_count_type_integer"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>count</strong> <tt>($type) -&gt; $integer</tt> </span></h2>
<p />
Return the number of entries of the given type that are in this meta set
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionInfo_fr"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionInfo</strong> <tt>($fromrev) -&gt; ($date,$author,$rev,$comment)</tt> </span></h2>
<p />
Try and get revision info from the meta information, or, if it is not
present, kick down to the Store module for the same information.
<p />
Returns ( $revDate, $author, $rev, $comment )
<p />
$rev is an integer revision number.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_merge_otherMeta_for"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>merge</strong> <tt>($otherMeta,$formDef)</tt> </span></h2> <ul>
<li> <code>$otherMeta</code> - a block of meta-data to merge with $this
</li> <li> <code>$formDef</code> reference to a TWiki::Form that gives the types of the fields in $this
</li></ul> 
<p />
Merge the data in the other meta block. <ul>
<li> File attachments that only appear in one set are preserved.
</li> <li> Form fields that only appear in one set are preserved.
</li> <li> Form field values that are different in each set are text-merged
</li> <li> We don't merge for field attributes or title
</li> <li> Topic info is not touched
</li> <li> The <code>mergeable</code> method on the form def is used to determine if that fields is mergeable. if it isn't, the value currently in meta will <em>not</em> be changed.
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_stringify_types_str"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>stringify</strong> <tt>($types) -&gt; $string</tt> </span></h2>
Return a string version of the meta object. Uses \n to separate lines.
If $types is specified, return only types specified by that RE.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_for_EachSelectedVal"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>forEachSelectedValue</strong> <tt>($types,$keys,\&amp;fn,\%options)</tt> </span></h2>
Iterate over the values selected by the regular expressions in $types and
$keys. <ul>
<li> <code>$types</code> - regular expression matching the names of fields to be processed. Will default to qr/^[A-Z]+$/ if undef.
</li> <li> <code>$keys</code> - regular expression matching the names of keys to be processed.  Will default to qr/^[a-z]+$/ if undef.
</li></ul> 
<p />
Iterates over each value, calling <code>\&amp;fn</code> on each, and replacing the value
with the result of \&amp;fn.
<p />
\%options will be passed on to $fn, with the following additions: <ul>
<li> <code>_type</code> =&gt; the type name (e.g. "FILEATTACHMENT")
</li> <li> <code>_key</code> =&gt; the key name (e.g. "user")
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getParent_parent"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getParent</strong> <tt>() -&gt; $parent</tt> </span></h2>
Gets the TOPICPARENT name.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_FormName_formna"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getFormName</strong> <tt>() -&gt; $formname</tt> </span></h2>
<p />
Returns the name of the FORM, or '' if none.
<p /></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TWikiMetaDotPm</span> <br />    
Topic revision: r2 - 01 Apr 2006 - 05:55:40 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />