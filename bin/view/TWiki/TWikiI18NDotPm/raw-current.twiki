---+ Package =TWiki::I18N=

Support for strings translation and language detection.


%TOC%

---++ ClassMethod *available_languages* &lt;tt&gt;&lt;/tt&gt;

Lists languages tags for languages available at TWiki installation. Returns a
list containing the tags of the available languages.

__Note__: the languages available to users are determined in the =configure=
interface.



---++ ClassMethod *get* &lt;tt&gt;($session)&lt;/tt&gt;

Constructor. Gets the language object corresponding to the current user&#39;s language.



---++ ObjectMethod *maketext* &lt;tt&gt;($text) -&gt; $translation&lt;/tt&gt;

Translates the given string (assumed to be written in English) into the
current language, as detected in the constructor, and converts it into
the site charset.

Wraps around Locale::Maketext&#39;s maketext method, adding charset conversion and checking

Return value: translated string, or the argument itself if no translation is
found for thet argument.



---++ ObjectMethod *language* &lt;tt&gt;() -&gt; $language_tag&lt;/tt&gt;

Indicates the language tag of the current user&#39;s language, as detected from the
information sent by the browser. Returns the empty string if the language
could not be determined.



---++ ObjectMethod *enabled_languages* &lt;tt&gt;() -&gt; %languages&lt;/tt&gt;

Returns an array with language tags as keys and language (native) names as
values, for all the languages enabled in this TWiki.TWikiSite. Useful for
listing available languages to the user.



---++ ObjectMethod *fromSiteCharSet* &lt;tt&gt;($text) -&gt; $encoded&lt;/tt&gt;

This method receives =$text=, assumed to be encoded in {Site}{CharSet}, and
converts it to a internal representation.

Currently this representation will be a UTF-8 string, but this may change in
the future. This way, you can&#39;t assume any property on the returned value, and
should only use the returned value of this function as input to toSiteCharSet.
If you change the returnd value, either by removing, updating or appending
characters, be sure to touch only ASCII characters (i.e., characters that have
ord() less than 128).




---++ ObjectMethod *toSiteCharSet* &lt;tt&gt;($encoded) -&gt; $text&lt;/tt&gt;

This method receives a string, assumed to be encoded in TWiki&#39;s internal string
representation (as generated by the fromSiteCharSet method, and converts it
into {Site}{CharSet}.

When converting into {Site}{CharSet}, characters that are not present at that
charset are represented as HTML numerical character entities (NCR&#39;s), in the
format &lt;code&gt;&amp;amp;#NNNN;&lt;/code&gt;, where NNNN is the character&#39;s Unicode
codepoint.

See also: the =fromSiteCharSet= method.



