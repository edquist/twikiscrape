<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TWikiStoreDotPm &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/TWikiStoreDotPm?_T=16 Feb 2017" type="application/x-wiki" title="edit TWikiStoreDotPm" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/TWikiStoreDotPm"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Package_TWiki_Store"></a> Package <code>TWiki::Store</code> </h1>
<p />
This module hosts the generic storage backend. This module provides
the interface layer between the "real" store provider - which is hidden
behind a handler - and the rest of the system. it is responsible for
checking for topic existance, access permissions, and all the other
general admin tasks that are common to all store implementations.
<p />
This module knows nothing about how the data is actually <em>stored</em> -
that knowledge is entirely encapsulated in the handlers.
<p />
The general contract for methods in the class requires that errors
are signalled using exceptions. TWiki::AccessControlException is
used for access control exceptions, and Error::Simple for all other
types of error.
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Package_TWiki_Store"> Package TWiki::Store</a> <ul>
<li> <a href="?cover=print#ClassMethod_new"> ClassMethod new <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_finish"> ObjectMethod finish <tt></tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_readTopic_user_web"> ObjectMethod readTopic <tt>($user,$web,$topic,$version) -&gt; ($metaObject,$text)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_read_TopicRaw_user"> ObjectMethod readTopicRaw <tt>($user,$web,$topic,$version) -&gt; $topicText</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_moveAttachment_oldW"> ObjectMethod moveAttachment <tt>($oldWeb,$oldTopic,$oldAttachment,$newWeb,$newTopic,$newAttachment,$user)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_AttachmentStrea"> ObjectMethod getAttachmentStream <tt>($user,$web,$topic,$attName) -&gt; \*STREAM</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_AttachmentList"> ObjectMethod getAttachmentList <tt>($web,$topic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_attachmentExists_we"> ObjectMethod attachmentExists <tt>($web,$topic,$att) -&gt; $boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_remove_AutoAttachme"> ObjectMethod _removeAutoAttachmentsFromMeta <tt></tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_moveTopic_oldWeb_ol"> ObjectMethod moveTopic <tt>($oldWeb,$oldTopic,$newWeb,$newTopic,$user)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_moveWeb_oldWeb_newW"> ObjectMethod moveWeb <tt>($oldWeb,$newWeb,$user)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_readAttachment_user"> ObjectMethod readAttachment <tt>($user,$web,$topic,$attachment,$theRev) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionNumber"> ObjectMethod getRevisionNumber <tt>($web,$topic,$attachment) -&gt; $integer</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_WorkArea_key_di"> ObjectMethod getWorkArea <tt>($key) -&gt; $directorypath</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionDiff_us"> ObjectMethod getRevisionDiff <tt>($user,$web,$topic,$rev1,$rev2,$contextLines) -&gt; \@diffArray</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionInfo_we"> ObjectMethod getRevisionInfo <tt>($web,$topic,$rev,$attachment) -&gt; ($date,$user,$rev,$comment)</tt></a>
</li> <li> <a href="?cover=print#StaticMethod_dataEncode_uncoded"> StaticMethod dataEncode <tt>($uncoded) -&gt; $coded</tt></a>
</li> <li> <a href="?cover=print#StaticMethod_dataDecode_encoded"> StaticMethod dataDecode <tt>($encoded) -&gt; $decoded</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_saveTopic_user_web"> ObjectMethod saveTopic <tt>($user,$web,$topic,$text,$meta,$options)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_saveAttachment_web"> ObjectMethod saveAttachment <tt>($web,$topic,$attachment,$user,$opts)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_repRev_user_web_top"> ObjectMethod repRev <tt>($user,$web,$topic,$text,$meta,$options)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_delRev_user_web_top"> ObjectMethod delRev <tt>($user,$web,$topic,$text,$meta,$options)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_lockTopic_web_topic"> ObjectMethod lockTopic <tt>($web,$topic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_unlockTopic_user_we"> ObjectMethod unlockTopic <tt>($user,$web,$topic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_webExists_web_boole"> ObjectMethod webExists <tt>($web) -&gt; $boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_topicExists_web_top"> ObjectMethod topicExists <tt>($web,$topic) -&gt; $boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_TopicParent_web"> ObjectMethod getTopicParent <tt>($web,$topic) -&gt; $string</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_TopicLatestRevT"> ObjectMethod getTopicLatestRevTime <tt>($web,$topic) -&gt; $epochSecs</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_read_MetaData_web_n"> ObjectMethod readMetaData <tt>($web,$name) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_save_MetaData_web_n"> ObjectMethod saveMetaData <tt>($web,$name) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_TopicNames_web"> ObjectMethod getTopicNames <tt>($web) -&gt; @topics</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_ListOfWebs_filt"> ObjectMethod getListOfWebs <tt>($filter) -&gt; @webNames</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_createWeb_user_newW"> ObjectMethod createWeb <tt>($user,$newWeb,$baseWeb,$opts)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_removeWeb_user_web"> ObjectMethod removeWeb <tt>($user,$web)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_DebugText_meta"> ObjectMethod getDebugText <tt>($meta,$text) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_clean_UpRevID_rev_i"> ObjectMethod cleanUpRevID <tt>($rev) -&gt; $integer</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_copyTopic_user_from"> ObjectMethod copyTopic <tt>($user,$fromweb,$fromtopic,$toweb,$totopic)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_search_MetaData_par"> ObjectMethod searchMetaData <tt>($params) -&gt; $text</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_search_InWebContent"> ObjectMethod searchInWebContent <tt>($searchString,$web,\@topics,\%options) -&gt; \%map</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_RevisionAtTime"> ObjectMethod getRevisionAtTime <tt>($web,$topic,$time) -&gt; $rev</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getLease_web_topic"> ObjectMethod getLease <tt>($web,$topic) -&gt; $lease</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_setLease_web_topic"> ObjectMethod setLease <tt>($web,$topic,$user,$length)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_clearLease_web_topi"> ObjectMethod clearLease <tt>($web,$topic)</tt></a>
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ClassMethod_new"></a> <a href="/bin/view/TWiki/ClassMethod" class="twikiLink">ClassMethod</a> <strong>new</strong> <tt>()</tt> </span></h2>
<p />
Construct a Store module, linking in the chosen sub-implementation.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_finish"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>finish</strong> <tt></tt> </span></h2>
Complete processing after the client's HTTP request has been responded
to. <ol>
<li> breaking circular references to allow garbage collection in persistent     environments
</li></ol> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_readTopic_user_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>readTopic</strong> <tt>($user,$web,$topic,$version) -&gt; ($metaObject,$text)</tt> </span></h2>
<p />
Reads the given version of a topic and it's meta-data. If the version
is undef, then read the most recent version. The version number must be
an integer, or undef for the latest version.
<p />
if $user is defined, view permission will be required for the topic
read to be successful.  Access control violations are flagged by a
TWiki::AccessControlException. Permissions are checked for the user
name passed in.
<p />
If the topic contains a web specification (is of the form Web.Topic) the
web specification will override whatever is passed in $web.
<p />
The metadata and topic text are returned separately, with the metadata in a
TWiki::Meta object.  (The topic text is, as usual, just a string.)
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_read_TopicRaw_user"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>readTopicRaw</strong> <tt>($user,$web,$topic,$version) -&gt; $topicText</tt> </span></h2>
<p />
Reads the given version of a topic, without separating out any embedded
meta-data. If the version is undef, then read the most recent version.
The version number must be an integer or undef.
<p />
If $user is defined, view permission will be required for the topic
read to be successful.  Access control violations are flagged by a
TWiki::AccessControlException. Permissions are checked for the user
name passed in.
<p />
If the topic contains a web specification (is of the form Web.Topic) the
web specification will override whatever is passed in $web.
<p />
SMELL: DO NOT CALL THIS METHOD UNLESS YOU HAVE NO CHOICE. This method breaks
encapsulation of the store, as it assumes meta is stored embedded in the text.
Other implementors of store will be forced to insert meta-data to ensure
correct operation of View raw=debug and the 'repRev' mode of Edit.
<p />
$web and $topic <em>must</em> be untainted.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_moveAttachment_oldW"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>moveAttachment</strong> <tt>($oldWeb,$oldTopic,$oldAttachment,$newWeb,$newTopic,$newAttachment,$user)</tt> </span></h2>
<p />
Move an attachment from one topic to another.
<p />
The caller to this routine should check that all topics are valid.
<p />
All parameters must be defined, and must be untainted.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_AttachmentStrea"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getAttachmentStream</strong> <tt>($user,$web,$topic,$attName) -&gt; \*STREAM</tt> </span></h2> <ul>
<li> <code>$user</code> - the user doing the reading, or undef if no access checks
</li> <li> <code>$web</code> - The web
</li> <li> <code>$topic</code> - The topic
</li> <li> <code>$attName</code> - Name of the attachment
</li></ul> 
<p />
Open a standard input stream from an attachment.
<p />
If $user is defined, view permission will be required for the topic
read to be successful.  Access control violations and errors will
cause exceptions to be thrown.
<p />
Permissions are checked for the user name passed in.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_AttachmentList"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getAttachmentList</strong> <tt>($web,$topic)</tt> </span></h2>
<p />
returns @($attachmentName =&gt; [stat]) for any given web, topic
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_attachmentExists_we"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>attachmentExists</strong> <tt>($web,$topic,$att) -&gt; $boolean</tt> </span></h2>
<p />
Determine if the attachment already exists on the given topic
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_remove_AutoAttachme"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>_removeAutoAttachmentsFromMeta</strong> <tt></tt> </span></h2>
This is where we are going to remove from meta any entry that is marked as an automatic attachment.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_moveTopic_oldWeb_ol"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>moveTopic</strong> <tt>($oldWeb,$oldTopic,$newWeb,$newTopic,$user)</tt> </span></h2>
<p />
All parameters must be defined and must be untainted.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_moveWeb_oldWeb_newW"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>moveWeb</strong> <tt>($oldWeb,$newWeb,$user)</tt> </span></h2>
<p />
Move a web.
<p />
All parrameters must be defined and must be untainted.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_readAttachment_user"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>readAttachment</strong> <tt>($user,$web,$topic,$attachment,$theRev) -&gt; $text</tt> </span></h2>
<p />
Read the given version of an attachment, returning the content.
<p />
View permission on the topic is required for the
read to be successful.  Access control violations are flagged by a
TWiki::AccessControlException. Permissions are checked for the user
passed in.
<p />
If $theRev is not given, the most recent rev is assumed.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionNumber"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionNumber</strong> <tt>($web,$topic,$attachment) -&gt; $integer</tt> </span></h2>
<p />
Get the revision number of the most recent revision. Returns
the integer revision number or '' if the topic doesn't exist.
<p />
WORKS FOR ATTACHMENTS AS WELL AS TOPICS
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_WorkArea_key_di"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getWorkArea</strong> <tt>($key) -&gt; $directorypath</tt> </span></h2>
<p />
Gets a private directory uniquely identified by $key. The directory is
intended as a work area for plugins. The directory will exist.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionDiff_us"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionDiff</strong> <tt>($user,$web,$topic,$rev1,$rev2,$contextLines) -&gt; \@diffArray</tt> </span></h2>
<p />
Return reference to an array of [ diffType, $right, $left ] <ul>
<li> <code>$user</code> - the user object, or undef to suppress access control checks
</li> <li> <code>$web</code> - the web
</li> <li> <code>$topic</code> - the topic
</li> <li> <code>$rev1</code> Integer revision number
</li> <li> <code>$rev2</code> Integer revision number
</li> <li> <code>$contextLines</code> - number of lines of context required
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionInfo_we"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionInfo</strong> <tt>($web,$topic,$rev,$attachment) -&gt; ($date,$user,$rev,$comment)</tt> </span></h2>
Get revision info of a topic. <ul>
<li> <code>$web</code> Web name, optional, e.g. <code>'Main'</code>
</li> <li> <code>$topic</code> Topic name, required, e.g. <code>'TokyoOffice'</code>
</li> <li> <code>$rev</code> revision number. If 0, undef, or out-of-range, will get info about the most recent revision.
</li> <li> <code>$attachment</code> attachment filename; undef for a topic
</li></ul> 
Return list with: ( last update date, last user object, =
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> $date </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> in epochSec </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> $user </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> user <strong>object</strong> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> $rev </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> the revision number </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> $comment </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> WHAT COMMENT? </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
e.g. =( 1234561, 'phoeny', 5, 'no comment' )
<p />
NOTE NOTE NOTE if you are working within the TWiki code DO NOT USE THIS
FUNCTION FOR GETTING REVISION INFO OF TOPICS - use
TWiki::Meta::getRevisionInfo instead. This is essential to allow clean
transition to a topic object model later, and avoids the risk of confusion
coming from meta and Store revision information being out of step.
(it's OK to use it for attachments)
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="StaticMethod_dataEncode_uncoded"></a> <a href="/bin/view/TWiki/StaticMethod" class="twikiLink">StaticMethod</a> <strong>dataEncode</strong> <tt>($uncoded) -&gt; $coded</tt> </span></h2>
Encode meta-data fields, escaping out selected characters. The encoding
is chosen to avoid problems with parsing the attribute values, while
minimising the number of characters encoded so searches can still work
(fairly) sensibly.
<p />
The encoding has to be exported because TWiki (and plugins) use
encoded field data in other places e.g. RDiff, mainly as a shorthand
for the properly parsed meta object. Some day we may be able to
eliminate that....
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="StaticMethod_dataDecode_encoded"></a> <a href="/bin/view/TWiki/StaticMethod" class="twikiLink">StaticMethod</a> <strong>dataDecode</strong> <tt>($encoded) -&gt; $decoded</tt> </span></h2>
Decode escapes in a string that was encoded using dataEncode
<p />
The encoding has to be exported because TWiki (and plugins) use
encoded field data in other places e.g. RDiff, mainly as a shorthand
for the properly parsed meta object. Some day we may be able to
eliminate that....
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_saveTopic_user_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>saveTopic</strong> <tt>($user,$web,$topic,$text,$meta,$options)</tt> </span></h2> <ul>
<li> <code>$user</code> - user doing the saving (object)
</li> <li> <code>$web</code> - web for topic
</li> <li> <code>$topic</code> - topic to atach to
</li> <li> <code>$text</code> - topic text
</li> <li> <code>$meta</code> - topic meta-data
</li> <li> <code>$options</code> - Ref to hash of options
</li></ul> 
<code>$options</code> may include:
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>dontlog</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> don't log this change in twiki log </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>hide</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> if the attachment is to be hidden in normal topic view </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>comment</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> comment for save </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>file</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Temporary file name to upload </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>minor</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> True if this is a minor change (used in log) </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>savecmd</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Save command </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>forcedate</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> grr </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>unlock</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> &nbsp; </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Save a new revision of the topic, calling plugins handlers as appropriate.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_saveAttachment_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>saveAttachment</strong> <tt>($web,$topic,$attachment,$user,$opts)</tt> </span></h2> <ul>
<li> <code>$user</code> - user doing the saving
</li> <li> <code>$web</code> - web for topic
</li> <li> <code>$topic</code> - topic to atach to
</li> <li> <code>$attachment</code> - name of the attachment
</li> <li> <code>$opts</code> - Ref to hash of options
</li></ul> 
<code>$opts</code> may include:
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>dontlog</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> don't log this change in twiki log </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>comment</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> comment for save </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>hide</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> if the attachment is to be hidden in normal topic view </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>stream</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Stream of file to upload </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>file</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Name of a file to use for the attachment data. ignored is stream is set. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>filepath</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Client path to file </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>filesize</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Size of uploaded data </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>filedate</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> Date </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Saves a new revision of the attachment, invoking plugin handlers as
appropriate.
<p />
If file is not set, this is a properties-only save.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_repRev_user_web_top"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>repRev</strong> <tt>($user,$web,$topic,$text,$meta,$options)</tt> </span></h2>
Replace last (top) revision with different text.
<p />
Parameters and return value as saveTopic, except <ul>
<li> <code>$options</code> - as for saveTopic, with the extra option: <ul>
<li> <code>timetravel</code> - if we want to force the deposited revision to look as much like the revision specified in <code>$rev</code> as possible.
</li></ul> 
</li></ul> 
<p />
Used to try to avoid the deposition of 'unecessary' revisions, for example
where a user quickly goes back and fixes a spelling error.
<p />
Also provided as a means for administrators to rewrite history (timetravel).
<p />
It is up to the store implementation if this is different
to a normal save or not.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_delRev_user_web_top"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>delRev</strong> <tt>($user,$web,$topic,$text,$meta,$options)</tt> </span></h2>
<p />
Parameters and return value as saveTopic.
<p />
Provided as a means for administrators to rewrite history.
<p />
Delete last entry in repository, restoring the previous
revision.
<p />
It is up to the store implementation whether this actually
does delete a revision or not; some implementations will
simply promote the previous revision up to the head.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_lockTopic_web_topic"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>lockTopic</strong> <tt>($web,$topic)</tt> </span></h2>
<p />
Grab a topic lock on the given topic. A topic lock will cause other
processes that also try to claim a lock to block. A lock has a
maximum lifetime of 2 minutes, so operations on a locked topic
must be completed within that time. You cannot rely on the
lock timeout clearing the lock, though; that should always
be done by calling unlockTopic. The best thing to do is to guard
the locked section with a try..finally clause. See man Error for more info.
<p />
Topic locks are used to make store operations atomic. They are
<em>note</em> the locks used when a topic is edited; those are Leases
(see <code>getLease</code>)
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_unlockTopic_user_we"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>unlockTopic</strong> <tt>($user,$web,$topic)</tt> </span></h2>
Release the topic lock on the given topic. A topic lock will cause other
processes that also try to claim a lock to block. It is important to
release a topic lock after a guard section is complete. This should
normally be done in a 'finally' block. See man Error for more info.
<p />
Topic locks are used to make store operations atomic. They are
<em>note</em> the locks used when a topic is edited; those are Leases
(see <code>getLease</code>)
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_webExists_web_boole"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>webExists</strong> <tt>($web) -&gt; $boolean</tt> </span></h2>
<p />
Test if web exists <ul>
<li> <code>$web</code> - Web name, required, e.g. <code>'Sandbox'</code>
</li></ul> 
<p />
A web <em>has</em> to have a home topic to be a web.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_topicExists_web_top"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>topicExists</strong> <tt>($web,$topic) -&gt; $boolean</tt> </span></h2>
<p />
Test if topic exists <ul>
<li> <code>$web</code> - Web name, optional, e.g. <code>'Main'</code>
</li> <li> <code>$topic</code> - Topic name, required, e.g. <code>'TokyoOffice'</code>, or <code>"Main.TokyoOffice"</code>
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_TopicParent_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getTopicParent</strong> <tt>($web,$topic) -&gt; $string</tt> </span></h2>
<p />
Get the name of the topic parent. Needs to be fast because
of use by Render.pm.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_TopicLatestRevT"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getTopicLatestRevTime</strong> <tt>($web,$topic) -&gt; $epochSecs</tt> </span></h2>
<p />
Get an approximate rev time for the latest rev of the topic. This method
is used to optimise searching. Needs to be as fast as possible.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_read_MetaData_web_n"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>readMetaData</strong> <tt>($web,$name) -&gt; $text</tt> </span></h2>
<p />
Read a named meta-data string. If web is given the meta-data
is stored alongside a web.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_save_MetaData_web_n"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>saveMetaData</strong> <tt>($web,$name) -&gt; $text</tt> </span></h2>
<p />
Write a named meta-data string. If web is given the meta-data
is stored alongside a web.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_TopicNames_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getTopicNames</strong> <tt>($web) -&gt; @topics</tt> </span></h2>
<p />
Get list of all topics in a web <ul>
<li> <code>$web</code> - Web name, required, e.g. <code>'Sandbox'</code>
</li></ul> 
Return a topic list, e.g. <code>( 'WebChanges',&nbsp; 'WebHome', 'WebIndex', 'WebNotify' )</code>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_ListOfWebs_filt"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getListOfWebs</strong> <tt>($filter) -&gt; @webNames</tt> </span></h2>
<p />
Gets a list of webs, filtered according to the spec in the $filter,
which may include one of: <ol>
<li> 'user' (for only user webs)
</li> <li> 'template' (for only template webs)
</li></ol> 
$filter may also contain the word 'public' which will further filter
webs on whether NOSEARCHALL is specified for them or not.
'allowed' filters out webs that the user is denied access to by a *WEBVIEW.
<p />
If $TWiki::cfg{EnableHierarchicalWebs} is set, will also list
sub-webs recursively.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_createWeb_user_newW"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>createWeb</strong> <tt>($user,$newWeb,$baseWeb,$opts)</tt> </span></h2>
<p />
$newWeb is the name of the new web.
<p />
$baseWeb is the name of an existing web (a template web). If the
base web is a system web, all topics in it
will be copied into the new web. If it is a normal web, only topics starting
with 'Web' will be copied. If no base web is specified, an empty web
(with no topics) will be created. If it is specified but does not exist,
an error will be thrown.
<p />
$opts is a ref to a hash that contains settings to be modified in
the web preferences topic in the new web.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_removeWeb_user_web"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>removeWeb</strong> <tt>($user,$web)</tt> </span></h2> <ul>
<li> <code>$user</code> - user doing the removing (for the history)
</li> <li> <code>$web</code> - web being removed
</li></ul> 
<p />
Destroy a web, utterly. Removed the data and attachments in the web.
<p />
Use with great care!
<p />
The web must be a known web to be removed this way.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_DebugText_meta"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getDebugText</strong> <tt>($meta,$text) -&gt; $text</tt> </span></h2>
<p />
Generate a debug text form of the text/meta, for use in debug displays,
by annotating the text with meta informtion.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_clean_UpRevID_rev_i"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>cleanUpRevID</strong> <tt>($rev) -&gt; $integer</tt> </span></h2>
<p />
Cleans up (maps) a user-supplied revision ID and converts it to an integer
number that can be incremented to create a new revision number.
<p />
This method should be used to sanitise user-provided revision IDs.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_copyTopic_user_from"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>copyTopic</strong> <tt>($user,$fromweb,$fromtopic,$toweb,$totopic)</tt> </span></h2>
Copy a topic and all it's attendant data from one web to another.
<p />
SMELL: Does not fix up meta-data!
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_search_MetaData_par"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>searchMetaData</strong> <tt>($params) -&gt; $text</tt> </span></h2>
<p />
Search meta-data associated with topics. Parameters are passed in the $params hash,
which may contain:
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>type</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> <code>topicmoved</code>, <code>parent</code> or <code>field</code> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>topic</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> topic to search for, for <code>topicmoved</code> and <code>parent</code> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>name</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> form field to search, for <code>field</code> type searches. May be a regex. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>value</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> form field value. May be a regex. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>title</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Title prepended to the returned search results </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>default</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> defualt value if there are no results </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>web</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> web to search in, default is all webs </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
The idea is that people can search for meta-data values without having to be
aware of how or where meta-data is stored.
<p />
SMELL: should be replaced with a proper SQL-like search, c.f. <span class="twikiNewLink">DBCacheContrib<a href="/bin/edit/Plugins/DBCacheContrib?topicparent=TWiki.TWikiStoreDotPm" rel="nofollow" title="DBCacheContrib (this topic does not yet exist; you can create it)">?</a></span>.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_search_InWebContent"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>searchInWebContent</strong> <tt>($searchString,$web,\@topics,\%options) -&gt; \%map</tt> </span></h2>
<p />
Search for a string in the content of a web. The search must be over all
content and all formatted meta-data, though the latter search type is
deprecated (use searchMetaData instead).
<p /> <ul>
<li> <code>$searchString</code> - the search string, in egrep format if regex
</li> <li> <code>$web</code> - The web to search in
</li> <li> <code>\@topics</code> - reference to a list of topics to search
</li> <li> <code>\%options</code> - reference to an options hash
</li></ul> 
The <code>\%options</code> hash may contain the following options: <ul>
<li> <code>type</code> - if <code>regex</code> will perform a egrep-syntax RE search (default '')
</li> <li> <code>casesensitive</code> - false to ignore case (defaulkt true)
</li> <li> <code>files_without_match</code> - true to return files only (default false)
</li></ul> 
<p />
The return value is a reference to a hash which maps each matching topic
name to a list of the lines in that topic that matched the search,
as would be returned by 'grep'. If <code>files_without_match</code> is specified, it will
return on the first match in each topic (i.e. it will return only one
match per topic, and will not return matching lines).
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_RevisionAtTime"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getRevisionAtTime</strong> <tt>($web,$topic,$time) -&gt; $rev</tt> </span></h2> <ul>
<li> <code>$web</code> - web for topic
</li> <li> <code>$topic</code> - topic
</li> <li> <code>$time</code> - time (in epoch secs) for the rev
</li></ul> 
<p />
Get the revision number of a topic at a specific time.
Returns a single-digit rev number or undef if it couldn't be determined
(either because the topic isn't that old, or there was a problem)
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getLease_web_topic"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getLease</strong> <tt>($web,$topic) -&gt; $lease</tt> </span></h2> <ul>
<li> <code>$web</code> - web for topic
</li> <li> <code>$topic</code> - topic
</li></ul> 
<p />
If there is an lease on the topic, return the lease, otherwise undef.
A lease is a block of meta-information about a topic that can be
recovered (this is a hash containing <code>user</code>, <code>taken</code> and <code>expires</code>).
Leases are taken out when a topic is edited. Only one lease
can be active on a topic at a time. Leases are used to warn if
another user is already editing a topic.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_setLease_web_topic"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>setLease</strong> <tt>($web,$topic,$user,$length)</tt> </span></h2>
<p />
Take out an lease on the given topic for this user for $length seconds.
<p />
See <code>getLease</code> for more details about Leases.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_clearLease_web_topi"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>clearLease</strong> <tt>($web,$topic)</tt> </span></h2>
<p />
Cancel the current lease.
<p />
See <code>getLease</code> for more details about Leases.
<p /></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TWikiStoreDotPm</span> <br />    
Topic revision: r3 - 25 Jun 2006 - 16:26:33 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />