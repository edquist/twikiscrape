<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TWikiClientDotPm &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/TWikiClientDotPm?_T=16 Feb 2017" type="application/x-wiki" title="edit TWikiClientDotPm" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/TWikiClientDotPm"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Package_TWiki_Client"></a> Package <code>TWiki::Client</code> </h1>
<p />
The package is also a Factory for login managers and also the base class
for all login managers.
<p />
On it's own, an object of this class is used when you specify 'none' in
the security setup section of
<a href="https://twiki.opensciencegrid.org/bin/configure" target="_top">configure</a>. When it is used,
logins are not supported. If you want to authenticate users then you should
consider <span class="twikiNewLink">TemplateLogin<a href="/bin/edit/TWiki/TemplateLogin?topicparent=TWiki.TWikiClientDotPm" rel="nofollow" title="TemplateLogin (this topic does not yet exist; you can create it)">?</a></span> or <span class="twikiNewLink">ApacheLogin<a href="/bin/edit/TWiki/ApacheLogin?topicparent=TWiki.TWikiClientDotPm" rel="nofollow" title="ApacheLogin (this topic does not yet exist; you can create it)">?</a></span>, which are subclasses of this class.
<p />
If you are building a new login manager, then you should write a new subclass
of this class, implementing the methods marked as <strong>VIRTUAL</strong>. There are already
examples in the <code>lib/TWiki/Client</code> directory.
<p />
The class has extensive tracing, which is enabled by
$TWiki::cfg{Trace}{Client.pm}. The tracing is done in such a way as to
let the perl optimiser optimise out the trace function as a no-op if tracing
is disabled.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectData_twiki"></a> <span class="twikiNewLink">ObjectData<a href="/bin/edit/TWiki/ObjectData?topicparent=TWiki.TWikiClientDotPm" rel="nofollow" title="ObjectData (this topic does not yet exist; you can create it)">?</a></span> <code>twiki</code> </span></h2>
The TWiki object this login manager is attached to.
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Package_TWiki_Client"> Package TWiki::Client</a> <ul>
<li> <a href="?cover=print#ObjectData_twiki"> ObjectData twiki</a>
</li> <li> <a href="?cover=print#StaticMethod_makeClient_twiki_TW"> StaticMethod makeClient <tt>($twiki) -&gt; $TWiki::Client</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_loadSession"> ObjectMethod loadSession <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_checkAccess"> ObjectMethod checkAccess <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_finish"> ObjectMethod finish <tt></tt></a>
</li> <li> <a href="?cover=print#StaticMethod_expire_DeadSessions"> StaticMethod expireDeadSessions <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_user_LoggedIn_login"> ObjectMethod userLoggedIn <tt>($login,$wikiname)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_end_RenderingHandle"> ObjectMethod endRenderingHandler <tt>()</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_addCookie_c"> ObjectMethod addCookie <tt>($c)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_modifyHeader_header"> ObjectMethod modifyHeader <tt>(\%header)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_redirect_CgiQuery_u"> ObjectMethod redirectCgiQuery <tt>($url)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_SessionValues_v"> ObjectMethod getSessionValues <tt>() -&gt; \%values</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_get_SessionValue_na"> ObjectMethod getSessionValue <tt>($name) -&gt; $value</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_set_SessionValue_na"> ObjectMethod setSessionValue <tt>($name,$value)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_clear_SessionValue"> ObjectMethod clearSessionValue <tt>($name)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_forceAuthentication"> ObjectMethod forceAuthentication <tt>() -&gt; boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_loginUrl_url"> ObjectMethod loginUrl <tt>(...) -&gt; $url</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_getUser"> ObjectMethod getUser <tt>()</tt></a>
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="StaticMethod_makeClient_twiki_TW"></a> <a href="/bin/view/TWiki/StaticMethod" class="twikiLink">StaticMethod</a> <strong>makeClient</strong> <tt>($twiki) -&gt; $TWiki::Client</tt> </span></h2>
Factory method, used to generate a new TWiki::Client object
for the given session.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_loadSession"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>loadSession</strong> <tt>()</tt> </span></h2>
<p />
Get the client session data, using the cookie and/or the request URL.
Set up appropriate session variables in the twiki object and return
the login name.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_checkAccess"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>checkAccess</strong> <tt>()</tt> </span></h2>
Check if the script being run in this session is authorised for execution.
If not, throw an access control exception.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_finish"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>finish</strong> <tt></tt> </span></h2>
Complete processing after the client's HTTP request has been responded
to. Flush the user's session (if any) to disk.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="StaticMethod_expire_DeadSessions"></a> <a href="/bin/view/TWiki/StaticMethod" class="twikiLink">StaticMethod</a> <strong>expireDeadSessions</strong> <tt>()</tt> </span></h2>
Delete sessions that are sitting around but are really expired.
This <strong>assumes</strong> that the sessions are stored as files.
<p />
This is a static method, but requires TWiki::cfg. It is designed to be
run from a session or from a cron job.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_user_LoggedIn_login"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>userLoggedIn</strong> <tt>($login,$wikiname)</tt> </span></h2>
<p />
Called when the user logs in. It's invoked from TWiki::UI::Register::finish
for instance, when the user follows the link in their verification email
message. <ul>
<li> <code>$login</code> - string login name
</li> <li> <code>$wikiname</code> - string wikiname
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_end_RenderingHandle"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>endRenderingHandler</strong> <tt>()</tt> </span></h2>
This handler is called by getRenderedVersion just before the plugins
postRenderingHandler. So it is passed all HTML text just before it is
printed.
<p />
<strong>DEPRECATED</strong> Use postRenderingHandler instead.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_addCookie_c"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>addCookie</strong> <tt>($c)</tt> </span></h2>
<p />
Add a cookie to the list of cookies for this session. <ul>
<li> <code>$c</code> - a CGI::Cookie
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_modifyHeader_header"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>modifyHeader</strong> <tt>(\%header)</tt> </span></h2>
Modify a HTTP header <ul>
<li> <code>\%header</code> - header entries
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_redirect_CgiQuery_u"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>redirectCgiQuery</strong> <tt>($url)</tt> </span></h2>
Generate an HTTP redirect on STDOUT, if you can. Return 1 if you did.
Don't forget to pass all query parameters through. <ul>
<li> <code>$url</code> - target of the redirection.
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_SessionValues_v"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getSessionValues</strong> <tt>() -&gt; \%values</tt> </span></h2>
Get a name-&gt;value hash of all the defined session variables
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_get_SessionValue_na"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getSessionValue</strong> <tt>($name) -&gt; $value</tt> </span></h2>
Get the value of a session variable.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_set_SessionValue_na"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>setSessionValue</strong> <tt>($name,$value)</tt> </span></h2>
Set the value of a session variable.
We do not allow setting of AUTHUSER.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_clear_SessionValue"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>clearSessionValue</strong> <tt>($name)</tt> </span></h2>
Clear the value of a session variable.
We do not allow setting of AUTHUSER.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_forceAuthentication"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>forceAuthentication</strong> <tt>() -&gt; boolean</tt> </span></h2>
<p />
<strong>VIRTUAL METHOD</strong> implemented by subclasses
<p />
Triggered by an access control violation, this method tests
to see if the current session is authenticated or not. If not,
it does whatever is needed so that the user can log in, and returns 1.
<p />
If the user has an existing authenticated session, the function simply drops
though and returns 0.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_loginUrl_url"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>loginUrl</strong> <tt>(...) -&gt; $url</tt> </span></h2>
<p />
<strong>VIRTUAL METHOD</strong> implemented by subclasses
<p />
Return a full URL suitable for logging in. <ul>
<li> <code>...</code> - url parameters to be added to the URL, in the format required by TWiki::getScriptUrl()
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_getUser"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>getUser</strong> <tt>()</tt> </span></h2>
<p />
<strong>VIRTUAL METHOD</strong> implemented by subclasses
<p />
If there is some other means of getting a username - for example,
Apache has remote_user() - then return it. Otherwise, return undef and
the username stored in the session will be used.
<p /></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TWikiClientDotPm</span> <br />    
Topic revision: r2 - 25 Jun 2006 - 16:26:33 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />