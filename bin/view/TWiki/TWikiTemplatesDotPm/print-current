<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TWikiTemplatesDotPm &lt; TWiki &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/TWiki/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/TWiki/TWikiTemplatesDotPm?_T=16 Feb 2017" type="application/x-wiki" title="edit TWikiTemplatesDotPm" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/TWiki/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/TWiki/TWikiTemplatesDotPm"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFD8AA ;
	}
	.patternBookView {
		border-color:#FFD8AA ;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Package_TWiki_Templates"></a> Package <code>TWiki::Templates</code> </h1>
<p />
Support for the TWiki template language.
<p />
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Package_TWiki_Templates"> Package TWiki::Templates</a> <ul>
<li> <a href="?cover=print#ClassMethod_new_session"> ClassMethod new <tt>($session)</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_haveTemplate_name_b"> ObjectMethod haveTemplate <tt>($name) -&gt; $boolean</tt></a>
</li> <li> <a href="?cover=print#ObjectMethod_expandTemplate_para"> ObjectMethod expandTemplate <tt>($params) -&gt; $string</tt></a>
</li></ul> 
</li></ul> 
</div>
<p />
The following tokens are supported by this language:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> %TMPL:P% </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Instantiates a previously defined template </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> %TMPL:DEF% </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Opens a template definition </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> %TMPL:END% </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Closes a template definition </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> %TMPL:INCLUDE% </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> Includes another file of templates </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Note; the template cache does not get reset during initialisation, so
the haveTemplate test will return true if a template was loaded during
a previous run when used with mod_perl or speedycgi. Frustrating for
the template author, but they just have to switch off
the accelerators during development.
<p />
This is to all intents and purposes a singleton object. It could
easily be coverted into a true singleton (template manager).
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ClassMethod_new_session"></a> <a href="/bin/view/TWiki/ClassMethod" class="twikiLink">ClassMethod</a> <strong>new</strong> <tt>($session)</tt> </span></h2>
<p />
Constructor. Creates a new template database object. <ul>
<li> $session - session (TWiki) object
</li></ul> 
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_haveTemplate_name_b"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>haveTemplate</strong> <tt>($name) -&gt; $boolean</tt> </span></h2>
<p />
Return true if the template exists and is loaded into the cache
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="ObjectMethod_expandTemplate_para"></a> <a href="/bin/view/TWiki/ObjectMethod" class="twikiLink">ObjectMethod</a> <strong>expandTemplate</strong> <tt>($params) -&gt; $string</tt> </span></h2>
<p />
Expand the template specified in the parameter string using <code>tmplP</code>.
<p />
Examples:
<pre>
$tmpls-&#62;expandTemplate(&#39;&#34;blah&#34;);
$tmpls-&#62;expandTemplate(&#39;context&#61;&#34;view&#34; then&#61;&#34;sigh&#34; else&#61;&#34;humph&#34;&#39;);



---++ ObjectMethod &#42;tmplP&#42; &#60;tt&#62;($attrs) -&#62; $string&#60;/tt&#62;

Return value expanded text of the template, as found from looking
in the register of template definitions. The attrs can contain a template
name in &#95;DEFAULT, and / or &#61;context&#61;, &#61;then&#61; and &#61;else&#61; values.

Recursively expands any contained TMPL:P tags.

Note that it would be trivial to add template parameters to this,
simply by iterating over the other parameters (other than &#95;DEFAULT, context,
then and else) and doing a s/// in the template for that parameter value. This
would add considerably to the power of templates. There is already code
to do this in the MacrosPlugin.



---++ ObjectMethod &#42;readTemplate&#42; &#60;tt&#62;($name,$skins,$web) -&#62; $text&#60;/tt&#62;

Return value: expanded template text

Reads a template, constructing a candidate name for the template thus
   0 looks for file &#61;$name.$skin.tmpl&#61; (for each skin)
      0 in &#61;templates/$web&#61;
      0 in &#61;templates&#61;, look for
   0 looks for file &#61;$name.tmpl&#61;
      0 in &#61;templates/$web&#61;
      0 in &#61;templates&#61;, look for
   0 if a template is not found, tries in this order
      0 parse &#61;$name&#61; into a web name (default to $web) and a topic name and looks for this topic
      0 looks for topic &#61;${skin}Skin${name}Template&#61; 
         0 in $web (for each skin)
         0 in &#61;TWiki::cfg{SystemWebName}&#61; (for each skin)
      0 looks for topic &#61;${name}Template&#61;
         0 in $web (for each skin)
         0 in &#61;TWiki::cfg{SystemWebName}&#61; (for each skin)
In the event that the read fails (template not found, access permissions fail)
returns the empty string &#39;&#39;.

&#61;$skin&#61;, &#61;$web&#61; and &#61;$name&#61; are forced to an upper-case first character
when composing user topic names.

If template text is found, extracts include statements and fully expands them.
Also extracts template definitions and adds them to the
list of loaded templates, overwriting any previous definition.


</pre></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: TWiki<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TWikiTemplatesDotPm</span> <br />    
Topic revision: r1 - 01 Feb 2006 - 12:01:25 - <a href="/bin/view/Main/TWikiContributor" class="twikiLink">TWikiContributor</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />