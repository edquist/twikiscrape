<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> OSGTGJobSubmission &lt; Interoperability &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Interoperability/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Interoperability/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Interoperability/OSGTGJobSubmission?_T=16 Feb 2017" type="application/x-wiki" title="edit OSGTGJobSubmission" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Interoperability/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Interoperability/OSGTGJobSubmission"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFCC;
	}
	.patternBookView {
		border-color:#FFFFCC;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="What_is_the_OSG_TG_Gateway"></a> What is the OSG-&gt;TG Gateway? </span></h2>
The OSG-TG Gateway (tg.opensciencegrid.org) is basically a job forwarder, which forwards the incoming OSG jobs to TG resources.  At present, all jobs submitted through this gateway will be submitted to "grid-abe.ncsa.teragrid.org" which is a x86_64-based resource. The gateway is maintained,deployed and supported by the FermiGrid group at Fermilab.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Who_can_use_the_OSG_TG_Gateway"></a> Who can use the OSG-&gt;TG Gateway? </span></h2>
All OSG users may use the gateway provided they send in their request (which should contain their First/Last Name, Postal/Email address,Phone number and DN/VO) to the FermiGrid support group using the 
<a href="http://servicedesk.fnal.gov" target="_top">Fermilab Service Desk</a>. FermiGrid support group will review the request and upon approval  add them to the TG allocation.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="How_can_I_use_the_OSG_TG_Gateway"></a> How can I use the OSG-&gt;TG Gateway? </span></h2>
<p /> <ul>
<li> Make sure you are authorized to use the gateway.
</li> <li> Make sure you have sourced the VDT setup.sh/csh file so that you have all client side commands in your PATH
</li> <li> Make sure you have a valid proxy
</li></ul> 
<p />
<h4><a name="Run_a_simple_command_line_job_us"></a> Run a simple command line job using globusrun-ws </h4> <ul>
<li> Run the "globus-credential-delegate" command. (This command will basically store your delegated credential with the delegation service. This delegated credential is used when job gets forwarded from one node to another. By default , the lifetime of this delegated credential is 12 hours, but you can use the -l option to set it according to your preference). Sample execution: 
</li></ul> 
bash-3.00$ <font color="orangered">globus-credential-delegate -h tg.opensciencegrid.org -p 9443 neha.epr.tg</font><br /><pre>EPR will be written to: neha.epr.tg
Delegated credential EPR:
Address: https://131.225.107.164:9443/wsrf/services/DelegationService
Reference property&#91;0]: http://www.globus.org/08/2004/delegationService &#34;&#62;4e1113b0-5738-11dd-b9b0-967ff45aaf7c</pre>
Note:  In above command, neha.epr is the name of the file which will store the endpoint reference of your delegated credential. You can give it any name according to your choice. The execution of this command will take a while. You may hit the Crtl-C keys, once you see the following on your screen <pre>Reference property&#91;0]:http://www.globus.org/08/2004/delegationService&#34;&#62;4e1113b0-5738-11dd-b9b0-967ff45aaf7c</pre> <ul>
<li> Submit the job
</li></ul> 
bash-3.00$ <font color="orangered">globusrun-ws -submit -Jf neha.epr.tg -F tg.opensciencegrid.org:9443 -Ft Cemon -streaming -se n.err -so n.out -c /usr/local/vdt-1.10.1/tgtest/recon1</font><br /><br />Note: the Jobmanager name is "Cemon" and not "Condor". Also notice that you need to specify the name of the epr file (in above example - neha.epr.tg). The "-streaming" option enables the streaming of error and output files. <font color="#ff0000"> It is recommended that you send a shell script as the executable to run in the globusrun-ws commands above, because of OS version mismatch between tg.opensciencegrid.org (SLF5.1) and grid-abe.ncsa.teragrid.org (RHEL4.4).  Otherwise you can send an executable that is built on SL4 or older and that should run OK. </font>
<p />
<h4><a name="Run_a_more_complex_job_using_Con"></a> Run a more complex job using Condor-G </h4> <ul>
<li> Create a condor submit file. Example:
</li></ul> 
<pre>-bash-3.00$ cat inout.submit
executable           &#61; inout.sh
error                &#61; inout.err
output               &#61; inout.out
log                  &#61; inout.log
universe             &#61; grid
grid&#95;resource        &#61; gt4 https://tg.opensciencegrid.org:9443 Cemon
whentotransferoutput &#61; ON&#95;EXIT
notification         &#61; Error
should&#95;transfer&#95;files &#61; YES
#transfer&#95;input       &#61; true
transfer&#95;output      &#61; true
transfer&#95;executable  &#61; true
transfer&#95;output&#95;files &#61; out1,out2,out3
globus&#95;xml &#61; &#60;extensions&#62;&#60;outputfileslist&#62;out1,out2,out3&#60;/outputfileslist&#62;&#60;/extensions&#62;
queue</pre>
<p /> <ul>
<li> Submit the job
</li></ul> 
bash-3.00$<font color="orangered"> condor_submit inout.submit</font>
<p />
<h5><a name="How_to_transfer_input_and_output"></a> How to transfer input and output files </h5>
In order to transfer input and/or output files, you need to use the <b>globus_xml</b> attribute in your condor submit file as follows:
<p />
<font color="royalblue"><pre>globus&#95;xml &#61; &#60;extensions&#62;&#60;outputfileslist&#62;out1,out2,out3&#60;/outputfileslist&#62;&#60;inputfileslist&#62;in1,in2&#60;/inputfileslist&#62;&#60;/extensions&#62;</pre></font>
here - <i>in1, in2 </i>are the two input files I need to transfer and <i>out1, out2, out3</i> are the three output files I want back at end of job submission.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Support"></a> Support </span></h2>
For support, submit a ticket with the <a href="http://servicedesk.fnal.gov" target="_top">Fermilab Service Desk</a>.</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Interoperability<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Interoperability/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a> &gt; <a href="/bin/view/Interoperability/OSGTeraGridInteroperability" class="twikiLink">OSGTeraGridInteroperability</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>OSGTGJobSubmission</span> <br />    
Topic revision: r5 - 27 Apr 2009 - 15:05:21 - <a href="/bin/view/Main/NehaSharma" class="twikiLink">NehaSharma</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />