<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> HardwareRecommendations &lt; ReleaseDocumentation &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/ReleaseDocumentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/ReleaseDocumentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/ReleaseDocumentation/HardwareRecommendations?_T=16 Feb 2017" type="application/x-wiki" title="edit HardwareRecommendations" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/ReleaseDocumentation/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/ReleaseDocumentation/HardwareRecommendations"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#9999FF;
	}
	.patternBookView {
		border-color:#9999FF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">

@import url('https://twiki.opensciencegrid.org/twiki/pub/ReleaseDocumentation/HardwareRecommendations/centerpageborder-rd.css');

</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Hardware_Recommendations"></a>  <strong><noop>Hardware Recommendations</strong> </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#Basic_design_principles"> Basic design principles</a>
</li> <li> <a href="?cover=print#OSG_persistent_ITB_testbed_Fermi"> OSG persistent ITB testbed @ Fermilab</a>
</li> <li> <a href="?cover=print#General_Purpose_Grid_Cluster_Fer"> General Purpose Grid Cluster @ Fermilab</a>
</li> <li> <a href="?cover=print#FermiGrid_CDF_Grid_cluster_as_of"> FermiGrid CDF Grid cluster as of 2007 (1200 slots, single CE)</a>
</li> <li> <a href="?cover=print#For_VOMS_Support"> For VOMS Support</a>
</li> <li> <a href="?cover=print#GUMS_Support"> GUMS Support</a>
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
Describes real-world hardware configurations for several sizes of OSG cluster from ITB to largest production.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Basic_design_principles"></a> Basic design principles </span></h2>
The load on CE's and authentication servers such as GUMS depends on the rate of job start and stop, not necessarily on
the total size of the cluster.  Lots of short jobs will be the biggest stress on a cluster, particularly if the GlideinWMS is
running jobs on your cluster and gLexec is being used.  The size of executable and the amount of file transfer also 
are critical in the load.  A lot of small files get written on the CE by globus and condor.  NFS configuration is easiest to 
set up, but shouldn't be tried unless you have an NFS server of the class of Netapp or Bluearc.  A single Linux box
serving NFS is not adequate even on a small ITB cluster.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="OSG_persistent_ITB_testbed_Fermi"></a> OSG persistent ITB testbed @ Fermilab </span></h2>
    * 2 head nodes, Dell PowerEdge 1950, 16GB RAM, 2x Intel Xeon 5355 processor, 2.66 GHz, single 500GB SATA disk. (vintage 2007)
<p />
    * 8 worker nodes, Dell PowerEdge 1950, 16GB RAM, 2x Intel Xeon 5355 processor, 2.66 GHz, single 500GB SATA disk. (vintage 2007)
<p />
    * Head nodes and worker nodes are both divided into virtual machines using Sci. Linux 5.5 / Xen 3.1.2.
<p />
    * 8 worker nodes divided into 32 virtual worker nodes (16 condor, 8 PBS, 8 SGE)
<p />
    * 2 head nodes divided into 7 virtual machines apiece.  each CE is 2GB of RAM. 
<p />
    * SE:  Two virtual machines, one for dCache head node, and one for dCache pool node, hosted in FermiCloud.
<p />
    * dCache pool node is 2xIntel E5640 (Westmere), 6x2TB SATA drives in Raid 5 configuration.  (in progress)
<p />
    * GUMS server not part of OSG-ITB testbed but is hosted on an old 2005-vintage machine, load is low.
<p />
    * Home directories for grid users, as well as OSG_APP, OSG_DATA are served by Bluearc NAS appliance.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="General_Purpose_Grid_Cluster_Fer"></a> General Purpose Grid Cluster @ Fermilab </span></h2>
    * Four head nodes, Dell PowerEdge 1950, 16GB RAM, 2x Intel Xeon 5355 processor, 2.66 GHz, single 500GB SATA disk. (vintage 2007)
<p />
    * Head nodes divided into 4 virtual machines apiece.  On 1st 3:  Primary CE, 5GB RAM, Condor master, 4GB RAM, backup CE, 4GB RAM, YP sever 1GB RAM
<p />
    *  On 4th--Bestman Gateway, postgres database for condor quill.
<p />
    * 3260 active batch slots    
<p />
    * Note that you really don't need 3 CE's to keep 3260 batch slots full, one CE could do the job up to about 5K slots.  We do it for different functionalities and for redundancy in case one fails.
<p />
    * Home directories for grid users, as well as OSG_APP, OSG_DATA are served by Bluearc NAS appliance.
<p />
    * AuthN/!AuthZ shared with rest of FermiGrid which uses 2xDell Poweredge 2950 (vintage 2008) servers for GUMS and SAZ.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="FermiGrid_CDF_Grid_cluster_as_of"></a> FermiGrid CDF Grid cluster as of 2007 (1200 slots, single CE) </span></h2> <ul>
<li> CE with 6GB RAM.
</li></ul> 
<p /> <ul>
<li> At least 2 CPUs, as fast as you can get.
</li></ul> 
<p /> <ul>
<li> Enough disk to hold the VDT software and logs (~250GB).
</li></ul> 
<p /> <ul>
<li> For small­/medium size cluster, this machine can be an NFS server for home areas, too.
</li></ul> 
<p /> <ul>
<li> For large cluster we strongly recommend getting a separate enterprise-class NFS server for home areas and APP and DATA areas too.
</li></ul> 
<p /> <ul>
<li> The major loads of memory on a CE are the following:
</li></ul> 
<p /> <ul>
<li> Globus-ws container, 700MB
</li></ul> 
<p /> <ul>
<li> CEMon, 450 MB
</li></ul> 
<p /> <ul>
<li> For a condor-based system, one condor_shadow process per job that is running (7MB apiece).
</li></ul> 
<p /> <ul>
<li> See <a href="/bin/view/ReleaseDocumentation/CondorBatchSystemHints" class="twikiLink">CondorBatchSystemHints</a> for hints on how to move the condor master off of your head node  (this helps out reliability a lot).
</li></ul> 
<p /> <ul>
<li> See <a href="/bin/view/Trash/ReleaseDocumentationPbsBatchSystemHints" class="twikiLink">ReleaseDocumentationPbsBatchSystemHints</a> for how to split the PBS master off of your head node.
</li></ul> 
<p />
<h3><a name="Load_Limits"></a> Load Limits </h3> <ul>
<li> One example:  system fcdfosg2, 2x3.2GHz Xeon (hyperthreaded) vintage 2005, now 8GB of RAM.   Averages 6000 grid jobs a day, 2050 job slots running simultaneously.  Works ok but sometimes goes up to load of 50 during rapid job submission sequences.
</li></ul> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="For_VOMS_Support"></a> For VOMS Support </span></h2>
If you are supporting a VO, use a 2nd machine of with these specifications to be your VOMS server.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="GUMS_Support"></a> GUMS Support </span></h2>
If you are running GUMS, use a 3rd server with these specifications. 
<p />
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
   DEAR DOCUMENT OWNER
   <code><b>===============</b></code>
<p />
   Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/ReleaseDocumentation/FirstLast?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER          = <span class="twikiNewLink">StevenTimm<a href="/bin/edit/ReleaseDocumentation/StevenTimm?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="StevenTimm (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/ReleaseDocumentation/ComputeElement?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = <span class="twikiNewLink">ComputeElement<a href="/bin/edit/ReleaseDocumentation/ComputeElement?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/ReleaseDocumentation/EndUser?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager|Documenter) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/ReleaseDocumentation/SysAdmin?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Planning
</li></ul> 
<p />
   Please define if this document in general needs to be reviewed before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
   Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 0
</li></ul> 
<p />
   change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
   change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
   DEAR DOCUMENT REVIEWER
   <code><b>==================</b></code>
<p />
   Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/ReleaseDocumentation/FirstLast?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">HorstSeverini<a href="/bin/edit/ReleaseDocumentation/HorstSeverini?topicparent=ReleaseDocumentation.HardwareRecommendations" rel="nofollow" title="HorstSeverini (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
   Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 ) <ul>
<li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: ReleaseDocumentation<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/ReleaseDocumentation/SiteFabricBestPractices" class="twikiLink">SiteFabricBestPractices</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>HardwareRecommendations</span> <br />    
Topic revision: r21 - 07 Feb 2017 - 18:42:08 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />