<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GipTesting &lt; InformationServices &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/InformationServices/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/InformationServices/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/InformationServices/GipTesting?_T=16 Feb 2017" type="application/x-wiki" title="edit GipTesting" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/InformationServices/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/InformationServices/GipTesting"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Testing_the_GIP_for_Integration"></a> Testing the GIP for Integration. </h1>
<p />
The GIP is an important information services component.  Without correct information out on the OSG, VOs will make poor decisions on where to send jobs or perhaps try and utilize storage space which is not there.
<p />
Therefore, it is not enough to test to make sure that <i>any</i> data is output from the GIP - the data must also be correct!
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_latest_release_candi"></a> Install the latest release candidate. </span></h2>
<p />
Get the latest release candidate from either the VDT or the developers.  Installing should be a matter of untarring the tarball in the <code>$VDT_LOCATION</code> directory.  Alternately, if you only want to try a specific piece, you can untar it in any directory and point the <code>$GIP_LOCATION</code> variable to the newly created <code>gip/</code> directory.
<p />
<a href="/bin/view/InformationServices/GipInstall" class="twikiLink">Updated documentation here.</a>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Running_the_GIP"></a> Running the GIP </span></h2>
<p />
The GIP can be run with the following command line invocation:
<p />
<pre>
$VDT&#95;LOCATION/glite/etc/glite-ce-ce-plugin/glite-ce-info $VDT&#95;LOCATION/lcg/etc/osg-info-generic.conf
</pre>
<p />
This is exactly the command that CEMon uses to execute the GIP; CEMon takes the stdout from the above command and feeds it to central GOC servers.
<p />
The command should output a large amount of LDIF and return with exit code 0.  It should complete in under 60 seconds.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Exporting_data_to_CEMon"></a> Exporting data to CEMon </span></h2>
<p />
The tester should now export the data to the ITB CEMon and ITB BDII instance.
<p />
The CEMon developers will provide information on how to do this.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Make_sure_you_have_the_test_prog"></a> Make sure you have the test programs </span></h2>
<p />
If you got the GIP install from the VDT, it does not include the testing programs.  You will need to check them out from SVN:
<p />
<pre>
svn co svn://t2.unl.edu/brian/gip/trunk gip&#95;trunk
</pre>
<p />
The GIP test programs are now located in <code>gip_trunk/test/</code>.
<p />
Before <strong>any</strong> test programs can be run, the GIP_LOCATION variable must be set.  Assuming you just ran the above SVN command, do the following:
<p />
<pre>
export GIP&#95;LOCATION&#61;$PWD/gip&#95;trunk/gip
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Run_the_schema_check"></a> Run the schema check </span></h2>
<p />
The schema check was developed on the following <span class="twikiNewLink">OpenLDAP<a href="/bin/edit/InformationServices/OpenLDAP?topicparent=InformationServices.GipTesting" rel="nofollow" title="OpenLDAP (this topic does not yet exist; you can create it)">?</a></span> version:
<p />
<pre>
bbockelm:~ brian$ ldapsearch -V
ldapsearch: &#64;(#) $OpenLDAP: ldapsearch 2.3.27 (Oct  4 2007 23:21:32) $
   (LDAP library: OpenLDAP 20327)
</pre>
<p />
This is the default <span class="twikiNewLink">OpenLDAP<a href="/bin/edit/InformationServices/OpenLDAP?topicparent=InformationServices.GipTesting" rel="nofollow" title="OpenLDAP (this topic does not yet exist; you can create it)">?</a></span> library which ships with Mac OS X.  Modern Fedora distributions should also carry the same version.
<p />
If you are running RHEL, you will need the following packages: <ul>
<li> openldap-servers
</li> <li> openldap-clients
</li></ul> 
The <code>schema_check.py</code> script does not actually run an LDAP server, but needs <code>slapadd</code>, which is only distributed with the servers RPM.
<p />
Run <code>schema_check.py</code>:
<p />
<pre>
./gip&#95;trunk/test/schema&#95;check.py
</pre>
<p />
By default, this will run a check against all sites in the BDII.  To run against a specific site, just put it as a command argument.  Here is an example running against Nebraska:
<p />
<pre>
bbockelm:~ brian$ /Users/brian/projects/gip/trunk/test/schema&#95;check.py Nebraska
testSchema&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestSchema) ... FAIL

&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;
FAIL: testSchema&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestSchema)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &#34;/Users/brian/projects/gip/trunk/test/schema&#95;check.py&#34;, line 77, in testSchema
    &#34; for site &#37;s.  Output:\n&#37;s&#34; &#37; (self.site, output))
AssertionError: slapadd schema check failed for site Nebraska.  Output:
slapadd: dn&#61;&#34;GlueSubClusterUniqueID&#61;thpc computers,GlueClusterUniqueID&#61;red.unl.edu,Mds-Vo-name&#61;local,o&#61;grid&#34; (line&#61;4488): (64) value of naming attribute &#39;GlueSubClusterUniqueID&#39; is not present in entry
slapadd: dn&#61;&#34;GlueSubClusterUniqueID&#61;Dell Nodes,GlueClusterUniqueID&#61;red.unl.edu,Mds-Vo-name&#61;local,o&#61;grid&#34; (line&#61;4584): (64) value of naming attribute &#39;GlueSubClusterUniqueID&#39; is not present in entry
Entry (GlueServiceUniqueID&#61;httpg://srm.unl.edu:8443/srm/managerv2,Mds-Vo-name&#61;local,o&#61;grid,Mds-Vo-name&#61;local,o&#61;grid), attribute &#39;GlueServiceStatus&#39; cannot have multiple values
slapadd: dn&#61;&#34;GlueServiceUniqueID&#61;httpg://srm.unl.edu:8443/srm/managerv2,Mds-Vo-name&#61;local,o&#61;grid,Mds-Vo-name&#61;local,o&#61;grid&#34; (line&#61;4704): (19) attribute &#39;GlueServiceStatus&#39; cannot have multiple values


----------------------------------------------------------------------
Ran 1 test in 3.251s
</pre>
<p />
Unlike this example, your ITB site must pass the schema check before moving on to the next step.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Run_the_DN_check"></a> Run the DN check </span></h2>
<p />
The DN check makes sure that the DN for each entry is properly formatted.  It is located in <code>test/dn_check.py</code>.  Here is a sample failure:
<p />
<pre>
rcf-nb-01:gip brian$ python trunk/test/dn&#95;check.py Nebraska
GIP.common:ERROR gip&#95;common:161:  Unable to open GIP attributes: &#91;Errno 2] No such file or directory: &#39;/Users/brian/projects/gip/trunk/monitoring/gip-attributes.conf&#39;
testDnAds&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestDnAds) ... FAIL

&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;
FAIL: testDnAds&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestDnAds)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &#34;trunk/test/dn&#95;check.py&#34;, line 47, in testDnAds
    &#34;o&#61;grid entry in DN &#37;s&#34; &#37; prettyDN(entry.dn))
AssertionError: There is an extra o&#61;grid entry in DN GlueServiceUniqueID&#61;httpg://srm.unl.edu:8443/srm/managerv2,o&#61;grid,mds-vo-name&#61;local,mds-vo-name&#61;Nebraska,mds-vo-name&#61;local,o&#61;grid

----------------------------------------------------------------------
Ran 1 test in 0.744s

FAILED (failures&#61;1)
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Run_the_SRM_check"></a> Run the SRM check </span></h2>
<p />
One of the most important uses of the GIP is to advertise SRM endpoints to the WLCG for FTS transfers.  This is a critical test for CMS.
<p />
A SRM storage element might advertise support for one or more SRM endpoints; currently supported SRM versions are 1.1 and 2.2.
<p />
Running the srm_check.py for the test site is sufficient.  It should print all the SRM endpoints on stdout and will raise an error if any of them is problematic.  Below is the output of a sample session where Nebraska advertises 3 SRM endpoints where 1 is incorrect:
<p />
<pre>
bbockelm:~ brian$ /Users/brian/projects/gip/trunk/test/srm&#95;check.py Nebraska
testSrmAds&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestSrmAds) ... GIP.Testing.SRM:DEBUG srm&#95;check:44:  Checking SRM entry:
Entry: (&#39;GlueServiceUniqueID&#61;httpg://srm.unl.edu:8443/srm/managerv1&#39;, &#39;mds-vo-name&#61;Nebraska&#39;, &#39;mds-vo-name&#61;local&#39;, &#39;o&#61;grid&#39;)
Classes: (&#39;GlueKey&#39;, &#39;GlueSchemaVersion&#39;, &#39;GlueService&#39;, &#39;GlueTop&#39;)
Attributes: 
 - SchemaVersionMajor: 1
 - SchemaVersionMinor: 3
 - ServiceName: httpg://srm.unl.edu:8443/srm/managerv1
 - ServiceAccessControlRule: VO:ops
 - ServiceWSDL: http://sdm.lbl.gov/srm-wg/srm.v1.1.wsdl
 - ServiceOwner: OSG
 - ServiceAccessPointURL: httpg://srm.unl.edu:8443/srm/managerv1
 - ServiceSemantics: UNDEFINED
 - ServiceType: SRM
 - ForeignKey: GlueSiteUniqueID&#61;red.unl.edu
 - ServiceUniqueID: httpg://srm.unl.edu:8443/srm/managerv1
 - ServiceVersion: 1.1
 - ServiceURI: httpg://srm.unl.edu:8443/srm/managerv1
 - ServiceStatusInfo: UNKNOWN
 - ServiceStartTime: 1970-01-01T00:00:00Z
 - ServiceStatus: Production
 - ServiceEndpoint: httpg://srm.unl.edu:8443/srm/managerv1

GIP.Testing.SRM:DEBUG srm&#95;check:44:  Checking SRM entry:
Entry: (&#39;GlueServiceUniqueID&#61;httpg://srm.unl.edu:8443/srm/managerv2&#39;, &#39;mds-vo-name&#61;Nebraska&#39;, &#39;mds-vo-name&#61;local&#39;, &#39;o&#61;grid&#39;)
Classes: (&#39;GlueKey&#39;, &#39;GlueSchemaVersion&#39;, &#39;GlueService&#39;, &#39;GlueTop&#39;)
Attributes: 
 - SchemaVersionMajor: 1
 - SchemaVersionMinor: 3
 - ServiceName: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceAccessControlRule: VO:ops
 - ServiceWSDL: http://sdm.lbl.gov/srm-wg/srm.v2.2.wsdl
 - ServiceOwner: OSG
 - ServiceAccessPointURL: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceSemantics: UNDEFINED
 - ServiceType: SRM
 - ForeignKey: GlueSiteUniqueID&#61;red.unl.edu
 - ServiceUniqueID: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceVersion: 2.2
 - ServiceURI: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceStatusInfo: UNKNOWN
 - ServiceStartTime: 1970-01-01T00:00:00Z
 - ServiceStatus: Production
 - ServiceEndpoint: httpg://srm.unl.edu:8443/srm/managerv2

GIP.Testing.SRM:DEBUG srm&#95;check:44:  Checking SRM entry:
Entry: (&#39;GlueServiceUniqueID&#61;httpg://srm.unl.edu:8443/srm/managerv2&#39;, &#39;o&#61;grid&#39;, &#39;mds-vo-name&#61;local&#39;, &#39;mds-vo-name&#61;Nebraska&#39;, &#39;mds-vo-name&#61;local&#39;, &#39;o&#61;grid&#39;)
Classes: (&#39;GlueKey&#39;, &#39;GlueSchemaVersion&#39;, &#39;GlueService&#39;, &#39;GlueTop&#39;)
Attributes: 
 - SchemaVersionMajor: 1
 - SchemaVersionMinor: 3
 - ServiceName: srm.unl.edu
 - ServiceAccessControlRule: atlas
 - ServiceWSDL: UNDEFINED
 - ServiceOwner: OSG
 - ServiceAccessPointURL: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceSemantics: UNDEFINED
 - ServiceType: srm&#95;v2
 - ForeignKey: GlueSiteUniqueID&#61;
 - ServiceUniqueID: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceVersion: 2
 - ServiceURI: httpg://srm.unl.edu:8443/srm/managerv2
 - ServiceStatusInfo: not tested
 - ServiceStartTime: 1970-01-01T00:00:00Z
 - ServiceStatus: OK
 - ServiceEndpoint: httpg://srm.unl.edu:8443/srm/managerv2

FAIL

&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;
FAIL: testSrmAds&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestSrmAds)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &#34;/Users/brian/projects/gip/trunk/test/srm&#95;check.py&#34;, line 46, in testSrmAds
    msg&#61;&#34;ServiceType must be equal to &#39;SRM&#39;&#34;)
AssertionError: ServiceType must be equal to &#39;SRM&#39;

----------------------------------------------------------------------
Ran 1 test in 0.921s

FAILED (failures&#61;1)
</pre>
<p />
In addition to passing the srm_check, you must check to make sure that the endpoints show up in <code>glite_sd_query</code>; if you do not have access to a gLite UI, ask one of the CMS sites to test it for you.
<p />
<strong>It is ultimately the tester's responsibility to make sure that <code>glite_sd_query</code> is run, even if it is run at another site.</strong>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Check_the_advertised_site_layout"></a> Check the advertised site layout </span></h2>
<p />
The site_print script will query the BDII and determine the advertised layout of the site.  To use this script against a particular site, simply invoke:
<p />
<pre>rcf-nb-01:gip brian$ ./trunk/test/site&#95;print.py Nebraska
GIP.common:ERROR gip&#95;common:161:  Unable to open GIP attributes: &#91;Errno 2] No such file or directory: &#39;/Users/brian/projects/gip/trunk/monitoring/gip-attributes.conf&#39;
testSiteAds&#95;Nebraska (&#95;&#95;main&#95;&#95;.TestPrintSite) ... 
SITE: Nebraska

   &#42; CE: red.unl.edu:2119/jobmanager-pbs-cms, Close SE: srm.unl.edu
      - VO: cdf
      - VO: cms
      - VO: gpn
      - VO: mis
      - VO: osg
      - VO: GLOW
      - VO: fmri
&#60;snip output/&#62;
   &#42; CE: red.unl.edu:2119/jobmanager-pbs-osg, Close SE: srm.unl.edu
      - VO: cdf
      - VO: cms
      - VO: gpn
      - VO: mis
      - VO: osg
      - VO: GLOW
      - VO: fmri

&#60;snip output/&#62;

   &#42; CE: red.unl.edu:2119/jobmanager-pbs-dzero, Close SE: srm.unl.edu

&#60;snip output/&#62;

      - VO: atlas
      - VO: dzero
      - VO: grase
      - VO: ivdgl
      - VO: engage
      - VO: gridex
      - VO: osgedu
      - VO: nanohub
      - VO: localUsers
   &#42; CE: red.unl.edu:2119/jobmanager-pbs-workq, Close SE: srm.unl.edu
      - VO: cdf
      - VO: cms
      - VO: gpn
      - VO: mis
      - VO: osg
      - VO: GLOW
      - VO: fmri
      - VO: gadu
      - VO: ligo
      - VO: sdss
      - VO: atlas
      - VO: dzero
      - VO: grase
      - VO: ivdgl
      - VO: engage
      - VO: gridex
      - VO: osgedu
      - VO: nanohub
      - VO: localUsers
   &#42; CE: red.unl.edu:2119/jobmanager-pbs-pushpa, Close SE: srm.unl.edu
      - VO: cdf
      - VO: cms
      - VO: gpn

&#60;snip output/&#62;

   &#42; CE: red.unl.edu:2119/jobmanager-pbs-cmsprod, Close SE: srm.unl.edu
      - VO: cdf
      - VO: cms
      - VO: gpn
      - VO: mis

&#60;snip output/&#62;

ok

----------------------------------------------------------------------
Ran 1 test in 0.391s

OK
</pre>
<p />
The script prints possibly a large amount of output per site.  It prints out each CE and the VO Views associated with that CE.  Additionally, if the CE has a close SE entry, it also prints that out.
<p />
Note that the above example has the following problems:
<p /> <ul>
<li> VOs were advertised for queues which are restricted (I.e., the CMS queue advertised support for gpn, cdf, mis, etc)
</li> <li> The localUsers GUMS entry (for Nebraska's local users) was advertised.  This should not show up anywhere.
</li> <li> VOs were advertised for queues they don't belong in (i.e., the CMS VO should not appear in any general-purpose queue).
</li> <li> A local queue, "pushpa" was advertised, but it shouldn't be exposed to the grid.
</li></ul> 
<p />
We now list what the setup should look like for each LRMS.
<p />
<h3><a name="Condor"></a> Condor </h3>
<p />
<h4><a name="Classic"></a> "Classic" </h4>
<p />
This is for all released and testing versions of the GIP.  One CE per VO should appear, and one associated VO view per CE.
<p />
Here is the proper entry for USCSMS-FNAL-WC1-CE:
<p />
<pre>
SITE: USCMS-FNAL-WC1-CE

   &#42; CE: cmsosgce.fnal.gov:2119/jobmanager-condor-cms, Close SE: cmsosgce.fnal.gov
      - VO: cms
   &#42; CE: cmsosgce.fnal.gov:2119/jobmanager-condor-mis, Close SE: cmsosgce.fnal.gov
      - VO: mis
   &#42; CE: cmsosgce.fnal.gov:2119/jobmanager-condor-ops, Close SE: cmsosgce.fnal.gov
      - VO: ops
</pre>
<p />
<h4><a name="Proposed"></a> Proposed </h4>
<p />
Condor should advertise one CE:
<p />
<pre>
&#60;hostname&#62;:2119/jobmanager-condor-default
</pre>
<p />
Each VO should have a VOView entry underneath this CE.  Here is the previous example but using the proposed layout:
<p />
<pre>
SITE: USCMS-FNAL-WC1-CE

   &#42; CE: cmsosgce.fnal.gov:2119/jobmanager-condor-default, Close SE: cmsosgce.fnal.gov
      - VO: cms
      - VO: mis
      - VO: ops
</pre>
<p />
<h3><a name="PBS_SGE_and_LSF"></a> PBS, SGE, and LSF </h3>
<p />
PBS, SGE, and LSF are queue-based systems.  For each queue, there should be one CE entry (two if WS-GRAM is enabled).  The sites should be able to blacklist any queue which doesn't accept grid jobs, limit queues to certain VOs, and remove specific VOs from certain queues.
<p />
Here is an example CE for Nebraska:
<p />
<pre>
   &#42; CE: red.unl.edu:2119/jobmanager-pbs-cmsprod
      LRMS type: pbs, Version: PBSPro&#95;9.1.0.72982
      Slots used 16, Free 250
      Total batch slots: 444
      Max wall time: 1440
      - VO: cms
         Running 250, Waiting 0
</pre>
<p />
<h3><a name="General_Tests"></a> General Tests </h3>
<p /> <ul>
<li> Make sure that the site layout and VO views are correct.
</li> <li> Send a long-running job into the queue and make sure that the running job shows up in the correct queue and VO.
</li> <li> Ensure that any waiting jobs show up in the correct queue and VO
</li> <li> Make sure that the total, used, and free batch slots are correct
</li> <li> (PBS, SGE, LSF) Make sure that the max wall time is set correctly.
</li> <li> Ensure that the LRMS type and version are set correctly.
</li></ul> 
<p />
<h1><a name="Release_Management"></a> Release Management </h1>
<p />
The release manager needs to coordinate the testing of the GIP.  This page is summarized into the below checklist.  The release manager is responsible to make sure that the checklist is performed at sites containing each batch system type and at least one dCache site.
<p />
The release manager needs to complete the following checklist
<pre>
Release Manager Checklist.

Release Manager: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;
Tag tested: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;

Each of the following must be completed:
- Open VDT support ticket with latest tag tarball.
- Wait for VDT to package tarball into the release repo.
- Coordinate the sites to test the GIP.  One of each LRMS types must be tested:
   &#42; Condor site: &#95;&#95;&#95;&#95;&#95;
   &#42; PBS site: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;
   &#42; LSF site: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;
   &#42; SGE site: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;
  Attach their completed checklist to the email to the GIP developers and VDT.  Make sure to note anything which fails.
- Attach the completed checklist of one dCache site running the dynamic dCache plugins.  Site name: &#95;&#95;&#95;&#95;&#95;&#95;&#95;
- When this checklist is completed, email it to the OSG-GIP mailing list and attach it to the VDT support ticket.
</pre>
<p />
Questions should be directed to the OSG-GIP mailing list.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Site_Release_Checklist"></a> Site Release Checklist </span></h2>
<pre>
Tester name: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;
Tag tested: &#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;

Please fill out each entry; put N/A if it is not applicable.

&#42; GIP executes without error: &#95;&#95;&#95;
&#42; Data is exported to CEMon on ITB: &#95;&#95;&#95;
&#42; GIP data passes schema check: &#95;&#95;&#95;
&#42; GIP data passes the DN check: &#95;&#95;&#95;
&#42; SRM endpoints:
   &#42; A SRM endpoint is advertised: &#95;&#95;&#95;
   &#42; Additional SRM endpoints are advertised (i.e., SRM v2.2 in addition to SRM v2.1): &#95;&#95;&#95;
   &#42; SRM advertisement passes srm&#95;check: &#95;&#95;&#95;
&#42; Site batch system (pick one):  LSF/PBS/SGE/Condor
&#42; Site layout output from site&#95;print is correct: &#95;&#95;&#95;
&#42; Site&#39;s default SE shows up under &#34;Close SE&#34; from site&#95;print: &#95;&#95;&#95;
&#42; Use ce&#95;print to determine the following for one CE:
   &#42; Batch system type and version are correct: &#95;&#95;&#95;
   &#42; For non-Condor systems, max&#95;walltime is correct: &#95;&#95;&#95;
   &#42; Total, free, and used slots are correct: &#95;&#95;&#95;
&#42; Submit jobs to the batch system and ensure that:
   &#42; Running job count is correct for VOView and CE: &#95;&#95;&#95;
   &#42; Waiting job count is correct for VOView and CE: &#95;&#95;&#95;
  For both of the above, make sure it is truly tested - both entries default to 0.  A true test makes sure that both the running and waiting are nonzero.

If you have a dCache SE, continue:

&#42; dCache configuration is done: &#95;&#95;&#95;
&#42; dCache version is correct: &#95;&#95;&#95;
&#42; dCache free and total space (in KB) is correct: &#95;&#95;&#95;
&#42; SRM server shows up as a GlueService; one entry for 1.1 and another for 2.2: &#95;&#95;&#95;
&#42; Each GridFTP door in the system shows up in an AccessProtocol entry: &#95;&#95;&#95;
&#42; One SA space shows up per VO: &#95;&#95;&#95;
&#42; Space reservations are advertised as a VO view when made (optional): &#95;&#95;&#95;
</pre>
<p />
-- <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a> - 10 Mar 2008</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: InformationServices<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/InformationServices/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GipTesting</span> <br />    
Topic revision: r5 - 16 Dec 2008 - 16:45:42 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />