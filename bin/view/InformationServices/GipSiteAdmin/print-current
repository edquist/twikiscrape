<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GipSiteAdmin &lt; InformationServices &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/InformationServices/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/InformationServices/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/InformationServices/GipSiteAdmin?_T=16 Feb 2017" type="application/x-wiki" title="edit GipSiteAdmin" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/InformationServices/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/InformationServices/GipSiteAdmin"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#D0D0D0;
	}
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Information_for_the_Site_Admin"></a> Information for the Site Admin </h1>
<p />
The GIP is a modular approach to advertising information about your cluster.  The schema used by the GIP is called GLUE; the current version of GLUE is v1.3. A full explanation of the GLUE <a href="https://forge.cnaf.infn.it/plugins/scmsvn/viewcvs.php/v_1_3/spec/pdf/GLUESchema.pdf?root=glueschema&amp;view=log" target="_top">is available here</a>.  The logical organization of the GIP data is (in the schema, all of the entities below are prefixed with <code>GLUE</code>:
<p /> <ul>
<li> <a href="/bin/view/InformationServices/GlueSite" class="twikiLink">Site</a> <ul>
<li> <span class="twikiNewLink">Cluster<a href="/bin/edit/InformationServices/GlueCluster?topicparent=InformationServices.GipSiteAdmin" rel="nofollow" title="Cluster (this topic does not yet exist; you can create it)">?</a></span> (1 or more) <ul>
<li> <span class="twikiNewLink">Subcluster<a href="/bin/edit/InformationServices/GlueSubcluster?topicparent=InformationServices.GipSiteAdmin" rel="nofollow" title="Subcluster (this topic does not yet exist; you can create it)">?</a></span> (1 or more) <ul>
<li> Software installation (0 or more)
</li></ul> 
</li> <li> <a href="/bin/view/InformationServices/GlueCE" class="twikiLink">Compute Element</a> (CE) (1 or more) <ul>
<li> VO View (1 per VO)
</li></ul> 
</li></ul> 
</li> <li> Storage Element (SE) (1 or more) <ul>
<li> Storage Area (1 or more) <ul>
<li> VO View (1 per VO)
</li></ul> 
</li> <li> Control Protocols
</li> <li> Access Protocols
</li></ul> 
</li> <li> CE-SE binding
</li></ul> 
</li></ul> 
<p />
The above entities are expressed through LDIF format.  An LDIF entry has two parts: the distinguished name, and a set of key-value pairs.  Here is an example VOView for a Nebraska Compute Element:
<p />
<pre>
dn: GlueVOViewLocalID&#61;mis,GlueCEUniqueID&#61;red.unl.edu:2119/jobmanager-pbs-workq,mds-vo-name&#61;Nebraska,o&#61;grid
objectClass: GlueCETop
objectClass: GlueVOView
objectClass: GlueCEInfo
objectClass: GlueCEState
objectClass: GlueCEAccessControlBase
objectClass: GlueCEPolicy
objectClass: GlueKey
objectClass: GlueSchemaVersion
GlueVOViewLocalID: mis
GlueCEAccessControlBaseRule: VO:mis
GlueCEStateRunningJobs: 0
GlueCEStateWaitingJobs: 0
GlueCEStateTotalJobs: 0
GlueCEStateFreeJobSlots: 0
GlueCEStateEstimatedResponseTime: 0
GlueCEStateWorstResponseTime: 0
GlueCEInfoDefaultSE: T2&#95;Nebraska&#95;Storage
GlueCEInfoApplicationDir: /opt/osg/app
GlueCEInfoDataDir: /opt/osg/data
GlueChunkKey: GlueCEUniqueID&#61;red.unl.edu:2119/jobmanager-pbs-workq
GlueSchemaVersionMajor: 1
GlueSchemaVersionMinor: 3
</pre>
<p />
All GLUE entries will have multiple <code>objectClass</code> entries, <code>GlueSchemaVersionMajor</code>, and <code>GlueSchemaVersionMinor</code>.
<p />
<h1><a name="Modules"></a> Modules </h1>
<p />
The modularity of the GIP is a powerful tool that should help very complex site configurations.  There are two types of modules: <ul>
<li> Plugins - These modules take pre-existing LDIF entries and alter them.
</li> <li> Providers - These modules add new LDIF entries to the GIP.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Creating_your_own_modules"></a> Creating your own modules </span></h2>
<p />
A module is simply an executable script (taking no command-line arguments) which communicates information to the GIP using stdout.  Any information written to stderr is ignored.
<p />
Place your executable script in <ul>
<li> Plugins: <code>$GIP_LOCATION/plugins</code>
</li> <li> Providers: <code>$GIP_LOCATION/providers</code>
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Caching_policies"></a> Caching policies </span></h2>
<p />
When a user requests data from the GIP, each module is not run every time.  Rather, there is a caching policy controlled by the config file <code>$GIP_LOCATION/gip/etc/osg-info-generic.conf</code>.  The relevant values are: <ul>
<li> freshness: If the cached output from the module is more than $freshness seconds, then the module will be executed in this run of the GIP.
</li> <li> cache_ttl: Any cached output older than $cache_ttl seconds is ignored.
</li> <li> response: Any module taking more than $response seconds (and less than $timeout seconds) to exit will have its output cached, but the output will not be used in this run of the GIP.
</li> <li> timeout: If any individual module takes more than $timeout seconds to exit, then the process is killed and its output discarded.
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Plugins"></a> Plugins </span></h2>
<p />
For each LDIF entry printed to the stdout of a plugin, the GIP attempts to match the DN of the output to the DN of the static entry.  Once the GIP finds the static entry, the GIP replaces the static entry's "key: value" pairs with the "key: value" pairs from the module.
<p />
An example will be helpful.  Suppose we have the following entry in the static information:
<p />
<pre>
dn: GlueSubClusterUniqueID&#61;red.unl.edu,GlueClusterUniqueID&#61;red.unl.edu,mds-vo-name&#61;Nebraska,o&#61;grid
objectClass: GlueClusterTop
objectClass: GlueSubCluster
objectClass: GlueSchemaVersion
objectClass: GlueHostApplicationSoftware
objectClass: GlueHostArchitecture
objectClass: GlueHostBenchmark
objectClass: GlueHostMainMemory
objectClass: GlueHostNetworkAdapter
objectClass: GlueHostOperatingSystem
objectClass: GlueHostProcessor
objectClass: GlueInformationService
objectClass: GlueKey
GlueChunkKey: GlueClusterUniqueID&#61;red.unl.edu
GlueHostBenchmarkSI00: 400
GlueHostMainMemoryRAMSize: 4000
GlueHostMainMemoryVirtualSize: 4000
GlueHostNetworkAdapterInboundIP: FALSE
GlueHostNetworkAdapterOutboundIP: TRUE
GlueHostOperatingSystemName: CentOS
GlueSubClusterName: red.unl.edu
GlueSubClusterUniqueID: red.unl.edu
GlueSubClusterLogicalCPUs: 240
GlueSchemaVersionMajor: 1
GlueSchemaVersionMinor: 3
</pre>
<p />
Suppose that the module prints this to the stdout:
<p />
<pre>
dn: GlueSubClusterUniqueID&#61;red.unl.edu,GlueClusterUniqueID&#61;red.unl.edu,mds-vo-name&#61;Nebraska,o&#61;grid
GlueHostNetworkAdapterInboundIP: TRUE
</pre>
<p />
Then, after the module is run, the subcluster entry will be:
<p />
<pre>
dn: GlueSubClusterUniqueID&#61;red.unl.edu,GlueClusterUniqueID&#61;red.unl.edu,mds-vo-name&#61;Nebraska,o&#61;grid
objectClass: GlueClusterTop
objectClass: GlueSubCluster
objectClass: GlueSchemaVersion
objectClass: GlueHostApplicationSoftware
objectClass: GlueHostArchitecture
objectClass: GlueHostBenchmark
objectClass: GlueHostMainMemory
objectClass: GlueHostNetworkAdapter
objectClass: GlueHostOperatingSystem
objectClass: GlueHostProcessor
objectClass: GlueInformationService
objectClass: GlueKey
GlueChunkKey: GlueClusterUniqueID&#61;red.unl.edu
GlueHostBenchmarkSI00: 400
GlueHostMainMemoryRAMSize: 4000
GlueHostMainMemoryVirtualSize: 4000
GlueHostNetworkAdapterInboundIP: TRUE
GlueHostNetworkAdapterOutboundIP: TRUE
GlueHostOperatingSystemName: CentOS
GlueSubClusterName: red.unl.edu
GlueSubClusterUniqueID: red.unl.edu
GlueSubClusterLogicalCPUs: 240
GlueSchemaVersionMajor: 1
GlueSchemaVersionMinor: 3
</pre>
<p />
(note that the <code>GlueHostNetworkAdapterInboundIP</code> entry has changed).
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Providers"></a> Providers </span></h2>
<p />
A provider adds a new LDIF entry to the GIP.  Usually, providers are not implemented by sites.  If you do implement your own provider, output full LDIF entries.  Take care to <ul>
<li> Make sure you don't repeat a pre-existing entry in the provider LDIF.
</li> <li> Make sure your entry implements the schema properly.  Use the schema checker if you are unsure about your LDIF.
</li></ul> 
<p />
<h1><a name="The_GIP_configuration_files"></a> The GIP configuration files. </h1>
<p />
The GIP has three configuration files: <ul>
<li> <code>$VDT_LOCATION/monitoring/osg-attributes.conf</code>
</li> <li> <code>$VDT_LOCATION/monitoring/gip-attributes.conf</code>
</li> <li> <code>$GIP_LOCATION/etc/gip.conf</code>
</li></ul> 
<p />
The first two are created by the configure-osg.sh script; the last one is an "experts-only" file which provides opportunities for advanced tuning of the GIP.
<p />
Of the three, you should only ever have to touch the third one - the first two are overwritten by the configure-osg.sh script, while the last is not overwritten by any scripts.  The <code>gip.conf</code> file is in the common windows INI format.  Sections are started by stating the section name in brackets (<code>[section_name]</code>) and attributes are assigned in key=value pairs.  Comments can be prefixed with #; there are also some advanced manipulations which can be done that are <a href="http://docs.python.org/lib/module-ConfigParser.html" target="_top">covered here</a>.
<p />
Due to the wide variety of the <code>gip.conf</code> options, <a href="/bin/view/InformationServices/GipConf" class="twikiLink">we cover it separately</a>.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name=""></a>  </span></h2>
<p />
-- <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a> - 16 Apr 2008</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: InformationServices<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/InformationServices/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GipSiteAdmin</span> <br />    
Topic revision: r5 - 16 Dec 2008 - 16:45:42 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />