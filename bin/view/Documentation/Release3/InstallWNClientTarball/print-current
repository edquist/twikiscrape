<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> InstallWNClientTarball &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallWNClientTarball?_T=16 Feb 2017" type="application/x-wiki" title="edit InstallWNClientTarball" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallWNClientTarball"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Installing_and_Using_the_Worker"></a> Installing and Using the Worker Node Client from Tarballs (Anywhere by Anyone) </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Installing_and_Using_the_Worker"> Installing and Using the Worker Node Client from Tarballs (Anywhere by Anyone)</a> <ul>
<li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#About_This_Guide"> About This Guide</a>
</li> <li> <a href="?cover=print#Before_Starting"> Before Starting</a>
</li> <li> <a href="?cover=print#Download_Installation_and_Config"> Download, Installation and Configuration Procedure</a> <ul>
<li> <a href="?cover=print#Download_the_WN_Client"> Download the WN Client</a>
</li> <li> <a href="?cover=print#Install_the_WN_Client"> Install the WN Client</a>
</li></ul> 
</li></ul> 
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
This document is intended to guide system administrators through the process of installing the worker node software and configuring the installed worker node software. Contents of the WN Client can be found <a href="/bin/view/Documentation/Release3/InstallWNClient#4_Contents_of_the_worker_node" class="twikiAnchorLink">here</a>.
<p />
If you are installing the OSG WN Client following these instruction, then remember to set correctly OSG_GRID (see <a href="/bin/view/Documentation/Release3/EnvironmentVariables" class="twikiLink">EnvironmentVariables</a> and the <a href="/bin/view/Documentation/Release3/IniConfigurationOptions#Storage" class="twikiAnchorLink">CE configuration instructions</a>). The value set for OSG_GRID must be the path returned by <code><b>echo $OSG_LOCATION</b></code> once you source the setup file created by this installation.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="About_This_Guide"></a> About This Guide </span></h2>
<p />
The <em>OSG Worker Node Client</em> is a collection of software components that is expected to be added to every worker node that can run OSG jobs. It provides a common environment and a minimal set of common tools that all OSG jobs can expect to use. See the <a href="/bin/view/Documentation/Release3/InstallWNClientTarball#ReferenceSection" class="twikiCurrentTopicLink twikiAnchorLink">reference section</a> below for contents of the Worker Node Client.
<p />
It is possible to install the Worker Node Client software in a variety of ways, depending on what works best for distributing and managing software at your site:
<p /> <ul>
<li> Install using a tarball (this guide) - useful when installing onto a shared filesystem for distribution to worker nodes
</li> <li> <a href="/bin/view/Documentation/Release3/InstallWNClient" class="twikiLink">Install using RPMs and Yum</a> - useful when managing your worker nodes with a tool (e.g., Puppet, Chef) that can automate RPM installs
</li> <li> <a href="/bin/view/Documentation/Release3/UsingOSGWnClientFromOASIS" class="twikiLink">Use from OASIS</a> - useful when worker nodes already mount <a href="/bin/view/Documentation/Release3/NavTechOASIS" class="twikiLink">OASIS</a> on your worker nodes
</li></ul> 
<p />
This document is intended to guide system administrators through the process of configuring a site to make the Worker Node Client software available from a tarball.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Before_Starting"></a> Before Starting </span></h2>
<p />
As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:
<p /> <ul>
<li> Ensure the host has <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">a supported operating system</a>
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Download_Installation_and_Config"></a> Download, Installation and Configuration Procedure </span></h2>
<p />
<h3><a name="Download_the_WN_Client"></a> Download the WN Client </h3>
Please pick the osg-wn-client tarball that is appropriate for your distribution and architecture.
You will find them in <a href="http://repo.grid.iu.edu/tarball-install/" target="_top">http://repo.grid.iu.edu/tarball-install/</a> .
<p />
The latest available the tarballs for OSG 3.3 are: <ul>
<li> <a href="http://repo.grid.iu.edu/tarball-install/3.3/osg-wn-client-latest.el6.i386.tar.gz" target="_top">Worker-node-client for 32-bit RHEL6</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.3/osg-wn-client-latest.el6.x86_64.tar.gz" target="_top">Worker-node-client for 64-bit RHEL6</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.3/osg-wn-client-latest.el7.x86_64.tar.gz" target="_top">Worker-node-client for RHEL7</a>
</li></ul> 
<p />
The latest available the tarballs for OSG 3.2 are: <ul>
<li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-wn-client-latest.el5.i386.tar.gz" target="_top">Worker-node-client for 32-bit RHEL5</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-wn-client-latest.el5.x86_64.tar.gz" target="_top">Worker-node-client for 64-bit RHEL5</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-wn-client-latest.el6.i386.tar.gz" target="_top">Worker-node-client for 32-bit RHEL6</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-wn-client-latest.el6.x86_64.tar.gz" target="_top">Worker-node-client for 64-bit RHEL6</a>
</li></ul> 
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  The OSG 3.2 series is deprecated. It will no longer be supported after August 9th, 2016.
</dd></dl> 
<p />
<h3><a name="Install_the_WN_Client"></a> Install the WN Client </h3>
<p /> <ol>
<li> Unpack the tarball.
</li> <li> Move the directory that was created to where you want the tarball WN client to be.
</li> <li> Run <code>osg-post-install</code> (<code><b><font color="#ff0000">/path/to/client/</font>osg/osg-post-install</b></code>) to fix the directories in the installation.<br/>       Note that after this, you will not be able to relocate the install again.
</li> <li> Source the setup <code><b>source <font color="#ff0000">/path/to/client/</font>setup.sh</b></code> (or <code><b>setup.csh</b></code> depending on the shell)
</li> <li> Download and set up CA certificiates using <code><b>osg-ca-manage</b></code> (See <a href="/bin/view/Documentation/Release3/OsgCaManage" class="twikiLink">OsgCaManage</a> for the available options)
</li> <li> Download CRLs using <code><b>fetch-crl</b></code> (EL6) or <code><b>fetch-crl3</b></code> (EL5)
</li></ol> 
<p />
Example install (in <code>$HOME/test-install</code>, the <code><b><font color="#ff0000">/path/to/client/</font></b></code> is <code>$HOME/test-install/osg-wn-client</code> ):
<p />
<pre class='screen'>
[user@client ~]$ mkdir $HOME/test-install
[user@client ~]$ cd $HOME/test-install
[user@client ~]$ wget http://repo.grid.iu.edu/tarball-install/3.3/osg-wn-client-latest.el6.x86_64.tar.gz
[user@client ~]$ tar xzf osg-wn-client-latest.el6.x86_64.tar.gz
[user@client ~]$ cd osg-wn-client
[user@client ~]$ osg/osg-post-install
[user@client ~]$ . setup.sh
[user@client ~]$ osg-ca-manage setupCA --url osg
[user@client ~]$ fetch-crl
</verbatim>


   $ <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     *<font color="#ff0000"> NOTE </font>*: 
 Unpacking the tarball creates an osg-wn-client subdirectory

---+++ Configure the WN Client

Configure the value of OSG_GRID (see [[EnvironmentVariables]] and the [[IniConfigurationOptions#Storage][CE configuration instructions]]) on the CE. The value set for OSG_GRID must be the path returned by ==echo $OSG_LOCATION== once you source the setup file created by this installation.

---++++ Configuring the CE for wn-client tarballs (!AbA)
Using the wn-client software installed from the tarball will require a few changes on the compute element so that the resource's configuration can be correctly reported.  The =$OSG_GRID= variable, which points to the location of the wn-client installation directory, will need to point to the installation directory including =osg-wn-client= that is part of the tarball (referred above as &lt;OSG_LOCATION&gt;).  Most jobs source =$OSG_GRID/setup.sh= before performing any work.   So set =$OSG_GRID= (in the CE config.ini) to =<font color="#ff0000">&lt;OSG_LOCATION&gt;</font>= .

On a mixed RPM/pacman based system, a possible solution would be to symlink the existing =$OSG_GRID= location (<font color="#ff0000">&lt;OSG_LOCATION&gt;</font> defined above) to =/etc/osg/wn-client=.

---++ Services
The WN client is a collection of client programs that do not require service startup or shutdown. 
The only services are osg-update-certs that keeps uptodate the CA certificates and fetch-crl that keeps uptodate the CRLs.
Following the instructions below you'll add the services to your crontab that will take care to run them periodically until you remove them.

---+++ Auto-updating certificates and CRLs

You must create cron jobs to run fetch-crl/fetch-crl3 and osg-update-certs to update your !CRLs and certificates automatically.

Here is what they should look like. (Note: fill in <font color="#ff0000">&lt;OSG_LOCATION&gt;</font> with the full path of your tarball install, including =osg-client= that is created by the tarball).

<pre class='file'>
# Cron job to update certs.
# Runs every hour by default, though does not update certs until they're at
# least 24 hours old.  There is a random sleep time for up to 45 minutes (2700
# seconds) to avoid overloading cert servers.
10 * * * *   ( . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh && osg-update-certs --random-sleep 2700 --called-from-cron )
</pre>

<pre class='file'>
# Cron job to update CRLs for EL5:
# Runs every 6 hours at, 45 minutes +/- 3 minutes.
42 */6 * * *   ( . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh && fetch-crl3 -q -r 360 )
</pre>

<pre class='file'>
# Cron job to update CRLs for EL6:
# Runs every 6 hours at, 45 minutes +/- 3 minutes.
42 */6 * * *   ( . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh && fetch-crl -q -r 360 )
</pre>

You might want to configure proxy settings in $OSG_LOCATION/etc/fetch-crl.conf (EL6) or $OSG_LOCATION/etc/fetch-crl3.conf (EL5)

---+++ Starting and Enabling Services
To start the services you must edit your cron with ==crontab -e== and add the lines above.

---+++ Stopping and Disabling Services
To stop the services you must edit your cron with ==crontab -e== and remove or comment the lines above.

---++ Validing the Worker Node Client

To verify functionality of the worker node client, you will need to submit a test job against your CE and verify the job's output.

   1. Submit a job that executes the =env= command (e.g. Run [[TroubleshootingHTCondorCE#condor_ce_trace][condor_ce_trace]] with the =-d= flag from your HTCondor CE)
   1. Verify that the value of =OSG_GRID= is set to the directory of your WN Client installation

---++ How to get Help?
To get assistance please use this [[HelpProcedure][Help Procedure]].


#ReferenceSection
---++ Reference

Please see the documentation on using [[Documentation/Release3.YumRpmBasics][yum and RPM]], [[Documentation/Release3.InstallBestPractices][the best practices]] for using yum to install software, and using [[Documentation/Release3.YumRepositories][yum repositories]].

#WnContents
---+++ Worker node contents

The worker node may be updated from time to time. As of OSG 3.2.24 in July 2015, the OSG worker node client contains:

   * Bestman2 Client
   * OSG Certificates
   * curl
   * !dCache SRM client
   * dcap-tunnel-gsi
   * dccp
   * edg-gridftp-client
   * Fetch CRL
   * FTS client
   * gfal2
   * globus-url-copy (!GridFTP client)
   * globus-xio-udt-driver (EL6+)
   * lfc-client
   * lfc-python
   * lcg-utils
   * ldapsearch
   * LFC (client and Python bindings)
   * !MyProxy
   * osg-system-profiler
   * osg-version
   * !UberFTP
   * vo-client (includes /etc/vomses file)
   * wget

To see the currently installed version of the worker node package, run the following command:

<pre class="screen">
[user@client ~]$ rpm -q --requires osg-wn-client
</pre>

Click [[YumRpmBasics#ListDeps][here]] for more details on using RPM to see what was installed

</pre>
</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>InstallWNClientTarball</span> <br />    
Topic revision: r11 - 02 Dec 2016 - 17:55:37 - <a href="/bin/view/Main/SuchandraThapa" class="twikiLink">SuchandraThapa</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />