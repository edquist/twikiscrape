<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TroubleshootingGlexecLcmaps &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/TroubleshootingGlexecLcmaps?_T=16 Feb 2017" type="application/x-wiki" title="edit TroubleshootingGlexecLcmaps" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingGlexecLcmaps"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<h1><a name="Troubleshooting_glexec_and_lcmap"></a>  Troubleshooting glexec and lcmaps </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#1_About_this_document">1  About this document</a>
</li> <li> <a href="?cover=print#2_How_to_get_Help">2  How to get Help?</a>
</li> <li> <a href="?cover=print#3_Glexec_The_big_picture">3 Glexec: The big picture</a> <ul>
<li> <a href="?cover=print#3_1_What_software_is_used">3.1  What software is used?</a>
</li> <li> <a href="?cover=print#3_2_Configuring_policies">3.2  Configuring policies</a>
</li></ul> 
</li> <li> <a href="?cover=print#4_Common_Glexec_problems">4  Common Glexec problems</a> <ul>
<li> <a href="?cover=print#4_1_Didn_t_enable_glexec_policy">4.1  Didn't enable glexec policy</a>
</li> <li> <a href="?cover=print#4_2_Didn_t_enable_glexectracking">4.2  Didn't enable glexectracking</a>
</li> <li> <a href="?cover=print#4_3_User_doesn_t_exist">4.3  User doesn't exist</a>
</li> <li> <a href="?cover=print#4_4_The_user_doesn_t_have_a_prox">4.4  The user doesn't have a proxy</a>
</li> <li> <a href="?cover=print#4_5_User_isn_t_authorized">4.5  User isn't authorized</a>
</li> <li> <a href="?cover=print#4_6_Missing_hostkey">4.6  Missing hostkey</a>
</li> <li> <a href="?cover=print#4_7_Can_t_connect_to_GUMS_server">4.7  Can't connect to GUMS server</a>
</li> <li> <a href="?cover=print#4_8_A_successful_authorization">4.8  A successful authorization</a>
</li> <li> <a href="?cover=print#4_9_Other_possible_problems">4.9  Other possible problems. </a>
</li></ul> 
</li> <li> <a href="?cover=print#5_Appendix_Important_glexec_file">5 Appendix: Important glexec files</a>
</li> <li> <a href="?cover=print#6_References">6  References</a>
</li> <li> <a href="?cover=print#7_Comments">7  Comments</a>
</li></ul> 
</div>
<p />
<h1><a name="1_About_this_document"></a> 1  About this document </h1>
This document will help you troubleshoot problems glexec. We assume that glexec has <a href="/bin/view/Documentation/Release3/InstallGlexec" class="twikiLink">already been installed</a>. See also other documents recommended in the Reference section below.
<p />
This document follows the general OSG documentation conventions: <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3TroubleshootingGlexecLcmaps1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Click to expand document conventions...</span></a> </span> <span id="twistyIdDocumentation/Release3TroubleshootingGlexecLcmaps1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3TroubleshootingGlexecLcmaps1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
on    
on    
</div></div> <!--/twistyPlugin-->
<p />
<h1><a name="2_How_to_get_Help"></a> 2  How to get Help? </h1>
To get assistance please use our <a href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink">Help Procedure</a>. 
<p />
<p />
<h1><a name="3_Glexec_The_big_picture"></a> 3  Glexec: The big picture </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="3_1_What_software_is_used"></a> 3.1  What software is used? </span></h2>
<p />
While we casually refer to glexec, you need to be aware of three different pieces:
<p /> <ol>
<li> <strong>glexec:</strong> Glexec is a program that you can think of a "<a href="http://www.globus.org/security/overview.html" target="_top">GSI</a> sudo". It will run a program as another user, but first it will authenticate and authorize the submitting user based on their X.509 credential. 
</li> <li> <strong>lcmaps</strong>: lcmaps is a framework for authorizing a user and mapping their X.509 credential to a local user name. Glexec doesn't perform authorization itself, but instead uses lcmaps.
</li> <li> <strong>lcmaps plugins</strong>: By itself, lcmaps does very little. Instead it relies on a set of plugins to do all of the work. You need to be aware of these plugins because they show up in the lcmaps configuration. When people refer to "lcmaps", they really mean "lcmaps plus plugins". 
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="3_2_Configuring_policies"></a> 3.2  Configuring policies </span></h2>
<p />
Lcmaps can be used by different pieces of software. In OSG, we currently (mid 2012) use lcmaps not only for glexec but also for <a href="http://www.globus.org/grid_software/computation/gram.php" target="_top">Globus GRAM</a> (for a Compute Element Gatekeeper) and GridFTP (for a Storage Element) when we use GUMS. (Normally GRAM and GridFTP don't bother with lcmaps when using a grid-mapfile, though they could.) Because lcmaps can be used in different contexts, the <code>/etc/lcmaps.db</code> file describes how to use lcmaps in each of those contexts. On a single machine, you probably only use it one way, but our default configuration file is set up for all our possible uses. 
<p />
The <code>/etc/lcmaps.db</code> file is broken into two sections:
<p /> <ol>
<li> Information about each of the plugins. Normally you don't need to edit these except to set the GUMS hostname and to enable the glexectracking plugin. (It's disabled by default because it won't be installed when using lcmaps with just Globus and not glexec)
</li> <li> Policies. Our default configuration ships with two policies: <ol>
<li> authorize_only: Used by Globus-based services.
</li> <li> glexec: Used by glexec. The details of the policy are uncommented because you have to make choices when you install it.
</li></ol> 
</li></ol> 
<p />
<h1><a name="4_Common_Glexec_problems"></a> 4  Common Glexec problems </h1>
<p />
You can try out glexec with something like the following:
<p />
<pre class="screen">
[user@client ~]$ voms-proxy-init -voms <font color="#ff0000">yourvo</font>:/<font color="#ff0000">yourvo</font>
[user@client ~]$ export GLEXEC_CLIENT_CERT=/tmp/x509up_u<font color="#ff0000">NNN</font>
[user@client ~]$ /usr/sbin/glexec /usr/bin/id
</pre>
<p />
If your lcmaps.db is set up to not use a host certificate as described in <a href="/bin/view/Documentation/Release3/GlexecPilotCert" class="twikiLink">GlexecPilotCert</a>, you should also set
<pre class="screen">
[user@client ~]$ export X509_USER_PROXY=tmp/x509up_u<font color="#ff0000">NNN</font>
</pre>
before running glexec.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_1_Didn_t_enable_glexec_policy"></a> 4.1  Didn't enable glexec policy </span></h2>
<p />
<pre class="screen">
[user@client ~]$ /usr/sbin/glexec /usr/bin/id
[gLExec]:  LCMAPS failed.
           The reason can be found in the syslog.
[user@client ~]$ echo $?
203
</pre>
<p />
The lcmaps error in <code>/var/log/messages</code> indicates a configuration problem:
<p />
<pre class="file">
May 23 08:20:09 fermicloud037 glexec[2823]: Trying to read /etc/glexec.conf as 13975(glexec)/9815(glexec) 
May 23 08:20:09 fermicloud037 glexec[2823]: lcmaps: /etc/lcmaps.db:158: [warning] expecting rule definitions. 
May 23 08:20:09 fermicloud037 glexec[2823]: <font color="#ff0000">lcmaps: /etc/lcmaps.db:158: [warning] no rules specified for policy: 'glexec' at line 141.</font>
May 23 08:20:09 fermicloud037 glexec[2823]: lcmaps: LCMAPS failed to do mapping and return account information 
May 23 08:20:09 fermicloud037 glexec[2823]:   LCMAPS failed. 
</pre>
<p />
This probably indicates the you didn't edit <code>/etc/lcmaps.db</code> after installing. By default, that file does not have a policy enabled: you have to select one by uncommenting it in the file. The glexec policy portion of the <code>lcmaps.db</code> file looks like this when it's installed: note that all the lines begin with a #, indicating that they are commented out:
<p />
<pre class="file">
# Mapping policy: glexec
# Purpose:        Used for glexec on the worker nodes.
#
glexec:

## If you use glexec, pick an appropriate policy from the ones below.
## Make sure that only one policy is uncommented.

## Policy 1: GUMS but not SAZ (most common)
#verifyproxy -> gumsclient
#gumsclient -> glexectracking

## Policy 2: GUMS & SAZ
#verifyproxy -> sazclient
#sazclient -> gumsclient
#gumsclient -> glexectracking

## Policy 3: grid-mapfile
#verifyproxy -> gridmapfile
#gridmapfile -> glexectracking
</pre>
<p />
Most people will select the first policy. If you do, it will look like this:
<p />
<pre class="file">
# Mapping policy: glexec
# Purpose:        Used for glexec on the worker nodes.
#
glexec:
verifyproxy -> gumsclient
gumsclient -> glexectracking
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_2_Didn_t_enable_glexectracking"></a> 4.2  Didn't enable glexectracking </span></h2>
<p />
<pre class="screen">
[user@client ~]$ /usr/sbin/glexec /usr/bin/id
<font color="#ff0000">NO OUTPUT</font>
[user@client ~]$  echo $?
202
</pre>
<p />
The lcmaps error in <code>/var/log/messages</code> indicates a configuration problem:
<p />
<pre class="file">
May 23 08:21:40 fermicloud037 glexec[2844]: Trying to read /etc/glexec.conf as 13975(glexec)/9815(glexec) 
May 23 08:21:40 fermicloud037 glexec[2844]: <font color="#ff0000">lcmaps: lcmaps.mod-PluginInit(): plugin glexectracking not found (arguments: )</font>
May 23 08:21:40 fermicloud037 glexec[2844]: lcmaps: lcmaps.mod-lcmaps_startPluginManager(): error initializing plugin: glexectracking 
May 23 08:21:40 fermicloud037 glexec[2844]: lcmaps: lcmaps_init() error: could not start plugin manager 
May 23 08:21:40 fermicloud037 glexec[2844]:   Initialisation of LCMAPS failed. 
</pre>
<p />
You probably requested the use of the glexec tracking plugin in <code>/etc/lcmaps.db</code>, since that's what we recommend:
<p />
<pre class="file">
glexec:
verifyproxy -> gumsclient
gumsclient -> <font color="#ff0000">glexectracking</font>
</pre>
<p />
But you probably didn't uncomment glexectracking in <code>/etc/lcmaps.db</code> to tell lcmaps where to find it. 
<pre class="file">
# Uncomment the first two lines in order to enable glexec tracking
<font color="#ff0000">#</font>glexectracking = "lcmaps_glexec_tracking.mod"
<font color="#ff0000">#</font>         "-exec /usr/sbin/glexec_monitor"
</pre>
<p />
Just remove those hash marks to enable glexectracking:
<pre class="file">
# Uncomment the first two lines in order to enable glexec tracking
glexectracking = "lcmaps_glexec_tracking.mod"
         "-exec /usr/sbin/glexec_monitor"
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_3_User_doesn_t_exist"></a> 4.3  User doesn't exist </span></h2>
<p />
<pre class="screen">
[user@client ~]$ /usr/sbin/glexec /usr/bin/id
[gLExec]:  LCMAPS failed.
           The reason can be found in the syslog.
[user@client ~]$ echo $?
203
</pre>
<p />
The lcmaps error in <code>/var/log/messages</code> indicates the user doesn't exist:
<p />
<pre class="file">
May 23 08:22:46 fermicloud037 glexec[2860]: Trying to read /etc/glexec.conf as 13975(glexec)/9815(glexec) 
May 23 08:22:46 fermicloud037 glexec[2860]: <font color="#ff0000">lcmaps: Username_handler: Error: Couldn't find the username 'engage' in the password file.</font>
</pre>
<p />
Make the user account to fix this problem.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_4_The_user_doesn_t_have_a_prox"></a> 4.4  The user doesn't have a proxy </span></h2>
<p />
<pre class="screen">
[user@client ~]$ /usr/sbin/glexec /usr/bin/id
[gLExec]:  Failed to open $GLEXEC_CLIENT_CERT=/tmp/x509up_u11500 or $GLEXEC_SOURCE_PROXY=(NULL).
[user@client ~]$ echo $?
201
</pre>
<p />
Make a proxy with <code>voms-proxy-init</code> to solve this problem.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_5_User_isn_t_authorized"></a> 4.5  User isn't authorized </span></h2>
<p />
<pre class="screen">
[user@client ~]$ /usr/sbin/glexec /usr/bin/id
[gLExec]:  LCMAPS failed.
           The reason can be found in the syslog.
</pre>
<p />
The lcmaps error in <code>/var/log/messages</code> indicates the user isn't authorized by your GUMS server:
<p />
<pre class="file">
May 23 08:55:05 fermicloud037 glexec[5981]: <font color="#ff0000">lcmaps: LCMAPS failed to do mapping and return account information</font>
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_6_Missing_hostkey"></a> 4.6  Missing hostkey </span></h2>
<p />
glexec requires a host certificate on each worker node in order to talk to GUMS. When you don't have a hostcert, you get an error message like this in <code>/var/log/messages</code>
<p />
(output was word-wrapped for clarity)
<p />
<pre class="file">
May 23 08:36:55 fermicloud037 glexec[3097]: Syslog has been reopened with new facility 'LOG_LOCAL1' 
May 23 08:36:55 fermicloud037 glexec[3097]: <font color="#ff0000">lcmaps: setup_client_ctx: Error loading private key from file: '/etc/grid-security/hostkey.pem'. 
    OpenSSL reason: No such file or directory.</font>
May 23 08:36:55 fermicloud037 glexec[3097]: lcmaps: SSL_client_connect: Error: can't create SSL handle out of CTX structure 
May 23 08:36:55 fermicloud037 glexec[3097]: lcmaps: ssl_io_connect(): Failure in SSL layer setup and connection! 
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_7_Can_t_connect_to_GUMS_server"></a> 4.7  Can't connect to GUMS server </span></h2>
<p />
Here's an example error from <code>/var/log/messages</code> when you can't connect to the GUMS server. Make sure that you've used the proper hostname for the GUMS server in <code>/etc/lcmaps.db</code> and the GUMS server is running. 
<p />
(output was word-wrapped for clarity)
<p />
<pre class="file">
May 23 08:38:22 fermicloud037 glexec[3121]: lcmaps: post_connection_check: Error: found one or more DNS entries in the subjectAltName but none match the host 'cloudgums1.fnal.gov'. 
May 23 08:38:22 fermicloud037 glexec[3121]: lcmaps: ssl_io_connect(): Error with peer certificate after the full handshake: application verification failure 
May 23 08:38:22 fermicloud037 glexec[3121]: <font color="#ff0000">lcmaps: xacmlqueryscas(): XACML: 
    Interaction failed: TCP/IP, SSL or SOAP Error with endpoint: 
    "https://cloudgums1.fnal.gov:8443/gums/services/GUMSXACMLAuthorizationServicePort" </font>
</pre>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_8_A_successful_authorization"></a> 4.8  A successful authorization </span></h2>
<p />
When glexec works, it will look something like this:
<p />
(output was word-wrapped for clarity)
<p />
<pre class="file">
May 23 08:24:38 fermicloud037 glexec[2913]: Trying to read /etc/glexec.conf as 13975(glexec)/9815(glexec) 
May 23 08:24:38 fermicloud037 glexec[2913]: lcmaps: lcmaps_plugin_scas_client-plugin_run(): 
    User "/DC=org/DC=doegrids/OU=People/CN=Alain Roy 424511" 
    with first FQAN "/Engage/Role=NULL/Capability=NULL" 
    Permitted at endpoint "https://cloudgums.fnal.gov:8443/gums/services/GUMSXACMLAuthorizationServicePort" 
May 23 08:24:38 fermicloud037 glexec.mon[2914#2913]: Started, target uid 46661
May 23 08:24:38 fermicloud037 glexec.mon[2914#2913]: Used DN: "/DC=org/DC=doegrids/OU=People/CN=Alain Roy 424511"
May 23 08:24:38 fermicloud037 glexec.mon[2914#2913]: Used VO: "Engage" Issuer: "/DC=org/DC=doegrids/OU=Services/CN=osg-engage.renci.org"
May 23 08:24:38 fermicloud037 glexec.mon[2914#2913]: Used FQAN: "/Engage/Role=NULL/Capability=NULL"
May 23 08:24:39 fermicloud037 glexec[2913]: lcmaps: LCMAPS CRED FINAL: DN:"/DC=org/DC=doegrids/OU=People/CN=Alain Roy 424511"
    ->mapped uid:'46661',pgid:'46661',sgid:'46661',sgid:'65000' 
May 23 08:24:39 fermicloud037 glexec[2913]: Ignoring SIGCHLD from unknown finished child 2914. 
May 23 08:24:39 fermicloud037 glexec[2913]: real_user(alainroy),real_group(cdf)
    ->mapped_user(engage),mapped_group(engage) cwd: "/home/engage" cmd: "/usr/bin/id" (="/usr/bin/id")</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_9_Other_possible_problems"></a> 4.9  Other possible problems. </span></h2>
<p />
If you have upgraded glexec with yum, you might need to merge changes from your old configuration file into the new configuration file. 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Existing, old configuration file: </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> <code>/etc/glexec.conf</code> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> New configuration file template: </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> <code>/etc/glexec.conf.rpmnew</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Similarly, if you have upgraded lcmaps with yum, you might need to merge changes from your old configuration file into the new configuration file. 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Existing, old configuration file: </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> <code>/etc/lcmaps.db</code> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> New configuration file template: </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> <code>/etc/lcmaps.db.rpmnew</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Check to make sure that you are running a recent version of glexec and lcmaps. 
<p />
<h1><a name="5_Appendix_Important_glexec_file"></a> 5  Appendix: Important glexec files </h1>
<p />
This document cannot cover all the errors you might experience. If you need to look for more data, you can look at log files for the various services on your CE. 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGlexecLcmaps?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">File</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGlexecLcmaps?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Purpose</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>/usr/sbin/glexec</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The glexec program </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>/etc/glexec.conf</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> The glexec configuration </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>/etc/lcmaps.db</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> The lcmaps configuration </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
The most common RPMs you will see are:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGlexecLcmaps?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">RPM</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGlexecLcmaps?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Purpose</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>glexec</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The glexec RPM </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>lcmaps</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> The base lcmaps RPM </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>lcmaps-plugins-gums-client</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The lcmaps plugin that communicates with GUMS </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>lcmaps-plugins-verify-proxy</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> The lcmaps plugin that verifies the user's proxy is good </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>lcmaps-plugins-glexec-tracking</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> The lcmaps plugin that kills processes started by glexec </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h1><a name="6_References"></a> 6  References </h1>
<p /> <ul>
<li> <a href="/bin/view/Documentation/Release3/InstallGlexec" class="twikiLink">Installing glexec</a>
</li> <li> <a href="https://wiki.nikhef.nl/grid/GLExec" target="_top">glexec web site</a>
</li> <li> <a href="https://wiki.nikhef.nl/grid/Man_pages_of_gLExec" target="_top">glexec man pages</a> (including glexec.conf)
</li> <li> <a href="https://wiki.nikhef.nl/grid/Exit_codes_of_gLExec" target="_top">glexec exit codes</a> If you get an exit code from glexec, check this page to learn what it means.
</li></ul> 
<p />
<h1><a name="7_Comments"></a> 7  Comments </h1>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/TroubleshootingGlexecLcmaps" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">AlainRoy<a href="/bin/edit/Documentation/Release3/AlainRoy?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="AlainRoy (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = User
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/Release3/EndUser?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Installation  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 0
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 0
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">DaveDykstra<a href="/bin/edit/Documentation/Release3/DaveDykstra?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="DaveDykstra (this topic does not yet exist; you can create it)">?</a></span> 	 Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">DaveDykstra<a href="/bin/edit/Documentation/Release3/DaveDykstra?topicparent=Documentation/Release3.TroubleshootingGlexecLcmaps" rel="nofollow" title="DaveDykstra (this topic does not yet exist; you can create it)">?</a></span> 	 Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/Release3/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TroubleshootingGlexecLcmaps</span> <br />    
Topic revision: r12 - 06 Dec 2016 - 18:12:45 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />