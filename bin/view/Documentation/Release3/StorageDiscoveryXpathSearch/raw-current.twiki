%DOC_STATUS_TABLE%

---+!! *&lt;noop&gt;%SPACEOUT{ &quot;%TOPIC%&quot; }%*
%TOC%

The Discovery Tool can evaluate XPath expressions on a BDII service endpoint. This is most useful for reading relatively simple information out of the BDII without the need for additional operations [[OpportunisticStorageXqueryScripts][provided by XQuery]].

The XPath expressions are by default evaluated on the OSG BDII service endpoint. The endpoint can be changed by altering =/etc/osg-discovery/xpathsearch.rc=, see the [[OsgStorageDiscoveryTool][OSG Discovery Tool main page]] for details.

This topic shows how to evaluate and XPath expression on a BDII service endpoint by use of the &quot;xpathsearch&quot; command.

---+++ xpathsearch

This command evaluates an XPath expression on an LDAP directory.

*Script Name*

xpathsearch


*Usage*

&lt;pre&gt;
xpathsearch -H &lt;PROTOCOL://HOST:PORT&gt; -b &lt;BASE&gt; [options] &quot;xpathexpression&quot;
&lt;/pre&gt;


Note that for the bash shell, the whole xpath expression must be in quotes

*Parameters*
%TABLE{ headerbg=&quot;#eeeeee&quot; headercolor=&quot;#000000&quot; databg=&quot;#ffffff&quot; tableborder=&quot;1&quot; columnwidths=&quot;120,&quot; cellpadding=&quot;2&quot; cellspacing=&quot;1&quot; dataalign=&quot;left&quot; valign=&quot;top&quot; sort=&quot;off&quot;}%
| *name* | *definition* | *required* |
|-a,--output_all_ldap_attributes | Output all queried attributes of each LDAP objectclass.| no |
|-action evaluate | Evaluate xpath expression.  Default.|no|
|-action not_evaluate |Do not  evaluate xpath expression.|no|
|-action search |Perform a search over element and attribute names.|no|
|-H| Host_uri for search.| yes |
|-b| Base for LDAP search.| yes |
|-d,--output_ldap_dn | Output the dn of each LDAP objectclass.| no|
|-i,--interactive | Process the expressions interactively.| no|
|--t,--test | Run the unit tests.| no|
| -u,--use_ldap_aux  | Use auxilary LDAP classes.| no|
| -u,--use_ldap_aux  | Use auxilary LDAP classes.| no|
| -output list  | Write search results as a line-feed separated list. Default..| no|
| -output xml   | Write search results in xml format.| no|
| -output source_xml   | Write  intermediate xml from datasource. | no|
| -v,--version  | Show the version number and exit.| no|


*Example Output*
&lt;verbatim&gt;
[storage]$ xpathsearch &quot;//GlueSE/GlueSEControlProtocol[@GlueSEControlProtocolVersion=&#39;2.2.0&#39;]/@GlueSEControlProtocolEndpoint&quot;
//GlueSE/GlueSEControlProtocol[@GlueSEControlProtocolVersion=&#39;2.2.0&#39;]/@GlueSEControlProtocolEndpoint
//GlueSE/GlueSEControlProtocol[@GlueSEControlProtocolVersion=&#39;2.2.0&#39;]/@GlueSEControlProtocolEndpoint
 //GlueSE/GlueSEControlProtocol/@GlueSEControlProtocolVersion=&#39;2.2.0&#39; //GlueSE/GlueSEControlProtocol/@GlueSEControlProtocolEndpoint
SEARCH //GlueSE/GlueSEControlProtocol/@GlueSEControlProtocolVersion=&#39;2.2.0&#39;
SEARCH //GlueSE/GlueSEControlProtocol/@GlueSEControlProtocolEndpoint
(&amp;(objectclass=GlueSEControlProtocol)(GlueSEControlProtocolVersion=2.2.0)) GlueSEControlProtocolVersion objectclass 
objectclass=GlueSEControlProtocol GlueSEControlProtocolEndpoint objectclass 
55

httpg://sigmorgh.hpcc.ttu.edu:49443/srm/v2/server
httpg://atlas.bu.edu:8443/srm/v2/server
httpg://se.grid.unesp.br:8443/srm/v2/server
httpg://se.hep.fsu.edu:10443/srm/v2/server
httpg://se01.cmsaf.mit.edu:8443/srm/managerv2
httpg://se1.accre.vanderbilt.edu:6288/srm/v2/server
httpg://cit-se.ultralight.org:8443/srm/v2/server
httpg://cms-0.mps.ohio-state.edu:8443/srm/v2/server
httpg://cms-xen19.fnal.gov:8443/srm/v2/server
httpg://se.tier3.ucdavis.edu:8443/srm/v2/server
httpg://cmsdcache03.hep.wisc.edu:8443/srm/managerv2
...
&lt;/verbatim&gt;

-- Main.TedHesselroth - 30 Jul 2009

&lt;!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = DouglasStrain

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3)
   * Local DOC_AREA       = Storage

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = Scientist

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = HowTo
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

 change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %YES%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = NehaSharma
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %YES%


 DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = NehaSharma
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %YES%
############################################################################################################
--&gt;



-- Main.DouglasStrain - 11 Oct 2011

