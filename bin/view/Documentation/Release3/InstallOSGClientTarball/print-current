<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> InstallOSGClientTarball &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallOSGClientTarball?_T=16 Feb 2017" type="application/x-wiki" title="edit InstallOSGClientTarball" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallOSGClientTarball"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Installing_OSG_Client_as_Tarball"></a>  Installing OSG Client as Tarball (Anywhere by Anyone) </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#1_About_This_Document">1  About This Document</a>
</li> <li> <a href="?cover=print#2_Engineering_Considerations">2  Engineering Considerations</a>
</li> <li> <a href="?cover=print#3_Requirements">3  Requirements</a> <ul>
<li> <a href="?cover=print#3_1_Host_and_OS">3.1  Host and OS</a>
</li> <li> <a href="?cover=print#3_2_Certificates">3.2  Certificates</a>
</li> <li> <a href="?cover=print#3_3_Networking">3.3  Networking</a>
</li></ul> 
</li> <li> <a href="?cover=print#4_Contents_of_the_OSG_Client_pac">4  Contents of the OSG Client package</a>
</li> <li> <a href="?cover=print#5_Download_Installation_and_Conf">5  Download, Installation and Configuration Procedure</a> <ul>
<li> <a href="?cover=print#5_1_Download_the_Client">5.1  Download the Client</a>
</li> <li> <a href="?cover=print#5_2_Install_the_Client">5.2  Install the Client</a>
</li></ul> 
</li> <li> <a href="?cover=print#6_Services">6  Services</a> <ul>
<li> <a href="?cover=print#6_1_Auto_updating_certificates_a">6.1  Auto-updating certificates and CRLs</a>
</li> <li> <a href="?cover=print#6_2_Starting_and_Enabling_Servic">6.2  Starting and Enabling Services</a>
</li> <li> <a href="?cover=print#6_3_Stopping_and_Disabling_Servi">6.3  Stopping and Disabling Services</a>
</li></ul> 
</li> <li> <a href="?cover=print#7_Usage">7  Usage</a>
</li> <li> <a href="?cover=print#8_Firewall_Considerations">8   Firewall Considerations</a> <ul>
<li> <a href="?cover=print#8_1_Public_IP_Address_and_DNS">8.1  Public IP Address and DNS</a>
</li> <li> <a href="?cover=print#8_2_Configuring_the_firewall_and">8.2  Configuring the firewall and NAT</a>
</li> <li> <a href="?cover=print#8_3_Globus_Port_Range">8.3  Globus Port Range</a>
</li></ul> 
</li> <li> <a href="?cover=print#9_Test_the_Client">9  Test the Client</a>
</li> <li> <a href="?cover=print#10_Getting_Help">10  Getting Help</a>
</li> <li> <a href="?cover=print#11_References">11  References</a>
</li> <li> <a href="?cover=print#12_Comments">12  Comments</a>
</li></ul> 
</div>
<p />
<h1><a name="1_About_This_Document"></a> 1  About This Document </h1>
<img width="16" alt="hand" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/hand.gif" height="16" border="0" /> This document is for grid users and system administrators. It covers the installation of the OSG Client Tools Package as a Tarball. This packaging is provided to allow installations "Anywhere by Anyone" (AbA) (e.g. by non-root users or on NFS shares). If you have root access, your OS is Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>), and have no special requirements, we recommend to use the native packages as described in <a href="/bin/view/Documentation/Release3/InstallOSGClient" class="twikiLink">InstallOSGClient</a>. 
For more background on AbA packages, see the <a href="/bin/view/SoftwareTeam/NonRootClients" class="twikiLink">non-root clients project page</a>.
<p />
This package is required on every host used by grid users to submit jobs, transfer data, or interact otherwise with the OSG. Note there is also a <a href="/bin/view/Documentation/Release3/InstallWNClientTarball" class="twikiLink">Worker Node Client (AbA</a> and <a href="/bin/view/Documentation/Release3/InstallWNClient" class="twikiLink">native)</a> that is not a valid substitute for this package.  Likewise the OSG Client cannot replace the Worker Node Client in the batch jobs environment on <a href="/bin/view/Documentation/GlossaryW#DefsWorkerNode" class="twikiAnchorLink">Worker Node</a> and <a href="/bin/view/Documentation/GlossaryC#DefsComputeElement" class="twikiAnchorLink">Compute Element</a>.  
<p />
The OSG Client Tools Package includes: <ul>
<li> the <a href="http://www.globus.org/toolkit/" target="_top">Globus Toolkit</a> providing client tools for authorization, data transfer and job submission.
</li> <li> a list of <a href="/bin/view/Documentation/GlossaryC#DefsCA" class="twikiAnchorLink">CA</a> <a href="/bin/view/Documentation/GlossaryC#DefsCertificate" class="twikiAnchorLink">Certificates</a> trusted by the OSG (installed separately).
</li> <li> the <a href="/bin/view/Documentation/GlossaryC#DefsCRL" class="twikiAnchorLink">Certificate Revocation List</a> and tools to keep it current.
</li> <li> <a href="/bin/view/Documentation/GlossaryH#DefsHTCondor" class="twikiAnchorLink">HTCondor</a> client tools for job submission and workflow management.
</li> <li> client tools to access a <a href="/bin/view/Documentation/GlossaryS#DefsSrm" class="twikiAnchorLink">Storage Resource Manager</a> provided by a <a href="/bin/view/Documentation/GlossaryS#DefsStorageElement" class="twikiAnchorLink">Storage Element</a>.
</li></ul> 
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  This document does not cover the usage of the client tools. An introduction how to use the OSG can be found <a href="/bin/view/Documentation/UsingTheGrid" class="twikiLink">here</a>. A more detailed description how to interact with a <a href="/bin/view/Documentation/GlossaryC#DefsComputeElement" class="twikiAnchorLink">Compute Element</a> is located <a href="/bin/view/ReleaseDocumentation/UserCESimpleTest" class="twikiLink">here</a>.
</dd></dl> 
<p />
on    
on    
<p />
<h1><a name="2_Engineering_Considerations"></a> 2  Engineering Considerations </h1>
<p />
The OSG Client Tools Package is required on hosts used to submit jobs to the Open Science Grid. We recommend to install the OSG Client Tools on a <em>dedicated</em> job submission host for large scale job submissions to production resources on the OSG. We recommend to use a <a href="/bin/view/Documentation/Release3/InstallOSGClientTarball#PublicIpAddress" class="twikiCurrentTopicLink twikiAnchorLink">public IP address and a fully qualified domain name</a> for shared job submission hosts. 
<p />
<p />
<h1><a name="3_Requirements"></a> 3  Requirements </h1>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="3_1_Host_and_OS"></a> 3.1  Host and OS </span></h2> <ol>
<li> A host to install the OSG Client (pristine node). No grid host certificate is required.
</li> <li> OS is Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>).  Currently most of our testing has been done on Scientific Linux 5.
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="3_2_Certificates"></a> 3.2  Certificates </span></h2> <ol>
<li> If you want to test and use the installation then a valid <a href="/bin/view/Documentation/CertificateUserGet" class="twikiLink">grid user certificate</a> is required.
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="3_3_Networking"></a> 3.3  Networking </span></h2>
<p />
<p />
<!-- No variables can be defined because will not be visible in the including document
Need this because double quotes used in Y in TWikiPreferences or ICON cause problems (replaced with single ones) <ul>
<li> Set ALTy = <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' />    
</li></ul> 
ALTy replacend inline whenever the icon is needed.
-->
For more details on overall Firewall configuration, please see our <a href="/bin/view/Documentation/Release3/FirewallInformation" class="twikiLink">Firewall documentation</a>.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
                 <table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">              
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallOSGClientTarball?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Service Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallOSGClientTarball?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Protocol</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallOSGClientTarball?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Port Number</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallOSGClientTarball?cover=print;sortcol=3;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Inbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallOSGClientTarball?cover=print;sortcol=4;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Outbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallOSGClientTarball?cover=print;sortcol=5;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>              
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <a href="/bin/view/Documentation/GlossaryG#DefsGridResourceAllocationAndManagement" class="twikiAnchorLink">GRAM</a> callback </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1"> tcp </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2"> <code>GLOBUS_TCP_PORT_RANGE</code> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol3"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol5 twikiLastCol"> contiguous range of ports </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <a href="/bin/view/Documentation/GlossaryG#DefsGridResourceAllocationAndManagement" class="twikiAnchorLink">GRAM</a> callback </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol1"> tcp </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2"> <code>GLOBUS_TCP_SOURCE_RANGE</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol3"> &nbsp; </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol4"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol5 twikiLastCol"> contiguous range of ports </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="/bin/view/Documentation/GlossaryH#DefsHTCondor" class="twikiAnchorLink">HTCondor</a> port range </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1 twikiLast"> tcp </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLast"> <code>LOWPORT</code>, <code>HIGHPORT</code> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol3 twikiLast"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLast"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> contiguous range of ports </td>
		</tr>              </table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<a href="/bin/view/Documentation/GlossaryG#DefsGridResourceAllocationAndManagement" class="twikiAnchorLink">GRAM</a> is not really a service on the client. It is the protocol used by the Globus clients. Anyway the clients still requires the port ranges to be open: job submission needs ports to reach the servers and to transfer back the output; file transfers need ports for control and data sessions.<br>
<a href="/bin/view/Documentation/GlossaryH#DefsHTCondor" class="twikiAnchorLink">HTCondor</a> is in reality Condor-G the version configured to submit grid jobs.
<p />
<p />
<p />
You'll find more client specific details also in the <a href="/bin/view/Documentation/Release3/InstallOSGClientTarball#Firewall_Considerations" class="twikiCurrentTopicLink twikiAnchorLink">Firewall section</a> of this document.
<p />
<a name="ClientContents"></a>
<h1><a name="4_Contents_of_the_OSG_Client_pac"></a> 4  Contents of the OSG Client package </h1>
<p />
The OSG client may be updated from time to time. As of OSG 3.1.8 in September 2012, the OSG client contains:
<p /> <ul>
<li> <a href="/bin/view/Documentation/Release3/InstallWNClient#WnContents" class="twikiAnchorLink">Everything in the OSG worker node client</a>
</li> <li> Bandwidth Test Controller (bwctl) client
</li> <li> GSI OpenSSH client
</li> <li> Globus GRAM clients (including globus-job-run)
</li> <li> Globus certificate utilities (including grid-proxy-init)
</li> <li> Network Diagnostic Tool (NDT)
</li> <li> Nmap (security scanner)
</li> <li> One-Way Ping (owamp) client)
</li> <li> lcg-info
</li> <li> lcg-infosites
</li> <li> osg-cert-scripts
</li> <li> osg-discovery
</li> <li> osg-system-profiler
</li> <li> osg-version
</li></ul> 
<p />
The <code>osg-client-condor</code> package, installing also HTCondor, is available only as native package.
<p />
<p />
<h1><a name="5_Download_Installation_and_Conf"></a> 5  Download, Installation and Configuration Procedure </h1>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="5_1_Download_the_Client"></a> 5.1  Download the Client </span></h2>
Please pick the osg-client tarball that is appropriate for your distribution and architecture.
You will find them in <a href="http://repo.grid.iu.edu/tarball-install/" target="_top">http://repo.grid.iu.edu/tarball-install/</a> .
<p />
The latest available the tarballs for OSG 3.2 are: <ul>
<li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-client-latest.el5.i386.tar.gz" target="_top">Full client for 32-bit RHEL5</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-client-latest.el5.x86_64.tar.gz" target="_top">Full client for 64-bit RHEL5</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-client-latest.el6.i386.tar.gz" target="_top">Full client for 32-bit RHEL6</a>
</li> <li> <a href="http://repo.grid.iu.edu/tarball-install/3.2/osg-client-latest.el6.x86_64.tar.gz" target="_top">Full client for 64-bit RHEL6</a>
</li></ul> 
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  The OSG 3.2 series is deprecated. It will no longer be supported after August 9th, 2016.
</dd></dl> 
<p />
As of OSG 3.3, only the <a href="/bin/view/Documentation/Release3/InstallWNClientTarball" class="twikiLink">worker node client tarball</a> is available.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="5_2_Install_the_Client"></a> 5.2  Install the Client </span></h2>
<p /> <ol>
<li> Unpack the tarball.
</li> <li> Move the directory that was created to where you want the tarball client to be.
</li> <li> Run <code>osg-post-install</code> (<code><b><font color="#ff0000">/path/to/client/</font>osg/osg-post-install</b></code>) to fix the directories in the installation.<br/>       Note that after this, you will not be able to relocate the install again.
</li> <li> Source the setup <code><b>source <font color="#ff0000">/path/to/client/</font>setup.sh</b></code> (or <code><b>setup.csh</b></code> depending on the shell)
</li> <li> Download and set up CA certificiates using <code><b>osg-ca-manage</b></code> (See <a href="/bin/view/Documentation/Release3/OsgCaManage" class="twikiLink">OsgCaManage</a> for the available options)
</li> <li> Download CRLs using <code><b>fetch-crl</b></code> (EL6) or <code><b>fetch-crl3</b></code> (EL5)
</li></ol> 
<p />
Example install (in <code>$HOME/test-install</code>, the <code><b><font color="#ff0000">/path/to/client/</font></b></code> is <code>$HOME/test-install/osg-client</code> ):
<p />
<pre class='screen'>
[user@client ~]$ mkdir $HOME/test-install
[user@client ~]$ cd $HOME/test-install
[user@client ~]$ wget http://repo.grid.iu.edu/tarball-install/3.2/osg-client-latest.el6.x86_64.tar.gz
[user@client ~]$ tar xzf osg-client-latest.el6.x86_64.tar.gz
[user@client ~]$ cd osg-client
[user@client ~]$ osg/osg-post-install
[user@client ~]$ . setup.sh
[user@client ~]$ osg-ca-manage setupCA --url osg
[user@client ~]$ fetch-crl
</pre>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  Unpacking the tarball creates an osg-client subdirectory
</dd></dl> 
<p />
<!--
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_Condor_G"></a>  Install Condor-G </span></h2>
Optionally, you may want to install Condor-G, too. Condor-G is needed to submit jobs directly to the OSG sites.<br>
<strong>Note:</strong> Most users don't need this.
<p /> <ol>
<li> Install the osg-client-condor meta package, which will pull in all dependencies. <pre class="rootscreen">
[root@client ~]$ yum install osg-client condor   </pre>
</li></ol> 
-->
<p />
<h1><a name="6_Services"></a> 6  Services </h1>
The client is a collection of client programs that do not require service startup or shutdown. 
The only services are osg-update-certs that keeps uptodate the CA certificates and fetch-crl that keeps uptodate the CRLs.
Following the instructions below you'll add the services to your crontab that will take care to run them periodically until you remove them.
<p />
<!--
The only services are osg-update-certs that keeps uptodate the CA certificates, fetch-crl that keeps uptodate the CRLs and the optional HTCondor-G, only if you installed it.
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  Avoid to interfere with the system HTCondor. If you are root, the commands below may start/stop/... also a HTCondor installed outside of the client installation. Be aware of which one you are controlling.
</dd></dl> 
-->
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_1_Auto_updating_certificates_a"></a> 6.1  Auto-updating certificates and CRLs </span></h2>
<p />
You must create cron jobs to run fetch-crl/fetch-crl3 and osg-update-certs to update your CRLs and certificates automatically.
<p />
Here is what they should look like. (Note: fill in <font color="#ff0000">&lt;OSG_LOCATION&gt;</font> with the full path of your tarball install, including the <code>osg-client</code> directory that is created by the tarball. You can use <code><b>echo $OSG_LOCATION</b></code> to see the correct path).
<p />
<pre class='file'>
# Cron job to update certs.
# Runs every hour by default, though does not update certs until they're at
# least 24 hours old.  There is a random sleep time for up to 45 minutes (2700
# seconds) to avoid overloading cert servers.
10 * * * *   ( . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh && osg-update-certs --random-sleep 2700 --called-from-cron )
</pre>
<p />
<pre class='file'>
# Cron job to update CRLs for EL5:
# Runs every 6 hours at, 45 minutes +/- 3 minutes.
42 */6 * * *   ( . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh && fetch-crl3 -q -r 360 )
</pre>
<p />
<pre class='file'>
# Cron job to update CRLs for EL6:
# Runs every 6 hours at, 45 minutes +/- 3 minutes.
42 */6 * * *   ( . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh && fetch-crl -q -r 360 )
</pre>
<p />
You might want to configure proxy settings in $OSG_LOCATION/etc/fetch-crl.conf (EL6) or $OSG_LOCATION/etc/fetch-crl3.conf (EL5)
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_2_Starting_and_Enabling_Servic"></a> 6.2  Starting and Enabling Services </span></h2>
To start the services you must edit your cron with <code><b>crontab -e</b></code> and add the lines above.
<code><b>crontab -l</b></code> lists the current services.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_3_Stopping_and_Disabling_Servi"></a> 6.3  Stopping and Disabling Services </span></h2>
To stop the services you must edit your cron with <code><b>crontab -e</b></code> and remove or comment out the lines above.
<code><b>crontab -l</b></code> lists the current services.
<p />
<p />
<h1><a name="7_Usage"></a> 7  Usage </h1>
A user must set up their environment before running any of the software provided in the client.
<p />
There are two way to do this: either source <code>setup.sh</code> or <code>setup.csh</code> before
running a command, or use the <code>osgrun</code> wrapper. All three files are located in
the top-level directory of the client. In the examples below replace <font color="#ff0000">&lt;OSG_LOCATION&gt;</font> with the path of your tarball install, including the osg-client directory resulting from the tarball (e.g. <code>$HOME/test-install/osg-client</code>).
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  If <code>setup.sh</code>, <code>setup.csh</code>, or <code>osgrun</code> are missing, then run
</dd></dl> 
<code>osg/osg-post-install</code> to (re)create them.
<p />
Example usage with <code>setup.sh</code>: <pre class='screen'>
[user@client ~]$ . <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh
[user@client ~]$ grid-proxy-init
[user@client ~]$ globus-job-run <em>GATEKEEPER</em> /usr/bin/id
</pre>
<p />
(If using <code>csh</code> or <code>tcsh</code>, source <code>setup.csh</code> instead of <code>setup.sh</code>)
<p />
The user might find it convenient to create a shell alias to <code>setup.sh</code> to avoid having to type the full path every session.
For example by adding the following to their <code>~/.bashrc</code>:
<pre class='file'>
alias osg_setup=". <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/setup.sh"
</pre>
<p />
Example usage with <code>osgrun</code>: <pre class='screen'>
[user@client ~]$ <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/osgrun grid-proxy-init
[user@client ~]$ <font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/osgrun globus-job-run <em>GATEKEEPER</em> /usr/bin/id
</pre>
<p />
The advantage of <code>osgrun</code> is that the environment of the user is left
unchanged, whereas sourcing <code>setup.sh</code> or <code>setup.csh</code> will modify variables
like <code>PATH</code>, <code>LD_LIBRARY_PATH</code>, and others, until the user exits from their
shell.
<p />
The user might find it useful to set up a shell alias to <code>osgrun</code> to avoid having to type the full path every command.
For example by adding the following to their <code>~/.bashrc</code>:
<pre class='file'>
alias osgrun="<font color="#ff0000">&lt;OSG_LOCATION&gt;</font>/osgrun"
</pre>
<p />
<p />
<p />
<h1><a name="8_Firewall_Considerations"></a> 8   Firewall Considerations </h1>
<p />
The <a href="http://www.globus.org/toolkit/" target="_top">Globus Toolkit</a> and <a href="/bin/view/Documentation/GlossaryH#DefsHTCondor" class="twikiAnchorLink">HTCondor</a> require the client host to <em>allow</em> inbound and outbound network connections. This section describes what additional configuration steps have to be taken if the client host is located behind a firewall. For a more detailed description on firewalls consult <a href="/bin/view/Documentation/Release3/FirewallInformation" class="twikiLink">this</a> document.
<p />
The ranges that you choose below in the Globus and HTCondor configuration must be consistent with the firewall configuration. If the Globus and HTCondor ranges overlap there won't be port collisions but you will need a bigger range.
<p />
<a name="PublicIpAddress"></a>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="8_1_Public_IP_Address_and_DNS"></a> 8.1  Public IP Address and DNS </span></h2>
If you use the the client host as HTCondor-G submit host for long running jobs, it needs to be reached by remote resources. The easier option is to use a <em>public</em> IP address and not be be located within a private network. For other options check below. To make sure that the client host uses a public IP address and is assigned a fully qualified domain name, use:
<p />
<pre class="screen">
[user@client ~]$ hostname -f
<font color="#ff0000">client.opensciencegrid.org</font>
[user@client ~]$ nslookup client.opensciencegrid.org
Server:		131.215.125.1
Address:	131.215.125.1#53

Name:           <font color="#ff0000">client.opensciencegrid.org</font>
Address:        <font color="#ff0000">131.215.114.49</font>
</pre>
<p />
If the client host is not assigned a fully qualified domain name, you can assign the <em>public IP address</em> to the <code>GLOBUS_HOSTNAME</code> environment variable, e.g.:
<pre class="screen">
[user@client ~]$ cat << CFG >> ~/.bashrc
export GLOBUS_HOSTNAME=<font color="#ff0000">131.215.114.49</font>
CFG
</pre> 
<p />
Make sure to re-login after you update <code>~/.bashrc</code> so that the changes take effect.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="8_2_Configuring_the_firewall_and"></a> 8.2  Configuring the firewall and NAT </span></h2>
If the client host is on a private network with NAT or anyway behind a firewall, even a host firewall, the firewall and eventual NAT must be configured correctly.
<p />
Assuming you use iptables and chose the port range 20k-25k, you must
<p />
Insert the following rules <pre class="file">
-A RH-Firewall-1-INPUT  -m state --state NEW -p tcp -m tcp --dport 20000:24999 -j ACCEPT
-A RH-Firewall-1-INPUT  -m state --state NEW -p udp -m udp --dport 20000:24999 -j ACCEPT
</pre>    
into <code>/etc/sysconfig/iptables</code> and <br>
Restart iptables with <pre class="rootscreen">
[root@client ~]$ service iptables restart
</pre>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  It is possible to use a client host that is located inside a private network using Network Address Translation. In this case the gatekeeper must be configured to forward incoming connections to the client host. The <code>$GLOBUS_HOSTNAME</code> environment variable must be set to the gatekeeper address. This procedure is currently not documented.
</dd></dl> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="8_3_Globus_Port_Range"></a> 8.3  Globus Port Range </span></h2>
<p />
<a href="/bin/view/Documentation/GlossaryG#DefsGridResourceAllocationAndManagement" class="twikiAnchorLink">GRAM</a> can be configured to only use a specified range of TCP ports on the client host for inbound (<code>$GLOBUS_TCP_PORT_RANGE</code>) and outbound (<code>$GLOBUS_TCP_SOURCE_RANGE</code>) connections. More information can be found in the <a href="http://dev.globus.org/wiki/FirewallHowTo" target="_top">Globus firewall HowTo</a>. For example:
<pre class="screen">
[user@client ~]$ cat << CFG >> ~/.bashrc
export GLOBUS_TCP_PORT_RANGE=20000,24999
export GLOBUS_TCP_SOURCE_RANGE=20000,24999
CFG
</pre>
<p />
Make sure to re-login after you update <code>~/.bashrc</code> so that the changes take effect.
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  See also <a href="/bin/view/Documentation/Release3/InstallCondor" class="twikiLink">InstallCondor</a> for the installation and configuration of HTCondor (including its Firewall requirements).
</dd></dl> 
<p />
<p />
<p />
<p />
<h1><a name="9_Test_the_Client"></a> 9  Test the Client </h1>
<p />
This document does not cover the usage of the client tools. An introduction how to use the OSG can be found <a href="/bin/view/Documentation/UsingTheGrid" class="twikiLink">here</a>. A more detailed description how to interact with a <a href="/bin/view/Documentation/GlossaryC#DefsComputeElement" class="twikiAnchorLink">Compute Element</a> is located <a href="/bin/view/Documentation/Release3/TestOSGClient" class="twikiLink">here</a>.
<p />
To simply test the functionality of your installation: <ul>
<li> make sure your <a href="/bin/view/Documentation/Release3/CertificateUserGet" class="twikiLink">grid user certificate</a> is installed on the client host
</li> <li> make sure all services, including Condor-G if you are using it in the tests, are active (see above) 
</li> <li> create a <a href="/bin/view/Documentation/Release3/TestOSGClient#Authentication_using_a_Grid_Prox" class="twikiAnchorLink">grid-proxy</a> to test that your certificate is valid
</li> <li> create a <a href="/bin/view/Documentation/Release3/TestOSGClient#Authentication_using_a_VOMS_Prox" class="twikiAnchorLink">voms-proxy</a>
</li> <li> test to <a href="/bin/view/Documentation/Release3/TestOSGClient#Mapping_Test" class="twikiAnchorLink">authenticate</a> with a <a href="/bin/view/Documentation/GlossaryC#DefsComputeElement" class="twikiAnchorLink">Compute Element</a>
</li> <li> test to <a href="/bin/view/Documentation/Release3/TestOSGClient#Job_Submission_using_GRAM" class="twikiAnchorLink">submit a job</a> using <a href="/bin/view/Documentation/GlossaryG#DefsGridResourceAllocationAndManagement" class="twikiAnchorLink">GRAM</a>
</li> <li> test to <a href="/bin/view/Documentation/Release3/TestOSGClient#Data_Transfer_Test" class="twikiAnchorLink">transfer data</a> using <a href="/bin/view/Documentation/GlossaryG#DefsGridFTP" class="twikiAnchorLink">GridFTP</a>
</li> <li> test Condor-G with a <a href="/bin/view/Documentation/Release3/TestOSGClient#CondorTest" class="twikiAnchorLink">simple job submission</a> or follow <a href="/bin/view/Documentation/CondorSubmittingSingleJob" class="twikiLink">this tutorial</a>
</li></ul> 
<p />
<p />
<p />
<h1><a name="10_Getting_Help"></a> 10  Getting Help </h1>
To get assistance please use this <a href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink">Help Procedure</a>.
<p />
<p />
<p />
<h1><a name="11_References"></a> 11  References </h1>
The OSG Client includes also a set of tools that are part of the <a href="/bin/view/Documentation/Release3/NetworkPerformanceToolkit" class="twikiLink">Internet2 Network Performance Toolkit</a>
<p />
Client installation documents: <ul>
<li> <a href="/bin/view/Documentation/Release3/InstallOSGClient" class="twikiLink">InstallOSGClient</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallOSGClientTarball" class="twikiCurrentTopicLink twikiLink">InstallOSGClientTarball</a>
</li></ul> 
Some components of OSG Client: <ul>
<li> <a href="/bin/view/Documentation/Release3/OsgCaManage" class="twikiLink">osg-ca-manage</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallCertAuth#Managing_Certificate_Revocation" class="twikiAnchorLink">Install and manage fetch-crl</a>
</li> <li> <a href="/bin/view/Documentation/Release3/UpgradeFetchCrl2to3" class="twikiLink">Differences between frtch-crl and  fetch-crl3</a>
</li></ul> 
<p />
<p />
About AbA software: <ul>
<li> <a href="/bin/view/SoftwareTeam/NonRootClientBeta" class="twikiLink">NonRootClientBeta</a>
</li> <li> <a href="/bin/view/SoftwareTeam/NonRootClients" class="twikiLink">NonRootClients</a>
</li></ul> 
<p />
<h1><a name="12_Comments"></a> 12  Comments </h1>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/InstallOSGClientTarball" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">MarcoMambelli<a href="/bin/edit/Documentation/Release3/MarcoMambelli?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="MarcoMambelli (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|General|Trash/Trash/Integration|Monitoring|Operations|Security|Storage|Trash/Tier3|User|VO) <ul>
<li> Local DOC_AREA       = General
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (Developer|Documenter|Scientist|Student|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (<span class="twikiNewLink">HowTo<a href="/bin/edit/Documentation/Release3/HowTo?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="HowTo (this topic does not yet exist; you can create it)">?</a></span>|Installation|Knowledge|Navigation|Planning|Training|Troubleshooting) <ul>
<li> Local DOC_TYPE       = Installation  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">MatyasSelmeci<a href="/bin/edit/Documentation/Release3/MatyasSelmeci?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="MatyasSelmeci (this topic does not yet exist; you can create it)">?</a></span> Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">SuchandraThapa<a href="/bin/edit/Documentation/Release3/SuchandraThapa?topicparent=Documentation/Release3.InstallOSGClientTarball" rel="nofollow" title="SuchandraThapa (this topic does not yet exist; you can create it)">?</a></span> Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>InstallOSGClientTarball</span> <br />    
Topic revision: r20 - 06 Dec 2016 - 18:12:42 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />