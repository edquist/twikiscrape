<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> JavaVersionSSHProbe &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/JavaVersionSSHProbe?_T=16 Feb 2017" type="application/x-wiki" title="edit JavaVersionSSHProbe" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/JavaVersionSSHProbe"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="java_version_ssh_probe"></a>  java-version-ssh-probe </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#About_this_Document"> About this Document</a>
</li> <li> <a href="?cover=print#How_to_get_Help"> How to get Help?</a>
</li> <li> <a href="?cover=print#Description"> Description</a>
</li> <li> <a href="?cover=print#Setting_up_passwordless_SSH_acce"> Setting up passwordless SSH access</a>
</li> <li> <a href="?cover=print#Manual_invocation"> Manual invocation</a>
</li> <li> <a href="?cover=print#Provided_metrics"> Provided metrics</a> <ul>
<li> <a href="?cover=print#Metric_org_osg_general_java_vers"> Metric  org.osg.general.java-version-ssh</a>
</li></ul> 
</li> <li> <a href="?cover=print#References"> References</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</div>
<p />
<h1><a name="About_this_Document"></a> About this Document </h1>
This document is about the RSV Java Version SSH probe included in the default distribution. 
You need a host with RSV installed according to <a href="/bin/view/Documentation/Release3/InstallRSV" class="twikiLink">InstallRSV</a>. The same document instructs on <a href="/bin/view/Documentation/Release3/InstallRSV#Configuration" class="twikiAnchorLink">how to configure RSV</a> and <a href="/bin/view/Documentation/Release3/InstallRSV#Troubleshooting" class="twikiAnchorLink"><b>how to troubleshoot framework errors</b></a>.
<p />
<p />
<h1><a name="How_to_get_Help"></a> How to get Help? </h1>
To get assistance please use <a href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink">Help Procedure</a>.
<p />
<p />
RSV has a tool to collect information useful for troubleshooting. For most problems the RSV support team will ask you to generate a profile tarball to share information (including log and configuration files).  
You can save some time by doing so with your original request:
<pre class="screen">
$> rsv-control --profile
Running the rsv-profiler...
OSG-RSV Profiler
Analyzing...
Making tarball (rsv-profiler.tar.gz)
</pre>
<p />
<p />
<p />
<h1><a name="Description"></a> Description </h1>
<p />
This probe is designed to run the same tests as the <span class="twikiNewLink">JavaVersionProbe<a href="/bin/edit/Documentation/Release3/JavaVersionProbe?topicparent=Documentation/Release3.JavaVersionSSHProbe" rel="nofollow" title="JavaVersionProbe (this topic does not yet exist; you can create it)">?</a></span> (which tests which versions of Java are installed and in use by various components), but it is run against an SE without a jobmanager.
<p />
The probe uses ssh to connect to the remote server, so passwordless ssh access for the <code>rsv</code> user on the RSV host to the remote servers must be set up for this to work (for instance, using ssh public keys).
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/JavaVersionSSHProbe?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Metric</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/JavaVersionSSHProbe?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Test description</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> org.osg.general.java-version-ssh </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> Tests Java versions installed and in use by various components on remote host </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h1><a name="Setting_up_passwordless_SSH_acce"></a> Setting up passwordless SSH access </h1>
<p />
In order for this probe to work, the <code>rsv</code> user on the RSV host must be able to ssh to the remote servers without a password.  This can be done with ssh public keys.  First you will need an <code>rsv</code> account on both the RSV host and the remote servers.  You may need to create it manually on the remote servers.
<p />
Example to generate ssh public keys on RSV host:
<pre class="screen">
root@el6-rsv ~ # su - rsv
rsv@el6-rsv ~ $ ssh-keygen -t dsa
Generating public/private dsa key pair.
Enter file in which to save the key (/home/rsv/.ssh/id_dsa): 
Created directory '/home/rsv/.ssh'.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/rsv/.ssh/id_dsa.
Your public key has been saved in /home/rsv/.ssh/id_dsa.pub.
The key fingerprint is:
be:a3:eb:9a:10:1d:4a:7c:6d:81:48:c7:19:b0:60:41 rsv@fermicloud098.fnal.gov
The key's randomart image is:
+--[ DSA 1024]----+
|oE++o+.          |
|.o.o+. .         |
|  + o o          |
| . + o           |
|  o .   S        |
|   .   .         |
|  .     .        |
|   . .  ..       |
|    oo+o..       |
+-----------------+
</pre>
<p />
After ensuring the <code>rsv</code> user exists on the remote server, you can copy the new public key from the RSV host (<code>~rsv/.ssh/id_dsa.pub</code>) into the remote server's <code>authorized_keys</code> file (<code>~rsv/.ssh/authorized_keys</code>), either manually or with the <code>ssh-copy-id</code> program:
<p />
<pre class="screen">
rsv@el6-rsv ~ $ ssh-copy-id -i ~/.ssh/id_dsa.pub fermicloud106.fnal.gov
The authenticity of host 'fermicloud106.fnal.gov (131.225.155.53)' can't be established.
RSA key fingerprint is b1:2f:37:37:bb:1e:2c:20:57:5d:17:8c:6e:59:89:be.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'fermicloud106.fnal.gov,131.225.155.53' (RSA) to the list of known hosts.
Now try logging into the machine, with "ssh 'fermicloud106.fnal.gov'", and check in:

  .ssh/authorized_keys

to make sure we haven't added extra keys that you weren't expecting.
</pre>
<p />
If you use <code>ssh-copy-id</code> you may need to type the <code>rsv</code> password the first time.  Once you have added the RSV host's ssh public key to the remote server's <code>authorized_keys</code> file, make sure you can ssh from the <code>rsv</code> user on the RSV host to the remote server without a password.
<p />
<h1><a name="Manual_invocation"></a> Manual invocation </h1>
This probe can be invoked manually, from an RSV install or from SVN.
It requires: <ul>
<li> <code>rsvprobe.py</code>, providing the base class in Python for RSV Probes
</li> <li> <code>java-version-probe</code> and <code>worker-scripts/java-version-probe-worker</code> to do the actual work on the remote server
</li></ul> 
<p />
To invoke manually: <pre class="screen">
$ .# ./java-version-ssh-probe -u remote-hostname
RSV BRIEF RESULTS:
OK
OK: Java packages queried.
---
Installed JRE RPMs:   
  - java-1.6.0-openjdk-1.6.0.0-1.65.1.11.14.el6_4.x86_64

java command in path:   
  Version: |
    java version "1.6.0_24"
    OpenJDK Runtime Environment (IcedTea6 1.11.14) (rhel-1.65.1.11.14.el6_4-x86_64)
    OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)
    
  Full path: /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/bin/java
  Provided by: java-1.6.0-openjdk-1.6.0.0-1.65.1.11.14.el6_4.x86_64

Installed JDK RPMs: []

javac command in path: (Not found)

java used by bestman2: (Not found)

java used by hadoop-0.20: (Not found)

java used by hadoop: (Not found)

java used by tomcat: (Not found)

java used by xrootd-hdfs: (Not found)

---

2013-12-09T20:17:02Z
</pre>
<p />
<p />
<h1><a name="Provided_metrics"></a> Provided metrics </h1>
The remainder of this page is dedicated to explaining the failure modes of the this probe, and how you might try to resolve them.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Metric_org_osg_general_java_vers"></a> Metric  org.osg.general.java-version-ssh </span></h2>
Checks which versions of Java are installed and in use by various components:
  * connects via ssh to a remote host and runs the <code>java-version-probe</code>.
<p />
Failure modes for this metric are the same as the <span class="twikiNewLink">JavaVersionProbe<a href="/bin/edit/Documentation/Release3/JavaVersionProbe?topicparent=Documentation/Release3.JavaVersionSSHProbe" rel="nofollow" title="JavaVersionProbe (this topic does not yet exist; you can create it)">?</a></span>, with the additional possibility that the ssh connection itself can fail.  In that case you will want to ensure that ssh public keys are set up and you can ssh from the <code>rsv</code> user on the RSV host to the remote server without needing to enter a password.
<p />
<h1><a name="References"></a> References </h1> <ul>
<li> <a href="https://jira.opensciencegrid.org/browse/SOFTWARE-1147" target="_top">SOFTWARE-1147</a>
</li> <li> <a href="https://jira.opensciencegrid.org/browse/SOFTWARE-1125" target="_top">SOFTWARE-1125</a>
</li></ul> 
<p />
RSV documents: <ul>
<li> A <a href="/bin/view/Documentation/Release3/RsvOverview" class="twikiLink">Introduction to RSV</a>
</li> <li> The <a href="/bin/view/Documentation/Release3/RsvArchitecture" class="twikiLink">RSV architecture</a>
</li> <li> <a href="/bin/view/Documentation/Release3/InstallRSV" class="twikiLink">InstallRSV</a>
</li></ul> 
<p />
<h1><a name="Comments"></a> Comments </h1>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/JavaVersionSSHProbe" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p /></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>JavaVersionSSHProbe</span> <br />    
Topic revision: r1 - 09 Dec 2013 - 21:14:13 - <a href="/bin/view/Main/CarlEdquist" class="twikiLink">CarlEdquist</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />