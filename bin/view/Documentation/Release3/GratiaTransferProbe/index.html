<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> GratiaTransferProbe &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/GratiaTransferProbe?_T=16 Feb 2017" type="application/x-wiki" title="edit GratiaTransferProbe" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/GratiaTransferProbe"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <h1><a name="Gratia_Transfer_Probe"></a>  <strong>Gratia Transfer Probe</strong> </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#About_this_Document"> About this Document</a> <ul>
<li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#Installing_Gratia_GridFTP_transf"> Installing Gratia GridFTP transfer probe</a>
</li> <li> <a href="?cover=print#Configuring_Gratia_GridFTP_trans"> Configuring Gratia GridFTP transfer probe</a> <ul>
<li> <a href="?cover=print#Selecting_a_collector_host"> Selecting a collector host</a>
</li> <li> <a href="?cover=print#Using_GUMS_authorization_mode"> Using GUMS authorization mode</a>
</li> <li> <a href="?cover=print#Using_Gridmap_based_authorizatio"> Using Gridmap based authorization mode</a>
</li></ul> 
</li> <li> <a href="?cover=print#Validation"> Validation</a>
</li> <li> <a href="?cover=print#Enabling_Disabling"> Enabling/Disabling</a>
</li> <li> <a href="?cover=print#Viewing_information"> Viewing information</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</li></ul> 
</div>
<p />
<h1><a name="About_this_Document"></a> About this Document </h1>
<p />
<img width="16" alt="hand" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/hand.gif" height="16" border="0" /> This document is for System Administrators who are planning to enable Gratia GridFTP  transfer probe installed with installation of BeStMan service,  stand-alone GridFTP service, or with GridFTP on top of another storage system such as Hadoop or Xrootd. Gratia GridFTP  transfer probe generates accounting  information about file transfers and reports it to the central Gratia collector.
<p />
All procedures presented in this document in general require <em>root</em> privilegevalidatios.
<p />
on    
on    
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Introduction"></a> Introduction </span></h2>
<p />
The BeStMan server is using GridFTP server to transfer files to/from any Posix compliant file system. Gratia GridFTP  transfer probe monitor these transfer  by parsing the Globus GridFTP server logs and reports it to Gratia Collector.  This document describes the Gratia GridFTP transfer probe configuration procedure. This procedure must be repeated once for every stand-alone GridFTP server that is installed.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Installing_Gratia_GridFTP_transf"></a> Installing Gratia GridFTP transfer probe </span></h2>
<p />
Gratia GridFTP  transfer probe is installed simultaneously with any meta-packages containing globus-gridftp-server.  If you have installed <code>osg-se-bestman</code>, <code>osg-se-bestman-xrootd</code>, <code>osg-gridftp</code>, or followed the Hadoop installation instructions, you probably already have these problems.
<p />
If you have not followed any of these instructions, the probe can be installed using:
<pre class="rootscreen">
yum install gratia-probe-gridftp-transfer
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configuring_Gratia_GridFTP_trans"></a> Configuring Gratia GridFTP transfer probe </span></h2>
<p />
<p />
<p />
<p />
Here are the most relevant file and directory locations:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Purpose </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Needs Editing? </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Location </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> Probe Configuration </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> Yes </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> /etc/gratia/gridftp-transfer/ProbeConfig </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Probe Executables </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> No </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> /usr/share/gratia/gridftp-transfer </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> Log files </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> No </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> /var/log/gratia </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Temporary files </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> No </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> /var/lib/gratia/tmp </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Gums configuration </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> Yes </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> /etc/gums/gums-client.properties </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
The RPM installs the Gratia probe into the system crontab, but does not configure it.  The configuration of the probe is controlled by the file
<p />
<pre>
/etc/gratia/gridftp-transfer/ProbeConfig
</pre>
<p />
This is usually one XML node spread over multiple lines.  Note that comments (#) have no effect on this file.  You will need to edit the following:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Attribute </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Needs Editing </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Value </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> ProbeName </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> Maybe </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> This should be set to "gridftp-transfer:&lt;hostname&gt;", where &lt;hostname&gt; is the fully-qualified domain name of your gridftp host. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> CollectorHost </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Maybe </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Set to the hostname and port of the central collector.  By default it sends to the OSG collector.  See below. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> SiteName </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> Yes </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Set to the resource group name of your site as registered in OIM. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> GridftpLogDir </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Yes </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Set to /var/log, or wherever your current gridftp logs are located </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> Grid </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> Maybe </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Set to "ITB" if this is a test resource; otherwise, leave as OSG. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> UserVOMapFile </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> No </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> This should be set to /var/lib/osg/user-vo-map; see below for information about this file. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> SuppressUnknownVORecords </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> Maybe </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Set to 1 to suppress any records that can't be matched to a VO; 0 is strongly recommended. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> SuppressNoDNRecords </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Maybe </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Set to 1 to suppress records that can't be matched to a DN; 0 is strongly recommended. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> EnableProbe </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> Yes </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Set to 1 to enable the probe. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h3><a name="Selecting_a_collector_host"></a> Selecting a collector host </h3>
<p />
The collector is the central server which logs the GridFTP transfers into a database.  There are usually three options:
<p /> <ol>
<li> <strong>OSG Transfer Collector</strong>: This is the primary collector for transfers in the OSG.  Use CollectorHost="gratia-osg-prod.opensciencegrid.org:80".
</li> <li> <strong>OSG-ITB Transfer Collector</strong>: This is the test collector for transfers in the OSG.  Use CollectorHost=" gratia-osg-itb.opensciencegrid.org:80".
</li> <li> <strong>Site local collector</strong>: If your site has set up its own collector, then your admin will be able to give you an endpoint to use.  Typically, this is along the lines of CollectorHost="collector.example.com:8880".
</li></ol> 
<p />
<strong>Note:</strong> if you are installing on an itb site, use <strong>gratia-osg-itb.opensciencegrid.org</strong> instead of "gratia-osg-transfer.opensciencegrid.org* above.
<p />
<p />
<h3><a name="Using_GUMS_authorization_mode"></a> Using GUMS authorization mode </h3>
<p />
The <code>user-vo-map</code> file is a simple, space-separated format that contains 2 columns; the first is a unix username and the second is the VO which that username correspond to.  In order to create it you need to configure the gums client.
<p />
The primary configuration file for the gums-client utilities is located in <code>/etc/gums/gums-client.properties</code>.  The two properties that you must change are:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> Attribute </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> Needs Editing </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Value </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> gums.location </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> Yes </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> This should be set to the admin URL for your gums server, usually of the form gums.location=https://GUMS_HOSTNAME:8443/gums/services/GUMSAdmin </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> gums.authz </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Yes </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> This should be set to the authorization interface URL for your gums server, usually of the form gums.authz=https://GUMS_HOSTNAME:8443/gums/services/GUMSXACMLAuthorizationServicePort </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
After the gums client is configured to generate the file run the following once by hand:
<p />
<pre class="rootscreen">
[root@client ~]$ gums-host-cron
</pre>
<p />
<code>user-vo-map</code> should be created in the following location:
<p />
<pre>/var/lib/osg/user-vo-map</pre>
<p />
To have cron regularly update this file start the following service:
<p />
<pre class="rootscreen">
[root@client ~]$ service gums-client-cron start
</pre>
<p />
Make sure the <strong>UserVOMapFile</strong> field is set to this location in
<p />
<pre>/etc/gratia/gridftp-transfer/ProbeConfig</pre>
<p />
Without <code>user-vo-map</code> , all gridftp transfers will show up as belonging to the VO "Unknown".
<p />
<p />
<h3><a name="Using_Gridmap_based_authorizatio"></a> Using Gridmap based authorization mode </h3>
<p />
Note: If you are using this mode for authorization, make sure the files /etc/grid-security/gsi-authz.conf and /etc/grid-security/prima-authz.conf do not exist.
<p />
In order to enable generation of grid-mapfile and  osg-user-vo-map.txt by using the edg-mkgridmap cron process to get information form VOMS servers do the following:
<pre class="rootscreen">
edg-mkgridmap 
</pre>
If you have not installed this package, you will need to run <code>yum install edg-mkgridmap</code> first.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Validation"></a> Validation </span></h2>
<p />
<p />
<p />
Run the Gratia probe once by hand to check for functionality:
<p />
<pre class="rootscreen">
[root@client ~]$ /usr/share/gratia/gridftp-transfer/GridftpTransferProbeDriver
</pre>
<p />
Look for any abnormal termination and report it if it is a non-trivial site issue.  Look in the log files in <code>/var/log/gratia/&lt;date&gt;.log</code> and make sure there are no error messages printed.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Enabling_Disabling"></a> Enabling/Disabling </span></h2>
<p />
<p />
You can enable the Gratia Transfer probe (and other Gratia probes) with:
<p />
<pre class="rootscreen">
[root@client ~]$ /sbin/service gratia-probes-cron start
</pre>
<p />
You can disable the Gratia Transfer probe (and other Gratia probes) with:
<p />
<pre class="rootscreen">
[root@client ~]$ /sbin/service gratia-probes-cron stop
</pre>
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Viewing_information"></a> Viewing information </span></h2>
<p />
To access the information, go to <a href="http://&lt;gratia_host&gt;:&lt;gratia_port&gt;/gratia-reporting/" target="_top">http://&lt;gratia_host&gt;:&lt;gratia_port&gt;/gratia-reporting/</a>, click on "Custom SQL Query" on the left site menu frame, enter the following query into provided text box:
<pre class="screen">
select * from MasterTransferSummary where ProbeName like 'gridftp-transfer:&lt;your_host_name&gt;';
</pre>
click on "Execute Query" and you will see the total number of transfer per user. To get more detailed information you can execute the following query:
<pre class="screen">
select j.dbid, j.ResourceType ,j.LocalJobId,LocalUserId,j.CommonName,j.KeyInfoContent,j.Status,j.StartTime,
         j.EndTime,j.SubmitHost,m.ReportedSiteName,m.Grid, n.Value,n.StorageUnit 
         from JobUsageRecord j, JobUsageRecord_Meta m, Network n  
         where j.dbid=m.dbid and j.dbid=n.dbid and m.ProbeName like 'gridftp-transfer:&lt;your_host_name&gt;'  order by dbid;
</pre>
<p />
To check ITB Gratia collector click here <a href="http://gratia-osg-itb.opensciencegrid.org/gratia-reporting/" target="_top">ITB Gratia</a>.
<p />
To check OSG Gratia collector click here <a href="http://gratia-osg-transfer.opensciencegrid.org/gratia-reporting/" target="_top">OSG Gratia</a>.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Comments"></a> <strong>Comments</strong> </span></h2>
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Moved to Release 3 documentation and updated </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> <a href="/bin/view/Main/DouglasStrain" class="twikiLink">DouglasStrain</a> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> 10 Oct 2011 </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/GratiaTransferProbe" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">DouglasStrain<a href="/bin/edit/Documentation/Release3/DouglasStrain?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="DouglasStrain (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = Storage
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/Release3/EndUser?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Installation  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">NehaSharma<a href="/bin/edit/Documentation/Release3/NehaSharma?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="NehaSharma (this topic does not yet exist; you can create it)">?</a></span> Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">NehaSharma<a href="/bin/edit/Documentation/Release3/NehaSharma?topicparent=Documentation/Release3.GratiaTransferProbe" rel="nofollow" title="NehaSharma (this topic does not yet exist; you can create it)">?</a></span> Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
-->
<p />
-- <a href="/bin/view/Main/DouglasStrain" class="twikiLink">DouglasStrain</a> - 10 Oct 2011</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/Release3/NavTechGratia" class="twikiLink">NavTechGratia</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>GratiaTransferProbe</span> <br />    
Topic revision: r16 - 06 Dec 2016 - 18:12:41 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />