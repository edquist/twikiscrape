<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> PrototypeTroubleshootingGuide &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/PrototypeTroubleshootingGuide?_T=16 Feb 2017" type="application/x-wiki" title="edit PrototypeTroubleshootingGuide" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <div style="color: white; background-color: #F60; font-weight: 800; font-size: 2em; padding: 1ex;">
Documentation Prototype – Do Not Use
</div>
<p />
Condensed from <a href="/bin/view/Documentation/Release3/TroubleshootingHTCondorCE" class="twikiLink">the real HTCondor troubleshooting guide</a>.
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Troubleshooting_HTCondor_CE"> Troubleshooting HTCondor CE</a> <ul>
<li> <a href="?cover=print#HTCondor_CE_Troubleshooting_Data"> HTCondor CE Troubleshooting Data</a> <ul>
<li> <a href="?cover=print#JobRouterLog_AN1"> JobRouterLog</a>
</li> <li> <a href="?cover=print#BLAHP_Configuration_File"> BLAHP Configuration File</a>
</li></ul> 
</li> <li> <a href="?cover=print#HTCondor_CE_Troubleshooting_Tool"> HTCondor CE Troubleshooting Tools</a> <ul>
<li> <a href="?cover=print#condor_ce_ping"> condor_ce_ping</a>
</li> <li> <a href="?cover=print#condor_ce_reconfig"> condor_ce_reconfig</a>
</li></ul> 
</li> <li> <a href="?cover=print#General_Troubleshooting_Steps"> General Troubleshooting Steps</a> <ul>
<li> <a href="?cover=print#Making_sure_packages_are_up_to_d"> Making sure packages are up-to-date</a>
</li> <li> <a href="?cover=print#Verify_package_contents"> Verify package contents</a>
</li> <li> <a href="?cover=print#Verify_clocks_are_synchronized"> Verify clocks are synchronized</a>
</li></ul> 
</li> <li> <a href="?cover=print#HTCondor_CE_Troubleshooting_Case"> HTCondor CE Troubleshooting Cases</a> <ul>
<li> <a href="?cover=print#Jobs_stay_idle_on_the_CE"> Jobs stay idle on the CE</a>
</li></ul> 
</li> <li> <a href="?cover=print#Known_Issues"> Known Issues   </a>
</li> <li> <a href="?cover=print#Further_Help_with_HTCondor_CE"> Further Help with HTCondor CE</a> <ul>
<li> <a href="?cover=print#Requesting_help_from_OSG"> Requesting help from OSG</a>
</li></ul> 
</li></ul> 
</li></ul> 
</div>
<p />
<h1><a name="Troubleshooting_HTCondor_CE"></a> Troubleshooting HTCondor CE </h1>
<p />
In this document, you will find a collection of files, commands, and suggested actions to help troubleshoot HTCondor CE.
<p />
Other HTCondor CE pages: <ul>
<li> HTCondor CE overview and architecture (coming soon)
</li> <li> <a href="/bin/view/Documentation/Release3/InstallHTCondorCE" class="twikiLink">Installing HTCondor CE</a>
</li> <li> <a href="/bin/view/Documentation/Release3/JobRouterRecipes" class="twikiLink">Configuring HTCondor CE job routes</a>
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="HTCondor_CE_Troubleshooting_Data"></a> HTCondor CE Troubleshooting Data </span></h2>
<p />
The following files are located on the CE host.
<p />
<a name="JobRouterLog"></a>
<h3><a name="JobRouterLog_AN1"></a> JobRouterLog </h3>
<p />
The HTCondor CE job router log produced by the job router itself and thus contains valuable information when trying to troubleshoot issues with job routing.
<p />
To increase the debug level in this log, set the following value in <code>/etc/condor-ce/config.d/99-local.conf</code> on the CE host:
<p />
<pre class="file">JOB_ROUTER_DEBUG = D_FULLDEBUG</pre>
<p />
To apply these changes, reconfigure HTCondor CE:
<p />
<pre class="rootscreen">[root@client ~]$ condor_ce_reconfig</pre>
<p />
<strong>Location (on the HTCondor CE host):</strong>
<pre>/var/log/condor-ce/JobRouterLog</pre>
<p />
<strong>Key contents:</strong> <ul>
<li> Every attempt to route a job
</li> <li> Routing success messages
</li> <li> Job attribute changes, based on chosen route
</li> <li> Job submission errors to an HTCondor batch system
</li> <li> Corresponding job IDs on an HTCondor batch system
</li></ul> 
<p />
<strong>Sample failure</strong>
<p />
<em>HTCondor batch systems only</em>: The following error occurs when the job router daemon cannot submit the routed job:
<p />
<pre class="file">10/19/14 13:09:15 Can't resolve collector condorce.example.com; skipping
10/19/14 13:09:15 ERROR (pool condorce.example.com) Can't find address of schedd
10/19/14 13:09:15 JobRouter failure (src=5.0,route=Local_Condor): failed to submit job</pre>
<p />
<strong>What to look for:</strong>
<p /> <ul>
<li> Job is considered for routing:      <pre class="file">09/17/14 15:00:56 JobRouter (src=86.0,route=Local_LSF): <span style="background-color: #FFCCFF;">found candidate job</span></pre>      <p>In parentheses are the original HTCondor CE job ID (e.g., <code>86.0</code>) and the route (e.g., <code>Local_LSF</code>).</p>
</li> <li> Job is successfully routed:      <pre class="file">09/17/14 15:00:57 JobRouter (src=86.0,route=Local_LSF): <span style="background-color: #FFCCFF;">claimed job</span></pre>
</li> <li> Finding the corresponding job ID on your HTCondor batch system:      <pre class="file">09/17/14 15:00:57 JobRouter (<span style="background-color: #FFCCFF;">src=86.0,dest=205.0</span>, route=Local_Condor): claimed job</pre>      <p>In parentheses are the original HTCondor CE job ID (e.g., <code>86.0</code>) and the resultant job ID on the HTCondor batch system (e.g., <code>205.0</code>)</p>
</li> <li> If your job is not routed, there will not be any evidence of it within the log itself. To investigate why your jobs are not being considered for routing, use the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#CondorJobRouterTool" class="twikiCurrentTopicLink twikiAnchorLink">condor_ce_job_router_tool</a>
</li></ul> 
<p />
<a name="BlahpConfig"></a>
<h3><a name="BLAHP_Configuration_File"></a> BLAHP Configuration File </h3>
<p />
HTCondor CE uses the BLAHP to submit jobs to your local non-HTCondor batch system using your batch system's client tools. You can also tell the BLAHP to save the files that are being submitted to the local batch system to <code>DIR_NAME</code> by adding the following line:
<pre class="file">
blah_debug_save_submit_info=<span style="background-color: #FFCCFF;">DIR_NAME</span>
</pre>
The BLAHP will then create a directory for each submission to the local jobmanager with the submit file, and proxy used.   
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  Whitespace is important so do not put any spaces around the = sign.  In addition, the directory must be created and HTCondor CE should have sufficient permissions to create directories within <code>DIR_NAME</code>. 
</dd></dl> 
<p />
<strong>Location (on the HTCondor CE host):</strong>
<pre>/etc/blah.config</pre>
<p />
<strong>Key Contents</strong> <ul>
<li> Locations of the batch system's client binaries and logs
</li> <li> Location to save files that are submitted to the local batch system
</li></ul> 
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="HTCondor_CE_Troubleshooting_Tool"></a> HTCondor CE Troubleshooting Tools </span></h2>
<p />
HTCondor CE has its own separate set of of the HTCondor tools with <em>_ce_</em> in the name (i.e., <code>condor_<b>ce</b>_submit</code> vs <code>condor_submit</code>). Some of the the commands are only for the CE (e.g., <code>condor_ce_run</code> and <code>condor_ce_trace</code>) but many of them are just HTCondor commands configured to interact with the CE (e.g., <code>condor_ce_q</code>, <code>condor_ce_status</code>). It is important to differentiate the two: <code>condor_ce_config_val</code> will provide configuration values for your HTCondor CE while <code>condor_config_val</code> will provide configuration values for your batch system.
<p />
<a name="CondorPing"></a>
<h3><a name="condor_ce_ping"></a> condor_ce_ping </h3>
<p />
<h4><a name="Usage"></a> Usage </h4>
<p />
Use the <code>condor_ce_ping</code> command to test connectivity to the CE or to test the user that your proxy is mapped to:
<p />
<pre class="screen">
[user@client ~]$ condor_ce_ping -verbose -name <span style="background-color: #D1CAF2;">condorce.example.com</span> -pool <span style="background-color: #D1CAF2;">condorce.example.com</span>:9619 WRITE
</pre>
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3PrototypeTroubleshootingGuide1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show sample output&hellip;</span></a> </span> <span id="twistyIdDocumentation/Release3PrototypeTroubleshootingGuide1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3PrototypeTroubleshootingGuide1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="screen">
Remote Version:              $CondorVersion: 8.0.7 Sep 24 2014 $
Local  Version:              $CondorVersion: 8.0.7 Sep 24 2014 $
Session ID:                  condorce:27407:1412286981:3
Instruction:                 WRITE
Command:                     60021
Encryption:                  none
Integrity:                   MD5
Authenticated using:         GSI
All authentication methods:  GSI
Remote Mapping:              glow@users.opensciencegrid.org
Authorized:                  TRUE
</pre>
</div></div> <!--/twistyPlugin-->
<p />
If you run the <code>condor_ce_ping</code> command on the CE that you are testing, omit the <code>-name</code> and <code>-pool</code> options. <code>condor_ce_ping</code> takes the same arguments as <code>condor_ping</code> and is documented in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.2/condor_ping.html" target="_top">HTCondor manual</a>.
<p />
<h4><a name="Troubleshooting"></a> Troubleshooting </h4>
<p /> <ol>
<li> <strong>If you see &ldquo;ERROR: couldn&rsquo;t locate (null)!&rdquo;</strong>, that means the HTCondor CE schedd (the daemon that schedules jobs) cannot be reached. To track down the issue, increase debugging levels on the CE:   <pre class="file">
MASTER_DEBUG = D_FULLDEBUG
SCHEDD_DEBUG = D_FULLDEBUG</pre>   <p>Then look in the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#MasterLog" class="twikiCurrentTopicLink twikiAnchorLink">Master log</a> and <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#SchedLog" class="twikiCurrentTopicLink twikiAnchorLink">Schedd log</a> for any errors.</p>
</li> <li> <strong>If you see &ldquo;gsi@unmapped&rdquo; in the &ldquo;Remote Mapping&rdquo; line</strong>, this means that either your credentials are not mapped on the CE or that authentication is not set up at all. To set up authentication, refer to our <a href="/bin/view/Documentation/Release3/InstallHTCondorCE#5_2_Setup_Authorization" class="twikiAnchorLink">installation document</a>.
</li></ol> 
<p />
<a name="CondorReconfig"></a>
<h3><a name="condor_ce_reconfig"></a> condor_ce_reconfig </h3>
<p />
<h4><a name="Usage_AN1"></a> Usage </h4>
<p />
To ensure that your configuration changes have taken effect, run <code>condor_ce_reconfig</code>.
<p />
<pre class="screen">
[user@client ~]$ condor_ce_reconfig
</pre>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="General_Troubleshooting_Steps"></a> General Troubleshooting Steps </span></h2>
<p />
<h3><a name="Making_sure_packages_are_up_to_d"></a> Making sure packages are up-to-date </h3>
<p />
It is important to make sure that the HTCondor CE and related RPMs are up-to-date.
<p />
<pre class="screen">yum update <em>"htcondor-ce*" blahp condor</em></pre>
If you just want to see the packages to update, but do not want to perform the update now, answer <code>N</code> at the prompt.
<p />
<h3><a name="Verify_package_contents"></a> Verify package contents </h3>
<p />
If the contents of your HTCondor CE packages have been changed, the CE may cease to function properly. To verify the contents of your packages (ignoring changes to configuration files):
<p />
<pre class="screen">
[user@client ~]$ rpm -q --verify htcondor-ce htcondor-ce-client blahp | awk '$2 != "c" {print $0}'
</pre>
<p />
If the verification command returns output, this means that your packages have been changed. To fix this, you can reinstall the packages:
<p />
<pre class="screen">
[user@client ~]$ yum reinstall htcondor-ce htcondor-ce-client blahp
</pre>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  The reinstall command may place original versions of configuration files alongside the versions that you have modified. If this is the case, the reinstall command will notify you that the original versions will have an <code>.rpmnew</code> suffix. Further inspection of these files may be required as to whether or not you need to merge them into your current configuration.
</dd></dl> 
<p />
<h3><a name="Verify_clocks_are_synchronized"></a> Verify clocks are synchronized </h3>
<p />
Like all GSI-based authentication, HTCondor CE is sensitive to time skews.  Make sure the clock on your CE is synchronized using a utility such as <code>ntpd</code>. Additionally, HTCondor itself is sensitive to time skews on the NFS server.  If you see empty stdout / err being returned to the submitter, verify there is no NFS server time skew.
<p />
<a name="TroubleshootingItems"></a>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="HTCondor_CE_Troubleshooting_Case"></a> HTCondor CE Troubleshooting Cases </span></h2>
<p />
This section contains common issues you may encounter using HTCondor CE and next actions to take when you do. 
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  Before spending any time on troubleshooting, you should ensure that the state of configuration is as expected by running <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#CondorReconfig" class="twikiCurrentTopicLink twikiAnchorLink">condor_ce_reconfig</a>.
</dd></dl> 
<p />
<h3><a name="Jobs_stay_idle_on_the_CE"></a> Jobs stay idle on the CE </h3>
<p />
Check the following subsections in order, but note that jobs may take several minutes or longer to run if the CE is busy.
<p />
<h4><a name="Idle_jobs_on_CE_Is_the_job_route"></a> Idle jobs on CE: Is the job router handling the incoming job? </h4>
<p />
Jobs on the CE will be put on hold if they do not match any job routes after 30 minutes, but you can check a few things if you suspect that the jobs are not being matched. Check if the JobRouter sees a job before that by looking at the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#JobRouterLog" class="twikiCurrentTopicLink twikiAnchorLink">job router log</a> and looking for the text <code>src=&lt;job id&gt;&hellip;claimed job</code>. 
<p />
<strong>Next actions</strong>
<p />
Use <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#CondorJobRouterTool" class="twikiCurrentTopicLink twikiAnchorLink">condor_ce_job_router_tool</a> to see why your idle job does not match any routes
<p />
<h4><a name="Idle_jobs_on_CE_Verify_correct_o"></a> Idle jobs on CE: Verify correct operation between the CE and your local batch system </h4>
<p />
<h5><a name="For_HTCondor_batch_systems"></a> For HTCondor batch systems </h5>
<p />
HTCondor CE submits jobs directly to an HTCondor batch system via the JobRouter, so any issues with the CE/local batch system interaction will appear in the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#JobRouterLog" class="twikiCurrentTopicLink twikiAnchorLink">JobRouterLog</a>.
<p />
<strong>Next actions</strong>
<p /> <ol>
<li> Check the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#JobRouterLog" class="twikiCurrentTopicLink twikiAnchorLink">JobRouterLog</a> for failures.
</li> <li> Verify that the local HTCondor is functional.
</li> <li> Use <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#CondorConfigVal" class="twikiCurrentTopicLink twikiAnchorLink">condor_ce_config_val</a> to verify that the <code>JOB_ROUTER_SCHEDD2_NAME</code>, <code>JOB_ROUTER_SCHEDD2_POOL</code>, and <code>JOB_ROUTER_SCHEDD2_SPOOL</code> configuration variables are set to the hostname of your CE and the hostname of your local HTCondor&rsquo;s collector, and the location of your local HTCondor&rsquo;s spool directory, respectively.
</li></ol> 
<p />
<h5><a name="For_non_HTCondor_batch_systems"></a> For non-HTCondor batch systems </h5>
<p />
HTCondor CE submits jobs to a non-HTCondor batch system via the Gridmanager, so any issues with the CE/local batch system interaction will appear in the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#GridmanagerLog" class="twikiCurrentTopicLink twikiAnchorLink">GridmanagerLog</a>. Look for <code>gm state change&hellip;</code> lines to figure out where the issures are occuring. 
<p />
<strong>Next actions</strong>
<p /> <ol>
<li> <p><b>If you see failures in the Gridmanager log during job submission:</b> Save the submit files by adding the appropriate entry to <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#BlahpConfig" class="twikiCurrentTopicLink twikiAnchorLink">blah.config</a> and submit it <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#ManualSubmission" class="twikiCurrentTopicLink twikiAnchorLink">manually</a> to the batch system. If that succeeds, make sure that the BLAHP knows where your binaries are located by setting the <code>&lt;batch system&gt;_binpath</code> in <code>/etc/blah.config</code>.</p>
</li> <li> <p><b>If you see failures in the Gridmanager log  during queries for job status:</b> Query the resultant job with your batch system tools from the CE. If you can, the BLAHP uses scripts to query for status in <code>/usr/libexec/blahp/&lt;batch system&gt;_status.sh</code> (e.g., <code>/usr/libexec/blahp/lsf_status.sh</code>) that take the argument <code>batch system/YYYMMDD/job ID</code> (e.g., <code>lsf/20141008/65053</code>). Run the appropriate "status" script for your batch system and upon success, you should see the following output:</p>   <pre class="screen">[ BatchjobId = "894862"; JobStatus = 4; ExitCode = 0; WorkerNode = "atl-prod08" ]</pre>   If the script fails, <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#OsgSupport" class="twikiCurrentTopicLink twikiAnchorLink">request help</a> from the OSG.
</li></ol> 
<p />
<a name="ManualSubmission"></a>
<h4><a name="Idle_jobs_on_CE_Make_sure_the_un"></a> Idle jobs on CE: Make sure the underlying batch system can run jobs </h4>
<p />
HTCondor CE communicates directly with an HTCondor batch system schedd, so if jobs are not running, examine the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#SchedLog" class="twikiCurrentTopicLink twikiAnchorLink">schedd log</a> and diagnose the problem from there. For other batch systems, the BLAHP is used to submit jobs using your batch system’s job submission binaries, whose location is specified in <code>/etc/blah.config</code>.
<p />
<strong>Procedure</strong> <ol>
<li> Manually create and submit a simple job (e.g., <code>sleep</code>)
</li> <li> Check for errors in the submission itself
</li> <li> Watch the job in the batch system queue (e.g., using <code>condor_q</code>)
</li> <li> If the job does not run, check for errors on the batch system
</li></ol> 
<p />
<strong>Next actions</strong>
<p />
If the underlying batch system does not run a simple manual job, it will probably not run a job coming from HTCondor CE. Once you can run simple manual jobs on your batch system, try submitting to the HTCondor CE again.
<p />
<h4><a name="Idle_jobs_on_CE_Verify_ability_t"></a> Idle jobs on CE: Verify ability to change permissions on key files </h4>
<p />
HTCondor CE needs the ability to write and chown files in its <code>spool</code> directory and if it cannot, jobs will not run at all. Spool permission errors can appear in the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#SchedLog" class="twikiCurrentTopicLink twikiAnchorLink">SchedLog</a> and the <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#JobRouterLog" class="twikiCurrentTopicLink twikiAnchorLink">JobRouterLog</a>.
<p />
<strong>Sample failure</strong>
<p />
<pre class="file">09/17/14 14:45:42 Error: Unable to chown '/var/lib/condor-ce/spool/1/0/cluster1.proc0.subproc0/env' from 12345 to 54321</pre>
<p />
<strong>Next actions</strong>
<p /> <ol>
<li> <p>As root, try to change ownership of the file or directory in question. If the file does not exist, a parent directory may have improper permissions.</p>
</li> <li> <p>If using a shared file system, verify that root squash is turned off. For NFS, this is turned off by setting the following in <code>/etc/exports</code>:</p>       <pre class="screen">no_root_squash</pre>
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Known_Issues"></a> Known Issues </span></h2>
<h3><a name="SUBMIT_EXPRS_are_not_applied_to"></a>  SUBMIT_EXPRS are not applied to jobs on the local HTCondor </h3>
<p />
If you are adding attributes to jobs submitted to your HTCondor pool with <code>SUBMIT_EXPRS</code>, these will <em>not</em> be applied to jobs that are entering your pool from the HTCondor CE. To get around this, you will want to add the attributes to your <a href="/bin/view/Documentation/Release3/PrototypeTroubleshootingGuide#JobRoutes" class="twikiCurrentTopicLink twikiAnchorLink">job routes</a>. If the CE is the only entry point for jobs into your pool, you can get rid of <code>SUBMIT_EXPRS</code> on your backend. Otherwise, you will have to maintain your list of attributes both in your list of routes and in your <code>SUBMIT_EXPRS</code>.
<p />
<a name="OsgSupport"></a>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Further_Help_with_HTCondor_CE"></a> Further Help with HTCondor CE </span></h2>
<p />
<h3><a name="Requesting_help_from_OSG"></a> Requesting help from OSG </h3>
<p />
If you are still experiencing issues after using this document, please let us know!
<p /> <ol>
<li> <p>Gather basic HTCondor CE and related information (versions, relevant configuration, problem description, etc.)</p>
</li> <li> <p>Gather system information:</p>       <pre class="screen">osg-system-profiler &gt; ~/osg-system-profiler-<span style="background-color: #D1CAF2;">YYYYMMDD</span>.txt</pre>
</li> <li> <p>Submit a <a href="https://ticket.grid.iu.edu/submit" target="_top">ticket</a> or send an e-mail to <a href="mailto&#58;goc&#64;opensciencegrid&#46;org">goc&#64;opensciencegrid.org</a></p> <ul>
<li> Describe issue and expected or desired behavior
</li> <li> Include basic HTCondor CE and related information
</li> <li> Attach the osg-system-profiler output
</li></ul> 
</li></ol> </div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>PrototypeTroubleshootingGuide</span> <br />    
Topic revision: r1 - 12 Jan 2015 - 20:25:05 - <a href="/bin/view/Main/TimCartwright" class="twikiLink">TimCartwright</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />