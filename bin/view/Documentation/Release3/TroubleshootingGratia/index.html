<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> TroubleshootingGratia &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/TroubleshootingGratia?_T=16 Feb 2017" type="application/x-wiki" title="edit TroubleshootingGratia" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/TroubleshootingGratia"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<h1><a name="Troubleshooting_Gratia_Accountin"></a>  Troubleshooting Gratia Accounting </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#1_About_this_document">1  About this document</a>
</li> <li> <a href="?cover=print#2_How_to_get_Help">2  How to get Help?</a>
</li> <li> <a href="?cover=print#3_Gratia_The_big_picture">3 Gratia: The big picture</a>
</li> <li> <a href="?cover=print#4_Overall_process_of_how_Gratia">4  Overall process of how Gratia probes work</a> <ul>
<li> <a href="?cover=print#4_1_Cron">4.1  Cron</a>
</li> <li> <a href="?cover=print#4_2_Uploading_data">4.2  Uploading data</a>
</li></ul> 
</li> <li> <a href="?cover=print#5_Configuring_Gratia">5  Configuring Gratia</a>
</li> <li> <a href="?cover=print#6_Common_Gratia_Problems">6  Common Gratia Problems</a> <ul>
<li> <a href="?cover=print#6_1_Are_the_Gratia_cron_jobs_run">6.1  Are the Gratia cron jobs running?</a>
</li> <li> <a href="?cover=print#6_2_Have_you_configured_the_reso">6.2  Have you configured the resource names correctly?</a>
</li> <li> <a href="?cover=print#6_3_Did_the_site_name_change">6.3  Did the site name change?</a>
</li> <li> <a href="?cover=print#6_4_Is_a_site_reporting_data">6.4  Is a site reporting data?</a>
</li> <li> <a href="?cover=print#6_5_Not_collecting_Condor_accoun">6.5  Not collecting Condor accounting data</a>
</li> <li> <a href="?cover=print#6_6_Reporting_old_Condor_data">6.6  Reporting old Condor data</a>
</li> <li> <a href="?cover=print#6_7_Gratia_log_files_bad_Gratia">6.7  Gratia log files: bad Gratia hostname</a>
</li> <li> <a href="?cover=print#6_8_Recovering_from_bad_Gratia_h">6.8  Recovering from bad Gratia hostname</a> <ul>
<li> <a href="?cover=print#6_8_1_Correct_the_hostname">6.8.1  Correct the hostname</a>
</li> <li> <a href="?cover=print#6_8_2_Run_one_job">6.8.2  Run one job</a>
</li> <li> <a href="?cover=print#6_8_3_Restore_the_individual_Gra">6.8.3  Restore the individual Gratia records</a>
</li> <li> <a href="?cover=print#6_8_4_Restore_compressed_Gratia">6.8.4  Restore compressed Gratia records</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#7_Appendix_Important_Gratia_file">7 Appendix: Important Gratia files</a>
</li> <li> <a href="?cover=print#8_References">8  References</a>
</li> <li> <a href="?cover=print#9_Comments">9  Comments</a>
</li></ul> 
</div>
<p />
<h1><a name="1_About_this_document"></a> 1  About this document </h1>
This document will help you troubleshoot problems with the Gratia Accounting, particularly with problems in collecting and reporting accounting information to the central OSG accounting service. See also other documents recommended in the Reference section below.
<p />
This document follows the general OSG documentation conventions: <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3TroubleshootingGratia1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Click to expand document conventions...</span></a> </span> <span id="twistyIdDocumentation/Release3TroubleshootingGratia1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3TroubleshootingGratia1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
on    
on    
</div></div> <!--/twistyPlugin-->
<p />
<h1><a name="2_How_to_get_Help"></a> 2  How to get Help? </h1>
To get assistance please use our <a href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink">Help Procedure</a>. 
<p />
<h1><a name="3_Gratia_The_big_picture"></a> 3  Gratia: The big picture </h1>
<p />
Gratia is software used in OSG to gather accounting information. The information is collected from individual resources at a site, such as a Compute Element or a Storage Element. The program that collects the data is called a "Gratia probe". The information is transfered to a Gratia server. Most sites will choose to send the accounting data to the central OSG Gratia server, but you can also use a Gratia server at your site (which can send forward the data to the central OSG Gratia server). Here is a diagram:
<p />
<img src="/twiki/pub/Documentation/Release3/TroubleshootingGratia/gratia-basics.png" alt="gratia-basics.png" />    
<p />
These are the definitions of the major elements in the above figure.
<p /> <ul>
<li> <strong>Gratia probe</strong>: A piece of software that collects accounting data from the computer on which it's running, and transmits it to a Gratia server.
</li> <li> <strong>Gratia server</strong>: A server that collects Gratia accounting data from one or more sites and can share it with users via a web page. 
</li> <li> <strong>Reporter</strong>: A web service running on the Gratia server. Users can connect to the reporter via a web browser to explore the Gratia data.
</li> <li> <strong>Collector</strong>: A web service running on the Gratia server that collects data from one or more Gratia probes. Users do not directly interact with the collector.
</li></ul> 
<p />
You can see the OSG's Gratia reports at <a href="http://gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/" target="_top">the central OSG Gratia server</a>.
<p />
You can see a fancier version of the Gratia data at <a href="http://display.grid.iu.edu/" target="_top">display.grid.iu.edu</a>. This is <strong>not</strong> running a Gratia collector, but is a separate service. 
<p />
<h1><a name="4_Overall_process_of_how_Gratia"></a> 4  Overall process of how Gratia probes work </h1>
<p />
By and large, the Gratia probes share this common process for uploading data to a Gratia server. 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_1_Cron"></a> 4.1  Cron </span></h2>
Probes are periodically run as cron jobs, but different probes will run at different intervals. The cron jobs will always run and you should not remove them. You can find them in <code>/etc/cron.d</code>.
<p />
However, the cron jobs will only do anything if you have enabled them. You enable them via an init script. For example, to enable them:
<p />
<pre class="rootscreen">
[root@client ~]$ service gratia-probes-cron start
Enabling gratia probes cron:                               [  <font color="#008000">OK</font>  ]
</pre>
<p />
To disable them:
<pre class="rootscreen">
[root@client ~]$ service gratia-probes-cron stop
Disabling gratia probes cron:                               [  <font color="#008000">OK</font>  ]
</pre>
<p />
You also need to enable individual probes, usually via <code>osg-configure</code>. See below for more information on that.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="4_2_Uploading_data"></a> 4.2  Uploading data </span></h2>
<p />
When the cron jobs are enabled and run, the go through the following process, with minor changes between different Gratia probes:
<p /> <ol>
<li> The probe is invoked. It reads its configuration from <code>/etc/gratia/<font color="#ff0000">PROBE-NAME</font>/ProbeConfig</code>.
</li> <li> It collects the accounting information from the underlying system. For example, the Condor probe will read it from the <code>PER_JOB_HISTORY_DIR</code>, which is usually <code>/var/lib/gratia/data</code>.
</li> <li> It transforms the data into Gratia records and saves them into <code>/var/lib/gratia/tmp/gratiafiles/</code>
</li> <li> When there are sufficient Gratia records, or when sufficient time has passed, it uploads sets of records in batches to the Gratia server, then removes them from the <code>gratiafiles</code> directory.
</li> <li> All progress is logged to <code>/var/log/gratia</code>.
</li> <li> If there are failures in uploading the files to the Gratia server <ol>
<li> Files are not removed from <code>gratiafiles</code> until they are successfully uploaded.
</li> <li> Errors are logged to log files in <code>/var/log/gratia</code>.
</li> <li> The uploads will be tried again later.
</li> <li> <font color="#ff0000"> TO DO: In some cases, failed transfers get moved somewhere else. No details, [todo] ask Brian</font>
</li></ol> 
</li></ol> 
<p />
<h1><a name="5_Configuring_Gratia"></a> 5  Configuring Gratia </h1>
<p />
In normal cases, <code>osg-configure</code> does the editing of the probe configuration files, at least on the CE. The configuration is found in <code>/etc/osg/config.d/30-gratia.ini</code> and <a href="/bin/view/Documentation/Release3/IniConfigurationOptions#Gratia" class="twikiAnchorLink">documented elsewhere</a>. 
<p />
If there are problems or special configuration, you might need to edit the Gratia configuration files yourself. Each probe has a separate configuration file found in <code>/etc/gratia/<font color="#ff0000">PROBE-NAME</font>/ProbeConfig</code>. 
<p />
The ProbeConfig files have many details. A few options that you might need to edit are shown before. This is <strong>not</strong> a complete file, but only shows a subset of the options.
<p />
<pre class="file">
&lt;ProbeConfiguration 

    CollectorHost="gratia-osg-itb.opensciencegrid.org:80"
    SSLHost="gratia-osg-itb.opensciencegrid.org:80"
    SSLRegistrationHost="gratia-osg-itb.opensciencegrid.org:80"

    ProbeName="condor:fermicloud084.fnal.gov"
    SiteName="WISC_OSG_EDU"
    EnableProbe="1"
/>
</pre>
<p />
The options you see here are:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Option</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comments</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> CollectorHost </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The Gratia server this probe reports to </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> SSLHost </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> The Gratia server this probe reports to </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> SSLRegistrationHost </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The Gratia server this probe reports to </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> ProbeName </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> The unique name for this probe. Note that it includes the probe type and the host name </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> SiteName </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The name of your site, as registered in OIM. If your site must be registered in OIM </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> EnableProbe </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> The probe will only run if this is "1" </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Again, there are many more options in this file. Most of the time you won't need to touch them.
<p />
<h1><a name="6_Common_Gratia_Problems"></a> 6  Common Gratia Problems </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_1_Are_the_Gratia_cron_jobs_run"></a> 6.1  Are the Gratia cron jobs running? </span></h2>
You should make sure the Gratia cron jobs are running. The simplest way is with the <code>service</code> command:
<p />
<pre class="rootscreen">
[root@client ~]$ /sbin/service gratia-probes-cron status
gratia probes cron is enabled.
</pre>
<p />
If it is not enabled, enable it as described above.
<p />
A future release of Gratia will provide status on each of the individual probes, but right now this only ensures that the basic cron job is running. In the meantime, you can check if the individual Gratia probes are enabled. To do this, look at the <code>EnableProbe</code> option in the <code>ProbeConfig</code> file, as described above. A quick command to do this is shown here. Note that the Condor and GridFTP Transfer probes are enabled while the glexec probe is disabled:
<p />
<pre class="rootscreen">
[root@client ~]$ cd /etc/gratia
[root@client ~]$ grep -r EnableProbe *
condor/ProbeConfig:    EnableProbe="1"
glexec/ProbeConfig:    EnableProbe="0"
gridftp-transfer/ProbeConfig:    EnableProbe="1"
</pre>
<p />
If you see no log files in <code>/var/log/gratia</code> you may have an error in the probe configuration file. Run manually the test for your probe (check <code>/etc/cron.d/gratia-probe-condor.cron</code>), e.g. <code>/usr/share/gratia/common/cron_check&nbsp; /etc/gratia/condor/ProbeConfig</code>. If there is an error you may get a suggestion on where it is, e.g.:
<pre class="rootscreen">
[root@client ~]$ /usr/share/gratia/common/cron_check  /etc/gratia/condor/ProbeConfig
Parse error in /etc/gratia/condor/ProbeConfig: not well-formed (invalid token): line 21, column 4
</pre>
Correct the error and restart gratia.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_2_Have_you_configured_the_reso"></a> 6.2  Have you configured the resource names correctly? </span></h2>
Do the names of your resources match the names in OIM? 
<p />
For example, from the SE portion of the <code>/etc/osg/config.d/30-gip.ini</code>:
<p />
<pre class="file">
;===================================================================
;                             SE
;===================================================================

; For each storage element, add a new SE section.
; Each SE name must be unique for the entire grid, so make sure to not
; pick anything generic like "MAIN".  Each SE section must start with
; the words "SE", and cannot be named "CHANGEME".

; There are two main configuration types; one for dCache, one for BestMan

; Don't forget to change the section name!  One section per SE at the site.
[<font color="#ff0000">YOUR_SE_NAME</font>]

; The first part of this section shows options which are mandatory for all SEs.
; dCache and BestMan-specific portions are shown afterward.

; Set to False to turn off this SE
enabled = True

; Name of the SE; set to be the same as the OIM registered name
name = <font color="#ff0000">YOUR_SE_NAME</font>
</pre>
<p />
Do those names match the names that you registered with OIM? If not, edit the names, and rerun "osg-configure -c". 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_3_Did_the_site_name_change"></a> 6.3  Did the site name change? </span></h2>
Was the site previously reporting data, but the site name (not host name, but site name) changed? When the site name changes, you need to ask the Gratia operations team to update the name of your site at the Gratia collector. To do this:
<p /> <ol>
<li> Open a ticket at <a href="https://ticket.grid.iu.edu/goc/submit" target="_top">the GOC ticket web page</a>
</li> <li> Under "Optional Details", select "Software or Service"
</li> <li> After you do, another popup will appear. Select "Gratia (Collector Issue)"
</li> <li> Type a friendly email that asks the Gratia team to change your site name at the collector. Make sure to tell them the old name and the new name. 
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_4_Is_a_site_reporting_data"></a> 6.4  Is a site reporting data? </span></h2>
<p />
You can see if the OSG Gratia Server is getting data from a site by going to <a href="http://gratiaweb.grid.iu.edu/gratia/bysite/" target="_top">GratiaWeb</a>:
<p /> <ol>
<li> Specify the site name in Facility under Data Filter.
</li> <li> Click "Refine".
</li></ol> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_5_Not_collecting_Condor_accoun"></a> 6.5  Not collecting Condor accounting data </span></h2>
<p />
Condor must be configured to put information about each job into a special directory. Gratia will read and remove the files in order to collect the accounting information. 
<p />
The configuration variable is called <code>PER_JOB_HISTORY_DIR</code>. If you install the OSG RPM for Condor, the Gratia probe will extend its configuration by adding a file to <code>/etc/condor/config.d</code>, and will set this variable to <code>/var/lib/gratia/data</code>. If you are using a different installation method, you probably need to set the variable yourself. You can check if it's set by using <code>condor_config_val</code>, like this:
<p />
<pre class="screen">
[user@client ~]$ condor_config_val -v PER_JOB_HISTORY_DIR
PER_JOB_HISTORY_DIR: /var/lib/gratia/data
  Defined in '/etc/condor/config.d/99_gratia.conf', line 5.
</pre>
<p />
If you set this value, you need to restart condor:
<p />
<pre class="screen">
[root@client ~]$ condor_restart
Sent "Restart" command to local master
</pre>
<p />
Unlike many Condor settings, a <strong>condor_reconfig</strong> is not sufficient - you must restart!
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_6_Reporting_old_Condor_data"></a> 6.6  Reporting old Condor data </span></h2>
<p />
If you accidentally did not set <code>PER_JOB_HISTORY_DIR</code> (see above), Gratia will not publish accounting information about jobs. You can have Gratia read the Condor history file and publish data that way.  If you know the time period of the missing data, you should specify a start and end times. This reduces the load on the Gratia collector.  To do so:
<p />
<pre class="screen">
<font color="#0000ff">Preferred method using start and end times</font>
[root@client ~]$ /usr/share/gratia/condor/condor_meter --history --start-time="2014-06-01" --end-time="2014-06-02" --verbose
2014-06-03 10:00:36 CDT Gratia: RUNNING condor_meter MANUALLY using HTCondor history from 2014-06-01 to 2014-06-02
2014-06-03 10:00:36 CDT Gratia: RUNNING: condor_history -l -constraint '((JobCurrentStartDate > 1401598800) && (JobCurrentStartDate < 1401685200))'
2014-06-03 10:00:49 CDT Gratia: condor_meter --history: Usage records submitted: 399
2014-06-03 10:00:49 CDT Gratia: condor_meter --history: Usage records found: 400
2014-06-03 10:00:49 CDT Gratia: RUNNING condor_meter MANUALLY Finished

 <font color="#0000ff"> or if you need to go back to the beginning of time</font>
[root@client ~]$ /usr/share/gratia/condor/condor_meter --history --verbose
2014-06-03 10:06:19 CDT Gratia: RUNNING condor_meter MANUALLY using all HTCondor history
2014-06-03 10:06:19 CDT Gratia: RUNNING: condor_history -l
2014-06-03 10:11:38 CDT Gratia: condor_meter --history: Usage records submitted: 13026
2014-06-03 10:11:38 CDT Gratia: condor_meter --history: Usage records found: 13027
2014-06-03 10:11:38 CDT Gratia: RUNNING condor_meter MANUALLY Finished
</pre>
<p />
Not much is printed to the screen, but you can see progress in the Gratia log file:
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3TroubleshootingGratia2show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Click to show a log file processing the Condor history file...</span></a> </span> <span id="twistyIdDocumentation/Release3TroubleshootingGratia2hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide Full Output</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3TroubleshootingGratia2toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">
<pre class="file">
13:35:28 CDT Gratia: Initializing Gratia with /etc/gratia/condor/ProbeConfig
13:35:28 CDT Gratia: Creating a ProbeDetails record 2012-04-04T18:35:28Z
13:35:28 CDT Gratia: ***********************************************************
13:35:28 CDT Gratia: OK - Handshake added to bundle (1/100)
13:35:28 CDT Gratia: ***********************************************************
13:35:28 CDT Gratia: List of backup directories: [u'/var/lib/gratia/tmp']
13:35:28 CDT Gratia: Reprocessing response: OK - Reprocessing 0 record(s) uploaded, 0 bundled, 0 failed
13:35:28 CDT Gratia: After reprocessing: 0 in outbox 0 in staged outbox 0 tar files
13:35:28 CDT Gratia: Creating a UsageRecord 2012-04-04T18:35:28Z
...
13:35:29 CDT Gratia: Processing bundle file: 
13:35:29 CDT Gratia: Processing bundle file: /var/lib/gratia/tmp/gratiafiles/
    subdir.condor_fermicloud084.fnal.gov_gratia-osg-itb.opensciencegrid.org_80/
    outbox/r.18425.condor_fermicloud084.fnal.gov_gratia-osg-itb.opensciencegrid.org_80.gratia.xml__BSuXo18428
...
13:35:29 CDT Gratia: ***********************************************************
13:35:29 CDT Gratia: Removing log files older than 31 days from /var/log/gratia
13:35:29 CDT Gratia: /var/log/gratia uses 0.035% and there is 73% free
13:35:29 CDT Gratia: Removing incomplete data files older than 31 days from /var/lib/gratia/data/
13:35:29 CDT Gratia: /var/lib/gratia/data uses 0% and there is 73% free
13:35:29 CDT Gratia: End of execution summary: new records sent successfully: 37
</pre>
</div></div> <!--/twistyPlugin-->
<p />
<strong><em>Note</em></strong>  that Condor rotates history files, so you can only report what Condor has kept. Controlling the Condor history is documented in the Condor manual. In particular, see the options for <a href="http://research.cs.wisc.edu/condor/manual/v7.6/3_3Configuration.html#param:MaxHistoryLog" target="_top">MAX_HISTORY_LOG</a> and <a href="http://research.cs.wisc.edu/condor/manual/v7.6/3_3Configuration.html#param:MaxHistoryRotations" target="_top">MAX_HISTORY_ROTATIONS</a>.
<p />
<strong><em>Also Note</em></strong> that it is a very good idea to turn off the <em>gratia_probes_cron</em> service until this is complete.  Remember to turn it back on when finished.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_7_Gratia_log_files_bad_Gratia"></a> 6.7  Gratia log files: bad Gratia hostname </span></h2>
<p />
This is an example problem where the configuration was bad: there was an incorrect hostname for the Gratia server. The problem is clearly visible in the Gratia log file, which is located in <code>cd /var/log/gratia/</code>. There is one log file per day, labeled by the date:
<p />
<pre class="file">
[root@client ~]$ cd /var/log/gratia/
[root@client ~]$ cat 2012-04-03.log 
...
<font color="#ff0000">You can see that Gratia is using the correct configuration file:</font>
15:06:55 CDT Gratia: Using config file: /etc/gratia/condor/ProbeConfig

<font color="#ff0000">Here Gratia is removing a file from the Condor PER_JOB_HISTORY_DIR and creating a Gratia accounting record for it</font>
15:06:55 CDT Gratia: Creating a UsageRecord 2012-04-03T20:06:55Z
15:06:55 CDT Gratia: Registering transient input file: /var/lib/gratia/data/history.37.0
15:06:55 CDT Gratia: ***********************************************************
15:06:55 CDT Gratia: Saved record to /var/lib/gratia/tmp/gratiafiles/
    subdir.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80/
    outbox/r.30604.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80.gratia.xml__wfIgi30606
15:06:55 CDT Gratia: Deleting transient input file: /var/lib/gratia/data/history.37.0

<font color="#ff0000">Later, Gratia failed to connect to the server due to a bad hostname</font>
15:06:55 CDT Gratia: Failed to send xml to web service due to an error of type "socket.gaierror": (-2, 'Name or service not known')
...
15:06:55 CDT Gratia: Response indicates failure, the following files will not be deleted:
15:06:55 CDT Gratia:    /var/lib/gratia/tmp/gratiafiles/
    subdir.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80/
    outbox/r.30604.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80.gratia.xml__wfIgi30606
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="6_8_Recovering_from_bad_Gratia_h"></a> 6.8  Recovering from bad Gratia hostname </span></h2>
<p />
If you accidentally had a bad Gratia hostname, you probably want to recover your Gratia data. This can be done, though it's not simple. There are a few things you need to do. But first, you need to understand exactly where Gratia stores files. 
<p />
When a Gratia extracts accounting information, it creates one file per record and stores it in a directory. The directory is a long name that contains the type of the probe (such as <code>condor</code>), the name of the host you're running on, and the name of the Gratia host you're sending the information to. For simplicity, lets call that name <em>probe-records</em>, but you'll see what it really looks like below. Within this directory, you'll see some subdirectories:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37"> Directory </font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Purpose</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> /var/lib/gratia/tmp/grataifiles/<font color="#ff0000">probe-records</font>/outbox </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The usual location for the accounting records </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> /var/lib/gratia/tmp/grataifiles/<font color="#ff0000">probe-records</font>/staged/store </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> An overflow location when there are problems </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
When you recover old records, you need to: <ol>
<li> Before trying to transfer any old records, check if they are more than three months old. If they are, the server will not accept them. This is a policy that is enforced strictly by the admins.
</li> <li> Move files from the outbox of the incorrect <em>probe-records</em> directory into the outbox of the correctly named <em>probe-records</em> directory.
</li> <li> Move tarred and compressed files from the staged/store of the incorrect <em>probe-records</em> directory into the staged/store of the correctly named <em>probe-records</em> directory. Then you uncompress them and remove the compressed version.
</li></ol> 
<p />
In the examples below, the hostname for gratia was "accidentally" spelled backwards. Instead of <code>gratia-osg-itb.opensciencegrid.org</code>, it was <code>aitarg-osg-itb.opensciencegrid.org</code>. 
<p />
<h3><a name="6_8_1_Correct_the_hostname"></a> 6.8.1  Correct the hostname </h3>
First you need to fix the hostname. For a CE, you can edit <code>/etc/osg/config.d/30-gratia.ini</code> and rerun <code>osg-configure -c</code>. In other installations, you have to edit the appropriate <code>ProbeConfig</code> file. 
<p />
<h3><a name="6_8_2_Run_one_job"></a> 6.8.2  Run one job </h3>
Next, submit a job via Globus to your batch system, then run the appropriate Gratia probe (or wait for it to run via cron). This will create the properly named directories on your disk. For example:
<p />
As a user: <pre class="screen">
[user@client ~]$ globus-job-run fermicloud084.fnal.gov/jobmanager-condor /bin/hostname
</pre>
<p />
As root (adjust for your batch system): <pre class="rootscreen">
[root@client ~]$ /share/gratia/condor/condor_meter 
</pre>
<p />
<h3><a name="6_8_3_Restore_the_individual_Gra"></a> 6.8.3  Restore the individual Gratia records </h3>
First, find the Gratia records that can be easily uploaded. They are located in a a directory with an unwieldly name that includes your hostname and the incorrect name of the Gratia host. You can see the directory name in the Gratia log: the misspelled name is noted in red below, but <em>it will be different on your computer</em>. 
<p />
<pre class="file">
[user@client ~]$ less /var/log/gratia/2012-04-06
...
16:04:29 CDT Gratia: Response indicates failure, the following files will not be deleted:
16:04:29 CDT Gratia:    /var/lib/gratia/tmp/gratiafiles/
    subdir.condor_fermicloud084.fnal.gov_<font color="#ff0000">aitarg</font>-osg-itb.opensciencegrid.org_80/
    outbox/r.916.condor_fermicloud084.fnal.gov_aitarg-osg-itb.opensciencegrid.org_80.gratia.xml__JDlHbNb918
</pre>
<p />
(The filename was wrapped for legibility.)
<p />
You can simply copy these to the correct directory. Wait for the Gratia cron job to run, or force it to run.
<p />
<pre class="rootscreen">
[root@client ~]$ cd /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_<font color="#ff0000">aitarg</font>-osg-itb.opensciencegrid.org_80/outbox/.
[root@client ~]$ mv * /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_<font color="#ff0000">gratia</font>-osg-itb.opensciencegrid.org_80/outbox/.
</pre>
<p />
<h3><a name="6_8_4_Restore_compressed_Gratia"></a> 6.8.4  Restore compressed Gratia records </h3>
If this has been a persistent problem, you might have many records. After a while, they are put into a compressed files in another directory. You can move those files, then uncompress them. This is a long name: note that the path ends in "staged/store" instead of "outbox" as above:
<p />
<pre class="rootscreen">
<font color="#ff0000"># Find the old files</font>
[root@client ~]$ cd /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_<font color="#ff0000">aitarg</font>-osg-itb.opensciencegrid.org_80/staged/store

<font color="#ff0000"># Move them to the correct directory</font>
[root@client ~]$ mv tz* /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_<font color="#ff0000">gratia</font>-osg-itb.opensciencegrid.org_80/outbox/.
[root@client ~]$ cd !$

<font color="#ff0000"># For each tz file:</font>
[root@client ~]$ tar xf tz.1223.... [name shortened for legibility]
[root@client ~]$ rm tz.1223....
</pre>
<p />
When you've done this, you can re-run the Gratia probe by hand, or wait for it to run via cron.
<p />
<h1><a name="7_Appendix_Important_Gratia_file"></a> 7  Appendix: Important Gratia files </h1>
<p />
This document cannot cover all the errors you might experience. If you need to look for more data, you can look at log files for the various services on your CE. 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">File</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Purpose</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>/var/log/gratia/<font color="#ff0000">DATE</font>.log</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Log file that records information about processing and uploading of Gratia accounting data </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>/var/log/gratia/gridftpTransfer.log</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Log file specific to the Gratia GridFTP probe </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>/var/lib/gratia/data</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Location for Condor and PBS job data before being processed by Gratia<br>Condor's <code>PER_JOB_HISTORY_DIR</code> should be set to this location </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>/var/lib/gratia/tmp/gratiafiles</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Location for temporary Gratia data as it is being processed, usually empty.<br>If you have files that are more than 30 minutes old in this directory, there may be a problem </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>/etc/gratia/<font color="#ff0000">PROBE-NAME</font>/ProbeConfig</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> Configuration for Gratia probes, one per probe type</br>Normally you don't need to edit this </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
The most common RPMs you will see are:
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">RPM</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/TroubleshootingGratia?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Purpose</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>gratia-probe-common</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> Code shared between all Graita probes </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>gratia-probe-gram</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> Code needed to make Gratia probes with with GRAM </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>gratia-probe-condor</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The probe that tracks Condor usage via GRAM </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>gratia-probe-pbs-lsf</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol"> The probe that tracks PBS and/or LSF usage via GRAM </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> <code>gratia-probe-gridftp-transfer</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLastCol"> The probe that tracks transfers done with GridFTP </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>gratia-probe-metric</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLastCol twikiLast"> The probe that reports RSV results. (Not exactly accounting, but it re-uses Gratia) </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h1><a name="8_References"></a> 8  References </h1>
<p /> <ul>
<li> <a href="http://gratia-osg-prod-reports.opensciencegrid.org/gratia-reporting/" target="_top">Gratia Job Accounting Data</a> (Production)
</li> <li> <a href="http://gratia-osg-itb-reports.opensciencegrid.org/gratia-reporting/" target="_top">Gratia Job Accounting Data</a> (ITB)
</li> <li> <a href="http://gratia-osg-transfer-reports.opensciencegrid.org/gratia-reporting/" target="_top">Gratia Transfer Accounting Data</a>
</li> <li> You can get daily emails with OSG accounting reports in them. Join the <a href="/bin/view/Accounting/ContactUs" class="twikiLink">osg-accounting-info</a> mailing list. 
</li> <li> <a href="/bin/view/Accounting/WebHome" class="twikiLink">The Gratia group's web page</a>
</li> <li> <a href="/bin/view/Documentation/Release3/NavTechGratia" class="twikiLink">Gratia's technical documentation index</a>
</li></ul> 
<p />
<h1><a name="9_Comments"></a> 9  Comments </h1>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/TroubleshootingGratia" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">MarcoMambelli<a href="/bin/edit/Documentation/Release3/MarcoMambelli?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="MarcoMambelli (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = User
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/Release3/EndUser?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Installation  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 0
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">TanyaLevshina<a href="/bin/edit/Documentation/Release3/TanyaLevshina?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="TanyaLevshina (this topic does not yet exist; you can create it)">?</a></span> 	 Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">TanyaLevshina<a href="/bin/edit/Documentation/Release3/TanyaLevshina?topicparent=Documentation/Release3.TroubleshootingGratia" rel="nofollow" title="TanyaLevshina (this topic does not yet exist; you can create it)">?</a></span> 	 Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/Release3/NavTechGratia" class="twikiLink">NavTechGratia</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>TroubleshootingGratia</span> <br />    
Topic revision: r23 - 06 Dec 2016 - 18:12:45 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />