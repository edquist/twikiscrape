<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> InstallGratiaService &lt; Documentation/Release3 &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/Release3/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/Release3/InstallGratiaService?_T=16 Feb 2017" type="application/x-wiki" title="edit InstallGratiaService" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/Release3/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFFFF;
	}
	.patternBookView {
		border-color:#FFFFFF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TABLEPLUGIN_table5--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
</style>
<!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--TABLEPLUGIN_twikiAttachmentsTable--><style type="text/css" media="all">
.twikiTable#twikiAttachmentsTable td {border-style:solid none;}
.twikiTable#twikiAttachmentsTable th {border-style:solid none;}
.twikiTable#twikiAttachmentsTable td {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable th {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable td {vertical-align:top;}
.twikiTable#twikiAttachmentsTable th {background-color:#eceef2;}
.twikiTable#twikiAttachmentsTable th.twikiSortedCol {background-color:#e0e3e9;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#f2f3f6;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol0 {text-align:center;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol1 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol2 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol3 {text-align:right;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol4 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol5 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol6 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol7 {text-align:center;}
</style></head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> 
<p />
<h1><a name="Install_Gratia_Service"></a>  Install Gratia Service </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#About_this_Document"> About this Document</a>
</li> <li> <a href="?cover=print#Introduction"> Introduction</a>
</li> <li> <a href="?cover=print#Requirements"> Requirements</a> <ul>
<li> <a href="?cover=print#Host_and_OS"> Host and OS</a>
</li> <li> <a href="?cover=print#Users"> Users</a>
</li> <li> <a href="?cover=print#Certificates"> Certificates</a>
</li> <li> <a href="?cover=print#Networking"> Networking</a>
</li></ul> 
</li> <li> <a href="?cover=print#Installation_Procedure"> Installation Procedure</a> <ul>
<li> <a href="?cover=print#Install_the_Yum_Repositories_req"> Install the Yum Repositories required by OSG</a> <ul>
<li> <a href="?cover=print#Install_EPEL"> Install EPEL</a>
</li> <li> <a href="?cover=print#Install_the_Yum_priorities_packa"> Install the Yum priorities package</a>
</li> <li> <a href="?cover=print#Install_OSG_Repositories"> Install OSG Repositories</a>
</li></ul> 
</li> <li> <a href="?cover=print#Install_the_CA_Certificates_A_qu"> Install the CA Certificates: A quick guide</a>
</li> <li> <a href="?cover=print#Install_the_Gratia_Service"> Install the Gratia Service</a>
</li> <li> <a href="?cover=print#Install_MySQL"> Install MySQL</a>
</li></ul> 
</li> <li> <a href="?cover=print#Configure"> Configure</a> <ul>
<li> <a href="?cover=print#Configure_the_Gratia_Service"> Configure the Gratia Service </a> <ul>
<li> <a href="?cover=print#Authentication_to_the_MySQL_data"> Authentication to the MySQL database</a>
</li> <li> <a href="?cover=print#Connection_to_the_MySQL_database"> Connection to the MySQL database and other properties</a>
</li></ul> 
</li> <li> <a href="?cover=print#Configure_the_MySQL_Database"> Configure the MySQL Database </a> <ul>
<li> <a href="?cover=print#Initial_MySQL_configuration"> Initial MySQL configuration</a>
</li> <li> <a href="?cover=print#Grant_admin_access_to_an_existin"> Grant admin access to an existing MySQL installation</a>
</li> <li> <a href="?cover=print#Creating_the_database_users_and"> Creating the database users and installing the Gratia database (running install-database)</a>
</li> <li> <a href="?cover=print#Asking_database_administrators_t"> Asking database administrators to create the database users and install the Gratia database (using install-database -p)</a>
</li></ul> 
</li> <li> <a href="?cover=print#Special_note_for_MySQL_5_6_users"> Special note for MySQL 5.6 users</a>
</li> <li> <a href="?cover=print#Configure_Tomcat_options"> Configure Tomcat options</a>
</li></ul> 
</li> <li> <a href="?cover=print#Services"> Services </a> <ul>
<li> <a href="?cover=print#Starting_and_Enabling_Services"> Starting and Enabling Services</a>
</li> <li> <a href="?cover=print#Stopping_and_Disabling_Services"> Stopping and Disabling Services</a>
</li></ul> 
</li> <li> <a href="?cover=print#Test"> Test</a>
</li> <li> <a href="?cover=print#Upgrade"> Upgrade</a>
</li> <li> <a href="?cover=print#Troubleshooting"> Troubleshooting</a> <ul>
<li> <a href="?cover=print#Useful_configuration_and_log_fil"> Useful configuration and log files</a>
</li></ul> 
</li> <li> <a href="?cover=print#How_to_get_Help"> How to get Help?</a>
</li> <li> <a href="?cover=print#References"> References</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</div>
<p />
<!-- conventions used in this document <ul>
<li> Local UCL_HOST = gratia
</li> <li> Local UCL_USER = user
</li> <li> Local UCL_DOMAIN = opensciencegrid.org
</li> <li> Set TWISTY_OPTS_DETAILED = mode="div" showlink="Show Detailed Output" hidelink="Hide" showimgleft="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" hideimgleft="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" remember="on" start="hide" 
</li></ul> 
-->
<p />
<form name="EDITTHIS" action="/bin/edit/Documentation/Release3/InstallGratiaService" method="get"><input type="submit" value="Edit section" alt="Edit this section" title="Click to edit this section" class="twikiButton" style="font-size:0.75em;"><input type="hidden" value="1487213122" name="t"></form>
<p />
<h1><a name="About_this_Document"></a> About this Document </h1>
This document is for Site System Administrators. 
Here we describe how to install and configure Gratia Service on your Linux machine. When you install Gratia Service as described here, you get all parts: <a href="http://tomcat.apache.org/" target="_top">Apache Tomcat</a> and Gratia webservice. 
In order to run, the Gratia Service requires also a <a href="http://www.mysql.com/" target="_top">MySQL</a> database. Versions older than 1.16 were installing on the same host also the MySQL server as dependency of the Gratia Service. Version 1.16 and newer will let the administrator install and configure the MySQL database. This can be running on the same machine as the Gratia Service or on a different one.
<p />
The installation section will give you a bare-bones installation. In order to use Gratia Service you need to go through the configuration: run install-database to create gratia database and configure_tomcat to configure Tomcat  and Gratia. The other sections help in troubleshooting and knowing what is running.
<p />
This is not a complete reference. If you need to administer a Gratia Service, please check the Gratia Admin guide coming with the software (these are Web pages served by the Gratia Service itself, e.g. <code><b>/gratia-administration/replication-howto.jsp</b></code>).
<p />
In this document, EL5 will refer to Red Hat Enterprise Linux 5-based OSes, including CentOS 5 and Scientific Linux 5; EL6 will refer to Red Hat Enterprise Linux 6-based OSes, including CentOS 6 and Scientific Linux 6. 
<p />
<p />
<h1><a name="Introduction"></a> Introduction </h1>
<p />
The <a href="https://twiki.grid.iu.edu/bin/view/Accounting/WebHome" target="_top">Grid Accounting Services</a> collects information from the various probes and write to the database.These data could be regarding batch jobs, grid transfers, storage allocation, site availability tests or process accounting (at current survey).
<p />
The Gratia Service installation has two main parts:  <ul>
<li> MySQL database which is a persistent repository for Gratia data, 
</li> <li> Gratia Web UI/services to collect and display accounting information. This requires Apache Tomcat.
</li></ul> 
<p />
<p />
<p />
<p />
<h1><a name="Requirements"></a> Requirements </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Host_and_OS"></a> Host and OS </span></h2> <ul>
<li> A host to install the Gratia Service (Pristine node)
</li> <li> OS is Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>). Currently most of our testing has been done on Scientific Linux 6.
</li> <li> Time must be synchronized. You can find more in the <a href="/bin/view/Documentation/Release3/HostTimeSetup" class="twikiLink">time synchronization document</a>.
</li> <li> Root access
</li> <li> A MySQL database. This can be on the same host of Gratia Service or on a separate host
</li></ul> 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Users"></a> Users </span></h2>
The Gratia service installation will create a new tomcat user unless it is already created.
<p />
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">User</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Default uid</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <code>tomcat</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> 91 </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Runs tomcat5 (EL5)/tomcat6 (EL6) and owns gratia configurations files and certificates. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Note that if uids 91 is already taken but not used for the tomcat user, you will experience errors. <a href="https://twiki.grid.iu.edu/bin/view/Documentation/Release3/KnownProblems#Reserved_user_ids_especially_for" target="_top">Details...</a>
<p />
Note that the following database users (defined in the MySQL database, not in Unix) are used below: <ul>
<li> DB_ROOT_USERNAME: user with admin privileges on the Gratia databases (by default <code>root</code>)
</li> <li> DB_USER_USERNAME: user that can read and write to the Gratia databases
</li> <li> reporting user: user with read only access to the Gratia databases (set to <code>reader</code> in the configuration suggested)
</li></ul> 
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Certificates"></a> Certificates </span></h2>
You will need one service certificate. <a href="/bin/view/Trash/ReleaseDocumentationGetHostServiceCertificates" class="twikiLink">Here</a> are instructions to request a host certificate. Optional, you can use the host certificate instead as explained in the <a href="/bin/view/Documentation/Release3/InstallGratiaService#Configure_Tomcat_options" class="twikiCurrentTopicLink twikiAnchorLink">section below</a>.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Certificate</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">User that owns certificate</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Path to certificate</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Tomcat service certificate </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> <code>tomcat</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <code>/etc/grid-security/http/httpcert.pem</code> <br> <code>/etc/grid-security/http/httpkey.pem</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Networking"></a> Networking </span></h2>
<a name="FirewallReq"></a>
<p />
<h3><a name="Gratia_Service"></a>  Gratia Service </h3>
These firewall requirements are for the host running the Gratia Service using Apache Tomcat. 
<p />
<p />
<!-- No variables can be defined because will not be visible in the including document
Need this because double quotes used in Y in TWikiPreferences or ICON cause problems (replaced with single ones) <ul>
<li> Set ALTy = <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' />    
</li></ul> 
ALTy replacend inline whenever the icon is needed.
-->
For more details on overall Firewall configuration, please see our <a href="/bin/view/Documentation/Release3/FirewallInformation" class="twikiLink">Firewall documentation</a>.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
               <table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">              
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Service Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Protocol</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Port Number</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=3;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Inbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=4;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Outbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=5;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>              
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="/bin/view/Documentation/GlossaryV#DefsGratia" class="twikiAnchorLink">Gratia Service</a> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1 twikiLast"> tcp </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol2 twikiLast"> 8443 </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol3 twikiLast"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLast"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> Gratia Service (which runs within Tomcat) web interface. It must be available to all the probes reporting data, all servers receiving or sending replication data and the database </td>
		</tr>              </table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<h3><a name="MySQL_Database"></a> MySQL Database </h3>
The firewall requirement for the database:
<p />
<p />
<!-- No variables can be defined because will not be visible in the including document
Need this because double quotes used in Y in TWikiPreferences or ICON cause problems (replaced with single ones) <ul>
<li> Set ALTy = <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' />    
</li></ul> 
ALTy replacend inline whenever the icon is needed.
-->
For more details on overall Firewall configuration, please see our <a href="/bin/view/Documentation/Release3/FirewallInformation" class="twikiLink">Firewall documentation</a>.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
                <table cellspacing="0" id="table4" cellpadding="0" class="twikiTable" rules="cols" border="1">               
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Service Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Protocol</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Port Number</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=3;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Inbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=4;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Outbound</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol5 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=5;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>               
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <a href="http://www.mysql.com/" target="_top">MySQL</a> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1 twikiLast"> tcp/udp </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol2 twikiLast"> 3306 </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol3 twikiLast"> <img src='/twiki/pub/TWiki/TWikiDocGraphics/choice-yes.gif' alt='Y' title='Y' width='16' height='16' border='0' /> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol4 twikiLast"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol5 twikiLastCol twikiLast"> 3306 is the default MySQL port. Can be configured to run on a different port. Can also communicate via a named pipe if the client is on the same host as the server </td>
		</tr>               </table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  The port of the database can change as long as the database and the Gratia Service use the same port and it may also be avoided if service and database are on the same host and use a named pipe to communicate.
</dd></dl> 
<p />
<p />
<!-- ---++!! Additional Requirements 
-->
<p />
<p />
<p />
<p />
<p />
<h1><a name="Installation_Procedure"></a> Installation Procedure </h1>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_Yum_Repositories_req"></a> Install the Yum Repositories required by OSG </span></h2>
<p />
The OSG RPMs currently support Red Hat Enterprise Linux 5, 6, 7, and variants (see <a href="/bin/view/Documentation/Release3/SupportedOperatingSystems" class="twikiLink">details...</a>).
<p />
OSG RPMs are distributed via the OSG yum repositories. Some packages depend on packages distributed via the <a href="http://fedoraproject.org/wiki/EPEL" target="_top">EPEL</a> repositories. So both repositories must be enabled.
<p />
<h3><a name="Install_EPEL"></a> Install EPEL </h3>
<p /> <ul>
<li> Install the EPEL repository, if not already present. <strong>Note:</strong> This enables EPEL by default. Choose the right version to match your OS version. <pre class="rootscreen">
<font color="#ff0000"># EPEL 5 (For RHEL 5, CentOS 5, and SL 5) </font>
[root@gratia ~]$ curl -O https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm
[root@gratia ~]$ rpm -Uvh epel-release-latest-5.noarch.rpm
<font color="#ff0000"># EPEL 6 (For RHEL 6, CentOS 6, and SL 6) </font>
[root@gratia ~]$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm
<font color="#ff0000"># EPEL 7 (For RHEL 7, CentOS 7, and SL 7) </font>
[root@gratia ~]$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</pre>       <strong>WARNING</strong>: if you have your own mirror or configuration of the EPEL repository, you <strong>MUST</strong> verify that the OSG repository has a better yum priority than EPEL (<a href="/bin/view/Documentation/Release3/InstallBestPractices#YumPriorities" class="twikiAnchorLink">details</a>). Otherwise, you will have strange dependency resolution (<em>depsolving</em>) issues.
</li></ul> 
<p />
<h3><a name="Install_the_Yum_priorities_packa"></a> Install the Yum priorities package </h3>
<p />
For packages that exist in both OSG and EPEL repositories, it is important to prefer the OSG ones or else OSG software installs may fail. Installing the Yum priorities package enables the repository priority system to work.
<p /> <ol>
<li> <p>Choose the correct package name based on your operating system’s major version:</p> <ul>
<li> For EL&nbsp;5 systems, use <code>yum-priorities</code>
</li> <li> For EL&nbsp;6 and EL&nbsp;7 systems, use <code>yum-plugin-priorities</code>
</li></ul> 
</li> <li> <p>Install the Yum priorities package:</p>       <pre class="rootscreen">[root@gratia ~]$ yum install <em>PACKAGE</em></pre>       <p>Replace <em><code>PACKAGE</code></em> with the package name from the previous step.</p>
</li> <li> <p>Ensure that <code>/etc/yum.conf</code> has the following line in the <code>[main]</code> section (particularly when using ROCKS), thereby enabling Yum plugins, including the priorities one:</p>       <pre class="file">plugins=1</pre>       <strong>NOTE</strong>: If you do not have a required key you can force the installation using <code>--nogpgcheck</code>; e.g., <code>yum install --nogpgcheck yum-priorities</code>.
</li></ol> 
<p />
<h3><a name="Install_OSG_Repositories"></a> Install OSG Repositories </h3>
<p />
<!--   1. <p>First, determine which OSG series you will be installing; 3.1 or 3.2.  The OSG 3.1 and 3.2 series are each well tested and contain the entire OSG software stack.  The 3.1 series continues to support all packages that have been released throughout its lifetime, while the 3.2 series contains newer versions of software (including HTCondor, Hadoop, glideinWMS) and removes support for obsolete packages (including CEMonitor).  Initially, most packages are identical between 3.1 and 3.2, but we expect the new series to diverge over time. <br/><br/>Note that some packages (eg, Hadoop) do not inter-operate between 3.1 and 3.2, and therefore require all nodes to use the same series.</p> -->
<p />
<ol>
   <li>
      <p>If you are upgrading from OSG 3.1 (or 3.2) to OSG 3.2 (or 3.3), remove the old OSG repository definition files and clean the Yum cache:</p>         <pre class="rootscreen">[root@gratia ~]$ yum clean all
[root@gratia ~]$ rpm -e osg-release</pre>       <p>This step ensures that local changes to <code>*.repo</code> files will not block the installation of the new OSG repositories. After this step, <code>*.repo</code> files that have been changed will exist in <code>/etc/yum.repos.d/</code> with the <code>*.rpmsave</code> extension. After installing the new OSG repositories (the next step) you may want to apply any changes made in the <code>*.rpmsave</code> files to the new <code>*.repo</code> files.</p>
   </li>
   <li>
      <p>Install the OSG repositories using one of the following methods depending on your EL version:</p>      <ol>
         <li>
            <p>For EL versions greater than EL5, install the files directly from <code>repo.grid.iu.edu</code>:</p>            <pre class="rootscreen">[root@gratia ~]$ rpm -Uvh <font color="#ff0000">URL</font></pre>            <p>Where <code><font color="#ff0000">URL</font></code> is one of the following:</p> <table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table5" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Series</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">EL6 URL (for RHEL 6, CentOS 6, or SL 6)</font></a> </th>
			<th bgcolor="#d8dde4" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=5;up=0#sorted_table" title="Sort by this column"><font color="#252b37">EL7 URL (for RHEL 7, CentOS 7, or SL 7)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <font color="#252b37">OSG 3.2</font> </th>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol1"> <code>https://repo.grid.iu.edu/osg/3.2/osg-3.2-el6-release-latest.rpm</code> </td>
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol2 twikiLastCol"> N/A </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <font color="#252b37">OSG 3.3</font> </th>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol1 twikiLast"> <code>https://repo.grid.iu.edu/osg/3.3/osg-3.3-el6-release-latest.rpm</code> </td>
			<td bgcolor="#f2f3f6" align="center" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <code>https://repo.grid.iu.edu/osg/3.3/osg-3.3-el7-release-latest.rpm</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
         </li>
         <li>
            <p>For EL5, download the repo file and install it using the following:</p>
            <pre class="rootscreen">[root@gratia ~]$ curl -O https://repo.grid.iu.edu/osg/3.2/osg-3.2-el5-release-latest.rpm
[root@gratia ~]$ rpm -Uvh osg-3.2-el5-release-latest.rpm</pre>
         </li>
      </ol>
   </li>
</ol>
<p />
For more details, please see our <a href="/bin/view/Documentation/Release3/YumRepositories" class="twikiLink">yum repository documentation</a>.
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_CA_Certificates_A_qu"></a> Install the CA Certificates: A quick guide </span></h2>
<p />
You must perform one of the following <code>yum</code> commands below to select this host's CA certificates.
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table6" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=6;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Set of CAs</font></a> </th>
			<th bgcolor="#d8dde4" align="right" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=6;up=0#sorted_table" title="Sort by this column"><font color="#252b37">CA certs name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=6;up=0#sorted_table" title="Sort by this column"><font color="#252b37"> Installation command (as root)</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> OSG </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> osg-ca-certs </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> <code>yum install osg-ca-certs</code> <font color="#ff0000"><b>Recommended</b></font> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> IGTF </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> igtf-ca-certs </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> <code>yum install igtf-ca-certs</code> </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> None* </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> empty-ca-certs </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> <code>yum install empty-ca-certs --enablerepo=osg-empty</code> </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Any** </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> Any </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> <code>yum install osg-ca-scripts</code> </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
* The <code>empty-ca-certs</code> RPM indicates you will be manually installing the CA certificates on the node. <br/>
** The <code>osg-ca-scripts</code> RPM provides a cron script that automatically downloads CA updates, and requires further configuration. <br/>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  If you use options 1 or 2, then you will need to run "yum update" in order to get the latest version of CAs when they are released. With option 4 a cron service is provided which will always download the updated CA package for you.
</dd></dl> 
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  If you use services like Apache's httpd you must restart them after each update of the CA certificates, otherwise they will continue to use the old version of the CA certificates.
</dd></dl> 
For more details and options, please see our <a href="/bin/view/Documentation/Release3/InstallCertAuth" class="twikiLink">CA certificates documentation</a>. 
<p />
<p />
<!-- fetch-crl should be installed automatically as dependency -->
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_the_Gratia_Service"></a> Install the Gratia Service </span></h2>
Install Gratia Service:<pre class="rootscreen">
[root@gratia ~]$ yum install gratia-service
</pre>  <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3InstallGratiaService1show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Detailed Output</span></a> </span> <span id="twistyIdDocumentation/Release3InstallGratiaService1hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3InstallGratiaService1toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">   <pre class="rootscreen">
[root@gratia ~]$ yum install gratia-service
Loaded plugins: kernel-module, priorities
osg                                                                                                                                 | 1.9 kB     00:00     
osg/primary_db                                                                                                                      | 1.0 MB     00:00     
1290 packages excluded due to repository priority protections
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package gratia-service.noarch 0:1.12-2.osg.el5 set to be updated
epel/filelists_db                                                                                                                   | 5.4 MB     00:01     
fermi-base/filelists                                                                                                                |  21 kB     00:00     
fermi-security/filelists_db                                                                                                         | 9.4 MB     00:00     
osg/filelists_db                                                                                                                    | 566 kB     00:00     
sl-base/filelists_db                                                                                                                | 3.6 MB     00:00     
--> Processing Dependency: /usr/share/java/xml-commons-apis.jar for package: gratia-service
--> Processing Dependency: emi-trustmanager-tomcat for package: gratia-service
--> Processing Dependency: grid-certificates for package: gratia-service
--> Processing Dependency: mysql-server for package: gratia-service
--> Processing Dependency: vo-client-edgmkgridmap for package: gratia-service
--> Running transaction check
---> Package emi-trustmanager-tomcat.noarch 0:3.0.0-3 set to be updated
--> Processing Dependency: emi-trustmanager for package: emi-trustmanager-tomcat
--> Processing Dependency: bouncycastle for package: emi-trustmanager-tomcat
---> Package mysql-server.x86_64 0:5.0.95-1.el5_7.1 set to be updated
--> Processing Dependency: mysql = 5.0.95-1.el5_7.1 for package: mysql-server
--> Processing Dependency: libmysqlclient.so.15(libmysqlclient_15)(64bit) for package: mysql-server
--> Processing Dependency: perl-DBD-MySQL for package: mysql-server
--> Processing Dependency: perl(DBI) for package: mysql-server
--> Processing Dependency: perl-DBI for package: mysql-server
--> Processing Dependency: libmysqlclient_r.so.15(libmysqlclient_15)(64bit) for package: mysql-server
--> Processing Dependency: libmysqlclient_r.so.15()(64bit) for package: mysql-server
--> Processing Dependency: libmysqlclient.so.15()(64bit) for package: mysql-server
---> Package osg-ca-certs.noarch 0:1.27-2.osg.el5 set to be updated
---> Package vo-client-edgmkgridmap.noarch 0:41-3.osg.el5 set to be updated
---> Package xml-commons-apis.x86_64 0:1.3.02-0.b2.7jpp.10 set to be updated
--> Running transaction check
---> Package bouncycastle.x86_64 0:1.45-6.el5 set to be updated
--> Processing Dependency: java >= 1:1.6 for package: bouncycastle
---> Package emi-trustmanager.noarch 0:3.0.3-1.sl5 set to be updated
---> Package mysql.x86_64 0:5.0.95-1.el5_7.1 set to be updated
---> Package perl-DBD-MySQL.x86_64 0:3.0007-2.el5 set to be updated
---> Package perl-DBI.x86_64 0:1.52-2.el5 set to be updated
--> Running transaction check
---> Package java-1.6.0-openjdk.x86_64 1:1.6.0.0-1.25.1.10.6.el5_8 set to be updated
--> Processing Dependency: tzdata-java for package: java-1.6.0-openjdk
--> Processing Dependency: libgif.so.4()(64bit) for package: java-1.6.0-openjdk
--> Running transaction check
---> Package giflib.x86_64 0:4.1.3-7.1.el5_3.1 set to be updated
---> Package tzdata-java.x86_64 0:2012b-3.el5 set to be updated
--> Finished Dependency Resolution
Beginning Kernel Module Plugin
Finished Kernel Module Plugin

Dependencies Resolved

===========================================================================================================================================================
 Package                                   Arch                     Version                                         Repository                        Size
===========================================================================================================================================================
Installing:
 gratia-service                            noarch                   1.12-2.osg.el5                                  osg                               75 M
Installing for dependencies:
 bouncycastle                              x86_64                   1.45-6.el5                                      epel                             4.0 M
 emi-trustmanager                          noarch                   3.0.3-1.sl5                                     osg                              271 k
 emi-trustmanager-tomcat                   noarch                   3.0.0-3                                         osg                               30 k
 giflib                                    x86_64                   4.1.3-7.1.el5_3.1                               sl-base                           39 k
 java-1.6.0-openjdk                        x86_64                   1:1.6.0.0-1.25.1.10.6.el5_8                     fermi-security                    36 M
 mysql                                     x86_64                   5.0.95-1.el5_7.1                                fermi-security                   4.9 M
 mysql-server                              x86_64                   5.0.95-1.el5_7.1                                fermi-security                   9.9 M
 osg-ca-certs                              noarch                   1.27-2.osg.el5                                  osg                              281 k
 perl-DBD-MySQL                            x86_64                   3.0007-2.el5                                    sl-base                          147 k
 perl-DBI                                  x86_64                   1.52-2.el5                                      sl-base                          605 k
 tzdata-java                               x86_64                   2012b-3.el5                                     fermi-security                   181 k
 vo-client-edgmkgridmap                    noarch                   41-3.osg.el5                                    osg                              5.6 k
 xml-commons-apis                          x86_64                   1.3.02-0.b2.7jpp.10                             sl-base                          387 k

Transaction Summary
===========================================================================================================================================================
Install      14 Package(s)
Upgrade       0 Package(s)

Total download size: 132 M
Is this ok [y/N]: y
Downloading Packages:
(1/14): vo-client-edgmkgridmap-41-3.osg.el5.noarch.rpm                                                                              | 5.6 kB     00:00     
(2/14): emi-trustmanager-tomcat-3.0.0-3.noarch.rpm                                                                                  |  30 kB     00:00     
(3/14): giflib-4.1.3-7.1.el5_3.1.x86_64.rpm                                                                                         |  39 kB     00:00     
(4/14): perl-DBD-MySQL-3.0007-2.el5.x86_64.rpm                                                                                      | 147 kB     00:00     
(5/14): tzdata-java-2012b-3.el5.x86_64.rpm                                                                                          | 181 kB     00:00     
(6/14): emi-trustmanager-3.0.3-1.sl5.noarch.rpm                                                                                     | 271 kB     00:00     
(7/14): osg-ca-certs-1.27-2.osg.el5.noarch.rpm                                                                                      | 281 kB     00:00     
(8/14): xml-commons-apis-1.3.02-0.b2.7jpp.10.x86_64.rpm                                                                             | 387 kB     00:00     
(9/14): perl-DBI-1.52-2.el5.x86_64.rpm                                                                                              | 605 kB     00:00     
(10/14): bouncycastle-1.45-6.el5.x86_64.rpm                                                                                         | 4.0 MB     00:00     
(11/14): mysql-5.0.95-1.el5_7.1.x86_64.rpm                                                                                          | 4.9 MB     00:00     
(12/14): mysql-server-5.0.95-1.el5_7.1.x86_64.rpm                                                                                   | 9.9 MB     00:00     
(13/14): java-1.6.0-openjdk-1.6.0.0-1.25.1.10.6.el5_8.x86_64.rpm                                                                    |  36 MB     00:02     
(14/14): gratia-service-1.12-2.osg.el5.noarch.rpm                                                                                   |  75 MB     00:07     
-----------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                       11 MB/s | 132 MB     00:11     
warning: rpmts_HdrFromFdno: Header V3 DSA signature: NOKEY, key ID 217521f6
epel/gpgkey                                                                                                                         | 1.7 kB     00:00     
Importing GPG key 0x217521F6 "Fedora EPEL <epel@fedoraproject.org>" from /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL
Is this ok [y/N]: y
warning: rpmts_HdrFromFdno: Header V3 DSA signature: NOKEY, key ID 824b8603
osg/gpgkey                                                                                                                          | 1.7 kB     00:00     
Importing GPG key 0x824B8603 "OSG Software Team (RPM Signing Key for Koji Packages) <vdt-support@opensciencegrid.org>" from /etc/pki/rpm-gpg/RPM-GPG-KEY-OSG
Is this ok [y/N]: y
Running rpm_check_debug
Running Transaction Test
Finished Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing     : perl-DBI                                                                                                                           1/14 
  Installing     : mysql                                                                                                                              2/14 
  Installing     : perl-DBD-MySQL                                                                                                                     3/14 
  Installing     : mysql-server                                                                                                                       4/14 
  Installing     : giflib                                                                                                                             5/14 
  Installing     : xml-commons-apis                                                                                                                   6/14 
  Installing     : emi-trustmanager                                                                                                                   7/14 
  Installing     : vo-client-edgmkgridmap                                                                                                             8/14 
  Installing     : tzdata-java                                                                                                                        9/14 
  Installing     : java-1.6.0-openjdk                                                                                                                10/14 
  Installing     : bouncycastle                                                                                                                      11/14 
  Installing     : emi-trustmanager-tomcat                                                                                                           12/14 
  Installing     : osg-ca-certs                                                                                                                      13/14 
  Installing     : gratia-service                                                                                                                    14/14 

Installed:
  gratia-service.noarch 0:1.12-2.osg.el5                                                                                                                   

Dependency Installed:
  bouncycastle.x86_64 0:1.45-6.el5                 emi-trustmanager.noarch 0:3.0.3-1.sl5                    emi-trustmanager-tomcat.noarch 0:3.0.0-3       
  giflib.x86_64 0:4.1.3-7.1.el5_3.1                java-1.6.0-openjdk.x86_64 1:1.6.0.0-1.25.1.10.6.el5_8    mysql.x86_64 0:5.0.95-1.el5_7.1                
  mysql-server.x86_64 0:5.0.95-1.el5_7.1           osg-ca-certs.noarch 0:1.27-2.osg.el5                     perl-DBD-MySQL.x86_64 0:3.0007-2.el5           
  perl-DBI.x86_64 0:1.52-2.el5                     tzdata-java.x86_64 0:2012b-3.el5                         vo-client-edgmkgridmap.noarch 0:41-3.osg.el5   
  xml-commons-apis.x86_64 0:1.3.02-0.b2.7jpp.10   

Complete!
</pre> </div></div> <!--/twistyPlugin-->
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Install_MySQL"></a> Install MySQL </span></h2>
<strong>This is not needed for Gratia 1.15 or earlier versions.</strong>
<p />
The Gratia service uses a MySQL database.
With Gratia 1.16 (or later) the database can reside on a different host and/or be managed separately.
<p />
You have the following three options: <ol>
<li> If you want the MySQL server on the same host you have to install it explicitly (it is no more a RPM dependency of Gratia).  You can have your favorite instructions to install MySQL or use a database running on a different host.  Here are some simple instructions to Install a MySQL server database (it will install automatically also the client):<pre class="rootscreen">
[root@gratia ~]$ yum install mysql-server
</pre>  <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3InstallGratiaService2show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Detailed Output</span></a> </span> <span id="twistyIdDocumentation/Release3InstallGratiaService2hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3InstallGratiaService2toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">   <pre class="rootscreen">
[root@gratia ~]$ yum install mysql-server
Loaded plugins: priorities, security
323 packages excluded due to repository priority protections
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package mysql-server.x86_64 0:5.1.73-3.el6_5 will be installed
--> Processing Dependency: mysql = 5.1.73-3.el6_5 for package: mysql-server-5.1.73-3.el6_5.x86_64
--> Processing Dependency: perl-DBI for package: mysql-server-5.1.73-3.el6_5.x86_64
--> Processing Dependency: perl-DBD-MySQL for package: mysql-server-5.1.73-3.el6_5.x86_64
--> Processing Dependency: perl(DBI) for package: mysql-server-5.1.73-3.el6_5.x86_64
--> Running transaction check
---> Package mysql.x86_64 0:5.1.73-3.el6_5 will be installed
---> Package perl-DBD-MySQL.x86_64 0:4.013-3.el6 will be installed
---> Package perl-DBI.x86_64 0:1.609-4.el6 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

====================================================================================================================================================================================================
 Package                                          Arch                                     Version                                             Repository                                      Size
====================================================================================================================================================================================================
Installing:
 mysql-server                                     x86_64                                   5.1.73-3.el6_5                                      slf-security                                   8.6 M
Installing for dependencies:
 mysql                                            x86_64                                   5.1.73-3.el6_5                                      slf-security                                   893 k
 perl-DBD-MySQL                                   x86_64                                   4.013-3.el6                                         slf                                            133 k
 perl-DBI                                         x86_64                                   1.609-4.el6                                         slf                                            704 k

Transaction Summary
====================================================================================================================================================================================================
Install       4 Package(s)

Total download size: 10 M
Installed size: 29 M
Is this ok [y/N]: y
Downloading Packages:
(1/4): mysql-5.1.73-3.el6_5.x86_64.rpm                                                                                                                                       | 893 kB     00:00
(2/4): mysql-server-5.1.73-3.el6_5.x86_64.rpm                                                                                                                                | 8.6 MB     00:00
(3/4): perl-DBD-MySQL-4.013-3.el6.x86_64.rpm                                                                                                                                 | 133 kB     00:00
(4/4): perl-DBI-1.609-4.el6.x86_64.rpm                                                                                                                                       | 704 kB     00:00
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                                                36 MB/s |  10 MB     00:00
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing : perl-DBI-1.609-4.el6.x86_64                                                                                                                                                      1/4
  Installing : perl-DBD-MySQL-4.013-3.el6.x86_64                                                                                                                                                2/4
  Installing : mysql-5.1.73-3.el6_5.x86_64                                                                                                                                                      3/4
  Installing : mysql-server-5.1.73-3.el6_5.x86_64                                                                                                                                               4/4
  Verifying  : perl-DBD-MySQL-4.013-3.el6.x86_64                                                                                                                                                1/4
  Verifying  : mysql-server-5.1.73-3.el6_5.x86_64                                                                                                                                               2/4
  Verifying  : mysql-5.1.73-3.el6_5.x86_64                                                                                                                                                      3/4
  Verifying  : perl-DBI-1.609-4.el6.x86_64                                                                                                                                                      4/4

Installed:
  mysql-server.x86_64 0:5.1.73-3.el6_5

Dependency Installed:
  mysql.x86_64 0:5.1.73-3.el6_5                                  perl-DBD-MySQL.x86_64 0:4.013-3.el6                                  perl-DBI.x86_64 0:1.609-4.el6

Complete!
</pre> </div></div> <!--/twistyPlugin-->
</li> <li> If the MySQL server is on a different host you can install it on that host using the command above. And if you want to run the <code>install-database</code> script to setup the database for you (it can run also remotely - see below for how), then: <ul>
<li> You need admin access on the MySQL server to create users and the database
</li> <li> Install the MySQL client on this Gratia service host:<pre class="rootscreen">
[root@gratia ~]$ yum install mysql
</pre>  <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3InstallGratiaService3show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Detailed Output</span></a> </span> <span id="twistyIdDocumentation/Release3InstallGratiaService3hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3InstallGratiaService3toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">   <pre class="rootscreen">
[root@gratia ~]$ yum install mysql
Loaded plugins: priorities, security
324 packages excluded due to repository priority protections
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package mysql.x86_64 0:5.1.73-3.el6_5 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================================================================================================================
 Package                               Arch                                   Version                                        Repository                                    Size
================================================================================================================================================================================
Installing:
 mysql                                 x86_64                                 5.1.73-3.el6_5                                 slf-security                                 893 k

Transaction Summary
================================================================================================================================================================================
Install       1 Package(s)

Total download size: 893 k
Installed size: 2.4 M
Is this ok [y/N]: y
Downloading Packages:
mysql-5.1.73-3.el6_5.x86_64.rpm                                                                                                                          | 893 kB     00:00
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing : mysql-5.1.73-3.el6_5.x86_64                                                                                                                                  1/1
  Verifying  : mysql-5.1.73-3.el6_5.x86_64                                                                                                                                  1/1

Installed:
  mysql.x86_64 0:5.1.73-3.el6_5

Complete!
</pre> </div></div> <!--/twistyPlugin-->
</li></ul> 
</li> <li> If the MySQL server is administered independently, then no MySQL installation is needed. Remember to run <code>install-database -p</code> to print the commands to setup the Gratia database and users. And give the commands to the database administrators. 
</li></ol> 
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<h1><a name="Configure"></a> Configure </h1>
The Gratia Service is a webservice running inside Tomcat and using a MySQL database.
Starting with v1.16, the <code>gratia-service</code> RPM Package no longer has <code>mysql-server</code> package as a dependency and the database may be installed on another machine. This should work also with earlier versions but is not officially supported. 
You have to configure all the Gratia Service, the MySQL database and Tomcat.
Your actions depend on the access to the database (full admin or limited), are almost the same if the database is on the same host or a different one.
<p />
To authenticate Gratia with the database we define some users and passwords (in <font color="#ff0000">RED</font> in the examples below). These must be consistent between Gratia and the database: <ul>
<li>  <font color="#ff0000">DB_ROOT_USERNAME</font> : e.g. <code>root</code> , user with admin privileges on the Gratia databases. This is used only during the initial setup to create the other users and the Gratia database. It is not used during normal operation.
</li> <li>  <font color="#ff0000">DB_ROOT_PASSWORD</font> : This is the password necessary to connect to MySQL as DB_ROOT_USERNAME, e.g. some_secret_password1. 
</li> <li>  <font color="#ff0000">DB_USER_USERNAME</font> : e.g. <code>gratia</code> , user with update (read and write) capability on the Gratia database, used by the Gratia Service for its normal operation.  
</li> <li>  <font color="#ff0000">DB_USER_PASSWORD</font> : This is the password necessary to connect to MySQL as DB_USER_USERNAME, e.g. some_secret_password2
</li> <li> There is also a user with read only access. We recommend not to change the default name (<code>reader</code>) and password for this user, because services like <code><b>gratia-reporting</b></code> use a user/password for read-only access to the database and count on the default values. If you change <code><b>service.reporting.user</b></code> and <code><b>service.reporting.password</b></code> pay attention in being consistent between the configuration, the database and the services using it.
</li></ul> 
<p />
<strong>If you have full administrative access</strong> to the database, then you can define the usernames and passwords in the Gratia configuration (see below) and and the script <code>install-database</code> will setup MySQL accordingly (including the passwords).
And <strong>if Gratia Service and MySQL are on the same host</strong>  and you set DB_ROOT_PASSWORD in the Gratia configuration but there is no password set for the MySQL installation, then the script will also set the password for the admin account.
<p />
<strong>If you have no administrative access</strong> to the database, then you must agree and coordinate these values with the database administrators. The script <code>install-database</code> can suggest the lines to pass to the database administrators.
<p />
Gratia pre 1.16 was installing a dedicated MySQL and had full admin privileges on it. <strong>If you have Gratia 1.15 or earlier, set up the values in Gratia (next section) and do not worry about the different MySQL options</strong>.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configure_the_Gratia_Service"></a> Configure the Gratia Service </span></h2>
Now configure in Gratia usernames/passwords and other options.
<p />
<h3><a name="Authentication_to_the_MySQL_data"></a> Authentication to the MySQL database </h3>
Gratia uses three different users when interacting with MySQL: the root or admin user, used only for the initial database setup and creation of the other users; the database user, to create tables and add and update data during operation; a reader user, able only to read the content, used also by Gratia reporting.
<p />
To authenticate with the database you need to enter the correct values in <code>/etc/gratia/services/service-authorization.properties</code>: <pre class="file">
service.mysql.rootuser=<font color="#ff0000">DB_ROOT_USERNAME</font>
service.mysql.rootpassword=<font color="#ff0000">DB_ROOT_PASSWORD</font>
service.mysql.user=<font color="#ff0000">DB_USER_USERNAME</font>
service.mysql.password=<font color="#ff0000">DB_USER_PASSWORD</font>
# Do not modify the following two lines:
service.reporting.user=reader
service.reporting.password=reader
</pre>
<p />
These values are used by gratia during its operation and for the initial setup via <code>install-database</code>.
See above for consistency requirements depending on the access to the database.
<p />
<h3><a name="Connection_to_the_MySQL_database"></a> Connection to the MySQL database and other properties </h3>
<p />
The file <code>etc/gratia/services/service-configuration.properties</code> contains the Gratia services related properties. You can leave most as they are. To connect to MySQL and to reach the Gratia Service you need to change the ones in <font color="#ff0000">RED</font> (and maybe the ones in BLUE) in the following snippet: <pre class="file">
service.mysql.url=jdbc:mysql://<font color="#ff0000">DBHOSTNAME</font>:<font color="#ff0000">DBPORT</font>/gratia
....
service.open.connection=http://<font color="#ff0000">HOSTNAME</font>:<font color="#0000ff">8880</font>
service.secure.connection=https://<font color="#ff0000">HOSTNAME</font>:<font color="#0000ff">8443</font>
</pre>
<p />
The <code><b>service.mysql.url</b></code> property specifies the access point to the MySql database for Gratia services. <ul>
<li> The <font color="#ff0000">DBHOSTNAME</font> this is the host name (FQDN) where the database is running. It can be specified also as the short name or as <code><b>localhost</b></code> if Gratia Service and MySQL are on the same node.
</li> <li> The <font color="#ff0000">DBPORT</font> normally <code><b>3306</b></code> (default MySql port) or the port used by the database, if changed in the <code><b>/etc/my.cnf</b></code> modified earlier.
</li></ul> 
<p />
The <code><b>service.open.connection</b></code> and <code><b>service.secure.connection</b></code> should be modified by replacing  <font color="#ff0000">HOSTNAME</font> with the fully qualified host name (FQDN) where the Gratia service is installed. These URLs are used by the probes and for data replication. You can modify open (8880) and secure (8443) ports as well. Keep in mind that if these are changed,  any Gratia probe will have to be configured accordingly so the information that is gathered by the probe could be sent  to the Gratia service.
<p />
You should also configure the <strong>administrative login to the Gratia Service</strong> at this time. 
The file to edit is <code><b>/etc/gratia/services/service-configuration.properties</b></code> and the instructions are typed as comment in the file itself.
Please read the detailed instructions in <code><b>/etc/gratia/services/service-configuration.properties</b></code> under the " <code><b># ##########&nbsp; Administrative login</b></code> " section.
<p />
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configure_the_MySQL_Database"></a> Configure the MySQL Database </span></h2>
Depending on the installation you may have different steps in the MySQL configuration: <ol>
<li> If you have a new dedicated installation you need the Initial MySQL configuration
</li> <li> You can grant admin access to the MySQL installation (to run <code>install-database</code> against it)
</li> <li> If you received or had already admin access to MySQL you can run <code>install-database</code> to create the users and install the gratia database
</li> <li> If you have only regular access then skip the previous 3 steps. You can use <code>install-database</code> to print the instructions to pass on to the database administrators to create the users and install the gratia database
</li></ol> 
<p />
<h3><a name="Initial_MySQL_configuration"></a> Initial MySQL configuration </h3>
If you installed MySQL (on the same host or on a different one) or installed Gratia Service v1.15 or earlier (that installed MySQL for you) then you need some initial configuration. By default it will be using port 3306 and will not have password for <code><b>root</b></code>. We recommend to: <ol>
<li> Change the initial configuration
</li> <li> Set a root password
</li></ol> 
<p />
It is recommended to replace  a default configuration file that is installed with mysqld server (<code><b>/etc/my.cnf</b></code>)  with <code><b>/usr/share/gratia/my-cnf.template</b></code>:
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3InstallGratiaService4show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show the template file</span></a> </span> <span id="twistyIdDocumentation/Release3InstallGratiaService4hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3InstallGratiaService4toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">   <pre class="file">
[mysqld]
datadir = /var/lib/mysql
socket =  /var/lib/mysql/mysql.sock
user = mysql
port = 3306

log_bin = /var/lib/mysql/mysql-bin
log =     /var/log/mysqld.log
log_bin_trust_function_creators = 1
expire_logs_days = 7
sync_binlog=1

innodb_file_per_table
innodb_data_home_dir = /var/lib/mysql
innodb_data_file_path = ibdata1:500M;ibdata2:10M:autoextend
innodb_log_group_home_dir = /var/lib/mysql
innodb_flush_log_at_trx_commit = 1
innodb_buffer_pool_size = 256M
innodb_additional_mem_pool_size = 20M
innodb_log_file_size = 64M
innodb_log_files_in_group = 2
innodb_log_buffer_size = 8M
innodb_lock_wait_timeout = 50
innodb_thread_concurrency = 2
# To prevent too large of innodb history list which affects inserts
innodb_max_purge_lag=50000



# Uncomment the following line for debugging purposes.
#log-warnings=2

# Default to using old password format for compatibility with mysql 3.x
# clients (those using the mysqlclient10 compatibility package).
old_passwords=1

# Disabling symbolic-links is recommended to prevent assorted security risks;
# to do so, uncomment this line:
# symbolic-links=0
</pre> </div></div> <!--/twistyPlugin-->
<p />
If you are planning to collect data from a very large number of probes you can use <code><b>/usr/share/gratia/my-cnf.large-site.template</b></code>. This configuration is used at Fermilab for the OSG collector that gathers data from all OSG sites.
<p />
In order to replace mysql configuration just copy the template selected to <code><b>/etc/my.cnf</b></code> (do a remote copy if Gratia service and the MySQL server are on different hosts): <pre class="rootscreen">
[root@gratia ~]$ cp /usr/share/gratia/my-cnf.template /etc/my.cnf
</pre>
<strong>Note</strong> The default mysqld port (3306) is used in this configuration file. If you prefer to use some other port you have to change it here before proceeding with any other actions and remember to use the same database port number in the Gratia Service configuration below.
<p />
You will need to start mysqld at this time: <pre class="rootscreen">
[root@gratia ~]$service mysqld start
</pre>
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>   If you use <code><b>my-cnf.large-site.template</b></code> , you may experience a false failure on the initial startup of the <code><b>mysqld server</b></code> .  This is because it takes a significant amount of time to allocate all the space required for a large database. The <code><b>mysqld</b></code> initd service does not know that and will think the startup has failed when it just hasn't finished.
</dd></dl> 
<p />
Now you can set the root password: <pre class="rootscreen">
[root@gratia ~]$ mysqladmin -u root password <font color="#ff0000">DB_ROOT_PASSWORD</font>
</pre>
<font color="#ff0000">DB_ROOT_PASSWORD</font> will be used below in the Gratia Service configuration.
<p />
<h3><a name="Grant_admin_access_to_an_existin"></a> Grant admin access to an existing MySQL installation </h3>
<strong>This is officially supported for Gratia Service 1.16 or newer (it may work also with earlier versions).</strong>
<p />
You can skip this section if DB_ROOT_USERNAME is "root" (the MySQL root user) and the database is local (on the same host as the Gratia service). 
<p />
Gratia Service can use an existing MySQL database, even running on a separate host and administered by some other people. You don't need root access to the database to run Gratia but you need admin access to create the database and the users used by Gratia.
If you can get admin access, the <code>install-database</code> script will do all the setup for you, otherwise you'll need the help of a database administrator (see item 4).
<p />
MySQL by default has a user "root" with admin privileges. If you can use the user "root" use its password as <font color="#ff0000">DB_ROOT_PASSWORD</font> in the Gratia configuration (see above). Remember to set DB_ROOT_USERNAME as root or to comment that line in the Gratia configuration.
If the database is on the same host as the Gratia server then you can skip this section because "root" connecting locally has already all privileges.
<p />
If you are using two different hosts or the admin user name is different, be consistent with DB_ROOT_USERNAME and DB_ROOT_PASSWORD used in the Gratia configuration and make sure that its privileges are set correctly. Someone with already admin privileges, e.g. a database administrator, someone connecting as root must run the following:
<pre class="rootscreen">
mysql> use mysql;
mysql> grant all privileges on      *.* to <font color="#ff0000">DB_ROOT_USERNAME</font>@<font color="#ff0000">GS_NODENAME</font> identified by <font color="#ff0000">DB_ROOT_PASSWORD</font>;
mysql> update user set Grant_priv="Y" where Host=<font color="#ff0000">GS_NODENAME</font> and User=<font color="#ff0000">DB_ROOT_USERNAME</font>;
mysql> flush privileges;
</pre>
Here: <ul>
<li> <font color="#ff0000">GS_NODENAME</font> is the host where the Gratia Service is running.
</li> <li> <font color="#ff0000">DB_ROOT_USERNAME</font> is the user with admin privileges on the Gratia databases. Can be and arbitrary name agreed between DBAs and you (the Gratia service administrator, normally <code>root</code>).
</li> <li> <font color="#ff0000">DB_ROOT_PASSWORD</font> : is the password of the user with admin privileges on the Gratia databases. Can be and arbitrary password agreed between DBAs and you.
</li></ul> 
<font color="#ff0000">DB_ROOT_USERNAME</font> and <font color="#ff0000">DB_ROOT_PASSWORD</font> will be used also below in the Gratia Service configuration, be consistent!
<p />
<strong>Remember to quote</strong> all the strings in the commands above, e.g. <code><b>grant all privileges on <strong>.</strong> to 'myuser'@'myhost' identified by 'mypassword';</b></code>
<p />
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/warning.gif" alt="ALERT!" title="ALERT!" width="16" height="16" border="0" />     <strong><font color="#ff0000"> WARNING! </font></strong> </dt><dd>  An empty password is an empty string but still must be mentioned on the line, as a quoted empty string, do not skip the "identified by..." part (<code><b>grant all privileges on <strong>.</strong> to 'myuser'@'myhost'</b></code> is an error). 
</dd></dl> 
<p />
<p />
<h3><a name="Creating_the_database_users_and"></a> Creating the database users and installing the Gratia database (running <code><b>install-database</b></code>) </h3>
To complete the MySQL configuration, you will need to run the <code><b>/usr/share/gratia/install-database</b></code> script that performs the following steps using the Gratia configuration modified above:
<!--   1. set <code><b>root</b></code> user password in the MySql database --> <ol>
<li> create the <code><b>gratia</b></code> database
</li> <li> create the Gratia users (for update and read access) in the MySql database and grant appropriate privileges for those users users
</li></ol> 
<p />
<pre class="rootscreen">
[root@gratia ~]$ /usr/share/gratia/install-database

Creating Gratia database based on the properties you updated in these files:
  /etc/gratia/services/service-configuration.properties
  /etc/gratia/services/service-authorization.properties
... validating MySql port being used
... port: 3306
... root password has not been set yet.
... creating the root password specified
... creating gratia database and updating privileges

Gratia database installation complete.
</pre>
<p />
<h3><a name="Asking_database_administrators_t"></a> Asking database administrators to create the database users and install the Gratia database (using <code><b>install-database -p</b></code>) </h3>
If you are using a database where you have no administrative access, run <code><b>/usr/share/gratia/install-database -p</b></code> to print the commands to give to the database administrators (it will use your Gratia configuration to print the right commands, with the corrects host name, user names and passwords). Running those commands will 
complete the Gratia database setup: <pre class="rootscreen">
[root@gratia ~]$ /usr/share/gratia/install-database -p
# Create the database and grant access from the Gratia Server host
CREATE database gratia CHARACTER SET latin1 COLLATE latin1_swedish_ci;
GRANT ALL PRIVILEGES ON gratia.* TO 'gratia'@'fermicloud000.fnal.gov'       IDENTIFIED BY '<font color="#ff0000">DB_USER_PASSWORD</font>';
GRANT SELECT,EXECUTE ON gratia.* TO 'reader'@'fermicloud000.fnal.gov'     IDENTIFIED BY '<font color="#ff0000">DB_READER_PASSWORD</font>';
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Special_note_for_MySQL_5_6_users"></a> Special note for MySQL 5.6 users </span></h2>
We have tested Gratia-Service against MySQL 5.0, 5.1 and 5.6.
The gratia database uses the <code>latin1</code> character set. 
<code>UTF-8</code>, default character set in MySQL 5.6, would cause a "Key length too large" error in Gratia.
If you are migrating an existing database created with an older MySQL you may loose the character set information for the BacklogStatisticsHouly and TableStatisticsHouly tables that may be recreated as UTF-8 tables. If this happens here is a recipe to solve the problem: <ol>
<li> Make sure your MySQL 5.6 is configured to use latin1 for Database, Server and System. Connection can use UTF-8, it will be converted automatically.
</li> <li> Stop the Gratia service
</li> <li> Run: <code>drop table {Backlog,Table}Statistics{Houly,Daily,Snapshots}</code>, to drop these 8 temporary tables
</li> <li> Restart the Gratia service: it will recreate these 8 tables
</li></ol> 
<p />
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Configure_Tomcat_options"></a> Configure Tomcat options </span></h2>
Make sure that you have the host,  and Tomcat service certificates/keys in the right directories and with the correct owners and permissions (<code>600</code> for key and <code>644</code> the certificate). <a href="/bin/view/Trash/ReleaseDocumentationGetHostServiceCertificates" class="twikiLink">Host certificate</a> is required and must be in <code>/etc/grid-security/hostcert.pem</code> and <code>hostkey.pem</code>. It is recommended to provide also service certificates for Tomcat. If you don't, here are the instructions to copy the host certificate/key and set the correct owner (permissions are preserved).  Note that if you did not previously have a  tomcat user on your system, they were added during the RPM install: <ol>
<li> Tomcat service is running as user <code><b>tomcat</b></code> and requires its service certificate and key in <code><b>/etc/grid-security/http</b></code>. To copy the host certificate/key for this service, you need to do the following:<pre class="rootscreen">
[root@gratia ~]$ cd /etc/grid-security
[root@gratia ~]$ mkdir /etc/grid-security/http
[root@gratia ~]$ cp hostcert.pem http/httpcert.pem
[root@gratia ~]$ cp hostkey.pem http/httpkey.pem
[root@gratia ~]$ chown -R tomcat:tomcat http
</pre>
</li> <li> Next, you will have to configure tomcat to enable gratia webservice and EMI trustmanager. You will have to run <code><b>/usr/share/gratia/configure_tomcat</b></code> script:<pre class="rootscreen">
[root@gratia ~]$ /usr/share/gratia/configure_tomcat
</pre> <div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentation/Release3InstallGratiaService5show" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show Detailed Output</span></a> </span> <span id="twistyIdDocumentation/Release3InstallGratiaService5hide" class="twistyRememberSetting twistyStartHide twistyTrigger twikiUnvisited twistyHidden twistyInited0"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentation/Release3InstallGratiaService5toggle" class="twistyRememberSetting twistyStartHide twistyContent twikiMakeHidden twistyInited0">   <pre class="rootscreen">
[root@gratia ~]$  /usr/share/gratia/configure_tomcat
====== Configuring Tomcat for gratia ====
--- Configuring Tomcat and server.xml ---
... executing: /var/lib/trustmanager-tomcat/configure.sh
Info: using default install root: /
Info: using default configuration file: //var/lib/trustmanager-tomcat/config.properties
Info: using default configuration directory: //var/lib/trustmanager-tomcat
Info: you can clean up using the following commands
      mv -f /etc/tomcat5/server.xml.old-trustmanager /etc/tomcat5/server.xml
      rm -f /usr/share/tomcat5/server/lib/bcprov*.jar
      rm -f /usr/share/tomcat5/server/lib/log4j*.jar
      rm -f /usr/share/tomcat5/server/lib/trustmanager-*.jar
      rm -f /etc/tomcat5/log4j-trustmanager.properties
      rm -f //var/lib/trustmanager-tomcat/server.xml

--- Creating log4j links ---
... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-administration/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-administration/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-registration/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-registration/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-reporting/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-reporting/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-reports/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-reports/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-services/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-services/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-servlets/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-servlets/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar

... executing: ln -s /usr/share/java/log4j.jar /usr/share/tomcat5/webapps/gratia-soap/WEB-INF/lib/log4j.jar
lrwxrwxrwx 1 root root 25 May  3 14:17 /usr/share/tomcat5/webapps/gratia-soap/WEB-INF/lib/log4j.jar -> /usr/share/java/log4j.jar


--- Updating tomcat5.conf ---
... executing: cp -p /usr/share/tomcat5/conf/tomcat5.conf /usr/share/tomcat5/conf/tomcat5.conf.20120503-1417

--- Updating server.xml ---
Replacing Tomcat server.xml file: /usr/share/tomcat5/conf/server.xml
... executing: cp -p /usr/share/tomcat5/conf/server.xml /usr/share/tomcat5/conf/server.xml.20120503-1417
... executing: cp -p /usr/share/gratia/server.xml.template /usr/share/tomcat5/conf/server.xml
... executing: chmod 644         /usr/share/tomcat5/conf/server.xml
... executing: chown tomcat.root /usr/share/tomcat5/conf/server.xml

====== Completed Tomcat configuration for Gratia ===

</pre> </div></div> <!--/twistyPlugin-->
</li></ol> 
(the output may look different on EL6)
<p />
<h1><a name="Services"></a> Services </h1>
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Starting_and_Enabling_Services"></a> Starting and Enabling Services </span></h2>
<p />
To start Gratia you need to start several services: <ol>
<li>  You need to fetch the latest CA Certificate Revocation Lists (CRLs) and you should enable the fetch-crl service to keep the CRLs up to date:<pre class="rootscreen">
<font color="#ff0000"># For RHEL 5, CentOS 5, and SL5 </font>
[root@gratia ~]$ /usr/sbin/fetch-crl3   # This fetches the CRLs 
[root@gratia ~]$ /sbin/service fetch-crl3-boot start
[root@gratia ~]$ /sbin/service fetch-crl3-cron start
<font color="#ff0000"># For RHEL 6, CentOS 6, and SL6, or OSG 3 _older_ than 3.1.15 </font>
[root@gratia ~]$ /usr/sbin/fetch-crl   # This fetches the CRLs 
[root@gratia ~]$ /sbin/service fetch-crl-boot start
[root@gratia ~]$ /sbin/service fetch-crl-cron start
<font color="#ff0000"># For RHEL 7, CentOS 7, and SL7 </font>
[root@gratia ~]$ /usr/sbin/fetch-crl   # This fetches the CRLs 
[root@gratia ~]$ systemctl start fetch-crl-boot
[root@gratia ~]$ systemctl start fetch-crl-cron
</pre> For more details and options, please see our <a href="/bin/view/Documentation/Release3/InstallCertAuth#Managing_Certificate_Revocation" class="twikiAnchorLink">CRL documentation</a>.  
</li> <li> MySQL server needs to be running if it is not already:<pre class="rootscreen">
[root@gratia ~]$ /sbin/service mysqld start
</pre>
</li> <li> Start Tomcat, required by  gratia service:<pre class="rootscreen">
[root@gratia ~]$ service tomcat5 start # on EL5 only
[root@gratia ~]$ service tomcat6 start # on EL6 only
</pre>
</li></ol> 
You should also enable the appropriate services so that they are automatically started when your system is powered on:  <ul>
<li>  To enable the fetch-crl service to keep the CRLs up to date after reboots:<pre class="rootscreen">
<font color="#ff0000"># For RHEL 5, CentOS 5, and SL5 </font>
[root@gratia ~]$ /sbin/chkconfig fetch-crl3-boot on
[root@gratia ~]$ /sbin/chkconfig fetch-crl3-cron on
<font color="#ff0000"># For RHEL 6, CentOS 6, and SL6, or OSG 3 _older_ than 3.1.15 </font>
[root@gratia ~]$ /sbin/chkconfig fetch-crl-boot on
[root@gratia ~]$ /sbin/chkconfig fetch-crl-cron on
<font color="#ff0000"># For RHEL 7, CentOS 7, and SL7 </font>
[root@gratia ~]$ systemctl enable fetch-crl-boot
[root@gratia ~]$ systemctl enable fetch-crl-cron
</pre> 
</li> <li> To enable the other services: <pre class="rootscreen">
[root@gratia ~]$ /sbin/chkconfig mysqld on
[root@gratia ~]$ /sbin/chkconfig tomcat5 on # on EL5 only
[root@gratia ~]$ /sbin/chkconfig tomcat6 on # on EL6 only
</pre>
</li></ul> 
<p />
<strong>Note</strong>: You do <em>not</em> need to run chkconfig on the gratia service. This service is started with Tomcat.
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Stopping_and_Disabling_Services"></a> Stopping and Disabling Services </span></h2>
<p />
To stop Gratia you need to stop the services it uses if nothing else is using them: <ol>
<li> Stop Tomcat, if no other application is using it:<pre class="rootscreen">
[root@gratia ~]$ service tomcat5 stop # on EL5 only
[root@gratia ~]$ service tomcat6 stop # on EL6 only
</pre>
</li> <li> Stop MySQL server if no other application is using it:<pre class="rootscreen">
[root@gratia ~]$ service mysqld stop
</pre>
</li> <li>  To stop fetch-crl:<pre class="rootscreen">
<font color="#ff0000"># For RHEL 5, CentOS 5, and SL5 </font>
[root@gratia ~]$ /sbin/service fetch-crl3-boot stop
[root@gratia ~]$ /sbin/service fetch-crl3-cron stop
<font color="#ff0000"># For RHEL 6, CentOS 6, and SL6, or OSG 3 _older_ than 3.1.15 </font>
[root@gratia ~]$ /sbin/service fetch-crl-boot stop
[root@gratia ~]$ /sbin/service fetch-crl-cron stop
<font color="#ff0000"># For RHEL 7, CentOS 7, and SL7 </font>
[root@gratia ~]$ systemctl stop fetch-crl-boot
[root@gratia ~]$ systemctl stop fetch-crl-cron
</pre> For more details and options, please see our <a href="/bin/view/Documentation/Release3/InstallCertAuth#Managing_Certificate_Revocation" class="twikiAnchorLink">CRL documentation</a>.  
</li></ol> 
<p />
<p />
In addition, you can disable services by running the following commands.  However, you don't need to do this normally. <ul>
<li>  To disable the fetch-crl service:<pre class="rootscreen">
<font color="#ff0000"># For RHEL 5, CentOS 5, and SL5 </font>
[root@gratia ~]$ /sbin/chkconfig fetch-crl3-boot off
[root@gratia ~]$ /sbin/chkconfig fetch-crl3-cron off
<font color="#ff0000"># For RHEL 6, CentOS 6, and SL6, or OSG 3 _older_ than 3.1.15 </font>
[root@gratia ~]$ /sbin/chkconfig fetch-crl-boot off
[root@gratia ~]$ /sbin/chkconfig fetch-crl-cron off
<font color="#ff0000"># For RHEL 7, CentOS 7, and SL7 </font>
[root@gratia ~]$ systemctl disable fetch-crl-boot
[root@gratia ~]$ systemctl disable fetch-crl-cron
</pre> 
</li> <li> To disable the other services: <pre class="rootscreen">
[root@gratia ~]$ /sbin/chkconfig mysqld off
[root@gratia ~]$ /sbin/chkconfig tomcat5 off # on EL5 only
[root@gratia ~]$ /sbin/chkconfig tomcat6 off # on EL6 only
</pre>
</li></ul> 
<p />
<strong>Note</strong>: You do not need to run chkconfig on the gratia service. See above for more details.
<p />
<h1><a name="Test"></a> Test </h1>
To test Gratia service you can login in the Web UI and then: <ul>
<li> see the administration page
</li></ul> 
<p />
Check the Web UI by accessing <code><b>http://<font color="#ff0000">hostname</font>:8443/gratia-administration/</b></code>.  You should see the following screenshot:
<img src="/twiki/pub/Documentation/Release3/InstallGratiaService/gratia-admin.png" alt="gratia screenshot" width=''555"  height='345' /> 
<p />
<h1><a name="Upgrade"></a> Upgrade </h1>
To upgrade Gratia services you must: <ol>
<li> stop tomcat and possibly also mysqld
</li> <li> run yum update
</li> <li> compare the configuration files (<code>/etc/gratia/services/service-authorization.properties</code> and <code>/etc/gratia/services/service-configuration.properties</code>) to the <code>.rpmnew</code> version added by the RPM update and merge when needed
</li> <li> restart mysql and tomcat
</li></ol> 
<p />
<h1><a name="Troubleshooting"></a> Troubleshooting </h1>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Useful_configuration_and_log_fil"></a> Useful configuration and log files </span></h2>
<p />
Configuration Files
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table7" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=7;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Service or Process</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=7;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Configuration File</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=7;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Description</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> gratia </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/etc/gratia/services/service-configuration.properies</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> gratia service configuration </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol">  </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <code>/etc/gratia/services/service-authorization.properies</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> gratia service mysql passwords </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol">  </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/etc/gratia/services/log4j.properies</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> gratia service logs configuration </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> mysqld </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <code>/var/lib/mysql/<font color="#ff0000">gratia</font></code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> gratia database </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/etc/my.cnf</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> MySQL configuration, e.g. server port </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> tomcat </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <code>/etc/tomcat5/</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> Tomcat configuration files (EL5) </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/etc/tomcat6/</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> Tomcat configuration files (EL6) </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <code>/etc/tomcat5/Catalina/localhost/*</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> gratia related tomcat configuration (EL5) </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> &nbsp; </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> <code>/etc/tomcat6/Catalina/localhost/*</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> gratia related tomcat configuration (EL6) </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Log files
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table8" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=8;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Service or Process</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=8;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Log File</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=8;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Description</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> tomcat (EL5) </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/var/log/tomcat5/catalina.out</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> This is the Tomcat log file. Problems (and a lot of noise) are reported here. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> &nbsp; </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <code>/var/log/tomcat5/trustmanager.log</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> The trustmanager handles things related to authentication. Useful errors are sometimes here. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> tomcat (EL6) </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/var/log/tomcat6/catalina.out</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> This is the Tomcat log file. Problems (and a lot of noise) are reported here. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> tomcat (EL5 &amp; EL6) </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> <code>/var/log/tomcat6/glite-security-trustmanager.log</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> The trustmanager handles things related to authentication. Useful errors are sometimes here. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> gratia </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> <code>/var/log/gratia</code> </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> All gratia related logs are here. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> mysqld </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> <code>/var/log/mysqld.log</code> </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> MySQL log is here. </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<h1><a name="How_to_get_Help"></a> How to get Help? </h1>
To get assistance please use <a href="/bin/view/Documentation/Release3/HelpProcedure" class="twikiLink">Help Procedure</a>.
<p />
<h1><a name="References"></a> References </h1>
Gratia Documents <ul>
<li> <a href="/bin/view/Accounting/WebHome" class="twikiLink">Accounting Web/The Gratia project</a>
</li></ul> 
<a href="/bin/view/Documentation/Release3/InstallGratiaService" class="twikiCurrentTopicLink twikiLink">Gratia Service (Collector)</a> addons: <ul>
<li> <a href="/bin/view/Documentation/Release3/InstallGratiaReporting" class="twikiLink">InstallGratiaReporting</a> to get various reports about resource usage and jobs via emails
</li></ul> 
Gratia Probes: <ul>
<li> <a href="/bin/view/Accounting/ProbeInstallation" class="twikiLink">ProbeInstallation</a>
</li></ul> 
<p />
<h1><a name="Comments"></a> Comments </h1>
<p />
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/Release3/InstallGratiaService" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">TanyaLevshina<a href="/bin/edit/Documentation/Release3/TanyaLevshina?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="TanyaLevshina (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/Release3/ComputeElement?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = General
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/Release3/EndUser?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = <span class="twikiNewLink">SysAdmin<a href="/bin/edit/Documentation/Release3/SysAdmin?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="SysAdmin (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Installation  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local TEST_READY   = 1
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 0
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">MarcoMambelli<a href="/bin/edit/Documentation/Release3/MarcoMambelli?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="MarcoMambelli (this topic does not yet exist; you can create it)">?</a></span> Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/Release3/FirstLast?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">KevinRetzke<a href="/bin/edit/Documentation/Release3/KevinRetzke?topicparent=Documentation/Release3.InstallGratiaService" rel="nofollow" title="KevinRetzke (this topic does not yet exist; you can create it)">?</a></span> Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
<div class="twikinetRounded twikinetRoundedAttachments"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="twikiAttachments">
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="topicattachmentslistshow" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span> <span id="topicattachmentslisthide" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="topicattachmentslisttoggle" class="twistyRememberSetting twistyContent twikiMakeHidden twistyInited">
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table summary="Topic attachments" cellspacing="0" id="twikiAttachmentsTable" cellpadding="0" class="twikiTable" rules="rows" border="1"><caption>Topic attachments</caption>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=0;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">I</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=1;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attachment</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=2;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Action</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=3;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=4;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Date</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol5"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=5;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Who</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol6 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/Release3/InstallGratiaService?cover=print;sortcol=6;table=9;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1"> <a href="/twiki/pub/Documentation/Release3/InstallGratiaService/Screen_shot_2012-05-03_at_2.29.38_PM.png">Screen_shot_2012-05-03_at_2.29.38_PM.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2"> <a href="/bin/attach/Documentation/Release3/InstallGratiaService?filename=Screen_shot_2012-05-03_at_2.29.38_PM.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3"> 197.5&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4"> <span class="twikiNoBreak">03 May 2012 - 19:30</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5"> <a href="/bin/view/Main/TanyaLevshina" class="twikiLink">TanyaLevshina</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol"> &nbsp; </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <img width="16" alt="png" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/png.gif" height="16" border="0" /><span class="twikiHidden">png</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1 twikiLast"> <a href="/twiki/pub/Documentation/Release3/InstallGratiaService/gratia-admin.png">gratia-admin.png</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2 twikiLast"> <a href="/bin/attach/Documentation/Release3/InstallGratiaService?filename=gratia-admin.png;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3 twikiLast"> 58.4&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4 twikiLast"> <span class="twikiNoBreak">04 Apr 2014 - 21:00</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5 twikiLast"> <a href="/bin/view/Main/MarcoMambelli" class="twikiLink">MarcoMambelli</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol twikiLast"> &nbsp; </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
</div></div> <!--/twistyPlugin--></div><!--//twikiAttachments--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--></div><!-- /patternContent-->
<hr />
This topic: Documentation/Release3<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/Release3/NavTechGratia" class="twikiLink">NavTechGratia</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>InstallGratiaService</span> <br />    
Topic revision: r28 - 07 Feb 2017 - 19:34:17 - <a href="/bin/view/Main/BrianBockelman" class="twikiLink">BrianBockelman</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />