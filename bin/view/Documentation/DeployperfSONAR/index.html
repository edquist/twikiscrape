<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> DeployperfSONAR &lt; Documentation &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/DeployperfSONAR?_T=16 Feb 2017" type="application/x-wiki" title="edit DeployperfSONAR" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/DeployperfSONAR"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFF99;
	}
	.patternBookView {
		border-color:#FFFF99;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <link rel="stylesheet" type="text/css" href="https://twiki.opensciencegrid.org/twiki/pub/Documentation/Tools/exercises.css">
<p />
<!-- This is the default OSG documentation template. Please modify it in -->
<!-- the sections indicated to create your topic.                        --> 
<p />
<!-- By default the title is the <span class="twikiNewLink">WikiWord<a href="/bin/edit/Documentation/WikiWord?topicparent=Documentation.DeployperfSONAR" rel="nofollow" title="WikiWord (this topic does not yet exist; you can create it)">?</a></span> used to create this topic. If  -->
<!-- you want to modify it to something more meaningful, just replace    -->
<!-- <a href="/bin/view/Documentation/DeployperfSONAR" class="twikiCurrentTopicLink twikiLink">DeployperfSONAR</a> below with i.e "My Topic".                                  -->
<p />
<h1><a name="Deploying_perf_SONAR_for_WLCG_OS"></a>  Deploying perf SONAR for WLCG/OSG </h1>
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#Overview_of_perfSONAR_in_WLCG_OS"> Overview of perfSONAR in WLCG/OSG </a> <ul>
<li> <a href="?cover=print#Changes_for_perfSONAR3_5_1"> Changes for perfSONAR3.5.1</a>
</li> <li> <a href="?cover=print#Changes_for_perfSONAR_3_5"> Changes for perfSONAR 3.5</a>
</li></ul> 
</li></ul> 
</div>
<p />
<p />
This  page provides  details for site admins installing, upgrading or  using  perfSONAR  in  WLCG/OSG.     The sections  below are intended to allow users  to  find  quickly the  specific information they are  interested in. 
<p />
Our  <strong>strong recommendation</strong> for  anyone maintaining/using  perfSONAR is that they join either/both of the following mailing lists: <ul>
<li> <strong>User's Mailing List</strong>  The perfSONAR project maintains a mailing list for communication on matters of installation, configuration, bug reports, or general performance discussions:  <a href="https://lists.internet2.edu/sympa/subscribe/perfsonar-user" target="_top">https://lists.internet2.edu/sympa/subscribe/perfsonar-user</a>
</li> <li> <strong>Announcement Mailing List</strong> The perfSONAR project also maintains a low volume mailing list used for announcements related to software updates and vulnerabilities: <a href="https://lists.internet2.edu/sympa/subscribe/perfsonar-announce" target="_top">https://lists.internet2.edu/sympa/subscribe/perfsonar-announce</a>
</li></ul> 
<p />
<h3><a name="Overview_of_perfSONAR_in_WLCG_OS"></a> Overview of perfSONAR in WLCG/OSG </h3>
<p />
The following topical sections provide details about perfSONAR for WLCG/OSG <ul>
<li> <span class="twikiNewLink">Overview, Motivation  and Requirements (new sites)<a href="/bin/edit/Trash/Trash/IntegrationPS?topicparent=Documentation.DeployperfSONAR" rel="nofollow" title="Overview, Motivation  and Requirements (new sites) (this topic does not yet exist; you can create it)">?</a></span>
</li> <li> <a href="/bin/view/Documentation/InstallUpdatePS" class="twikiLink">Installation/upgrade guide</a>
</li> <li> <a href="/bin/view/Documentation/TroubleFAQPS" class="twikiLink">Troubleshooting/FAQ</a>
</li> <li> <a href="/bin/view/Documentation/ExGuidePS" class="twikiLink">Guide for experiments (storage APIs, dashboard, etc.)</a>
</li></ul> 
<p />
<h4><a name="Changes_for_perfSONAR3_5_1"></a> Changes for perfSONAR3.5.1 </h4>
<p />
The final release of perfSONAR 3.5.1 was put into the perfSONAR repository on March 2, 2016.    All sites following our recommendation of having auto-updates enabled should have upgraded during the next 24 hours.
<p />
<strong>NOTE:  The 3.5.1 release has made changes to the default paths to be more compatible with the best common practice.   If you use configuration management tools or have scripts that manipulate or manage your perfSONAR configuration you will likely need to update them to track the new locations.   Details at <a href="http://docs.perfsonar.net/release_candidates/3.5.1/config_files.html" target="_top">http://docs.perfsonar.net/release_candidates/3.5.1/config_files.html</a></strong>
<p />
See release notes at <a href="http://www.perfsonar.net/release-notes/version-3-5-1/" target="_top">http://www.perfsonar.net/release-notes/version-3-5-1/</a>
<p />
<h4><a name="Changes_for_perfSONAR_3_5"></a> Changes for perfSONAR 3.5 </h4>
<p />
For those of you have are familiar  with installing  perfSONAR  in  WLCG  we summarize what is changed going to v3.5.x below.
<p /> <ul>
<li>  *Upgrades  or  reinstalls  to perfSONAR v3.5 should  just  follow the  perfSONAR page instructions <ul>
<li> If there  is  any suspicion your system  could have  been  compromised  we  recommend  a  clean install  of  v3.5.x (whatever is most current),  though this  will  lose any existing data.
</li> <li> For running v3.3.x or 3.4.x versions this should  be as  simple  as  <code>yum clean all</code>;  <code>yum -y update</code>;  <code>reboot</code>  (But read the  install/upgrade notes)
</li></ul> 
</li> <li>  <strong>We are  deprecating the  use  of  <code>NDT</code>  and <code>NPAD</code>.</strong>   These components,  while  useful in  some cases,  force  the  use of  Web100 kernels and RENO  as  the  TCP  protocol.   <ul>
<li> Sites  can  choose  to  run these  but  it  is not a  recommendation from  OSG  or  WLCG
</li></ul> 
</li> <li> Sites  must  either  open  port  80 or port 443 to  our monitoring  subnets  to  allow the  test metrics  to  be  collected (see  iptables  item  below).
</li> <li>  <strong>The mesh-config  URLs are now hosted at OSG</strong> and  the updated  URLs  are document in the <a href="/bin/view/Documentation/InstallUpdatePS" class="twikiLink">Installation/upgrade Guide</a>  above <ul>
<li> Until the OSG created meshes are  ready,  the  OSG  URLs will redirect  to the manually configured  CERN instances  we  have  been  using.
</li></ul> 
</li> <li>  <strong>The  monitoring  for  perfSONAR has  migrated to  OSG (but we continue  to maintain  the  prototype  instances on  maddash.aglt2.org</strong>) <ul>
<li> MaDDash <strong>production</strong> URL:  <a href="http://psmad.grid.iu.edu/maddash-webui/index.cgi" target="_top">http://psmad.grid.iu.edu/maddash-webui/index.cgi</a>
</li> <li> OMD <strong>production</strong> URL: <a href="https://psomd.grid.iu.edu/WLCGperfSONAR/check_mk/" target="_top">https://psomd.grid.iu.edu/WLCGperfSONAR/check_mk/</a>
</li> <li> MaDDash protoytpe  URL: <a href="https://maddash.aglt2.org/maddash-webui/index.cgi" target="_top">https://maddash.aglt2.org/maddash-webui/index.cgi</a>
</li> <li> OMD prototype URL:  <a href="https://maddash.aglt2.org/WLCGperfSONAR/check_mk/" target="_top">https://maddash.aglt2.org/WLCGperfSONAR/check_mk/</a>
</li></ul> 
</li> <li> We are providing instructions for sites concerned about ports 80/443 with examples for  tightening the  iptables  configuration which  comes  with  perfSONAR while ensuring the data is still accessible. <ul>
<li> Either port  80 or  443  <strong>must be  open</strong>  for  the OSG/WLCG monitoring  subnets and any desired  local  subnets
</li></ul> 
</li> <li> For sites  with IPv6 available we  are <strong>strongly recommending configuring  perfSONAR to  be  dual-stacked</strong> <ul>
<li> Sites with  IPv6 should get both <code>A</code> and <code>AAAA</code> records for  their  perfSONAR  DNS name (as  well  as  ensuring  the reverse  is  in place).
</li> <li> All existing meshes will support both IPv4 and IPv6 testing.  Sites with both IPv4 and IPv6 addresses testing to sites that also have both will run <strong>two</strong> tests.   A side effect of this is that as more sites provide IPv6 addresses, the amount of testing will increase.  
</li> <li> At some future point when most sites have IPv6, we may need to adjust the testing frequency to reduce the overall amount of testing
</li> <li> More information about IPv6 is available from <a href="http://ipv6.web.cern.ch/" target="_top">http://ipv6.web.cern.ch/</a> 
</li></ul> 
</li></ul> 
<p />
The <a href="https://twiki.cern.ch/twiki/bin/view/LCG/NetworkTransferMetrics" target="_top">WLCG Network Throughput Working Group</a> is responsible for monitoring the WLCG/OSG instances and for defining and maintaining the mesh-configurations that we use to control perfSONAR testing.   Please contact them if you have questions or suggestions related to perfSONAR testing amongst WLCG sites.
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<hr />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Backlinks"></a>  Backlinks </span></h2>
<p />
<hr/>
Twiki topics in <a href="/bin/view/Documentation/WebHome" class="twikiCurrentWebHomeLink twikiLink">Documentation</a> web containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<div class="patternSearchResultCount">Number of topics: <span class="twikiSearchResultCount">0</span></div><!--/patternSearchResultCount--><p />
<p />
<p />
Twiki topics in all others webs containing an "INCLUDE" of this page: <br />     
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> Section </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> Topic </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Last Updated by </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<p />
<a href="/twiki/bin/oops/Documentation/DeployperfSONAR?template=backlinksweb" target="_top">All references to this document in the <strong>Documentation</strong> web only</a>  <br />      <a href="/twiki/bin/oops/Documentation/DeployperfSONAR?template=backlinksallwebs" target="_top">All references to this document in <strong>all</strong> webs</a>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Child_Topics"></a>  Child Topics </span></h2>
<p />
<strong><em>Immediate children of this topic include the following:</em></strong>
<ul><li><a href="/bin/view/Documentation/ExGuidePS">ExGuidePS</a> <li><a href="/bin/view/Documentation/InstallUpdatePS">InstallUpdatePS</a> <li><a href="/bin/view/Documentation/IntegrationPS">IntegrationPS</a> <li><a href="/bin/view/Documentation/TroubleFAQPS">TroubleFAQPS</a> </ul>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Major_Updates"></a>  Major Updates </span></h2>
<p />
<p />
-- <a href="/bin/view/Main/ShawnMcKee" class="twikiLink">ShawnMcKee</a> - 14 Oct 2014</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><span class="twikiNewLink">MeetingNotesMar28<a href="/bin/edit/Documentation/MeetingNotesMar28?topicparent=Documentation.DeployperfSONAR" rel="nofollow" title="MeetingNotesMar28 (this topic does not yet exist; you can create it)">?</a></span> &gt; <a href="/bin/view/Documentation/TwikiWebs" class="twikiLink">TwikiWebs</a> &gt; <a href="/bin/view/Documentation/NetworkingInOSG" class="twikiLink">NetworkingInOSG</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>DeployperfSONAR</span> <br />    
Topic revision: r14 - 12 Oct 2016 - 15:10:16 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />