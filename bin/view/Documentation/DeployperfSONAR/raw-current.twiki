%LINKCSS%

&lt;!-- This is the default OSG documentation template. Please modify it in --&gt;
&lt;!-- the sections indicated to create your topic.                        --&gt; 

&lt;!-- By default the title is the WikiWord used to create this topic. If  --&gt;
&lt;!-- you want to modify it to something more meaningful, just replace    --&gt;
&lt;!-- %TOPIC% below with i.e &quot;My Topic&quot;.                                  --&gt;

---+!! %SPACEOUT{ &quot;Deploying !perfSONAR for WLCG/OSG&quot; }%
%TOC%

%STARTINCLUDE%
This  page provides  details for site admins installing, upgrading or  using  perfSONAR  in  WLCG/OSG.     The sections  below are intended to allow users  to  find  quickly the  specific information they are  interested in. 

Our  *strong recommendation* for  anyone maintaining/using  perfSONAR is that they join either/both of the following mailing lists:
   * *User&#39;s Mailing List*  The perfSONAR project maintains a mailing list for communication on matters of installation, configuration, bug reports, or general performance discussions:  https://lists.internet2.edu/sympa/subscribe/perfsonar-user
   * *Announcement Mailing List* The perfSONAR project also maintains a low volume mailing list used for announcements related to software updates and vulnerabilities: https://lists.internet2.edu/sympa/subscribe/perfsonar-announce

---+++ Overview of perfSONAR in WLCG/OSG 

The following topical sections provide details about perfSONAR for WLCG/OSG
   * [[Trash/Trash/IntegrationPS][Overview,  Motivation  and Requirements (new sites)]]
   * [[InstallUpdatePS][Installation/upgrade guide]]
   * [[TroubleFAQPS][Troubleshooting/FAQ]]
   * [[ExGuidePS][Guide for experiments (storage APIs, dashboard, etc.)]]

---++++ Changes for perfSONAR3.5.1

The final release of perfSONAR 3.5.1 was put into the perfSONAR repository on March 2, 2016.    All sites following our recommendation of having auto-updates enabled should have upgraded during the next 24 hours.

*NOTE:  The 3.5.1 release has made changes to the default paths to be more compatible with the best common practice.   If you use configuration management tools or have scripts that manipulate or manage your perfSONAR configuration you will likely need to update them to track the new locations.   Details at http://docs.perfsonar.net/release_candidates/3.5.1/config_files.html*

See release notes at http://www.perfsonar.net/release-notes/version-3-5-1/

---++++ Changes for perfSONAR 3.5

For those of you have are familiar  with installing  perfSONAR  in  WLCG  we summarize what is changed going to v3.5.x below.

   *  *Upgrades  or  reinstalls  to perfSONAR v3.5 should  just  follow the  perfSONAR page instructions
      * If there  is  any suspicion your system  could have  been  compromised  we  recommend  a  clean install  of  v3.5.x (whatever is most current),  though this  will  lose any existing data.
      * For running v3.3.x or 3.4.x versions this should  be as  simple  as  =yum clean all=;  =yum -y update=;  =reboot=  (But read the  install/upgrade notes)
   *  *We are  deprecating the  use  of  =NDT=  and =NPAD=.*   These components,  while  useful in  some cases,  force  the  use of  Web100 kernels and RENO  as  the  TCP  protocol.  
      * Sites  can  choose  to  run these  but  it  is not a  recommendation from  OSG  or  WLCG
   * Sites  must  either  open  port  80 or port 443 to  our monitoring  subnets  to  allow the  test metrics  to  be  collected (see  iptables  item  below).
   *  *The mesh-config  URLs are now hosted at OSG* and  the updated  URLs  are document in the [[InstallUpdatePS][Installation/upgrade  Guide]]  above
      * Until the OSG created meshes are  ready,  the  OSG  URLs will redirect  to the manually configured  CERN instances  we  have  been  using.
   *  *The  monitoring  for  perfSONAR has  migrated to  OSG (but we continue  to maintain  the  prototype  instances on  maddash.aglt2.org*)
      * !MaDDash *production* URL:  http://psmad.grid.iu.edu/maddash-webui/index.cgi
      * OMD *production* URL: https://psomd.grid.iu.edu/WLCGperfSONAR/check_mk/
      * !MaDDash protoytpe  URL: https://maddash.aglt2.org/maddash-webui/index.cgi
      * OMD prototype URL:  https://maddash.aglt2.org/WLCGperfSONAR/check_mk/
   * We are providing instructions for sites concerned about ports 80/443 with examples for  tightening the  iptables  configuration which  comes  with  perfSONAR while ensuring the data is still accessible.
      * Either port  80 or  443  *must be  open*  for  the OSG/WLCG monitoring  subnets and any desired  local  subnets
   * For sites  with IPv6 available we  are *strongly recommending configuring  perfSONAR to  be  dual-stacked*
      * Sites with  IPv6 should get both =A= and =AAAA= records for  their  perfSONAR  DNS name (as  well  as  ensuring  the reverse  is  in place).
      * All existing meshes will support both IPv4 and IPv6 testing.  Sites with both IPv4 and IPv6 addresses testing to sites that also have both will run *two* tests.   A side effect of this is that as more sites provide IPv6 addresses, the amount of testing will increase.  
      * At some future point when most sites have IPv6, we may need to adjust the testing frequency to reduce the overall amount of testing
      * More information about IPv6 is available from http://ipv6.web.cern.ch/ 

The [[https://twiki.cern.ch/twiki/bin/view/LCG/NetworkTransferMetrics][WLCG Network Throughput Working Group]] is responsible for monitoring the WLCG/OSG instances and for defining and maintaining the mesh-configurations that we use to control perfSONAR testing.   Please contact them if you have questions or suggestions related to perfSONAR testing amongst WLCG sites.







%STOPINCLUDE%

%BOTTOMMATTER%

-- Main.ShawnMcKee - 14 Oct 2014
