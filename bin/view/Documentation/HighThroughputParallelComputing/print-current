<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> HighThroughputParallelComputing &lt; Documentation &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/HighThroughputParallelComputing?_T=16 Feb 2017" type="application/x-wiki" title="edit HighThroughputParallelComputing" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/HighThroughputParallelComputing"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFF99;
	}
	.patternBookView {
		border-color:#FFFF99;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--TABLEPLUGIN_twikiAttachmentsTable--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#twikiAttachmentsTable td {border-style:solid none;}
.twikiTable#twikiAttachmentsTable th {border-style:solid none;}
.twikiTable#twikiAttachmentsTable td {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable th {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable td {vertical-align:top;}
.twikiTable#twikiAttachmentsTable th {background-color:#eceef2;}
.twikiTable#twikiAttachmentsTable th.twikiSortedCol {background-color:#e0e3e9;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#f2f3f6;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol0 {text-align:center;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol1 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol2 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol3 {text-align:right;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol4 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol5 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol6 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol7 {text-align:center;}
</style></head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <link rel="stylesheet" type="text/css" href="https://twiki.opensciencegrid.org/twiki/pub/Documentation/Tools/exercises.css">
<p />
<h1><a name="High_Throughput_Parallel_Computi"></a>  High Throughput Parallel Computing </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#What_is_HTPC_and_why_is_it_impor">What is HTPC and why is it important?</a>
</li> <li> <a href="?cover=print#Early_adopter_HTPC_sites"> Early adopter HTPC sites</a>
</li> <li> <a href="?cover=print#Setting_up_an_HTPC_job_on_the_OS">Setting up an HTPC job on the OSG</a> <ul>
<li> <a href="?cover=print#Compiling_an_HTPC_job">Compiling an HTPC job</a>
</li> <li> <a href="?cover=print#Submitting_an_HTPC_job">Submitting an HTPC job</a>
</li> <li> <a href="?cover=print#Batch_Scheduler_Setup"> Batch Scheduler Setup</a> <ul>
<li> <a href="?cover=print#PBS"> PBS</a>
</li> <li> <a href="?cover=print#Condor"> Condor</a>
</li> <li> <a href="?cover=print#LSF"> LSF</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#HTPC_Schema_Attributes"> HTPC Schema Attributes</a>
</li> <li> <a href="?cover=print#Running_Amber9_PMEMD"> Running Amber9 PMEMD</a>
</li> <li> <a href="?cover=print#Initial_Testing_and_Debugging"> Initial Testing and Debugging </a>
</li> <li> <a href="?cover=print#HTPC_and_Glide_ins"> HTPC and Glide-ins</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</div>
<p />
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="What_is_HTPC_and_why_is_it_impor"></a> What is HTPC and why is it important? </span></h2>
<p />
High Throughput Parallel Computing (HTPC) is a computational paradigm for an emerging class of applications where large ensembles (hundreds to thousands) of modestly parallel (4- to ~64- way) jobs are used to solve scientific problems ranging from chemistry, biophysics, weather and flood modeling, to general relativity. Effectively supporting this paradigm requires focus in at least three areas: <ul>
<li> Solving the parallel job portability problem to enable parallel jobs to easily run on heterogeneous resources
</li> <li> Optimizing parallel jobs to effectively utilize modern multi-core technologies
</li> <li> Effectively distributing HTPC jobs across suitable distributed resources
</li></ul> 
<p />
<a href="http://www.opensciencegrid.org/OSG_Newsletter_October_2009" target="_top">Press Release: Bringing High Throughput Capabilities to Ensembles of Parallel Applications</a>
<br>
<a href="http://www.cs.wisc.edu/condor/CondorWeek2010/condor-presentations/thain-fraser-hptc.pdf" target="_top">HTPC presentation at Condor Week April 2010</a>
<p />
Parallel jobs, in general, are not very portable, and as a result are difficult to run across multiple heterogeneous sites.  In the Open Science Grid (OSG) framework we are currently working on minimizing these barriers for an important class of modestly parallel (4- to ~64- way) jobs where the parallelism can be executed on a single multi-core machine. Currently, eight-way multicore machines are prevalent in the OSG.  Most local schedulers have mechanisms, exposed via RSL, to schedule a single job to run exclusively on one multi-core machine.  By using shared memory on a single machine as an MPI interconnect, and bringing along with the job all the software infrastructure required to run this "local" parallel job, a user can easily create a portable parallel job that can run on many different OSG sites. Another important benefit is that this strategy helps to optimize multi-core machine utilization while simplifying the build and submit process thereby making HTPC accessible to a wider class of scientific users. 
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Early_adopter_HTPC_sites"></a> Early adopter HTPC sites </span></h2>
<p /> <ul>
<li> Oklahoma-Sooner (Henry Neeman, Horst Severini, the OU team) was the first external site to begin running HTPC Jobs. <a href="http://gratia-osg-prod.opensciencegrid.org/gratia-reporting/frameset?__report=%2Fdata%2Ftomcat-gratia%2Fwebapps%2Fgratia-reports%2Freports%2FUsageByUser.rptdesign&amp;__format=html&amp;EndDate=2012-12-31&amp;ReportTitle=Usage+by+Site+-+drill-through&amp;ReportSubtitle=&amp;Sites=OU_OSCER_ATLAS&amp;StartDate=2009-11-09&amp;DisplayMetric=WallDuration&amp;__overwrite=true&amp;__locale=en_US&amp;__timezone=GMT&amp;__svg=false&amp;__designer=false&amp;__pageoverflow=0&amp;__masterpage=true&amp;VOs=dosar" target="_top">Gratia Reports for OU HTPC jobs</a>.
</li> <li> Purdue-Lepton (Preston Smith, Fengping Hu)
</li> <li> Clemson (Sam Hoover)
</li> <li> Nebraska-Firefly (Brian Bockelman)
</li> <li> UC San Diego (Frank Wurthwein, Terrence Martin, Igor Sfiligoi)
</li> <li> UW GLOW (Dan Bradley)
</li></ul> 
<p />
<!--
<a href="https://submit.chtc.wisc.edu:8443/gratia-reporting/" target="_top">Gratia reports of HTPC jobs</a>
-->
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Setting_up_an_HTPC_job_on_the_OS"></a> Setting up an HTPC job on the OSG </span></h2>
<p />
Currently we are testing HTPC jobs with MPI parallelism so the directions below are primarily directed at MPI users. However, since the parallel libraries are packaged together with the application, it is straightforward to use other libraries such as <span class="twikiNewLink">OpenMP<a href="/bin/edit/Documentation/OpenMP?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="OpenMP (this topic does not yet exist; you can create it)">?</a></span>, Linda, or others. 
<p />
<h3><a name="Compiling_an_HTPC_job"></a> Compiling an HTPC job </h3>
<p />
The main advantage of HTPC is that most any MPI implementation that supports shared memory can be used.  MPICH2 and <span class="twikiNewLink">OpenMPI<a href="/bin/edit/Documentation/OpenMPI?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="OpenMPI (this topic does not yet exist; you can create it)">?</a></span> have both been tested.  To compile an HTPC job, simply compile as usual on any accessible machine.  This need not be a head node, or even an OSG resource.  However, this machine does need to be an OS and architecture compatible with the OSG sites where the job will run.  Currently, Scientific Linux 4 or a 32 or 64 bit machine is a good universal donor system, using <span class="twikiNewLink">OpenMPI<a href="/bin/edit/Documentation/OpenMPI?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="OpenMPI (this topic does not yet exist; you can create it)">?</a></span> for the MPI implementation.  Another significant benefit is that it is easy to test these jobs locally, without waiting for scheduling delays.  Statically linking the binary can ensure that it doesn't depend on any shared libraries unavailable on the target system.
<p />
<h3><a name="Submitting_an_HTPC_job"></a> Submitting an HTPC job </h3>
<p />
There are two main tricks to submitting an HTPC job.  The first is transfering the mpiexec command along with the job itself.  As the job will be transfered as a "data" file, the main executable in the condor-g file will need to be a wrapper script, which simply sets the executable bit on the MPI job proper, and calls mpiexec.
<p />
For example, a wrapper script to run an 8-way HTPC job might look like
<p />
<pre>
#!/bin/sh

chmod 0755 ./mdrun ./mpiexec

./mpiexec -np 8 ./mdrun some&#95;input&#95;file
</pre>
<p />
The second trick is requesting that the local scheduler allocate all the cores on a single machine for your job.  In PBS, the way to do this is with the RSL in a Condor-G submit file:
<p />
<pre>
GlobusRSL &#61; (xcount&#61;8)
</pre>
<p />
<h3><a name="Batch_Scheduler_Setup"></a> Batch Scheduler Setup </h3>
<p />
Enabling multi-core jobs requires some site-specific configuration of the local batch system.
<p />
<h4><a name="PBS"></a> PBS </h4>
<p />
PBS should work out of the box by using the "xcount" option supported by the PBS jobmanager.
<p />
<h4><a name="Condor"></a> Condor </h4>
<p />
Condor requires whole machines to be configured.  <a href="https://condor-wiki.cs.wisc.edu/index.cgi/wiki?p=WholeMachineSlots" target="_top">Click here for directions</a>
<p />
<h4><a name="LSF"></a> LSF </h4>
<p />
LSF requires some changes to the job manager to allow the -x option to be passed to the LSF bsub command.  Add the following lines to the LSF job manager, in the section where options are being parsed:
<p />
<pre>
   if(defined($description-&#62;exclusive())) 
   {
   print JOB &#34;#BSUB -x\n&#34;;
   }
</pre>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="HTPC_Schema_Attributes"></a> HTPC Schema Attributes </span></h2>
<p />
The following attributes will be added to the Glue schema as a CECapability: 
<p />
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=0;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attribute Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=1;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attribute Type</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=2;table=1;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Description</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> GlueCECapability </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> string </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> htpc </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> HTPCrsl </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> string </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> extra rsl needed to enable HTPC jobs </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> HTPCAccessControlBaseRule </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> string </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> ACBR format to specify one or more of   VO:<VO Name> or  VOMS:<FQAN>  </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
Another useful variable for HTPC is the "number of cores per machine" but this can be calculated from: <ul>
<li> number of cores per machine = GlueHostArchitectureSMPSize * (LogicalCPUs / PhysicalCPUs).
</li></ul> 
<p />
The following attributes need to be included in the CE section of the "config.ini" file. 
<pre>
htpc &#61; enabled
htpc&#95;queues &#61; queue1, queue2, queue3 # can also take &#34;&#42;&#34;
htpc&#95;blacklist&#95;queues &#61;
htpc&#95;rsl &#61; (foo&#61;bar) # this is the default for HTPC queues
htpc&#95;rsl&#95;queue1 &#61; (zork&#61;quux) # this is a specialized rsl for queue1 only
</pre>
In the future if we need to extend this to support an alternative CE such as CREAM, we can add new lines similar to the last two with CREAM syntax.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Running_Amber9_PMEMD"></a> Running Amber9 PMEMD </span></h2>
<p />
RENCI's Trash/Engagement team is running Amber9's PMEMD, a molecular dynamics tool, in the HTPC model. 
<p />
<a href="http://osglog.wordpress.com/2010/11/04/high-throughput-parallel-molecular-dynamics/" target="_top">This site</a> provides details of the goals, approach and status of the work.
<p />
<a href="http://www.renci.org/~scox/htpc-how-to-v0.3.pdf" target="_top">HTPC Getting Started Guide</a>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Initial_Testing_and_Debugging"></a> Initial Testing and Debugging </span></h2>
<p />
While you can certainly submit a real production parallel job to test any given site, it is often best to submit a small shell script to validate that any particular site is working correctly.  There are two common failure modes with HTPC: <ol>
<li> Jobs simply do not run and remain permanently idle. It can sometimes be difficult to differentiate between a failure of this type and a site that is simply busy.  If all of your jobs are still idle after 24 hours, it is useful to contact the site administrator to see what the story is.
</li> <li> A second kind of problem is somewhat more tricky.  It has happened that a site is configured to accept HTPC jobs, but due to a configuration error, does not allocate a whole machine for your HTPC job.  Rather, it allocates one slot or core, in the usual way.  If you job tries to take advantage of multiple cores, or the whole memory on the machine, it may run correctly, but very very slowly.  Because of certain assumptions in many MPI stacks, an 8 way MPI jobs running on a single core will usually run much than 1/8th the expected speed.  To detect this, it is useful to run the following simple shell script as a test job for each site you'd like to run on. This script utilizes several different tests to help diagnose possible failure modes. 
</li></ol> 
<p />
<pre>
#!/bin/sh

echo &#34;----------------------------------------------------------------&#34;

sleep 60

/bin/hostname

/usr/bin/uptime

/bin/uname -a

cat /proc/cpuinfo

ps auxwwr
echo &#34;----------------------------------------------------------------&#34;

exit 0

</pre>
<p />
Once the script runs, examine the output as follows: <ol>
<li> The first thing this script does is to just sleep for a minute to let the load average stabilize.  Then it runs the "uptime" command.  Ideally, the result of the short-term "uptime" should be close to 0.  If the short-term "uptime" result is closer to the number of cores, that is a strong indication that HTPC is not correctly configured, and this HTPC job is really running like a serial job.  
</li> <li> The number of cores on this machine is encoded in the output of /proc/cpuinfo. This should show the number of cores that is expected.
</li> <li>   Finally, the "r" option to the "ps" command shows all Unix processes in the runnable state, another clue to whether HTPC is enabled.  Ideally, only this "ps" command line should appear in the output.  If the output of "ps" shows other user jobs in the Runnable state, that's a sure sign that HTPC is not properly enabled on this machine.
</li></ol> 
<p />
In order to test submissions to OSG sites that and verify htpc support, you can download and use this [[https://twiki.opensciencegrid.org/twiki/pub/Documentation/HighThroughputParallelComputing/condor_test_htpc_grid.submit]condor-g submit file]].  You'll need to change the location and name of the htpc test script and the resource name as well as the output files to match your parameters.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="HTPC_and_Glide_ins"></a> HTPC and Glide-ins </span></h2>
<p />
To submit jobs via Glide-ins changes must be incorporated into the Submit Host as well as into the Glide-in Factory.
<p /> <ul>
<li> For the frontend: <ul>
<li> <a href="/bin/view/Documentation/GlideinWMSGroups" class="twikiLink">GlideinWMS VO Frontend Groups</a>: Description of groups in the VO Frontend.  A specific example is HCC's HTPC configuration.
</li></ul> 
</li></ul> 
<p /> <ul>
<li> Changes required to the pilot (or Glide-in) factory for htpc: <ul>
<li> For each htpc-site the RS" line in the glideinWMS.xml file must be edited to look like: <ul>
<li> entry name="clemson-htpc" enabled="True" gatekeeper="osg-gw.clemson.edu/jobmanager-condor" gridtype="gt2" rsl="(condorsubmit=('+RequiresWholeMachine' TRUE))" schedd_name="submit.chtc.wisc.edu" verbosity="std" work_dir="."
</li> <li> This ensures that pilot jobs are started on the whole machine.
</li></ul> 
</li></ul> 
</li></ul> 
<p />
Glide-in site configurations:
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table2" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=0;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Gatekeeper</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=1;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Site Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=2;table=2;up=0#sorted_table" title="Sort by this column"><font color="#252b37">RSL</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> osg-gw.clemson.edu/jobmanager-condor </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> clemson-htpc </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> rsl="(condorsubmit=('+RequiresWholeMachine' TRUE)('Requirements' 'CAN_RUN_WHOLE_MACHINE=?=TRUE'))" </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> red.unl.edu/jobmanager-condor </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> nebraska-red-htpc </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> rsl="(condorsubmit=('+RequiresWholeMachine' TRUE)('Requirements' 'CAN_RUN_WHOLE_MACHINE=?=TRUE'))" </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> lepton.rcac.purdue.edu/jobmanager-pbs </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> purdue-htpc </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> rsl="(jobtype=single)(queue=tg_workq)(xcount=8)(host_xcount=1)(maxWallTime=2800)" </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> osg-gw-2.t2.ucsd.edu/jobmanager-condor </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> ucsd-htpc </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> rsl = "(condorsubmit=('+RequiresWholeMachine' TRUE))" </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> grid1.oscer.ou.edu/jobmanager-lsf </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> ou-htpc </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> rsl = "(jobtype=single)(exclusive=1)(maxWallTime=2800)" </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol"> pf-grid.unl.edu/jobmanager-condor </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1"> nebraska-prairiefire-htpc </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol"> rsl = "(condorsubmit=('+RequiresWholeMachine' TRUE)('Requirements' 'CAN_RUN_WHOLE_MACHINE=?=TRUE &amp;&amp; Cpus &gt;= 8'))" </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol"> smufarm.physics.smu.edu/jobmanager-condor </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1"> smu_phy-htpc </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol"> rsl = "(condorsubmit=('+RequiresWholeMachine' TRUE)('Requirements' 'CAN_RUN_WHOLE_MACHINE=?=TRUE'))" </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> brgw1.renci.org/jobmanager-pbs </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol1 twikiLast"> renci-htpc </td>
			<td bgcolor="#f2f3f6" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> rsl="(jobtype=single)(xcount=2)(host_xcount=1)(maxWallTime=2800)" </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
GPU Queues - Glide-in site configurations:
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table cellspacing="0" id="table3" cellpadding="0" class="twikiTable" rules="cols" border="1">
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=0;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Gatekeeper</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=1;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Site Name</font></a> </th>
			<th bgcolor="#d8dde4" valign="top" class="twikiTableCol2 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=2;table=3;up=0#sorted_table" title="Sort by this column"><font color="#252b37">RSL</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> brgw1.renci.org/jobmanager-pbs </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol1 twikiLast"> renci-htpc </td>
			<td bgcolor="#ffffff" valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> rsl="(jobtype=single)(xcount=2)(host_xcount=1)(queue=gpgpu)(maxWallTime=2800)" </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Comments"></a> <strong>Comments</strong> </span></h2>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/HighThroughputParallelComputing" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">DanFraser<a href="/bin/edit/Documentation/DanFraser?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="DanFraser (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/ComputeElement?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = User
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/EndUser?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = Scientist
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = Training
</li></ul> 
<p />
  Please define if this document in general needs to be reviewed before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 0
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 0
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">DanFraser<a href="/bin/edit/Documentation/DanFraser?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="DanFraser (this topic does not yet exist; you can create it)">?</a></span> Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         = <span class="twikiNewLink">BrianBockelman<a href="/bin/edit/Documentation/BrianBockelman?topicparent=Documentation.HighThroughputParallelComputing" rel="nofollow" title="BrianBockelman (this topic does not yet exist; you can create it)">?</a></span> Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 1
</li></ul> 
############################################################################################################
--></div><!-- /patternTopic-->
<p />
<p />
<div class="twikinetRounded twikinetRoundedAttachments"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="twikiAttachments">
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="topicattachmentslistshow" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span> <span id="topicattachmentslisthide" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="topicattachmentslisttoggle" class="twistyRememberSetting twistyContent twikiMakeHidden twistyInited">
<table cellspacing="0" cellpadding="0" border="0" class="twikinetWrapperTable" rules="none">
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableT twikinetWrapperTableTL"></td>
<td class="twikinetWrapperTableT twikinetWrapperTableTR"></td>
</tr>
<tr class="twikinetWrapperTableRow">
<td colspan="2" class="twikinetWrapperTableMain">
<table summary="Topic attachments" cellspacing="0" id="twikiAttachmentsTable" cellpadding="0" class="twikiTable" rules="rows" border="1"><caption>Topic attachments</caption>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol0 twikiFirstCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=0;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">I</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol1"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=1;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Attachment</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol2"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=2;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Action</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol3"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=3;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Size</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol4"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=4;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Date</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol5"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=5;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Who</font></a> </th>
			<th bgcolor="#eceef2" valign="middle" class="twikiTableCol6 twikiLastCol"> <a rel="nofollow" href="/bin/view/Documentation/HighThroughputParallelComputing?cover=print;sortcol=6;table=4;up=0#sorted_table" title="Sort by this column"><font color="#252b37">Comment</font></a> </th>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td bgcolor="#ffffff" align="center" valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> <img width="16" alt="else" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/else.gif" height="16" border="0" /><span class="twikiHidden">submit</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol1 twikiLast"> <a href="/twiki/pub/Documentation/HighThroughputParallelComputing/condor_test_htpc_grid.submit">condor_test_htpc_grid.submit</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol2 twikiLast"> <a href="/bin/attach/Documentation/HighThroughputParallelComputing?filename=condor_test_htpc_grid.submit;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
			<td bgcolor="#ffffff" align="right" valign="top" class="twikiTableCol3 twikiLast"> 0.4&nbsp;K </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol4 twikiLast"> <span class="twikiNoBreak">22 Apr 2011 - 19:48</span> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol5 twikiLast"> <a href="/bin/view/Main/HorstSeverini" class="twikiLink">HorstSeverini</a> </td>
			<td bgcolor="#ffffff" align="left" valign="top" class="twikiTableCol6 twikiLastCol twikiLast"> condor submit file for htpc script </td>
		</tr></table>
</td>
</tr>
<tr class="twikinetWrapperTableRow">
<td class="twikinetWrapperTableB twikinetWrapperTableBL"></td>
<td class="twikinetWrapperTableB twikinetWrapperTableBR"></td>
</tr>
</table>
</div></div> <!--/twistyPlugin--></div><!--//twikiAttachments--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--></div><!-- /patternContent-->
<hr />
This topic: Documentation<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/WebHome" class="twikiCurrentWebHomeLink twikiLink">WebHome</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>HighThroughputParallelComputing</span> <br />    
Topic revision: r47 - 06 Dec 2016 - 18:12:38 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />