<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> CondorGToGlidein &lt; Documentation &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Documentation/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Documentation/CondorGToGlidein?_T=16 Feb 2017" type="application/x-wiki" title="edit CondorGToGlidein" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Documentation/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Documentation/CondorGToGlidein"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">


</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#FFFF99;
	}
	.patternBookView {
		border-color:#FFFF99;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--TWISTYPLUGIN_TWISTY--><style type="text/css" media="all">
@import url("https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://twiki.opensciencegrid.org/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternPrintPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="patternTopic"> <link rel="stylesheet" type="text/css" href="https://twiki.opensciencegrid.org/twiki/pub/Documentation/Tools/exercises.css">
<p />
<!-- This is the default OSG documentation template. Please modify it in -->
<!-- the sections indicated to create your topic.                        --> 
<p />
<!-- By default the title is the <span class="twikiNewLink">WikiWord<a href="/bin/edit/Documentation/WikiWord?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="WikiWord (this topic does not yet exist; you can create it)">?</a></span> used to create this topic. If  -->
<!-- you want to modify it to something more meaningful, just replace    -->
<!-- <a href="/bin/view/Documentation/CondorGToGlidein" class="twikiCurrentTopicLink twikiLink">CondorGToGlidein</a> below with i.e "My Topic".                                  -->
<p />
<h1><a name="Condor_G_to_Glidein_Workflow_Man"></a>  Condor-G to Glidein Workflow Management System porting guide </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="?cover=print#About_This_Document"> About This Document</a>
</li> <li> <a href="?cover=print#Submission_File">Submission File</a> <ul>
<li> <a href="?cover=print#File_Transfer"> File Transfer</a>
</li> <li> <a href="?cover=print#User_Proxy"> User Proxy</a>
</li> <li> <a href="?cover=print#Demotion_after_failed_jobs"> Demotion after failed jobs</a>
</li> <li> <a href="?cover=print#Idle_job_timeout"> Idle job timeout</a>
</li> <li> <a href="?cover=print#Example_GlideinWMS_Condor_submis"> Example GlideinWMS Condor submission</a>
</li></ul> 
</li> <li> <a href="?cover=print#DAGMan_Pitfalls">DAGMan Pitfalls</a>
</li> <li> <a href="?cover=print#Monitoring_Jobs">Monitoring Jobs</a>
</li> <li> <a href="?cover=print#Node_Verification_in_GlideinWMS"> Node Verification in GlideinWMS</a>
</li> <li> <a href="?cover=print#Large_Examples"> Large Examples</a>
</li> <li> <a href="?cover=print#Comments"> Comments</a>
</li></ul> 
</div>
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="About_This_Document"></a> About This Document </span></h2>
This document is meant for VO's transitioning from Condor-G to GlideinWMS.  It assumes some knowledge of Condor, a working install of GlideinWMS, as well as access to Condor-G submission files.
<p />
This document emphasizes changes the user may experience when moving from Condor-G to GlideinWMS.  But, some commands have not changed such as submitting jobs is still with <code>condor_submit &lt;submitfile&gt;</code>. GlideinWMS uses vanilla universe for job execution; anything that can be done in vanilla universe on a local cluster (with file transfer) will work in GlideinWMS.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Submission_File"></a> Submission File </span></h2>
The differences between the submission file for Condor-G and GlideinWMS are minimal.
<p /> <ul>
<li> Since Condor is no longer submitting directly to the grid, the universe for the job will need to change from grid, to vanilla.   <pre class="file">
   universe=grid</pre>   to    <pre class="file">
   universe=vanilla</pre>
</li></ul> 
<p /> <ul>
<li> It is useful to have an error detection/correction statement in the submission file such as:   <pre class="file">
   OnExitHold = (ExitStatus =!= 0)
   OnExitRemove = (ExitStatus == 0)
   PeriodicRelease = ((CurrentTime - EnteredCurrentStatus) > 60) && (HoldReasonCode =!= 1) && (NumJobStarts <= N) </pre>   This statement will hold the job if it exits with a non-zero status.  It will remove the job only if it exited successfully (exit status 0).  And it will release the job if it wasn't held with 'condor_hold' after 60 seconds and the job hasn't started more than N times.
</li></ul> 
<p /> <dl>
<dt> <img src="/twiki/pub/TWiki/TWikiDocGraphics/help.gif" alt="HELP" title="HELP" width="16" height="16" border="0" />     <strong><font color="#ff0000"> NOTE </font></strong> </dt><dd>  It is not necessary to use error detection when using dagman.  Dagman has it's own retry <a href="http://www.cs.wisc.edu/condor/manual/v7.4/2_10DAGMan_Applications.html#SECTION003106100000000000000" target="_top">mechanism</a>.
</dd></dl> 
<p />
<p />
<h3><a name="File_Transfer"></a> File Transfer </h3> <ul>
<li> Need to specify should_transfer_files:     <pre class="file">
     should_transfer_files = YES</pre>
</li></ul> 
<p /> <ul>
<li> It is still necessary to specify transfer_input_files, but do not need to specify transfer_output_files. GlideinWMS will transfer every file that is created back to the submission host.  This often leads to many temporary files being transferred back when a job completes.  It is important to delete temporary files as a part of your job.
</li></ul> 
<p />
<p />
<h3><a name="User_Proxy"></a> User Proxy </h3>
Some sites on the OSG require a user proxy to accompany a GlideinWMS job.  After running <code>voms-proxy-init</code> on your submission host, the proxy will be located in /tmp.  <code>voms-proxy-init</code> will output the full pathname of the proxy file.  You can also figure out the name, since the name will be <code>x509up_u&lt;userid&gt;</code>, and userid can be obtained with the command:
<pre class="screen">
$ id -u
501</pre>
<p />
The full path to the proxy must be explicitly specified on in the Condor submit file:
<p />
<pre class="file">
...
X509UserProxy = /tmp/x509up_u501
...
queue </pre>
<p />
<h3><a name="Demotion_after_failed_jobs"></a> Demotion after failed jobs </h3>
In OSGMM, a typical submission file included the lines:
<pre class="file">
match_list_length = 4
Rank              = (TARGET.Rank) - &#92;
                    ((TARGET.Name =?= LastMatchName0) * 1000) - &#92;
                    ((TARGET.Name =?= LastMatchName1) * 1000) - &#92;
                    ((TARGET.Name =?= LastMatchName2) * 1000) - &#92;
                    ((TARGET.Name =?= LastMatchName3) * 1000)
</pre>
<p />
For the OSG MM, this statement discourages the scheduler to resubmit a failed job to the same cluster (referred to as TARGET.Name). For GlideinWMS, TARGET.Name refers to a specific worker node rather than an entire site; therefore, this statement discourages the scheduler to resubmit the job to the same worker node. Because GlideinWMS runs a pilot job before running a user job, the environment is considered less error-prone than with OSG MM. Therefore this statement is not very useful and it is recommended that it is removed.
<p />
<h3><a name="Idle_job_timeout"></a> Idle job timeout </h3>
It is common in OSGMM to have a timeout statement similiar to:
<pre class="file">
# make sure the job is being retried and rematched
periodic_release = (NumGlobusSubmits &lt; 5)
globusresubmit = (NumSystemHolds >= NumJobMatches)
# rematch = True
globus_rematch = True

# only allow for the job to be queued at a site for a while, then try to move it.
#  GlobusStatus==16 is suspended
#  JobStatus==1 is pending
#  JobStatus==2 is running
periodic_hold = ( (GlobusStatus==16) || &#92;
                  ((JobStatus==1) && ((CurrentTime - EnteredCurrentStatus) > (1*60*60))) || &#92;
                  ((JobStatus==2) && ((CurrentTime - EnteredCurrentStatus) > (5*60*60))) )

</pre>
OSGMM has the periodic hold in order to redistribute jobs if a site has become too busy and has not started the job yet. GlideinWMS does not need this redistribution because when a slot opens, the job moves from the local queue directly to running, without being submitted to the remote site's queue.
<p />
<p />
<h3><a name="Example_GlideinWMS_Condor_submis"></a> Example GlideinWMS Condor submission </h3>
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationCondorGToGlidein1show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show GlideinWMS Submission file</span></a> </span> <span id="twistyIdDocumentationCondorGToGlidein1hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationCondorGToGlidein1toggle" class="twistyContent twikiMakeHidden twistyInited">
<pre class="file">
inputTab = PrimaseCTDnohis.tab
storeNumber = 01.24.10-11.34.59

should_transfer_files = YES
when_to_transfer_output = ON_EXIT

transfer_input_files = $(inputTab)
remote_output_files = srm://red-srm1.unl.edu:8443/srm/v2/server?SFN=/mnt/hadoop/user/powers/Rosetta/$(storeNumber)/Step1/rosetta.step1.tar.gz

executable = init.sh
Args = $(inputTab) $(remote_output_files)

input=input.file.$(Process)
output=condor_out/output.$(Cluster).$(Process)
error=condor_out/error.$(Cluster).$(Process)
log=results.log

X509UserProxy = /tmp/x509up_u501

queue 1
</pre>
<p /> <ul>
<li> The <code>inputTab</code> and <code>storeNumber</code> are the inputs into the file.  <code>storeNumber</code> is a unique identifier used for storing on the srm server.
</li> <li> Notice the <code>should_transfer_files</code> and <code>when_to_tranfser_output</code> are both specified.  These are specified because there is no shared file system in GlideinWMS
</li> <li> <code>transfer_input_files</code> is here to designate what files to transfer with the job.  
</li> <li> <code>remote_output_files</code> is where to store the output file after the job completes.  The job (init.sh) has the transfer written into it.
</li> <li> <code>output</code>, <code>error</code>, and <code>log</code> are standard in any Condor job description.
</li></ul> 
<p />
<p />
</div></div> <!--/twistyPlugin-->
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="DAGMan_Pitfalls"></a> DAGMan Pitfalls </span></h2>
<p />
If you are using DAGMan as your workflow manager, this section notes differences in how DAGMan works with Condor-G vs. GlideinWMS.
<p />
When A Condor-G job completes, the exit status of the job is always 0 regardless of the actual exit status at the remote site.  Since Condor interprets a 0 exit status as success, DAGMan will always interpret the job as succeeding in Condor-G.  A common approach to solve this is to have each job have a post script to check for successful completion.
<p />
In GlideinWMS, the correct exit status will be transferred back with the job.  In this case, it is easier to use DAGMan's automatic exit status checking for error detection.  If you only want error detection, then you do not need to add anything to the DAG.  If you want DAGMan to retry the job if it fails, add:
<pre class="file">
RETRY node_name 5</pre>
This will retry the job after a failure 5 times.
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationCondorGToGlidein2show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show example DAGMan Submission file</span></a> </span> <span id="twistyIdDocumentationCondorGToGlidein2hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationCondorGToGlidein2toggle" class="twistyContent twikiMakeHidden twistyInited">
<pre class="file">
JOB step1 condor.step1.submit
JOB step3 condor.step3.submit
SCRIPT PRE step1 pre.sh step1
JOB step2-0 condor.step2.submit
PARENT step1 CHILD step2-0
PARENT step2-0 CHILD step3
RETRY step2-0 1000
JOB step2-1 condor.step2.submit
PARENT step1 CHILD step2-1
PARENT step2-1 CHILD step3
RETRY step2-1 1000
....
JOB step2-999 condor.step2.submit
PARENT step1 CHILD step2-999
PARENT step2-999 CHILD step3
RETRY step2-999 1000

Retry step1 5
Retry step3 5
</pre>
<p />
In this example, the DAG has a single setup node (step1), a 1000 node wide middle (step2), and a single finishing node (step3).  
<p />
</div></div> <!--/twistyPlugin-->
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Monitoring_Jobs"></a> Monitoring Jobs </span></h2>
<p />
It is more difficult in GlideinWMS to monitor exactly where your jobs are going. GlideinWMS's VOFrontend provides some monitoring regarding the glidein (pilot) jobs AND user jobs running at a site. How to obtain information about both types of jobs is explained below.  
<p />
This command will output the number of glideins pilot jobs at each site:
<pre class="screen">
condor_status -format '%s\n' 'GLIDEIN_Site' -const 'IS_MONITOR_VM =!= TRUE' | sort | uniq -c</pre>
This command will output the number of glideins at each site.
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationCondorGToGlidein3show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show example output</span></a> </span> <span id="twistyIdDocumentationCondorGToGlidein3hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationCondorGToGlidein3toggle" class="twistyContent twikiMakeHidden twistyInited">
<p />
<pre class="screen">
[dweitzel@glidein ~]$ condor_status -format '%s\n' 'GLIDEIN_Site' -const 'IS_MONITOR_VM =!= TRUE' | sort | uniq -c
      3 BNL
    210 Nebraska
    764 Omaha
     57 UConn
      1 UCSD
     16 UNESP
      5 Wisconsin
</pre>
<p />
</div></div> <!--/twistyPlugin-->
<p />
We've also found adding the following to your local condor_config is helpful.  The first line defines the JOBGLIDEIN_Site attribute to be equal to the glidein-site of the batch slot.  The second line instructs condor to insert the JOBGLIDEIN_Site attribute into every job when it is submitted.
<pre class="file">
JOBGLIDEIN_Site="$$([TARGET.GLIDEIN_Site])"
SUBMIT_EXPRS = $(SUBMIT_EXPRS) JOBGLIDEIN_Site
</pre>
This means that every running job will have an entry in their ClassAd noting where it is running.
<p />
For example, you can query your job locations using the following:
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationCondorGToGlidein4show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show example output</span></a> </span> <span id="twistyIdDocumentationCondorGToGlidein4hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationCondorGToGlidein4toggle" class="twistyContent twikiMakeHidden twistyInited">
<pre class="screen">
[bbockelm@glidein ~]$ condor_q -run -format '%s\n' MATCH_EXP_JOBGLIDEIN_Site | sort | uniq -c
    403 Omaha
      5 UConn
</pre>
</div></div> <!--/twistyPlugin-->
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Node_Verification_in_GlideinWMS"></a> Node Verification in GlideinWMS </span></h2>
Verification of a worker node can be done before the glidein starts jobs.  A verification script can be specified inside the VOFrontend's configuration file, <code>frontend.xml</code>.
<p />
<pre class="file">
...
&lt;files&gt;
   &lt;file absfname="/home/frontend/glidein_scripts/startd.sh" after_entry="True" const="True" executable="True" untar="False" wrapper="False"&gt;
      &lt;untar_options cond_attr="TRUE"/&gt;
   &lt;/file&gt;
&lt;/files&gt;
...
</pre>
More documentation on custom scripts can be found on the  <a href="http://www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS/doc.v2/manual/factory/custom_scripts.html" target="_top">!GlideinWMS pages</a>.
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Large_Examples"></a> Large Examples </span></h2>
The following examples are from the LSST workflow that was adapted to GlideinWMS by Gabriele Garzoglio.
<p />
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationCondorGToGlidein5show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show OSG MM submission file</span></a> </span> <span id="twistyIdDocumentationCondorGToGlidein5hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide OSG MM submission file</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationCondorGToGlidein5toggle" class="twistyContent twikiMakeHidden twistyInited">
<p />
<pre class="file">
####################################
# Job destination parameters.
####################################
# In general universe should be, "grid."
universe = grid
# This is the destination of the job.
grid_resource = gt2 $$(GlueCEInfoContactString)

####################################
# Executable specification
####################################
# Specify the exec here.
executable = /opt/LSST/LSST/submit/runLSSTsim
# ... and its args.
arguments = -v -s 26740 0
# ... and whether to transfer it or find it on the system.
transfer_executable = true

####################################
# Log and output
####################################
# In general, transfer_output and transfer_error should be true.
transfer_output = true
transfer_error = true
# In general, stream_output and stream_error should be false.
stream_output = false
stream_error = false
# Specify log, out and error files. Not the use of macros.
log = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/LSSTsim.log
output = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/logs/LSSTsim_000.out
error = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/logs/LSSTsim_000.err
# Whether and under what circumstances to notify by email.
notification = NEVER
# When to transfer output
WhenToTransferOutput = ON_EXIT
transfer_output_files = LSSTsim_000.tar.bz2

####################################
# Job-handling boiler plate
####################################
# Extra specifications to be passed through. This says single (non-MPI)
# job and max execution time of 1440min (1 day).
globusrsl = (jobType = \"single\")(maxWallTime = 1440 )
# Any things to add to the environment
environment = JOB_OUTPUT_TAR=LSSTsim_000.tar.bz2;CLUSTER_ID=$(Cluster)
requirements    = ( (TARGET.GlueCEInfoContactString =!= UNDEFINED) && &#92;
                    (TARGET.Rank > 300) && &#92;
                    (TARGET.LSST_VERSION_LSSTsim =?= "2010-02-04") )

########################################################################
# No user-serviceable parts below.
########################################################################

# when retrying, remember the last 4 resources tried. With the OSG MM, this
# statement effectively prevents the job to rematch a cluster where it failed. 
match_list_length = 4
Rank              = (TARGET.Rank) - &#92;
                    ((TARGET.Name =?= LastMatchName0) * 1000) - &#92;
                    ((TARGET.Name =?= LastMatchName1) * 1000) - &#92;
                    ((TARGET.Name =?= LastMatchName2) * 1000) - &#92;
                    ((TARGET.Name =?= LastMatchName3) * 1000)

# make sure the job is being retried and rematched
periodic_release = (NumGlobusSubmits &lt; 5)
globusresubmit = (NumSystemHolds >= NumJobMatches)
# rematch = True
globus_rematch = True

# only allow for the job to be queued at a site for a while, then try to move it.
#  GlobusStatus==16 is suspended
#  JobStatus==1 is pending
#  JobStatus==2 is running
periodic_hold = ( (GlobusStatus==16) || &#92;
                  ((JobStatus==1) && ((CurrentTime - EnteredCurrentStatus) > (1*60*60))) || &#92;
                  ((JobStatus==2) && ((CurrentTime - EnteredCurrentStatus) > (5*60*60))) )

# stay in queue on failures
on_exit_remove = (ExitBySignal == False) && (ExitCode == 0)

queue
</pre>
<p />
</div></div> <!--/twistyPlugin-->
<p />
<p />
<p />
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="twistyIdDocumentationCondorGToGlidein6show" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Show equivalent GlideinWMS submission file</span></a> </span> <span id="twistyIdDocumentationCondorGToGlidein6hide" class="twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Hide equivalent GlideinWMS submission file</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="twistyIdDocumentationCondorGToGlidein6toggle" class="twistyContent twikiMakeHidden twistyInited">
<p />
<pre class="file">
#NOTE: the macro chip_id is defined in the DAG as a number from 0 to 189


####################################
# Job destination parameters.
####################################
# In general universe should be, "vanilla" for glidein submissions
universe = vanilla

####################################
# Executable specification
####################################
# Specify the exec here.
executable = /opt/LSST/LSST/submit/runLSSTsim

# ... and its args.
+seed = 26740 + $(chip_id)
arguments = -v -t -s $$([seed]) $(chip_id)

# ... and whether to transfer it or find it on the system.
transfer_executable = true

####################################
# Log, input and output
####################################
# In general, transfer_output and transfer_error should be true.
transfer_output = true
transfer_error = true
# In general, stream_output and stream_error should be false.
stream_output = false
stream_error = false

# Specify log, out and error files. Not the use of macros.
log = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/LSSTsim.log
output = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/logs/LSSTsim_$(chip_id)_gg.out
error = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/logs/LSSTsim_$(chip_id)_gg.err

# Whether and under what circumstances to notify by email.
notification = NEVER

# Transfer the input file
should_transfer_files = YES
transfer_input_files = /opt/LSST/jdl/runs/LSSTsim_20100608_131223/input/trim$(chip_id).cat.bz2

# When to transfer output
When_To_Transfer_Output = ON_EXIT
transfer_output_files = LSSTsim_$(chip_id)_gg.tar.bz2

####################################
# Job-handling boiler plate
####################################
# Any things to add to the environment
environment = JOB_OUTPUT_TAR=$(transfer_output_files);CLUSTER_ID=$(Cluster)
# Requires nodes with the LSST software pre-installed
requirements    = ( TARGET.LSST_VERSION_LSSTsim =?= "2010-02-04" )

########################################################################
# No user-serviceable parts below.
########################################################################

# Added for glidein WMS for sites with gLExec
X509UserProxy = /tmp/x509up_u1801

queue 1

</pre>
</div></div> <!--/twistyPlugin-->
<p />
<p />
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Comments"></a> <strong>Comments</strong> </span></h2>
<form method="post" action="https://twiki.opensciencegrid.org/bin/save/Documentation/CondorGToGlidein" enctype="multipart/form-data" name="tableappend0" id="tableappend0">
<p />
<div class="commentPlugin commentPluginPromptBox">
<table><tr valign="middle"><td><textarea  rows="3" cols="70" name="comment" wrap="soft" onfocus="if(this.value=='')this.value=''" onblur="if(this.value=='')this.value=''"></textarea></td><td><input  type="submit" value="Add comment" /></td></tr></table>
</div><!--/commentPlugin-->
<p />
<input type="hidden" name="comment_action" value="save"  />
<input type="hidden" name="comment_type" value="tableappend"  />
<input type="hidden" name="comment_index" value="0"  /></form>
<p />
<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 <code><b>===============</b></code>
<p />
 Thank you for claiming ownership for this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local OWNER = <span class="twikiNewLink">DerekWeitzel<a href="/bin/edit/Documentation/DerekWeitzel?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="DerekWeitzel (this topic does not yet exist; you can create it)">?</a></span>
</li></ul> 
<p />
 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (<span class="twikiNewLink">ComputeElement<a href="/bin/edit/Documentation/ComputeElement?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="ComputeElement (this topic does not yet exist; you can create it)">?</a></span>|Storage|VO|Security|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3) <ul>
<li> Local DOC_AREA       = User
</li></ul> 
<p />
 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (<span class="twikiNewLink">EndUser<a href="/bin/edit/Documentation/EndUser?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="EndUser (this topic does not yet exist; you can create it)">?</a></span>|Student|Developer|SysAdmin|VOManager) <ul>
<li> Local DOC_ROLE       = Developer
</li></ul> 
<p />
 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge) <ul>
<li> Local DOC_TYPE       = <span class="twikiNewLink">HowTo<a href="/bin/edit/Documentation/HowTo?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="HowTo (this topic does not yet exist; you can create it)">?</a></span>  Please define if this document in general needs to be reviewed before release ( 1 | 0 )
</li> <li> Local INCLUDE_REVIEW = 1
</li></ul> 
<p />
 Please define if this document in general needs to be tested before release ( 1 | 0 ) <ul>
<li> Local INCLUDE_TEST   = 0
</li></ul> 
<p />
 change to 1 once the document is ready to be reviewed and back to 0 if that is not the case <ul>
<li> Local REVIEW_READY   = 1
</li></ul> 
<p />
 change to 1 once the document is ready to be tested and back to 0 if that is not the case <ul>
<li> Local TEST_READY     = 0
</li></ul> 
<p />
 change to 1 only if the document has passed the review and the test (if applicable) and is ready for release <ul>
<li> Local RELEASE_READY  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT REVIEWER
 <code><b>==================</b></code>
<p />
 Thank for reviewing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local REVIEWER       = <span class="twikiNewLink">GabrieleGarzoglio<a href="/bin/edit/Documentation/GabrieleGarzoglio?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="GabrieleGarzoglio (this topic does not yet exist; you can create it)">?</a></span> Please define the review status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local REVIEW_PASSED  = 1
</li></ul> 
<p />
<p />
 DEAR DOCUMENT TESTER
 <code><b>================</b></code>
<p />
 Thank for testing this document! Please fill in your <span class="twikiNewLink">FirstLast<a href="/bin/edit/Documentation/FirstLast?topicparent=Documentation.CondorGToGlidein" rel="nofollow" title="FirstLast (this topic does not yet exist; you can create it)">?</a></span> name here: <ul>
<li> Local TESTER         =  Please define the test status for this document to be in progress ( 2 ), failed ( 0 ) or passed ( 1 )
</li> <li> Local TEST_PASSED    = 2
</li></ul> 
############################################################################################################
-->
<p />
<p />
<p />
-- <a href="/bin/view/Main/DerekWeitzel" class="twikiLink">DerekWeitzel</a> - 24 May 2010</div><!-- /patternTopic-->
<p />
<p />
</div><!-- /patternContent-->
<hr />
This topic: Documentation<span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Documentation/UsingTheGrid" class="twikiLink">UsingTheGrid</a><span class='twikiSeparator'>&nbsp;&gt;&nbsp;</span>CondorGToGlidein</span> <br />    
Topic revision: r31 - 06 Dec 2016 - 18:12:36 - <a href="/bin/view/Main/KyleGross" class="twikiLink">KyleGross</a>
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />