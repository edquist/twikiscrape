<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
<link rel="stylesheet" href="https://twiki.opensciencegrid.org/twiki/pub/TWiki/HeadlinesPlugin/style.css" type="text/css" media="all" />
<title> BeStManUseCases &lt; Storage &lt; TWiki    </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/twiki/pub/Storage/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="shortcut icon" href="/twiki/pub/Storage/WebPreferences/favicon.ico    " type="image/x-icon" />
<link rel="alternate" href="https://twiki.opensciencegrid.org/bin/edit/Storage/BeStManUseCases?_T=16 Feb 2017" type="application/x-wiki" title="edit BeStManUseCases" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" /><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Storage/WebRss" />    
<base href="https://twiki.opensciencegrid.org/bin/view/Storage/BeStManUseCases"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/twiki/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern.js"></script><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twiki_edit.js"></script>
<script type="text/javascript" src="/twiki/pub/TWiki/PatternSkin/pattern_edit.js"></script><style type="text/css" media="all">
@import url('/twiki/pub/TWiki/TWikiTemplates/base.css');
</style><script type="text/javascript" src="/twiki/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script><style type="text/css" media="all">
#patternTopBar,
#patternTopBarContentsOuter {
	height:95px; /* top bar height; make room for header columns */
}
#twikinetTopToolBar,
#twikinetTopToolBar table {
	top:95px; /* top bar height */
	height:48px;
}
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight {
	height:144px; /* 95 + border + 48 */
}
#twikinetLogo {
	position:absolute;
	width:100%;
	height:95px;
}
#twikinetLogo a {
	position:absolute;
	display:block;
	width:179px;
	height:65px;
	background:none;
	top:10px;
	left:340px;
}
#twikinetLogo a:link, 
#twikinetLogo a:visited {
	border:none;
}
#twikinetLogo a:hover {
	border-style:none none solid none;
	border-width:1px;
	border-color:#c4cbd6;
}
#twikinetLogo a span {
	display:none;
}
#patternOuter {
	margin-left:220px;
}
#patternLeftBar {
	width:220px;
	margin-left:-220px;
}
</style>
<style type="text/css" media="all">
@import url("/twiki/pub/TWiki/TWikiNetSkin/layout.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/style.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/colors.css");
@import url("/twiki/pub/TWiki/TWikiNetSkin/rounded_corners.css");
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	#patternLeftBar .patternWebIndicator,
	.patternBookView .twikiTopRow {
		background-color:#0000FF;
	}
	.patternBookView {
		border-color:#0000FF;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/twiki/pub/TWiki/PreviewBackground/preview2bg.gif    ");*/
	}
	
</style><style type="text/css" media="all">



</style>
<style type="text/css" media="all">
	@import url("/twiki/pub/TWiki/TWikiNetSkin/print.css");
</style><!--GOOGLEANALYTICSPLUGIN--><!-- Google Analytics script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69012-21']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="patternViewPage patternRawViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath"><span class="patternHomePathTitle">You are here: </span> <a href="/bin/view/Main/WebHome" class="twikiLink">TWiki    </a><span class='twikiSeparator'>&gt;</span><img src="/twiki/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#0000FF" />&nbsp;<a href="/bin/view/Storage/WebHome">Storage Web</a><span class='twikiSeparator'>&gt;</span><a href="https://twiki.opensciencegrid.org/bin/view/Storage/BeStManUseCases" title='Topic revision: 1 (09 Sep 2009 - 19:16:47)'>BeStManUseCases</a> <span class='patternRevInfo'>(09 Sep 2009, <a href="/bin/view/Main/TanyaLevshina" class="twikiLink">TanyaLevshina</a>)</span> (raw view)</span><!-- /patternHomePath--></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <textarea name=""  rows="22    " cols="70    " readonly="readonly" style="width: 99%    " id="topic" class="twikiTextarea twikiTextareaRawView">---+!! *&lt;noop&gt;BeStMan Configuration Use Cases (!BeStManUseCases)*

%TOC%

%STARTINCLUDE%

*Purpose*: The purpose of this document is to provide additional information about possible configuration use cases for  [[http://sdm.lbl.gov/bestman][BeStMan]].

---++ Introduction
!BeStMan could be installed from VDT or directly downloaded from  [[http://sdm.lbl.gov/bestman][here]]. The detailed !BeStMan configuration Guide doesn&#39;t not cover all the possible cases, so it seems to be reasonable to provide additional information for site administrators that are planning to install, configure and use !BeStMan as a OSG SE.

In this document we assume that you have already installed !BeStMan and are in a process of configuring it.

|*BeStMan Flavor*| *Type of Storage*|*Space Management*|*Sudoers enabled*|*Configuration*|*LBNL Client*|*Fermi Client*|*LCG Utils*|
| fullmode| Volatile storage| !BeStMan managed cache| no| Could be configured by [[BeStManUseCases#BeStMan_fullmode_with_volatile_m][vdt configure_bestman]] script |srm-copy works [[BeStManUseCases#srm_copy_example_1][example #1]]|srmcp works [[BeStManUseCases#srmcp_example_1][example #1]]  [[BeStManUseCases#SRM_Fermi_Client_Problems][with some issues]]|lcg-cp fails [[BeStManUseCases#LCG_Utils_Problems][with this error]]|
| | Volatile and permanent storage| !BeStMan managed cache and user managed cached| yes|Could be configured by [[BeStManUseCases#BeStMan_fullmode_with_volatile_m][vdt configure_bestman]]  |srm-copy works  [[BeStManUseCases#srm_copy_example_1][example #1]] and  [[BeStManUseCases#srm_copy_example_2][example #2]]|srmcp works  [[BeStManUseCases#SRM_Fermi_Client_Problems][with some issues]]|lcg-cp works in  user&#39;s controlled cache (without space token)[[BeStManUseCases#lcg_cp_example_1][example #1]] |
||Volatile and permanent storage|!BeStMan managed volatile and permanent caches|no|Have to be configured using  [[BeStManUseCases#Configuring_volatile_and_permane][native configuration script]]| srm-copy without space token always writes to volatile cache even when -retentionpolicy custodial is specified [[BeStManUseCases#srm_copy_example_3][example #3]. srm-copy with space token  [[BeStManUseCases#srm_copy_example_4][example #4]writes to custodial place if reserved space token was allocated for the custodial space| srmcp works the same way as srm-copy| lcg-cp without space token[[BeStManUseCases#lcg_cp_example_2][example #2]] and with &quot;custodial&quot; space token writes into custodial space [[BeStManUseCases#lcg_cp_example_3][example #3]]  |

---++ VDT BeStMan Configuration Script

The configuration script provided from VDT allows to setup limited subset of !BeStMan parameters.

&lt;pre class=&#39;screen&#39;&gt;
# vdt/setup/configure_bestman --help
Usage: vdt/setup/configure_bestman --vdt-install &amp;lt;vdt install root&amp;gt;
        --server &amp;lt;y,n&amp;gt;
        --user &amp;lt;bestman user&amp;gt;
        --cert &amp;lt;bestman service cert&amp;gt;
        --key  &amp;lt;bestman service key&amp;gt;
        --http-port &amp;lt;public port number&amp;gt;
        --https-port &amp;lt;secure port number&amp;gt;
        --globus-tcp-port-range &amp;lt;low_port,high_port&amp;gt;
        --volatile-file-lifetime &amp;lt;lifetime in seconds&amp;gt;
        --cache-size &amp;lt;Cache size in MB&amp;gt;
        --gums-host &amp;lt;GUMS hostname&amp;gt;
        --gums-port &amp;lt;GUMS port number&amp;gt;
        --gums-url &amp;lt;GUMS URL&amp;gt;
        --gums-dn &amp;lt;Client DN for GUMS interface&amp;gt;
        --enable-gateway
        --use-xrootd
        --with-tokens-list &amp;lt;token-list&amp;gt;
        --with-transfer-servers &amp;lt;GridFTP server list&amp;gt;
        --with-allowed-paths &amp;lt;List of accessible paths&amp;gt;
        --with-blocked-paths &amp;lt;List of non-accessible paths&amp;gt;
&lt;/pre&gt;

---+++ !BeStMan fullmode with volatile managed cache 

!BeStMan fullmode with volatile managed cache could be configured with the following command:
&lt;pre class=&quot;screen&quot;&gt;
cd &amp;lt;$VDT_LOCATION&amp;gt;
. setup.sh
 vdt/setup/configure_bestman  --user daemon --cert &amp;lt;bestmancert.pem&amp;gt; --key  &amp;lt;bestmankey.pem&amp;gt; --server y  -- volatile-file-lifetime &amp;lt;lifetime in seconds&amp;gt;
&lt;/pre&gt;

If volatile-file-lifetime is not set the lifetime of the file is set for 3 minutes, after that time the file is not accessible.

!BeStMan fullmode could be used as in a gateway mode for user managed storage area.  If instead of SFN for manage cache you specify any directory that user has right to write (e.g. /tmp) !BeStMan will allow filed to be copied in a specified location. If sudoers is modified accordingly !BeStMan allows user to remove file, create and remove directory in the user managed area. User will not be able to  write to this area with dynamic space token. !Bestman could limit the access of user managed cache if you specified 
&lt;pre class=&quot;screen&quot;&gt;
  --with-allowed-paths &amp;lt;List of accessible paths&amp;gt;
#or
  --with-blocked-paths &amp;lt;List of non-accessible paths&amp;gt;
&lt;/pre&gt;

---+++ Configuring volatile and permanent managed caches with !BeStMan native script

VDT doesn&#39;t provide enough option in configure_bestman script to allow you to configure !BeStMan with volatile and permanent managed cache. In order to do so you will need to run native configuration script with the following parameters:
&lt;pre class=&quot;screen&quot;&gt;
cd &amp;lt;VDT_LOCATION&amp;gt;
cd bestman/setup
 ./configure  --with-java-home=&amp;lt;JAVA_HOME&amp;gt; \
       --with-srm-home=$VDT_LOCATION/bestman \
       --with-srm-owner=daemon \
       --with-cacert-path=$VDT_LOCATION/globus/TRUSTED_CA \
       --with-certfile-path=&amp;lt;bestmancert.pem&amp;gt; \
       --with-keyfile-path=&amp;lt;bestmankey.pem&amp;gt; \
       --with-eventlog-path=$VDT_LOCATION/vdt-app-data/bestman/logs \
       --with-cachelog-path=$VDT_LOCATION/bestman/logs \
       --with-http-port=10080 --with-https-port=10443  
       --enable-gums --with-gums-url=https://&amp;lt;GUMS_HOST&amp;gt;:&amp;lt;GUMS_PORT&amp;gt;/gums/services/GUMSAuthorizationServicePort \
       --enable-full-mode  --with-replica-storage-path=$VDT_LOCATION/bestman/cache  --with-replica-storage-size=&amp;lt;SIZE&amp;gt; \
       --with-custodial-storage-path=&amp;lt;CACHE_NAME&amp;gt;  --with-custodial-storage-size=&amp;lt;SIZ&amp;gt;
&lt;/pre&gt;

---++ SRM LBNL Client Commands
---+++ srm-copy example #1 

Writing file to volatile managed  cache:
&lt;pre class=&quot;screen&quot;&gt;
 srm-copy file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test_dir_1/test1
&lt;/pre&gt;

---+++ srm-copy example #2

Writing file to permanent user managed cache:
&lt;pre class=&quot;screen&quot;&gt;
 srm-copy file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/tmp/test1
&lt;/pre&gt;

---+++ srm-copy example #3

Writing file with retention policy option &quot;custodial&quot; still results in copying file into volatile cache:
&lt;pre class=&quot;screen&quot;&gt;
 srm-copy   file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test_dir_1/test20  -retention_policy=custodial
srm-copy   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Wed Sep 09 14:01:22 CDT 2009 Connecting to httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-CLIENT: Wed Sep 09 14:01:23 CDT 2009 Calling SrmPrepareToPutRequest now ...
request.token=fnalgrid:30_PUT_3015184577
status=SRM_REQUEST_INPROGRESS
explanation=null
SRM-CLIENT: Next status call in 10 seconds.
SRM-CLIENT: Wed Sep 09 14:01:35 CDT 2009 Calling Status at Wed Sep 09 14:01:35 CDT 2009
SRM-CLIENT: Result Status from SRM (srmStatusOfPutRequest)=SRM_SUCCESS

SRM-CLIENT: RemainingPinTime=289
SRM-CLIENT: received TURL=gsiftp://fg0x1.fnal.gov//usr/local/osg-bestman-fullmode/vdt-app-data/bestman/cache/fnalgrid/V.0.0-276258463/test20

SRM-CLIENT: Wed Sep 09 14:01:35 CDT 2009 start file transfer
SRM-CLIENT:Source=file:////tmp/test
SRM-CLIENT:Target=gsiftp://fg0x1.fnal.gov//usr/local/osg-bestman-fullmode/vdt-app-data/bestman/cache/fnalgrid/V.0.0-276258463/test20

SRM-CLIENT: Wed Sep 09 14:01:37 CDT 2009 end file transfer for file:////tmp/test

SRM-CLIENT: Wed Sep 09 14:01:37 CDT 2009 Calling putDone for srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_dir_1/test20
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT: Request completed with success

SRM-CLIENT: Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=fnalgrid:30_PUT_3015184577
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file:////tmp/test
SRM-CLIENT*TARGETURL[0]=srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_dir_1/test20
SRM-CLIENT*TRANSFERURL[0]=gsiftp://fg0x1.fnal.gov//usr/local/osg-bestman-fullmode/vdt-app-data/bestman/cache/fnalgrid/V.0.0-276258463/test20
SRM-CLIENT*ACTUALSIZE[0]=0
SRM-CLIENT*FILE_STATUS[0]=SRM_SUCCESS
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT: PutDone is called successfully
&lt;/pre&gt;

---+++ srm-copy example #4

If user reserves space toke in permanent managed cache, he can then write the file into that cache by specifying token id:
&lt;pre class=&quot;screen&quot;&gt;
srm-sp-reserve srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~ -size 1000000 -gsize 1000000 -lifetime 10000000  -userdesc custodial_space_2 -retentionpolicy custodial
srm-sp-reserve   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 

SRM-CLIENT: Exception from client=Unable to locate a login configuration
SRM-CLIENT: Connecting to serviceurl httpg://fg0x1.fnal.gov:10443/srm/v2/server
SRM-CLIENT: Wed Sep 09 14:05:03 CDT 2009 Calling SrmReserveSpace

SRM-CLIENT: .......................
        Status Code=SRM_SUCCESS
        SpaceToken=P.9
        TotalReservedSpaceSize=1000000
        Guaranteed Space Size=1000000
        Lifetime=-1

Printing text report now...

SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*REQUEST-TOKEN=null
SRM-CLIENT*SPACE-TOKEN=P.9
SRM-CLIENT*EXPLANATION=null
SRM-CLIENT*TOTALRESERVEDSPACESIZE=1000000
SRM-CLIENT*GUARANTEEDSPACESIZE=1000000
SRM-CLIENT*LIFETIME=-1


#and 

srm-copy   file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test_dir_1/test21  -space_token=P.9
srm-copy   2.2.1.2.i7.p3  Fri Jul 10 15:56:18 PDT 2009
SRM-Clients and BeStMan Copyright(c) 2007-2009,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@LBL.GOV and documents at http://datagrid.lbl.gov/bestman
 
SRM-CLIENT: Wed Sep 09 14:05:48 CDT 2009 Connecting to httpg://fg0x1.fnal.gov:10443/srm/v2/server

SRM-CLIENT: Wed Sep 09 14:05:49 CDT 2009 Calling SrmPrepareToPutRequest now ...
request.token=fnalgrid:31_PUT_3015184577
status=SRM_REQUEST_INPROGRESS
explanation=null
SRM-CLIENT: Next status call in 10 seconds.
SRM-CLIENT: Wed Sep 09 14:06:00 CDT 2009 Calling Status at Wed Sep 09 14:06:00 CDT 2009
SRM-CLIENT: Result Status from SRM (srmStatusOfPutRequest)=SRM_SUCCESS

SRM-CLIENT: RemainingPinTime=289
SRM-CLIENT: received TURL=gsiftp://fg0x1.fnal.gov//cache/fnalgrid/P.9-656461282/test21

SRM-CLIENT: Wed Sep 09 14:06:01 CDT 2009 start file transfer
SRM-CLIENT:Source=file:////tmp/test
SRM-CLIENT:Target=gsiftp://fg0x1.fnal.gov//cache/fnalgrid/P.9-656461282/test21

SRM-CLIENT: Wed Sep 09 14:06:04 CDT 2009 end file transfer for file:////tmp/test

SRM-CLIENT: Wed Sep 09 14:06:04 CDT 2009 Calling putDone for srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_dir_1/test21
Result.status=SRM_SUCCESS
Result.Explanation=null

SRM-CLIENT: Request completed with success

SRM-CLIENT: Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=1
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=fnalgrid:31_PUT_3015184577
SRM-CLIENT*REQUEST_STATUS=SRM_SUCCESS
SRM-CLIENT*SOURCEURL[0]=file:////tmp/test
SRM-CLIENT*TARGETURL[0]=srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_dir_1/test21
SRM-CLIENT*TRANSFERURL[0]=gsiftp://fg0x1.fnal.gov//cache/fnalgrid/P.9-656461282/test21
SRM-CLIENT*ACTUALSIZE[0]=0
SRM-CLIENT*FILE_STATUS[0]=SRM_SUCCESS
SRM-CLIENT*EXPLANATION[0]=SRM-CLIENT: PutDone is called successfully

&lt;/pre&gt;


---++ SRM Fermi Client Commands
---+++ srmcp example #1 
&lt;pre class=&quot;screen&quot;&gt;
srmcp -2  -send_cksm=false  file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_dir_1/test2
&lt;/pre&gt;

---++ LCG_Utils Client Commands
---+++ lcg-cp example #1 

Copying file into permanent user controled space:

&lt;pre class=&quot;screen&quot;&gt;
 lcg-cp  -v --nobdii -D  srmv2 file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/tmp/test
&lt;/pre&gt;

---+++ lcg-cp example #2
Copying file into permanent managed cache
&lt;pre class=&quot;screen&quot;&gt;
 lcg-cp  -v --nobdii -D  srmv2 file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test_dir_1/test3
&lt;/pre&gt;

---+++ lcg-cp example #3
Copying file into permanent managed cache using space token description:

&lt;pre class=&quot;screen&quot;&gt;
 lcg-cp  -v --nobdii -D  srmv2 file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~/test_dir_1/test4 -S custodial_space_2
&lt;/pre&gt;
---++ SRM Fermi Client Problems

   1. srmcp  setup to verify  checksum by default, so attempt to use it with BeStMan produces the following error:
&lt;pre class=&quot;screen&quot;&gt;
&gt;srmcp -2 file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~/test_dir_1/test2
GridftpClient: Was not able to send checksum value:org.globus.ftp.exception.ServerException: Server refused performing the request. Custom message:  (error code 1) [Nested exception message:  Custom message: Unexpected reply: 500 Invalid command.] [Nested exception is org.globus.ftp.exception.UnexpectedReplyCodeException:  Custom message: Unexpected reply: 500 Invalid command.]

&gt;echo $?
0
&lt;/pre&gt;

The file is copied successfully despite of the error. You should specify -send_cksm=false in order to avoid this error.
 
---++ LCG Utils Problems

    1. lcg-cp works only with permanent storage, so when you try to execute lcg-cp command with volatile storage it produces the following error:
&lt;pre class=&quot;screen&quot;&gt;
&gt;lcg-cp  --nobdii  -U srmv2 file:////tmp/test srm://fg0x1.fnal.gov:10443/srm/v2/server\?SFN=/srmcache/~//test_dir_1/test4
srm://fg0x1.fnal.gov:10443/srm/v2/server?SFN=/srmcache/~//test_dir_1/test4: Invalid argument
lcg_cp: Invalid argument
&lt;/pre&gt;

-- Main.TanyaLevshina - 09 Sep 2009
</textarea> <div class="patternSigLine"><span class="twikiRight twikiMakeVisible" style="text-align:left;"><span class="twikiLeft patternTextareaButton patternButtonFontSelector" title="Switch to monotype or propotional font">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonEnlarge" title="Enlarge edit box">&nbsp;</span><span class="twikiLeft patternTextareaButton patternButtonShrink" title="Shrink edit box">&nbsp;</span></span><br class="twikiClear" /></div><!-- /patternSigLine--></div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="twikinetRounded twikinetRoundedTopicActions"><div class="rCRounded"><div class="rCTR"><div class="rCTL"></div><!--/rCTL--><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span class="patternButton"><a href='https://twiki.opensciencegrid.org/bin/edit/Storage/BeStManUseCases?t=1487218203;nowysiwyg=1' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/attach/Storage/BeStManUseCases' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span class='patternButton'><a href='/bin/view/Storage/BeStManUseCases?cover=print;raw=on' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/Storage/BeStManUseCases?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r1</span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Storage/BeStManUseCases?template=backlinksweb' rel='nofollow' title='Search the Storage Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://twiki.opensciencegrid.org/bin/view/Storage/BeStManUseCases' rel='nofollow' title='View topic' accesskey='v'><span class='twikiAccessKey'>V</span>iew topic</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/Storage/BeStManUseCases?template=oopsmore&amp;param1=1&amp;param2=1' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--></div><!--/rCTR--><div class="rCBR"><div class="rCBL"></div><!--/rCBL--></div><!--/rCBR--></div><!--/rCRounded--></div><!--/twikinetRounded--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r1 - 09 Sep 2009 - 19:16:47 - <a href="/bin/view/Main/TanyaLevshina" class="twikiLink">TanyaLevshina</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<head>
	<style type="text/css" media="all">
	
		.float-left {
			float:	left;
		}

		.float-right {
			float:	right;
		}

		.rounded {
      		border-radius:	 		8px;
			-moz-border-radius: 	8px;
			-webkit-border-radius:	8px;		
		}
		
		.rounded-top {
      		border-radius:	 		8px 8px 0px 0px;
			-moz-border-radius: 	8px 8px 0px 0px;
			-webkit-border-radius:	8px 8px 0px 0px;		
		}
		
		.bordered {
			border:	1px solid #AAAAAA;
		}

		.bordered-bottom {
			border-bottom:	1px solid #AAAAAA;
		}

		.high-contrast {
			color:		#FF6600;
			background: #000060;		
		}

                .low-contrast {
			color:		#FF6600;
			background: #ADD8E6;		
		}

	
		.container {
display: inline-block;
			margin:		0;
			padding:	0;
		}
		
		.box {
			display:				block;
			margin:			 0;
			padding:		0;
		}

                #head-block {
                        color:               #FF6600;	
                        background:    #333380;
                }
							
		#menu {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #EAEDF2;
		}
							
		#menul {
			font-family:	"Lucida Grande", sans-serif;
			font-size:		small;
			margin:		0px 0px 10px 0px;
			padding:	0px 0px 0.3em 0px;
			background: #F4F6F9

		}		
		#head {
			margin:		0px;
			padding:	0.2em 5px 0.2em 10px;
			font-size:	normal;
			font-weight:	bold;
			color:			#FF6600;	
		}
		
		#head a {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:hover {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#FFBB00;	
		}

		#head a:visited {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:active {
			text-decoration:	none;
			color:			#FF6600;	
		}

		#head a:link {
			text-decoration:	none;
			color:			#FF6600;	
		}

                #iteml {
			padding:	0.1em 5px 0.0em 10px;
                }

		#iteml a {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#000044;			
		}

		#iteml a:hover {
			background: 		#F4F6F9
			text-decoration:	none;
			color:			#FF6600;			
		}
		#item {
			padding: 0.1em 5px 0.0em 10px;
		}
		
		#item a {
			background: 		#EAEDF2;
			text-decoration:	none;
			color:			#000044;			
		}

		#item a:hover {
			background: 		#EAEDF2;	
			text-decoration:	none;
			color:			#FF6600;			
		}
</style>
</head>
Hello, <a href="/bin/view/Main/TWikiGuest" class="twikiLink">TWikiGuest</a>
<a href="https://twiki.grid.iu.edu/bin/view/TWiki/TWikiRegistration" target="_top"><br/>Register</a>
<p />
<p />
<!-- Google CSE Search Box Ends
<h5><a name="Common_links"></a> Common links </h5> <ul>
<li> <a href="/bin/view/Main/WebHome" class="twikiLink">OSG TWiki home</a>
</li> <li> <a href="/bin/view/Documentation/Release3/WebHome" class="twikiLink">RPM Install guides - OSG 3.0</a>
</li> <li> <a href="/bin/view/ReleaseDocumentation/WebHome" class="twikiLink">Pacman Install guides OSG 1.2</a>
</li> <li> <a href="/bin/view/Documentation/WebHome" class="twikiLink">Technical Documentation</a>
</li> <li> <a href="/bin/view/Documentation/SiteAdminResources" class="twikiLink">Contact Info</a> 
</li> <li> <strong><a href="/bin/view/Main/ICantFindItForm" class="twikiLink">I can't find it!</a></strong>  -->
</li></ul> 
<div class="container">
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="Home">About the OSG</a></div>
        <div id="item"><a  style="" href="/bin/view/Documentation/UsingTheGrid" class="twikiLink" title="Instructions for Using OSG">New Users</a></div>
        <div id="item"><a href="http://myosg.grid.iu.edu/map?map_attrs_shownr=on&amp;all_sites=on&amp;active=on&amp;active_value=1&amp;disable_value=1&amp;gridtype=on&amp;gridtype_1=on" target="_top">OSG Sites</a></div>
        <div id="item"><a  style="" href="http://myosg.grid.iu.edu/vosummary?all_vos=on&amp;active=on&amp;active_value=1&amp;datasource=summary" target="_top" title="List of Virtual Organizations">OSG VOs</a></div>
        <div id="item"><a href="http://display.grid.iu.edu/" target="_top">OSG Usage Graphs</a></div>
        <div id="item"><a  style="" href="https://indico.fnal.gov/categoryDisplay.py?categId=86" target="_top" title="OSG Event Calendar">Events</a></div>
       <div id="item"><a href="/bin/view/Management/OSGOrganizationInformation" class="twikiLink">OSG Organization</a></div>
<p />
    </div>
<p />
<p />
    <div class="box rounded bordered" id="menu">
        <div class="box rounded-top high-contrast" id="head">OSG at Work</div>
        <div id="item"><a  style="" href="/bin/view/Documentation/WebHome" class="twikiLink" title="Official Documentation Home">Technical Documentation</a></div>
        <div id="item"><a href="/bin/view/Security/WebHome" class="twikiLink">Security</a></div>
        <div id="item"><a href="/bin/view/SoftwareTeam/WebHome" class="twikiLink">Software Team</a></div>
        <div id="item"><a href="/bin/view/Education/WebHome" class="twikiLink">Education</a></div>
        <div id="item"><a href="/bin/view/Management/WebHome" class="twikiLink">Management</a></div>
        <div id="item"><a  style="" href="/bin/view/Management/ScientificPublications" class="twikiLink" title="Scientific Publications and Citing OSG">Scientific Publications</a></div>
        <div id="item"><a href="/bin/view/Management/OSGResearchHighlights" class="twikiLink">Research Highlights</a></div>
    </div>
<p />
<p />
		<div class="box rounded bordered" id="menu">
			<div class="box rounded-top high-contrast" id="head"><a  style="" href="/bin/view/Main/WebHome" class="twikiLink" title="TWiki Main Web">Documentation Links</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/Release3/NavContributeDocumentation" class="twikiLink" title="OSG Documentation System Information">How To Write Documents</a></div>
			<div id="item"><a  style="" href="/bin/view/Documentation/DocFormattingRules" class="twikiLink" title="Formatting OSG Documents">Formatting Documents</a></div>
                        <div id="item"><a  style="" href="/bin/view/Storage/WebTopicCreator" class="twikiLink" title="Create a New TWiki Page"> <img width="16" alt="newtopic" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/newtopic.gif" height="16" border="0" /> Create New Topic</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/WebList" class="twikiLink" title="List of Webs"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> List of Webs</a></div>
                        <div id="item"><a  style="" href="/bin/view/Storage/WebIndex" class="twikiLink" title="Index of Topics"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic Index</a></div>
                        <div id="item"><a href="/bin/view/Documentation/WebTopicList" class="twikiLink"> <img width="16" alt="index" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/index.gif" height="16" border="0" /> Topic List</a></div>
                        <div id="item"><a  style="" href="/bin/view/Storage/WebChanges" class="twikiLink" title="List of Pages that have Changed by Change Date"> <img width="16" alt="changes" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/changes.gif" height="16" border="0" /> Changes</a></div>
                        <div id="item"><a  style="" href="/bin/view/Main/TWikiUsers" class="twikiLink" title="Alphabetized List of TWiki Users"> <img width="16" alt="person" align="top" src="/twiki/pub/TWiki/TWikiDocGraphics/person.gif" height="16" border="0" /> TWiki Users</a></div>
		</div>
<p />
</div>
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="twikinetLogo"><a href="http://www.twiki.net/"><span>TWIKI.NET</span></a></div><div id="patternTopBarContents"><div class="twikiLeft"><span id="twikiLogo" class="twikiImage"><a href="http://www.opensciencegrid.org    "><img src="/twiki/pub/Main/WebHome/osg-logo.png    " border="0" alt="OpenScience Grid Website    " style="border:none;" /></a></span></div>
<div class="twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td class="twikinetSearchJump twikinetSearchJumpLeft">
 <ul>
<li> <form name="jumpForm" action="/bin/view/Storage/BeStManUseCases"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="16" /><input type="submit" class="twikinetJumpButton" name="submit" value="" /></form>
</li> <li> <form name="quickSearchForm" action="/bin/view/Storage/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Storage" /><input type="submit" size="5" class="twikinetSearchButton" name="submit" value="" /></form>
</li> <li> </li></ul> 
</td>
<td class="twikinetSearchJumpRight"></td>
</tr></table><br class="twikiClear" /></div></div></div><!-- /patternTopBar--><div id="twikinetTopToolBar"><div id="twikinetTopToolBarContents"><div class="twikinetWebName twikiLeft">
<table cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align:middle;">
<h2 class="twikinetRoundedAttachments"><span class="twikinetHeader"><a name="Storage"></a>  <a href="/bin/view/Storage/WebHome" class="twikiCurrentWebHomeLink twikiLink">Storage</a> </span></h2>
</td></tr></table>
</div><!--/twikinetWebName-->
<div class="twikinetToolBar twikiRight">
<table cellpadding="0" cellspacing="0" border="0"><tr><td><a href="https://twiki.opensciencegrid.org/bin/edit/Storage/BeStManUseCases?t=1487218203;nowysiwyg=1" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel twikinetEditIcon"><span class='twikiAccessKey'>E</span>dit</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/attach/Storage/BeStManUseCases" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel"><span class='twikiAccessKey'>A</span>ttach</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td><td><a href="/bin/genpdf/Storage/BeStManUseCases?pdftitle=BeStManUseCases" rel="nofollow">
<span class="rCRounded"><span class="rCTR"><span class="rCTL"></span><!--/rCTL-->
<span class="twikiLinkLabel">PDF</span>
</span><!--/rCTR--><span class="rCBR"><span class="rCBL"></span></span><!--/rCBR--></span><!--/rCRounded-->
</a></td></tr></table>
<br class="twikiClear" /></div><!--/patternToolBar--></div><!--/twikinetTopToolBarContents--></div><!--/twikinetTopToolBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="twikinetBadge"><a href="http://www.twiki.net/"><img src="https://twiki.opensciencegrid.org/twiki/pub/TWiki/TWikiNetSkin/twiki-badge-88x31.gif" alt="TWIKI.NET" width="88" height="31" border="0" /></a></div><!--/twikinetBadge--><div id="patternWebBottomBar"><p>
<font size="-1">
TWiki |
<a href="https://ticket.grid.iu.edu/goc/twiki">Report Bugs</a> |
<a href="https://twiki.grid.iu.edu/bin/view/Operations/IUPrivacyPolicy">Privacy Policy</a>
</p>
<p>
<font size="-2">
<span class="twikiRight"> <a href="http://twiki.org/"><img src="/twiki/pub/TWiki/TWikiLogos/T-logo-80x15.gif" alt="This site is powered by the TWiki collaboration platform" width="80" height="15" title="This site is powered by the TWiki collaboration platform" border="0" /></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors..
</font>
</p></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>